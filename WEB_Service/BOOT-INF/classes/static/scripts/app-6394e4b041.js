/*

  OpenLayers.js -- OpenLayers Map Viewer Library

  Copyright (c) 2006-2013 by OpenLayers Contributors
  Published under the 2-clause BSD license.
  See http://openlayers.org/dev/license.txt for the full text of the license, and http://openlayers.org/dev/authors.txt for full list of contributors.

  Includes compressed code under the following licenses:

  (For uncompressed versions of the code used, please see the
  OpenLayers Github repository: <https://github.com/openlayers/openlayers>)

*/
/**
 * Contains XMLHttpRequest.js <http://code.google.com/p/xmlhttprequest/>
 * Copyright 2007 Sergey Ilinsky (http://www.ilinsky.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 */
/**
 * OpenLayers.Util.pagePosition is based on Yahoo's getXY method, which is
 * Copyright (c) 2006, Yahoo! Inc.
 * All rights reserved.
 * 
 * Redistribution and use of this software in source and binary forms, with or
 * without modification, are permitted provided that the following conditions
 * are met:
 * 
 * * Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 * 
 * * Neither the name of Yahoo! Inc. nor the names of its contributors may be
 *   used to endorse or promote products derived from this software without
 *   specific prior written permission of Yahoo! Inc.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
 * POSSIBILITY OF SUCH DAMAGE.
 */
/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
var OpenLayers={VERSION_NUMBER:"Release 2.13.1",singleFile:!0,_getScriptLocation:function(){for(var e,t,a=new RegExp("(^|(.*?\\/))(OpenLayers[^\\/]*?\\.js)(\\?|$)"),i=document.getElementsByTagName("script"),s="",r=0,o=i.length;r<o;r++)if(e=i[r].getAttribute("src"),e&&(t=e.match(a))){s=t[1];break}return function(){return s}}(),ImgPath:""};/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Class=function(){var e=arguments.length,t=arguments[0],a=arguments[e-1],i="function"==typeof a.initialize?a.initialize:function(){t.prototype.initialize.apply(this,arguments)};if(e>1){var s=[i,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),a);OpenLayers.inherit.apply(null,s)}else i.prototype=a;return i},OpenLayers.inherit=function(e,t){var a=function(){};a.prototype=t.prototype,e.prototype=new a;var i,s,r;for(i=2,s=arguments.length;i<s;i++)r=arguments[i],"function"==typeof r&&(r=r.prototype),OpenLayers.Util.extend(e.prototype,r)},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(e,t){if(e=e||{},t){for(var a in t){var i=t[a];void 0!==i&&(e[a]=i)}var s="function"==typeof window.Event&&t instanceof window.Event;!s&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return e.indexOf(t)!=-1},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),a=t[0],i=1,s=t.length;i<s;i++){var r=t[i];a+=r.charAt(0).toUpperCase()+r.substring(1)}return a},format:function(e,t,a){t||(t=window);var i=function(e,i){for(var s,r=i.split(/\.+/),o=0;o<r.length&&(0==o&&(s=t),void 0!==s);o++)s=s[r[o]];return"function"==typeof s&&(s=a?s.apply(null,a):s()),"undefined"==typeof s?"undefined":s};return e.replace(OpenLayers.String.tokenRegEx,i)},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return OpenLayers.String.numberRegEx.test(e)},numericIf:function(e,t){var a=e;return t===!0&&null!=e&&e.replace&&(e=e.replace(/^\s*|\s*$/g,"")),OpenLayers.String.isNumeric(e)?parseFloat(e):a}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var a=0;return t>0&&(a=parseFloat(e.toPrecision(t))),a},format:function(e,t,a,i){t="undefined"!=typeof t?t:0,a="undefined"!=typeof a?a:OpenLayers.Number.thousandsSeparator,i="undefined"!=typeof i?i:OpenLayers.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var s=e.toString().split(".");1==s.length&&null==t&&(t=0);var r=s[0];if(a)for(var o=/(-?[0-9]+)([0-9]{3})/;o.test(r);)r=r.replace(o,"$1"+a+"$2");var n;if(0==t)n=r;else{var l=s.length>1?s[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),n=r+i+l}return n},zeroPad:function(e,t,a){for(var i=e.toString(a||10);i.length<t;)i="0"+i;return i}},OpenLayers.Function={bind:function(e,t){var a=Array.prototype.slice.apply(arguments,[2]);return function(){var i=a.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,i)}},bindAsEventListener:function(e,t){return function(a){return e.call(t,a||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(e,t,a){var i=[];if(Array.prototype.filter)i=e.filter(t,a);else{var s=e.length;if("function"!=typeof t)throw new TypeError;for(var r=0;r<s;r++)if(r in e){var o=e[r];t.call(a,o,r,e)&&i.push(o)}}return i}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(e,t,a,i){OpenLayers.Util.isArray(e)&&(i=e[3],a=e[2],t=e[1],e=e[0]),null!=e&&(this.left=OpenLayers.Util.toFloat(e)),null!=t&&(this.bottom=OpenLayers.Util.toFloat(t)),null!=a&&(this.right=OpenLayers.Util.toFloat(a)),null!=i&&(this.top=OpenLayers.Util.toFloat(i))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(e){var t=!1;return null!=e&&(t=this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom),t},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(e){return e===!0?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(e,t){null==e&&(e=6);var a=Math.pow(10,e),i=Math.round(this.left*a)/a,s=Math.round(this.bottom*a)/a,r=Math.round(this.right*a)/a,o=Math.round(this.top*a)/a;return t===!0?s+","+i+","+o+","+r:i+","+s+","+r+","+o},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(e,t){null==t&&(t=this.getCenterLonLat());var a,i;"OpenLayers.LonLat"==t.CLASS_NAME?(a=t.lon,i=t.lat):(a=t.x,i=t.y);var s=(this.left-a)*e+a,r=(this.bottom-i)*e+i,o=(this.right-a)*e+a,n=(this.top-i)*e+i;return new OpenLayers.Bounds(s,r,o,n)},add:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+e,this.bottom+t,this.right+e,this.top+t)},extend:function(e){if(e)switch(e.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(e.lon,e.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(e.x,e.y);break;case"OpenLayers.Bounds":this.centerLonLat=null,(null==this.left||e.left<this.left)&&(this.left=e.left),(null==this.bottom||e.bottom<this.bottom)&&(this.bottom=e.bottom),(null==this.right||e.right>this.right)&&(this.right=e.right),(null==this.top||e.top>this.top)&&(this.top=e.top)}},extendXY:function(e,t){this.centerLonLat=null,(null==this.left||e<this.left)&&(this.left=e),(null==this.bottom||t<this.bottom)&&(this.bottom=t),(null==this.right||e>this.right)&&(this.right=e),(null==this.top||t>this.top)&&(this.top=t)},containsLonLat:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var a=this.contains(e.lon,e.lat,t.inclusive),i=t.worldBounds;if(i&&!a){var s=i.getWidth(),r=(i.left+i.right)/2,o=Math.round((e.lon-r)/s);a=this.containsLonLat({lon:e.lon-o*s,lat:e.lat},{inclusive:t.inclusive})}return a},containsPixel:function(e,t){return this.contains(e.x,e.y,t)},contains:function(e,t,a){if(null==a&&(a=!0),null==e||null==t)return!1;e=OpenLayers.Util.toFloat(e),t=OpenLayers.Util.toFloat(t);var i=!1;return i=a?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top},intersectsBounds:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),t=t||{},t.worldBounds){var a=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else a=this;null==t.inclusive&&(t.inclusive=!0);var i=!1,s=a.left==e.right||a.right==e.left||a.top==e.bottom||a.bottom==e.top;if(t.inclusive||!s){var r=e.bottom>=a.bottom&&e.bottom<=a.top||a.bottom>=e.bottom&&a.bottom<=e.top,o=e.top>=a.bottom&&e.top<=a.top||a.top>e.bottom&&a.top<e.top,n=e.left>=a.left&&e.left<=a.right||a.left>=e.left&&a.left<=e.right,l=e.right>=a.left&&e.right<=a.right||a.right>=e.left&&a.right<=e.right;i=(r||o)&&(n||l)}if(t.worldBounds&&!i){var c=t.worldBounds,d=c.getWidth(),p=!c.containsBounds(a),u=!c.containsBounds(e);p&&!u?(e=e.add(-d,0),i=a.intersectsBounds(e,{inclusive:t.inclusive})):u&&!p&&(a=a.add(-d,0),i=e.intersectsBounds(a,{inclusive:t.inclusive}))}return i},containsBounds:function(e,t,a){null==t&&(t=!1),null==a&&(a=!0);var i=this.contains(e.left,e.bottom,a),s=this.contains(e.right,e.bottom,a),r=this.contains(e.left,e.top,a),o=this.contains(e.right,e.top,a);return t?i||s||r||o:i&&s&&r&&o},determineQuadrant:function(e){var t="",a=this.getCenterLonLat();return t+=e.lat<a.lat?"b":"t",t+=e.lon<a.lon?"l":"r"},transform:function(e,t){this.centerLonLat=null;var a=OpenLayers.Projection.transform({x:this.left,y:this.bottom},e,t),i=OpenLayers.Projection.transform({x:this.right,y:this.bottom},e,t),s=OpenLayers.Projection.transform({x:this.left,y:this.top},e,t),r=OpenLayers.Projection.transform({x:this.right,y:this.top},e,t);return this.left=Math.min(a.x,s.x),this.bottom=Math.min(a.y,i.y),this.right=Math.max(i.x,r.x),this.top=Math.max(s.y,r.y),this},wrapDateLine:function(e,t){t=t||{};var a=t.leftTolerance||0,i=t.rightTolerance||0,s=this.clone();if(e){for(var r=e.getWidth();s.left<e.left&&s.right-i<=e.left;)s=s.add(r,0);for(;s.left+a>=e.right&&s.right>e.right;)s=s.add(-r,0);var o=s.left+a;o<e.right&&o>e.left&&s.right-i>e.right&&(s=s.add(-r,0))}return s},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(e,t){var a=e.split(",");return OpenLayers.Bounds.fromArray(a,t)},OpenLayers.Bounds.fromArray=function(e,t){return t===!0?new OpenLayers.Bounds(e[1],e[0],e[3],e[2]):new OpenLayers.Bounds(e[0],e[1],e[2],e[3])},OpenLayers.Bounds.fromSize=function(e){return new OpenLayers.Bounds(0,e.h,e.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(e){var t="";return t+="t"==e.charAt(0)?"b":"t",t+="l"==e.charAt(1)?"r":"l"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Element={visible:function(e){return"none"!=OpenLayers.Util.getElement(e).style.display},toggle:function(){for(var e=0,t=arguments.length;e<t;e++){var a=OpenLayers.Util.getElement(arguments[e]),i=OpenLayers.Element.visible(a)?"none":"";a.style.display=i}},remove:function(e){e=OpenLayers.Util.getElement(e),e.parentNode.removeChild(e)},getHeight:function(e){return e=OpenLayers.Util.getElement(e),e.offsetHeight},hasClass:function(e,t){var a=e.className;return!!a&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(a)},addClass:function(e,t){return OpenLayers.Element.hasClass(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClass:function(e,t){var a=e.className;return a&&(e.className=OpenLayers.String.trim(a.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))),e},toggleClass:function(e,t){return OpenLayers.Element.hasClass(e,t)?OpenLayers.Element.removeClass(e,t):OpenLayers.Element.addClass(e,t),e},getStyle:function(e,t){e=OpenLayers.Util.getElement(e);var a=null;if(e&&e.style){if(a=e.style[OpenLayers.String.camelize(t)],!a)if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(e,null);a=i?i.getPropertyValue(t):null}else e.currentStyle&&(a=e.currentStyle[OpenLayers.String.camelize(t)]);var s=["left","top","right","bottom"];window.opera&&OpenLayers.Util.indexOf(s,t)!=-1&&"static"==OpenLayers.Element.getStyle(e,"position")&&(a="auto")}return"auto"==a?null:a}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(e,t){OpenLayers.Util.isArray(e)&&(t=e[1],e=e[0]),this.lon=OpenLayers.Util.toFloat(e),this.lat=OpenLayers.Util.toFloat(t)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(e),this.lat+OpenLayers.Util.toFloat(t))},equals:function(e){var t=!1;return null!=e&&(t=this.lon==e.lon&&this.lat==e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t},transform:function(e,t){var a=OpenLayers.Projection.transform({x:this.lon,y:this.lat},e,t);return this.lon=a.x,this.lat=a.y,this},wrapDateLine:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(e){var t=e.split(",");return new OpenLayers.LonLat(t[0],t[1])},OpenLayers.LonLat.fromArray=function(e){var t=OpenLayers.Util.isArray(e),a=t&&e[0],i=t&&e[1];return new OpenLayers.LonLat(a,i)},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(e,t){this.x=parseFloat(e),this.y=parseFloat(t)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},add:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+e,this.y+t)},offset:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t},CLASS_NAME:"OpenLayers.Pixel"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(e,t){this.w=parseFloat(e),this.h=parseFloat(t)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(e){var t=!1;return null!=e&&(t=this.w==e.w&&this.h==e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t},CLASS_NAME:"OpenLayers.Size"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(e){alert(e)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},function(){for(var e=document.getElementsByTagName("script"),t=0,a=e.length;t<a;++t)if(e[t].src.indexOf("firebug.js")!=-1&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(e){var t;e||(e="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language);var a=e.split("-");if(a[0]=a[0].toLowerCase(),"object"==typeof OpenLayers.Lang[a[0]]&&(t=a[0]),a[1]){var i=a[0]+"-"+a[1].toUpperCase();"object"==typeof OpenLayers.Lang[i]&&(t=i)}t||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+a.join("-")+" dictionary, falling back to default language"),t=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=t},translate:function(e,t){var a=OpenLayers.Lang[OpenLayers.Lang.getCode()],i=a&&a[e];return i||(i=e),t&&(i=OpenLayers.String.format(i,t)),i}},OpenLayers.i18n=OpenLayers.Lang.translate,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var e=[],t=0,a=arguments.length;t<a;t++){var i=arguments[t];if("string"==typeof i&&(i=document.getElementById(i)),1==arguments.length)return i;e.push(i)}return e},OpenLayers.Util.isElement=function(e){return!(!e||1!==e.nodeType)},OpenLayers.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},OpenLayers.Util.removeItem=function(e,t){for(var a=e.length-1;a>=0;a--)e[a]==t&&e.splice(a,1);return e},OpenLayers.Util.indexOf=function(e,t){if("function"==typeof e.indexOf)return e.indexOf(t);for(var a=0,i=e.length;a<i;a++)if(e[a]==t)return a;return-1},OpenLayers.Util.dotless=/\./g,OpenLayers.Util.modifyDOMElement=function(e,t,a,i,s,r,o,n){t&&(e.id=t.replace(OpenLayers.Util.dotless,"_")),a&&(e.style.left=a.x+"px",e.style.top=a.y+"px"),i&&(e.style.width=i.w+"px",e.style.height=i.h+"px"),s&&(e.style.position=s),r&&(e.style.border=r),o&&(e.style.overflow=o),parseFloat(n)>=0&&parseFloat(n)<1?(e.style.filter="alpha(opacity="+100*n+")",e.style.opacity=n):1==parseFloat(n)&&(e.style.filter="",e.style.opacity="")},OpenLayers.Util.createDiv=function(e,t,a,i,s,r,o,n){var l=document.createElement("div");return i&&(l.style.backgroundImage="url("+i+")"),e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),s||(s="absolute"),OpenLayers.Util.modifyDOMElement(l,e,t,a,s,r,o,n),l},OpenLayers.Util.createImage=function(e,t,a,i,s,r,o,n){function l(){c.style.display="",OpenLayers.Event.stopObservingElement(c)}var c=document.createElement("img");return e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),s||(s="relative"),OpenLayers.Util.modifyDOMElement(c,e,t,a,s,r,null,o),n&&(c.style.display="none",OpenLayers.Event.observe(c,"load",l),OpenLayers.Event.observe(c,"error",l)),c.style.alt=e,c.galleryImg="no",i&&(c.src=i),c},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var e=navigator.appVersion.split("MSIE"),t=parseFloat(e[1]),a=!1;try{a=!!document.body.filters}catch(e){}OpenLayers.Util.alphaHackNeeded=a&&t>=5.5&&t<7}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(e,t,a,i,s,r,o,n,l){OpenLayers.Util.modifyDOMElement(e,t,a,i,r,null,null,l);var c=e.childNodes[0];s&&(c.src=s),OpenLayers.Util.modifyDOMElement(c,e.id+"_innerImage",null,i,"relative",o),OpenLayers.Util.alphaHack()&&("none"!=e.style.display&&(e.style.display="inline-block"),null==n&&(n="scale"),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.src+"', sizingMethod='"+n+"')",parseFloat(e.style.opacity)>=0&&parseFloat(e.style.opacity)<1&&(e.style.filter+=" alpha(opacity="+100*e.style.opacity+")"),c.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(e,t,a,i,s,r,o,n,l){var c=OpenLayers.Util.createDiv(),d=OpenLayers.Util.createImage(null,null,null,null,null,null,null,l);return d.className="olAlphaImg",c.appendChild(d),OpenLayers.Util.modifyAlphaImageDiv(c,e,t,a,i,s,r,o,n),c},OpenLayers.Util.upperCaseObject=function(e){var t={};for(var a in e)t[a.toUpperCase()]=e[a];return t},OpenLayers.Util.applyDefaults=function(e,t){e=e||{};var a="function"==typeof window.Event&&t instanceof window.Event;for(var i in t)(void 0===e[i]||!a&&t.hasOwnProperty&&t.hasOwnProperty(i)&&!e.hasOwnProperty(i))&&(e[i]=t[i]);return!a&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},OpenLayers.Util.getParameterString=function(e){var t=[];for(var a in e){var i=e[a];if(null!=i&&"function"!=typeof i){var s;if("object"==typeof i&&i.constructor==Array){for(var r,o=[],n=0,l=i.length;n<l;n++)r=i[n],o.push(encodeURIComponent(null===r||void 0===r?"":r));s=o.join(",")}else s=encodeURIComponent(i);t.push(encodeURIComponent(a)+"="+s)}}return t.join("&")},OpenLayers.Util.urlAppend=function(e,t){var a=e;if(t){var i=(e+" ").split(/[?&]/);a+=" "===i.pop()?t:i.length?"&"+t:"?"+t}return a},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(e){return OpenLayers.Util.getImagesLocation()+e},OpenLayers.Util.Try=function(){for(var e=null,t=0,a=arguments.length;t<a;t++){var i=arguments[t];try{e=i();break}catch(e){}}return e},OpenLayers.Util.getXmlNodeValue=function(e){var t=null;return OpenLayers.Util.Try(function(){t=e.text,t||(t=e.textContent),t||(t=e.firstChild.nodeValue)},function(){t=e.textContent}),t},OpenLayers.Util.mouseLeft=function(e,t){for(var a=e.relatedTarget?e.relatedTarget:e.toElement;a!=t&&null!=a;)a=a.parentNode;return a!=t},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(e,t){return null==t&&(t=OpenLayers.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},OpenLayers.Util.rad=function(e){return e*Math.PI/180},OpenLayers.Util.deg=function(e){return 180*e/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(e,t){for(var a=OpenLayers.Util.VincentyConstants,i=a.a,s=a.b,r=a.f,o=OpenLayers.Util.rad(t.lon-e.lon),n=Math.atan((1-r)*Math.tan(OpenLayers.Util.rad(e.lat))),l=Math.atan((1-r)*Math.tan(OpenLayers.Util.rad(t.lat))),c=Math.sin(n),d=Math.cos(n),p=Math.sin(l),u=Math.cos(l),m=o,h=2*Math.PI,g=20;Math.abs(m-h)>1e-12&&--g>0;){var v=Math.sin(m),f=Math.cos(m),y=Math.sqrt(u*v*(u*v)+(d*p-c*u*f)*(d*p-c*u*f));if(0==y)return 0;var b=c*p+d*u*f,L=Math.atan2(y,b),w=Math.asin(d*u*v/y),O=Math.cos(w)*Math.cos(w),x=b-2*c*p/O,S=r/16*O*(4+r*(4-3*O));h=m,m=o+(1-S)*r*Math.sin(w)*(L+S*y*(x+S*b*(-1+2*x*x)))}if(0==g)return NaN;var C=O*(i*i-s*s)/(s*s),E=1+C/16384*(4096+C*(-768+C*(320-175*C))),k=C/1024*(256+C*(-128+C*(74-47*C))),P=k*y*(x+k/4*(b*(-1+2*x*x)-k/6*x*(-3+4*y*y)*(-3+4*x*x))),T=s*E*(L-P),N=T.toFixed(3)/1e3;return N},OpenLayers.Util.destinationVincenty=function(e,t,a){for(var i=OpenLayers.Util,s=i.VincentyConstants,r=s.a,o=s.b,n=s.f,l=e.lon,c=e.lat,d=a,p=i.rad(t),u=Math.sin(p),m=Math.cos(p),h=(1-n)*Math.tan(i.rad(c)),g=1/Math.sqrt(1+h*h),v=h*g,f=Math.atan2(h,m),y=g*u,b=1-y*y,L=b*(r*r-o*o)/(o*o),w=1+L/16384*(4096+L*(-768+L*(320-175*L))),O=L/1024*(256+L*(-128+L*(74-47*L))),x=d/(o*w),S=2*Math.PI;Math.abs(x-S)>1e-12;){var C=Math.cos(2*f+x),E=Math.sin(x),k=Math.cos(x),P=O*E*(C+O/4*(k*(-1+2*C*C)-O/6*C*(-3+4*E*E)*(-3+4*C*C)));S=x,x=d/(o*w)+P}var T=v*E-g*k*m,N=Math.atan2(v*k+g*E*m,(1-n)*Math.sqrt(y*y+T*T)),A=Math.atan2(E*u,g*k-v*E*m),M=n/16*b*(4+n*(4-3*b)),F=A-(1-M)*n*y*(x+M*E*(C+M*k*(-1+2*C*C)));Math.atan2(y,-T);return new OpenLayers.LonLat(l+i.deg(F),i.deg(N))},OpenLayers.Util.getParameters=function(e,t){t=t||{},e=null===e||void 0===e?window.location.href:e;var a="";if(OpenLayers.String.contains(e,"?")){var i=e.indexOf("?")+1,s=OpenLayers.String.contains(e,"#")?e.indexOf("#"):e.length;a=e.substring(i,s)}for(var r={},o=a.split(/[&;]/),n=0,l=o.length;n<l;++n){var c=o[n].split("=");if(c[0]){var d=c[0];try{d=decodeURIComponent(d)}catch(e){d=unescape(d)}var p=(c[1]||"").replace(/\+/g," ");try{p=decodeURIComponent(p)}catch(e){p=unescape(p)}t.splitArgs!==!1&&(p=p.split(",")),1==p.length&&(p=p[0]),r[d]=p}}return r},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(e){return e=null==e?"id_":e.replace(OpenLayers.Util.dotless,"_"),OpenLayers.Util.lastSeqID+=1,e+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT.in=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(e){var t=e>1?1/e:e;return t},OpenLayers.Util.getResolutionFromScale=function(e,t){var a;if(e){null==t&&(t="degrees");var i=OpenLayers.Util.normalizeScale(e);a=1/(i*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH)}return a},OpenLayers.Util.getScaleFromResolution=function(e,t){null==t&&(t="degrees");var a=e*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH;return a},/**
 * Function: pagePosition
 * Calculates the position of an element on the page (see
 * http://code.google.com/p/doctype/wiki/ArticlePageOffset)
 *
 * OpenLayers.Util.pagePosition is based on Yahoo's getXY method, which is
 * Copyright (c) 2006, Yahoo! Inc.
 * All rights reserved.
 * 
 * Redistribution and use of this software in source and binary forms, with or
 * without modification, are permitted provided that the following conditions
 * are met:
 * 
 * * Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 * 
 * * Neither the name of Yahoo! Inc. nor the names of its contributors may be
 *   used to endorse or promote products derived from this software without
 *   specific prior written permission of Yahoo! Inc.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
 * POSSIBILITY OF SUCH DAMAGE.
 *
 * Parameters:
 * forElement - {DOMElement}
 * 
 * Returns:
 * {Array} two item array, Left value then Top value.
 */
OpenLayers.Util.pagePosition=function(e){var t=[0,0],a=OpenLayers.Util.getViewportElement();if(!e||e==window||e==a)return t;var i,s=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(e,"position")&&(""==e.style.top||""==e.style.left),r=null;if(e.getBoundingClientRect){i=e.getBoundingClientRect();var o=window.pageYOffset||a.scrollTop,n=window.pageXOffset||a.scrollLeft;t[0]=i.left+n,t[1]=i.top+o}else if(document.getBoxObjectFor&&!s){i=document.getBoxObjectFor(e);var l=document.getBoxObjectFor(a);t[0]=i.screenX-l.screenX,t[1]=i.screenY-l.screenY}else{if(t[0]=e.offsetLeft,t[1]=e.offsetTop,r=e.offsetParent,r!=e)for(;r;)t[0]+=r.offsetLeft,t[1]+=r.offsetTop,r=r.offsetParent;var c=OpenLayers.BROWSER_NAME;for(("opera"==c||"safari"==c&&"absolute"==OpenLayers.Element.getStyle(e,"position"))&&(t[1]-=document.body.offsetTop),r=e.offsetParent;r&&r!=document.body;)t[0]-=r.scrollLeft,"opera"==c&&"TR"==r.tagName||(t[1]-=r.scrollTop),r=r.offsetParent}return t},OpenLayers.Util.getViewportElement=function(){var e=arguments.callee.viewportElement;return void 0==e&&(e="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=e),e},OpenLayers.Util.isEquivalentUrl=function(e,t,a){a=a||{},OpenLayers.Util.applyDefaults(a,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0,splitArgs:!1});var i=OpenLayers.Util.createUrlObject(e,a),s=OpenLayers.Util.createUrlObject(t,a);for(var r in i)if("args"!==r&&i[r]!=s[r])return!1;for(var r in i.args){if(i.args[r]!=s.args[r])return!1;delete s.args[r]}for(var r in s.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(e,t){if(t=t||{},!/^\w+:\/\//.test(e)){var a=window.location,i=a.port?":"+a.port:"",s=a.protocol+"//"+a.host.split(":").shift()+i;if(0===e.indexOf("/"))e=s+e;else{var r=a.pathname.split("/");r.pop(),e=s+r.join("/")+"/"+e}}t.ignoreCase&&(e=e.toLowerCase());var o=document.createElement("a");o.href=e;var n={};n.host=o.host.split(":").shift(),n.protocol=o.protocol,t.ignorePort80?n.port="80"==o.port||"0"==o.port?"":o.port:n.port=""==o.port||"0"==o.port?"80":o.port,n.hash=t.ignoreHash||"#"===o.hash?"":o.hash;var l=o.search;if(!l){var c=e.indexOf("?");l=c!=-1?e.substr(c):""}return n.args=OpenLayers.Util.getParameters(l,{splitArgs:t.splitArgs}),n.pathname="/"==o.pathname.charAt(0)?o.pathname:"/"+o.pathname,n},OpenLayers.Util.removeTail=function(e){var t=null,a=e.indexOf("?"),i=e.indexOf("#");return t=a==-1?i!=-1?e.substr(0,i):e:i!=-1?e.substr(0,Math.min(a,i)):e.substr(0,a)},OpenLayers.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("webkit")==-1&&e.indexOf("gecko")!=-1}(),OpenLayers.CANVAS_SUPPORTED=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),OpenLayers.BROWSER_NAME=function(){var e="",t=navigator.userAgent.toLowerCase();return t.indexOf("opera")!=-1?e="opera":t.indexOf("msie")!=-1?e="msie":t.indexOf("safari")!=-1?e="safari":t.indexOf("mozilla")!=-1&&(e=t.indexOf("firefox")!=-1?"firefox":"mozilla"),e}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(e,t,a){var i,s,r=document.createElement("div");r.style.visibility="hidden";for(var o=a&&a.containerElement?a.containerElement:document.body,n=!1,l=null,c=o;c&&"body"!=c.tagName.toLowerCase();){var d=OpenLayers.Element.getStyle(c,"position");if("absolute"==d){n=!0;break}if(d&&"static"!=d)break;c=c.parentNode}!n||0!==o.clientHeight&&0!==o.clientWidth||(l=document.createElement("div"),l.style.visibility="hidden",l.style.position="absolute",l.style.overflow="visible",l.style.width=document.body.clientWidth+"px",l.style.height=document.body.clientHeight+"px",l.appendChild(r)),r.style.position="absolute",t&&(t.w?(i=t.w,r.style.width=i+"px"):t.h&&(s=t.h,r.style.height=s+"px")),a&&a.displayClass&&(r.className=a.displayClass);var p=document.createElement("div");if(p.innerHTML=e,p.style.overflow="visible",p.childNodes)for(var u=0,m=p.childNodes.length;u<m;u++)p.childNodes[u].style&&(p.childNodes[u].style.overflow="visible");return r.appendChild(p),l?o.appendChild(l):o.appendChild(r),i||(i=parseInt(p.scrollWidth),r.style.width=i+"px"),s||(s=parseInt(p.scrollHeight)),r.removeChild(p),l?(l.removeChild(r),o.removeChild(l)):o.removeChild(r),new OpenLayers.Size(i,s)},/**
 * APIFunction: getScrollbarWidth
 * This function has been modified by the OpenLayers from the original version,
 *     written by Matthew Eernisse and released under the Apache 2 
 *     license here:
 * 
 *     http://www.fleegix.org/articles/2006/05/30/getting-the-scrollbar-width-in-pixels
 * 
 *     It has been modified simply to cache its value, since it is physically 
 *     impossible that this code could ever run in more than one browser at 
 *     once. 
 * 
 * Returns:
 * {Integer}
 */
OpenLayers.Util.getScrollbarWidth=function(){var e=OpenLayers.Util._scrollbarWidth;if(null==e){var t=null,a=null,i=0,s=0;t=document.createElement("div"),t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",a=document.createElement("div"),a.style.width="100%",a.style.height="200px",t.appendChild(a),document.body.appendChild(t),i=a.offsetWidth,t.style.overflow="scroll",s=a.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=i-s,e=OpenLayers.Util._scrollbarWidth}return e},OpenLayers.Util.getFormattedLonLat=function(e,t,a){a||(a="dms"),e=(e+540)%360-180;var i=Math.abs(e),s=Math.floor(i),r=(i-s)/(1/60),o=r;r=Math.floor(r);var n=(o-r)/(1/60);n=Math.round(10*n),n/=10,n>=60&&(n-=60,r+=1,r>=60&&(r-=60,s+=1)),s<10&&(s="0"+s);var l=s+"Â°";return a.indexOf("dm")>=0&&(r<10&&(r="0"+r),l+=r+"'",a.indexOf("dms")>=0&&(n<10&&(n="0"+n),l+=n+'"')),l+="lon"==t?e<0?OpenLayers.i18n("W"):OpenLayers.i18n("E"):e<0?OpenLayers.i18n("S"):OpenLayers.i18n("N")},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e},destroy:function(){},read:function(e){throw new Error("Read not implemented.")},write:function(e){throw new Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.CSWGetRecords=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.CSWGetRecords.DEFAULTS);var t=OpenLayers.Format.CSWGetRecords["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported CSWGetRecords version: "+e.version;return new t(e)},OpenLayers.Format.CSWGetRecords.DEFAULTS={version:"2.0.2"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(e){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){if(this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var e in this.handlers)this.handlers.hasOwnProperty(e)&&"function"==typeof this.handlers[e].destroy&&this.handlers[e].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(e){this.map=e,this.handler&&this.handler.setMap(e)},draw:function(e){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title)),null!=e&&(this.position=e.clone()),this.moveTo(this.position),this.div},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},activate:function(){return!this.active&&(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return!!this.active&&(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0)},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1==e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1==e.which||e.button&&1==e.button},isRightClick:function(e){return e.which&&3==e.which||e.button&&2==e.button},stop:function(e,t){t||OpenLayers.Event.preventDefault(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},findElement:function(e,t){for(var a=OpenLayers.Event.element(e);a.parentNode&&(!a.tagName||a.tagName.toUpperCase()!=t.toUpperCase());)a=a.parentNode;return a},observe:function(e,t,a,i){var s=OpenLayers.Util.getElement(e);if(i=i||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||s.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!s._eventCacheID){var r="eventCacheID_";s.id&&(r=s.id+"_"+r),s._eventCacheID=OpenLayers.Util.createUniqueID(r)}var o=s._eventCacheID;this.observers[o]||(this.observers[o]=[]),this.observers[o].push({element:s,name:t,observer:a,useCapture:i}),s.addEventListener?s.addEventListener(t,a,i):s.attachEvent&&s.attachEvent("on"+t,a)},stopObservingElement:function(e){var t=OpenLayers.Util.getElement(e),a=t._eventCacheID;this._removeElementObservers(OpenLayers.Event.observers[a])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var a=e[t];OpenLayers.Event.stopObserving.apply(this,[a.element,a.name,a.observer,a.useCapture])}},stopObserving:function(e,t,a,i){i=i||!1;var s=OpenLayers.Util.getElement(e),r=s._eventCacheID;"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||s.detachEvent)&&(t="keydown");var o=!1,n=OpenLayers.Event.observers[r];if(n)for(var l=0;!o&&l<n.length;){var c=n[l];if(c.name==t&&c.observer==a&&c.useCapture==i){n.splice(l,1),0==n.length&&delete OpenLayers.Event.observers[r],o=!0;break}l++}return o&&(s.removeEventListener?s.removeEventListener(t,a,i):s&&s.detachEvent&&s.detachEvent("on"+t,a)),o},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var e in OpenLayers.Event.observers){var t=OpenLayers.Event.observers[e];OpenLayers.Event._removeElementObservers.apply(this,[t])}OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown"],listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(e,t,a,i,s){OpenLayers.Util.extend(this,s),this.object=e,this.fallThrough=i,this.listeners={},this.extensions={},this.extensionCount={},this._msTouches=[],null!=t&&this.attachToElement(t)},destroy:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.fallThrough=null,this.eventHandler=null},addEventType:function(e){},attachToElement:function(e){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=e;for(var t,a=!!window.navigator.msMaxTouchPoints,i=0,s=this.BROWSER_EVENTS.length;i<s;i++)t=this.BROWSER_EVENTS[i],OpenLayers.Event.observe(e,t,this.eventHandler),a&&0===t.indexOf("touch")&&this.addMsTouchListener(e,t,this.eventHandler);OpenLayers.Event.observe(e,"dragstart",OpenLayers.Event.stop)},on:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])},register:function(e,t,a,i){if(e in OpenLayers.Events&&!this.extensions[e]&&(this.extensions[e]=new OpenLayers.Events[e](this)),null!=a){null==t&&(t=this.object);var s=this.listeners[e];s||(s=[],this.listeners[e]=s,this.extensionCount[e]=0);var r={obj:t,func:a};i?(s.splice(this.extensionCount[e],0,r),"object"==typeof i&&i.extension&&this.extensionCount[e]++):s.push(r)}},registerPriority:function(e,t,a){this.register(e,t,a,!0)},un:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])},unregister:function(e,t,a){null==t&&(t=this.object);var i=this.listeners[e];if(null!=i)for(var s=0,r=i.length;s<r;s++)if(i[s].obj==t&&i[s].func==a){i.splice(s,1);break}},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},triggerEvent:function(e,t){var a=this.listeners[e];if(a&&0!=a.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e),a=a.slice();for(var i,s=0,r=a.length;s<r;s++){var o=a[s];if(i=o.func.apply(o.obj,[t]),void 0!=i&&0==i)break}return this.fallThrough||OpenLayers.Event.stop(t,!0),i}},handleBrowserEvent:function(e){var t=e.type,a=this.listeners[t];if(a&&0!=a.length){var i=e.touches;if(i&&i[0]){for(var s,r=0,o=0,n=i.length,l=0;l<n;++l)s=this.getTouchClientXY(i[l]),r+=s.clientX,o+=s.clientY;e.clientX=r/n,e.clientY=o/n}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}},getTouchClientXY:function(e){var t=window.olMockWin||window,a=t.pageXOffset,i=t.pageYOffset,s=e.clientX,r=e.clientY;return 0===e.pageY&&Math.floor(r)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(s)>Math.floor(e.pageX)?(s-=a,r-=i):(r<e.pageY-i||s<e.pageX-a)&&(s=e.pageX-a,r=e.pageY-i),e.olClientX=s,e.olClientY=r,{clientX:s,clientY:r}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null,this.element.offsets=null},getMousePosition:function(e){if(this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=OpenLayers.Util.getViewportElement();this.element.scrolls=[window.pageXOffset||t.scrollLeft,window.pageYOffset||t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},addMsTouchListener:function(e,t,a){function i(e){a(OpenLayers.Util.applyDefaults({stopPropagation:function(){for(var e=s.length-1;e>=0;--e)s[e].stopPropagation()},preventDefault:function(){for(var e=s.length-1;e>=0;--e)s[e].preventDefault()},type:t},e))}var s=(this.eventHandler,this._msTouches);switch(t){case"touchstart":return this.addMsTouchListenerStart(e,t,i);case"touchend":return this.addMsTouchListenerEnd(e,t,i);case"touchmove":return this.addMsTouchListenerMove(e,t,i);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(e,t,a){var i=this._msTouches,s=function(e){for(var t=!1,s=0,r=i.length;s<r;++s)if(i[s].pointerId==e.pointerId){t=!0;break}t||i.push(e),e.touches=i.slice(),a(e)};OpenLayers.Event.observe(e,"MSPointerDown",s);var r=function(e){for(var t=0,a=i.length;t<a;++t)if(i[t].pointerId==e.pointerId){i.splice(t,1);break}};OpenLayers.Event.observe(e,"MSPointerUp",r)},addMsTouchListenerMove:function(e,t,a){var i=this._msTouches,s=function(e){if(!(e.pointerType==e.MSPOINTER_TYPE_MOUSE&&0==e.buttons||1==i.length&&i[0].pageX==e.pageX&&i[0].pageY==e.pageY)){for(var t=0,s=i.length;t<s;++t)if(i[t].pointerId==e.pointerId){i[t]=e;break}e.touches=i.slice(),a(e)}};OpenLayers.Event.observe(e,"MSPointerMove",s)},addMsTouchListenerEnd:function(e,t,a){var i=this._msTouches,s=function(e){for(var t=0,s=i.length;t<s;++t)if(i[t].pointerId==e.pointerId){i.splice(t,1);break}e.touches=i.slice(),a(e)};OpenLayers.Event.observe(e,"MSPointerUp",s)},CLASS_NAME:"OpenLayers.Events"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:["mousedown","mouseup","click","dblclick","touchstart","touchmove","touchend","keydown"],startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(e){this.target=e;for(var t=this.events.length-1;t>=0;--t)this.target.register(this.events[t],this,this.buttonClick,{extension:!0})},destroy:function(){for(var e=this.events.length-1;e>=0;--e)this.target.unregister(this.events[e],this,this.buttonClick);delete this.target},getPressedButton:function(e){var t,a=3;do{if(OpenLayers.Element.hasClass(e,"olButton")){t=e;break}e=e.parentNode}while(--a>0&&e);return t},ignore:function(e){var t=3,a=!1;do{if("a"===e.nodeName.toLowerCase()){a=!0;break}e=e.parentNode}while(--t>0&&e);return a},buttonClick:function(e){var t=!0,a=OpenLayers.Event.element(e);if(a&&(OpenLayers.Event.isLeftClick(e)||!~e.type.indexOf("mouse"))){var i=this.getPressedButton(a);if(i){if("keydown"===e.type)switch(e.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:i}),OpenLayers.Event.stop(e),t=!1}else if(this.startEvt){if(this.completeRegEx.test(e.type)){var s=OpenLayers.Util.pagePosition(i),r=OpenLayers.Util.getViewportElement(),o=window.pageYOffset||r.scrollTop,n=window.pageXOffset||r.scrollLeft;s[0]=s[0]-n,s[1]=s[1]-o,this.target.triggerEvent("buttonclick",{buttonElement:i,buttonXY:{x:this.startEvt.clientX-s[0],y:this.startEvt.clientY-s[1]}})}this.cancelRegEx.test(e.type)&&delete this.startEvt,OpenLayers.Event.stop(e),t=!1}this.startRegEx.test(e.type)&&(this.startEvt=e,OpenLayers.Event.stop(e),t=!1)}else t=!this.ignore(OpenLayers.Event.element(e)),delete this.startEvt}return t}}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.vendorPrefix=function(){"use strict";function e(e){return e?e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):null}function t(t){if(void 0===o[t]){var a=t.replace(/(-[\s\S])/g,function(e){return e.charAt(1).toUpperCase()}),s=i(a);o[t]=e(s)}return o[t]}function a(e,t){if(void 0===n[t]){var a,i,r=0,o=s.length,l="undefined"!=typeof e.cssText;for(n[t]=null;r<o;r++)if(i=s[r],i?(l||(i=i.toLowerCase()),a=i+t.charAt(0).toUpperCase()+t.slice(1)):a=t,void 0!==e[a]){n[t]=a;break}}return n[t]}function i(e){return a(r,e)}var s=["","O","ms","Moz","Webkit"],r=document.createElement("div").style,o={},n={};return{css:t,js:a,style:i,cssCache:o,jsCache:n}}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Animation=function(e){function t(e,t,a){t=t>0?t:Number.POSITIVE_INFINITY;var i=++o,s=+new Date;return n[i]=function(){n[i]&&+new Date-s<=t?(e(),n[i]&&r(n[i],a)):delete n[i]},r(n[i],a),i}function a(e){delete n[e]}var i=OpenLayers.Util.vendorPrefix.js(e,"requestAnimationFrame"),s=!!i,r=function(){var t=e[i]||function(t,a){e.setTimeout(t,16)};return function(a,i){t.apply(e,[a,i])}}(),o=0,n={};return{isNative:s,requestFrame:r,start:t,stop:a}}(window),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,minFrameRate:null,startTime:null,animationId:null,playing:!1,initialize:function(e){this.easing=e?e:OpenLayers.Easing.Expo.easeOut},start:function(e,t,a,i){this.playing=!0,this.begin=e,this.finish=t,this.duration=a,this.callbacks=i.callbacks,this.minFrameRate=i.minFrameRate||30,this.time=0,this.startTime=(new Date).getTime(),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var e={};for(var t in this.begin){var a=this.begin[t],i=this.finish[t];if(null==a||null==i||isNaN(a)||isNaN(i))throw new TypeError("invalid value for Tween");var s=i-a;e[t]=this.easing.apply(this,[this.time,a,s,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&((new Date).getTime()-this.startTime)/this.time<=1e3/this.minFrameRate&&this.callbacks.eachStep.call(this,e),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(e,t,a,i){return a*e/i+t},easeOut:function(e,t,a,i){return a*e/i+t},easeInOut:function(e,t,a,i){return a*e/i+t},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(e,t,a,i){return 0==e?t:a*Math.pow(2,10*(e/i-1))+t},easeOut:function(e,t,a,i){return e==i?t+a:a*(-Math.pow(2,-10*e/i)+1)+t},easeInOut:function(e,t,a,i){return 0==e?t:e==i?t+a:(e/=i/2)<1?a/2*Math.pow(2,10*(e-1))+t:a/2*(-Math.pow(2,-10*--e)+2)+t},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(e,t,a,i){return a*(e/=i)*e+t},easeOut:function(e,t,a,i){return-a*(e/=i)*(e-2)+t},easeInOut:function(e,t,a,i){return(e/=i/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t},CLASS_NAME:"OpenLayers.Easing.Quad"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.projCode=e,"object"==typeof Proj4js&&(this.proj=new Proj4js.Proj(e))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(e){var t=e,a=!1;if(t)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),"object"==typeof Proj4js&&this.proj.defData&&t.proj.defData)a=this.proj.defData.replace(this.titleRegEx,"")==t.proj.defData.replace(this.titleRegEx,"");else if(t.getCode){var i=this.getCode(),s=t.getCode();a=i==s||!!OpenLayers.Projection.transforms[i]&&OpenLayers.Projection.transforms[i][s]===OpenLayers.Projection.nullTransform}return a},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34]}},OpenLayers.Projection.addTransform=function(e,t,a){if(a===OpenLayers.Projection.nullTransform){var i=OpenLayers.Projection.defaults[e];i&&!OpenLayers.Projection.defaults[t]&&(OpenLayers.Projection.defaults[t]=i)}OpenLayers.Projection.transforms[e]||(OpenLayers.Projection.transforms[e]={}),OpenLayers.Projection.transforms[e][t]=a},OpenLayers.Projection.transform=function(e,t,a){if(t&&a)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),a instanceof OpenLayers.Projection||(a=new OpenLayers.Projection(a)),t.proj&&a.proj)e=Proj4js.transform(t.proj,a.proj,e);else{var i=t.getCode(),s=a.getCode(),r=OpenLayers.Projection.transforms;r[i]&&r[i][s]&&r[i][s](e)}return e},OpenLayers.Projection.nullTransform=function(e){return e},function(){function e(e){return e.x=180*e.x/s,e.y=180/Math.PI*(2*Math.atan(Math.exp(e.y/s*Math.PI))-Math.PI/2),e}function t(e){e.x=e.x*s/180;var t=Math.log(Math.tan((90+e.y)*Math.PI/360))/Math.PI*s;return e.y=Math.max(-20037508.34,Math.min(t,20037508.34)),e}function a(a,i){var s,r,o,n,l,c=OpenLayers.Projection.addTransform,d=OpenLayers.Projection.nullTransform;for(s=0,r=i.length;s<r;++s)for(o=i[s],c(a,o,t),c(o,a,e),l=s+1;l<r;++l)n=i[l],c(o,n,d),c(n,o,d)}var i,s=20037508.34,r=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],o=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"];for(i=r.length-1;i>=0;--i)a(r[i],o);for(i=o.length-1;i>=0;--i)a(o[i],r)}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!1,autoUpdateSize:!0,eventListeners:null,panTween:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,zoomTween:null,zoomMethod:OpenLayers.Easing.Quad.easeOut,zoomDuration:20,paddingForPopups:null,layerContainerOriginPx:null,minPx:null,maxPx:null,initialize:function(e,t){1===arguments.length&&"object"==typeof e&&(t=e,e=t&&t.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css",this.options=OpenLayers.Util.extend({},t),OpenLayers.Util.extend(this,t);var a=this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection;OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[a]),!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(e),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap");var i=this.id+"_OpenLayers_ViewPort";if(this.viewPortDiv=OpenLayers.Util.createDiv(i,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),OpenLayers.TileManager&&null!==this.tileManager&&(this.tileManager instanceof OpenLayers.TileManager||(this.tileManager=new OpenLayers.TileManager(this.tileManager)),this.tileManager.addMap(this)),i=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(i),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),this.autoUpdateSize===!0&&(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var s=!0,r=document.getElementsByTagName("link"),o=0,n=r.length;o<n;++o)if(OpenLayers.Util.isEquivalentUrl(r.item(o).href,this.theme)){s=!1;break}if(s){var l=document.createElement("link");l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),l.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(l)}}null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution)));for(var o=0,n=this.controls.length;o<n;o++)this.addControlToMap(this.controls[o]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),t&&t.layers&&(delete this.center,delete this.zoom,this.addLayers(t.layers),t.center&&!this.getCenter()&&this.setCenter(t.center,t.zoom)),this.panMethod&&(this.panTween=new OpenLayers.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new OpenLayers.Tween(this.zoomMethod))},getViewport:function(){return this.viewPortDiv},render:function(e){this.div=OpenLayers.Util.getElement(e),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;if(this.panTween&&(this.panTween.stop(),this.panTween=null),this.zoomTween&&(this.zoomTween.stop(),this.zoomTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy&&OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy),this.paddingForPopups=null,null!=this.controls){for(var e=this.controls.length-1;e>=0;--e)this.controls[e].destroy();this.controls=null}if(null!=this.layers){for(var e=this.layers.length-1;e>=0;--e)this.layers[e].destroy(!1);this.layers=null}this.viewPortDiv&&this.viewPortDiv.parentNode&&this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.tileManager&&(this.tileManager.removeMap(this),this.tileManager=null),this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.events=null,this.options=null},setOptions:function(e){var t=this.minPx&&e.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,e),t&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(e,t,a){var i="function"==typeof a.test,s=OpenLayers.Array.filter(this[e],function(e){return e[t]==a||i&&a.test(e[t])});return s},getLayersBy:function(e,t){return this.getBy("layers",e,t)},getLayersByName:function(e){return this.getLayersBy("name",e)},getLayersByClass:function(e){return this.getLayersBy("CLASS_NAME",e)},getControlsBy:function(e,t){return this.getBy("controls",e,t)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},getLayer:function(e){for(var t=null,a=0,i=this.layers.length;a<i;a++){var s=this.layers[a];if(s.id==e){t=s;break}}return t},setLayerZIndex:function(e,t){e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer?"BaseLayer":"Overlay"]+5*t)},resetLayersZIndex:function(){for(var e=0,t=this.layers.length;e<t;e++){var a=this.layers[e];this.setLayerZIndex(a,e)}},addLayer:function(e){for(var t=0,a=this.layers.length;t<a;t++)if(this.layers[t]==e)return!1;return this.events.triggerEvent("preaddlayer",{layer:e})!==!1&&(this.allOverlays&&(e.isBaseLayer=!1),e.div.className="olLayerDiv",e.div.style.overflow="",this.setLayerZIndex(e,this.layers.length),e.isFixed?this.viewPortDiv.appendChild(e.div):this.layerContainerDiv.appendChild(e.div),this.layers.push(e),e.setMap(this),e.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(e):e.setVisibility(!1):e.redraw(),this.events.triggerEvent("addlayer",{layer:e}),e.events.triggerEvent("added",{map:this,layer:e}),e.afterAdd(),!0)},addLayers:function(e){for(var t=0,a=e.length;t<a;t++)this.addLayer(e[t])},removeLayer:function(e,t){if(this.events.triggerEvent("preremovelayer",{layer:e})!==!1){if(null==t&&(t=!0),e.isFixed?this.viewPortDiv.removeChild(e.div):this.layerContainerDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.layers,e),e.removeMap(this),e.map=null,this.baseLayer==e&&(this.baseLayer=null,t))for(var a=0,i=this.layers.length;a<i;a++){var s=this.layers[a];if(s.isBaseLayer||this.allOverlays){this.setBaseLayer(s);break}}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:e}),e.events.triggerEvent("removed",{map:this,layer:e})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(e){return OpenLayers.Util.indexOf(this.layers,e)},setLayerIndex:function(e,t){var a=this.getLayerIndex(e);if(t<0?t=0:t>this.layers.length&&(t=this.layers.length),a!=t){this.layers.splice(a,1),this.layers.splice(t,0,e);for(var i=0,s=this.layers.length;i<s;i++)this.setLayerZIndex(this.layers[i],i);this.events.triggerEvent("changelayer",{layer:e,property:"order"}),this.allOverlays&&(0===t?this.setBaseLayer(e):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(e,t){var a=this.getLayerIndex(e)+t;this.setLayerIndex(e,a)},setBaseLayer:function(e){if(e!=this.baseLayer&&OpenLayers.Util.indexOf(this.layers,e)!=-1){var t=this.getCachedCenter(),a=OpenLayers.Util.getResolutionFromScale(this.getScale(),e.units);if(null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1),this.baseLayer=e,this.allOverlays&&!this.baseLayer.visibility||(this.baseLayer.setVisibility(!0),this.baseLayer.inRange===!1&&this.baseLayer.redraw()),null!=t){var i=this.getZoomForResolution(a||this.resolution,!0);this.setCenter(t,i,!1,!0)}this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(e,t){this.controls.push(e),this.addControlToMap(e,t)},addControls:function(e,t){for(var a=1===arguments.length?[]:t,i=0,s=e.length;i<s;i++){var r=e[i],o=a[i]?a[i]:null;this.addControl(r,o)}},addControlToMap:function(e,t){e.outsideViewport=null!=e.div,this.displayProjection&&!e.displayProjection&&(e.displayProjection=this.displayProjection),e.setMap(this);var a=e.draw(t);a&&(e.outsideViewport||(a.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(a))),e.autoActivate&&e.activate()},getControl:function(e){for(var t=null,a=0,i=this.controls.length;a<i;a++){var s=this.controls[a];if(s.id==e){t=s;break}}return t},removeControl:function(e){e&&e==this.getControl(e.id)&&(e.div&&e.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.controls,e))},addPopup:function(e,t){if(t)for(var a=this.popups.length-1;a>=0;--a)this.removePopup(this.popups[a]);e.map=this,this.popups.push(e);var i=e.draw();i&&(i.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(i))},removePopup:function(e){if(OpenLayers.Util.removeItem(this.popups,e),e.div)try{this.layerContainerDiv.removeChild(e.div)}catch(e){}e.map=null},getSize:function(){var e=null;return null!=this.size&&(e=this.size.clone()),e},updateSize:function(){var e=this.getCurrentSize();if(e&&!isNaN(e.h)&&!isNaN(e.w)){this.events.clearMouseCache();var t=this.getSize();if(null==t&&(this.size=t=e),!e.equals(t)){this.size=e;for(var a=0,i=this.layers.length;a<i;a++)this.layers[a].onMapResize();var s=this.getCachedCenter();if(null!=this.baseLayer&&null!=s){var r=this.getZoom();this.zoom=null,this.setCenter(s,r)}}}this.events.triggerEvent("updatesize")},getCurrentSize:function(){var e=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);return(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=this.div.offsetWidth,e.h=this.div.offsetHeight),(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=parseInt(this.div.style.width),e.h=parseInt(this.div.style.height)),e},calculateBounds:function(e,t){var a=null;if(null==e&&(e=this.getCachedCenter()),null==t&&(t=this.getResolution()),null!=e&&null!=t){var i=this.size.w*t/2,s=this.size.h*t/2;a=new OpenLayers.Bounds(e.lon-i,e.lat-s,e.lon+i,e.lat+s)}return a},getCenter:function(){var e=null,t=this.getCachedCenter();return t&&(e=t.clone()),e},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(e,t,a){if(a=OpenLayers.Util.applyDefaults(a,{animate:!0,dragging:!1}),a.dragging)0==e&&0==t||this.moveByPx(e,t);else{var i=this.getViewPortPxFromLonLat(this.getCachedCenter()),s=i.add(e,t);if(this.dragging||!s.equals(i)){var r=this.getLonLatFromViewPortPx(s);a.animate?this.panTo(r):(this.moveTo(r),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend")))}}},panTo:function(e){if(this.panTween&&this.getExtent().scale(this.panRatio).containsLonLat(e)){var t=this.getCachedCenter();if(e.equals(t))return;var a=this.getPixelFromLonLat(t),i=this.getPixelFromLonLat(e),s={x:i.x-a.x,y:i.y-a.y},r={x:0,y:0};this.panTween.start({x:0,y:0},s,this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(e){var t=e.x-r.x,a=e.y-r.y;this.moveByPx(t,a),r.x=Math.round(e.x),r.y=Math.round(e.y)},this),done:OpenLayers.Function.bind(function(t){this.moveTo(e),this.dragging=!1,this.events.triggerEvent("moveend")},this)}})}else this.setCenter(e)},setCenter:function(e,t,a,i){this.panTween&&this.panTween.stop(),this.zoomTween&&this.zoomTween.stop(),this.moveTo(e,t,{dragging:a,forceZoomChange:i})},moveByPx:function(e,t){var a=this.size.w/2,i=this.size.h/2,s=a+e,r=i+t,o=this.baseLayer.wrapDateLine,n=0,l=0;if(this.restrictedExtent&&(n=a,l=i,o=!1),e=o||s<=this.maxPx.x-n&&s>=this.minPx.x+n?Math.round(e):0,t=r<=this.maxPx.y-l&&r>=this.minPx.y+l?Math.round(t):0,e||t){this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,e&&(this.layerContainerOriginPx.x-=e,this.minPx.x-=e,this.maxPx.x-=e),t&&(this.layerContainerOriginPx.y-=t,this.minPx.y-=t,this.maxPx.y-=t),this.applyTransform();var c,d,p;for(d=0,p=this.layers.length;d<p;++d)c=this.layers[d],c.visibility&&(c===this.baseLayer||c.inRange)&&(c.moveByPx(e,t),c.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(e){if(this.baseLayer&&this.baseLayer.wrapDateLine){var t=this.baseLayer.resolutions,a=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(e)>a)if(this.fractionalZoom)e=this.getZoomForResolution(a);else for(var i=0|e,s=t.length;i<s;++i)if(t[i]<=a){e=i;break}}return e},getMinZoom:function(){return this.adjustZoom(0)},moveTo:function(e,t,a){null==e||e instanceof OpenLayers.LonLat||(e=new OpenLayers.LonLat(e)),a||(a={}),null!=t&&(t=parseFloat(t),this.fractionalZoom||(t=Math.round(t)));var i=t;t=this.adjustZoom(t),t!==i&&(e=this.getCenter());var s=a.dragging||this.dragging,r=a.forceZoomChange;if(this.getCachedCenter()||this.isValidLonLat(e)||(e=this.maxExtent.getCenterLonLat(),this.center=e.clone()),null!=this.restrictedExtent){null==e&&(e=this.center),null==t&&(t=this.getZoom());var o=this.getResolutionForZoom(t),n=this.calculateBounds(e,o);if(!this.restrictedExtent.containsBounds(n)){var l=this.restrictedExtent.getCenterLonLat();n.getWidth()>this.restrictedExtent.getWidth()?e=new OpenLayers.LonLat(l.lon,e.lat):n.left<this.restrictedExtent.left?e=e.add(this.restrictedExtent.left-n.left,0):n.right>this.restrictedExtent.right&&(e=e.add(this.restrictedExtent.right-n.right,0)),n.getHeight()>this.restrictedExtent.getHeight()?e=new OpenLayers.LonLat(e.lon,l.lat):n.bottom<this.restrictedExtent.bottom?e=e.add(0,this.restrictedExtent.bottom-n.bottom):n.top>this.restrictedExtent.top&&(e=e.add(0,this.restrictedExtent.top-n.top))}}var c=r||this.isValidZoomLevel(t)&&t!=this.getZoom(),d=this.isValidLonLat(e)&&!e.equals(this.center);if(c||d||s){s||this.events.triggerEvent("movestart",{zoomChanged:c}),d&&(!c&&this.center&&this.centerLayerContainer(e),this.center=e.clone());var p=c?this.getResolutionForZoom(t):this.getResolution();if(c||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerOriginPx.x=0,this.layerContainerOriginPx.y=0,this.applyTransform();var u=this.getMaxExtent({restricted:!0}),m=u.getCenterLonLat(),h=this.center.lon-m.lon,g=m.lat-this.center.lat,v=Math.round(u.getWidth()/p),f=Math.round(u.getHeight()/p);this.minPx={x:(this.size.w-v)/2-h/p,y:(this.size.h-f)/2-g/p},this.maxPx={x:this.minPx.x+Math.round(u.getWidth()/p),y:this.minPx.y+Math.round(u.getHeight()/p)}}c&&(this.zoom=t,this.resolution=p);var y=this.getExtent();this.baseLayer.visibility&&(this.baseLayer.moveTo(y,c,a.dragging),a.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:c})),y=this.baseLayer.getExtent();for(var b=this.layers.length-1;b>=0;--b){var L=this.layers[b];if(L!==this.baseLayer&&!L.isBaseLayer){var w=L.calculateInRange();L.inRange!=w&&(L.inRange=w,w||L.display(!1),this.events.triggerEvent("changelayer",{layer:L,property:"visibility"})),w&&L.visibility&&(L.moveTo(y,c,a.dragging),a.dragging||L.events.triggerEvent("moveend",{zoomChanged:c}))}}if(this.events.triggerEvent("move"),s||this.events.triggerEvent("moveend"),c){for(var b=0,O=this.popups.length;b<O;b++)this.popups[b].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(e){var t=this.getViewPortPxFromLonLat(this.layerContainerOrigin),a=this.getViewPortPxFromLonLat(e);if(null!=t&&null!=a){var i=this.layerContainerOriginPx.x,s=this.layerContainerOriginPx.y,r=Math.round(t.x-a.x),o=Math.round(t.y-a.y);this.applyTransform(this.layerContainerOriginPx.x=r,this.layerContainerOriginPx.y=o);var n=i-r,l=s-o;this.minPx.x-=n,this.maxPx.x-=n,this.minPx.y-=l,this.maxPx.y-=l}},isValidZoomLevel:function(e){return null!=e&&e>=0&&e<this.getNumZoomLevels()},isValidLonLat:function(e){var t=!1;if(null!=e){var a=this.getMaxExtent(),i=this.baseLayer.wrapDateLine&&a;t=a.containsLonLat(e,{worldBounds:i})}return t},getProjection:function(){var e=this.getProjectionObject();return e?e.getCode():null},getProjectionObject:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.projection),e},getMaxResolution:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.maxResolution),e},getMaxExtent:function(e){var t=null;return e&&e.restricted&&this.restrictedExtent?t=this.restrictedExtent:null!=this.baseLayer&&(t=this.baseLayer.maxExtent),t},getNumZoomLevels:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.numZoomLevels),e},getExtent:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.getExtent()),e},getResolution:function(){var e=null;return null!=this.baseLayer?e=this.baseLayer.getResolution():this.allOverlays===!0&&this.layers.length>0&&(e=this.layers[0].getResolution()),e},getUnits:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.units),e},getScale:function(){var e=null;if(null!=this.baseLayer){var t=this.getResolution(),a=this.baseLayer.units;e=OpenLayers.Util.getScaleFromResolution(t,a)}return e},getZoomForExtent:function(e,t){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.getZoomForExtent(e,t)),a},getResolutionForZoom:function(e){var t=null;return this.baseLayer&&(t=this.baseLayer.getResolutionForZoom(e)),t},getZoomForResolution:function(e,t){var a=null;return null!=this.baseLayer&&(a=this.baseLayer.getZoomForResolution(e,t)),a},zoomTo:function(e,t){var a=this;if(a.isValidZoomLevel(e))if(a.baseLayer.wrapDateLine&&(e=a.adjustZoom(e)),a.zoomTween){var i=a.getResolution(),s=a.getResolutionForZoom(e),r={scale:1},o={scale:i/s};if(a.zoomTween.playing&&a.zoomTween.duration<3*a.zoomDuration)a.zoomTween.finish={scale:a.zoomTween.finish.scale*o.scale};else{if(!t){var n=a.getSize();t={x:n.w/2,y:n.h/2}}a.zoomTween.start(r,o,a.zoomDuration,{minFrameRate:50,callbacks:{eachStep:function(e){var i=a.layerContainerOriginPx,s=e.scale,r=(s-1)*(i.x-t.x)|0,o=(s-1)*(i.y-t.y)|0;a.applyTransform(i.x+r,i.y+o,s)},done:function(e){a.applyTransform();var i=a.getResolution()/e.scale,s=a.getZoomForResolution(i,!0);a.moveTo(a.getZoomTargetCenter(t,i),s,!0)}}})}}else{var l=t?a.getZoomTargetCenter(t,a.getResolutionForZoom(e)):null;a.setCenter(l,e)}},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(e,t){e instanceof OpenLayers.Bounds||(e=new OpenLayers.Bounds(e));var a=e.getCenterLonLat();if(this.baseLayer.wrapDateLine){var i=this.getMaxExtent();for(e=e.clone();e.right<e.left;)e.right+=i.getWidth();a=e.getCenterLonLat().wrapDateLine(i)}this.setCenter(a,this.getZoomForExtent(e,t))},zoomToMaxExtent:function(e){var t=!e||e.restricted,a=this.getMaxExtent({restricted:t});this.zoomToExtent(a)},zoomToScale:function(e,t){var a=OpenLayers.Util.getResolutionFromScale(e,this.baseLayer.units),i=this.size.w*a/2,s=this.size.h*a/2,r=this.getCachedCenter(),o=new OpenLayers.Bounds(r.lon-i,r.lat-s,r.lon+i,r.lat+s);this.zoomToExtent(o,t)},getLonLatFromViewPortPx:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getLonLatFromViewPortPx(e)),t},getViewPortPxFromLonLat:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getViewPortPxFromLonLat(e)),t},getZoomTargetCenter:function(e,t){var a=null,i=this.getSize(),s=i.w/2-e.x,r=e.y-i.h/2,o=this.getLonLatFromPixel(e);return o&&(a=new OpenLayers.LonLat(o.lon+s*t,o.lat+r*t)),a},getLonLatFromPixel:function(e){return this.getLonLatFromViewPortPx(e)},getPixelFromLonLat:function(e){var t=this.getViewPortPxFromLonLat(e);return t.x=Math.round(t.x),t.y=Math.round(t.y),t},getGeodesicPixelSize:function(e){var t=e?this.getLonLatFromPixel(e):this.getCachedCenter()||new OpenLayers.LonLat(0,0),a=this.getResolution(),i=t.add(-a/2,0),s=t.add(a/2,0),r=t.add(0,-a/2),o=t.add(0,a/2),n=new OpenLayers.Projection("EPSG:4326"),l=this.getProjectionObject()||n;return l.equals(n)||(i.transform(l,n),s.transform(l,n),r.transform(l,n),o.transform(l,n)),new OpenLayers.Size(OpenLayers.Util.distVincenty(i,s),OpenLayers.Util.distVincenty(r,o))},getViewPortPxFromLayerPx:function(e){var t=null;if(null!=e){var a=this.layerContainerOriginPx.x,i=this.layerContainerOriginPx.y;t=e.add(a,i)}return t},getLayerPxFromViewPortPx:function(e){var t=null;if(null!=e){var a=-this.layerContainerOriginPx.x,i=-this.layerContainerOriginPx.y;t=e.add(a,i),(isNaN(t.x)||isNaN(t.y))&&(t=null)}return t},getLonLatFromLayerPx:function(e){return e=this.getViewPortPxFromLayerPx(e),this.getLonLatFromViewPortPx(e)},getLayerPxFromLonLat:function(e){var t=this.getPixelFromLonLat(e);return this.getLayerPxFromViewPortPx(t)},applyTransform:function(e,t,a){a=a||1;var i=this.layerContainerOriginPx,s=1!==a;e=e||i.x,t=t||i.y;var r=this.layerContainerDiv.style,o=this.applyTransform.transform,n=this.applyTransform.template;if(void 0===o&&(o=OpenLayers.Util.vendorPrefix.style("transform"),this.applyTransform.transform=o,o)){var l=OpenLayers.Element.getStyle(this.viewPortDiv,OpenLayers.Util.vendorPrefix.css("transform"));l&&"none"===l||(n=["translate3d(",",0) ","scale3d(",",1)"],r[o]=[n[0],"0,0",n[1]].join("")),n&&~r[o].indexOf(n[0])||(n=["translate(",") ","scale(",")"]),this.applyTransform.template=n}null===o||"translate3d("!==n[0]&&s!==!0?(r.left=e+"px",r.top=t+"px",null!==o&&(r[o]="")):(s===!0&&"translate("===n[0]&&(e-=i.x,t-=i.y,r.left=i.x+"px",r.top=i.y+"px"),r[o]=[n[0],e,"px,",t,"px",n[1],n[2],a,",",a,n[3]].join(""))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,touch:!1,initialize:function(e,t,a){OpenLayers.Util.extend(this,a),this.control=e,this.callbacks=t;var i=this.map||e.map;i&&this.setMap(i),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(e){this.map=e},checkModifiers:function(e){if(null==this.keyMask)return!0;var t=(e.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(e.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(e.altKey?OpenLayers.Handler.MOD_ALT:0)|(e.metaKey?OpenLayers.Handler.MOD_META:0);return t==this.keyMask},activate:function(){if(this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,a=e.length;t<a;t++)this[e[t]]&&this.register(e[t],this[e[t]]);return this.active=!0,!0},deactivate:function(){if(!this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,a=e.length;t<a;t++)this[e[t]]&&this.unregister(e[t],this[e[t]]);return this.touch=!1,this.active=!1,!0},startTouch:function(){if(!this.touch){this.touch=!0;for(var e=["mousedown","mouseup","mousemove","click","dblclick","mouseout"],t=0,a=e.length;t<a;t++)this[e[t]]&&this.unregister(e[t],this[e[t]])}},callback:function(e,t){e&&this.callbacks[e]&&this.callbacks[e].apply(this.control,t)},register:function(e,t){this.map.events.registerPriority(e,this,t),this.map.events.registerPriority(e,this,this.setEvent)},unregister:function(e,t){this.map.events.unregister(e,this,t),this.map.events.unregister(e,this,this.setEvent)},setEvent:function(e){return this.evt=e,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.MOD_META=8,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,double:!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(e){return this.startTouch(),this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},touchmove:function(e){return this.last=this.getEventInfo(e),!0},touchend:function(e){return this.down&&(e.xy=this.last.xy,e.lastTouches=this.last.touches,this.handleSingle(e),this.down=null),!0},mousedown:function(e){return this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},mouseup:function(e){var t=!0;return this.checkModifiers(e)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(e)&&(t=this.rightclick(e)),t},rightclick:function(e){if(this.passesTolerance(e)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[e]),!this.stopDouble;var t=this.double?OpenLayers.Util.extend({},e):this.callback("rightclick",[e]),a=OpenLayers.Function.bind(this.delayedRightCall,this,t);this.rightclickTimerId=window.setTimeout(a,this.delay)}return!this.stopSingle},delayedRightCall:function(e){this.rightclickTimerId=null,e&&this.callback("rightclick",[e])},click:function(e){return this.last||(this.last=this.getEventInfo(e)),this.handleSingle(e),!this.stopSingle},dblclick:function(e){return this.handleDouble(e),!this.stopDouble},handleDouble:function(e){this.passesDblclickTolerance(e)&&(this.double&&this.callback("dblclick",[e]),this.clearTimer())},handleSingle:function(e){if(this.passesTolerance(e))if(null!=this.timerId)this.last.touches&&1===this.last.touches.length&&(this.double&&OpenLayers.Event.preventDefault(e),this.handleDouble(e)),this.last.touches&&2===this.last.touches.length||this.clearTimer();else{this.first=this.getEventInfo(e);var t=this.single?OpenLayers.Util.extend({},e):null;this.queuePotentialClick(t)}},queuePotentialClick:function(e){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)},passesTolerance:function(e){var t=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(t=this.pixelTolerance>=this.down.xy.distanceTo(e.xy),t&&this.touch&&this.down.touches.length===this.last.touches.length))for(var a=0,i=this.down.touches.length;a<i;++a)if(this.getTouchDistance(this.down.touches[a],this.last.touches[a])>this.pixelTolerance){t=!1;break}return t},getTouchDistance:function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},passesDblclickTolerance:function(e){var t=!0;return this.down&&this.first&&(t=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance),t},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(e){this.timerId=null,e&&this.callback("click",[e])},getEventInfo:function(e){var t;if(e.touches){var a=e.touches.length;t=new Array(a);for(var i,s=0;s<a;s++)i=e.touches[s],t[s]={clientX:i.olClientX,clientY:i.olClientY}}return{xy:e.xy,touches:t}},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.down=null,this.first=null,this.last=null,e=!0),e},CLASS_NAME:"OpenLayers.Handler.Click"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(e,t,a){if(OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.documentDrag===!0){var i=this;this._docMove=function(e){i.mousemove({xy:{x:e.clientX,y:e.clientY},element:document})},this._docUp=function(e){i.mouseup({xy:{x:e.clientX,y:e.clientY}})}}},dragstart:function(e){var t=!0;return this.dragging=!1,this.checkModifiers(e)&&(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))?(this.started=!0,this.start=e.xy,this.last=e.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(e),this.callback("down",[e.xy]),OpenLayers.Event.preventDefault(e),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,t=!this.stopDown):(this.started=!1,this.start=null,this.last=null),t},dragmove:function(e){return this.lastMoveEvt=e,!this.started||this.timeoutId||e.xy.x==this.last.x&&e.xy.y==this.last.y||(this.documentDrag===!0&&this.documentEvents&&(e.element===document?(this.adjustXY(e),this.setEvent(e)):this.removeDocumentEvents()),this.interval>0&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(e),this.callback("move",[e.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=e.xy),!0},dragend:function(e){if(this.started){this.documentDrag===!0&&this.documentEvents&&(this.adjustXY(e),this.removeDocumentEvents());var t=this.start!=this.last;this.started=!1,this.dragging=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(e),this.callback("up",[e.xy]),t&&this.callback("done",[e.xy]),document.onselectstart=this.oldOnselectstart}return!0},down:function(e){},move:function(e){},up:function(e){},out:function(e){},mousedown:function(e){return this.dragstart(e)},touchstart:function(e){return this.startTouch(),this.dragstart(e)},mousemove:function(e){return this.dragmove(e)},touchmove:function(e){return this.dragmove(e)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(e){return this.dragend(e)},touchend:function(e){return e.xy=this.last,this.dragend(e)},mouseout:function(e){if(this.started&&OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv))if(this.documentDrag===!0)this.addDocumentEvents();else{var t=this.start!=this.last;this.started=!1,this.dragging=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(e),this.callback("out",[]),t&&this.callback("done",[e.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(e){return this.start==this.last},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.started=!1,this.dragging=!1,this.start=null,this.last=null,e=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),e},adjustXY:function(e){var t=OpenLayers.Util.pagePosition(this.map.viewPortDiv);e.xy.x-=t[0],e.xy.y-=t[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control,{element:null,ovmap:null,size:{w:180,h:90},layers:null,minRectSize:15,minRectDisplayClass:"RectReplacement",minRatio:8,maxRatio:32,mapOptions:null,autoPan:!1,handlers:null,resolutionFactor:1,maximized:!1,maximizeTitle:"",minimizeTitle:"",initialize:function(e){this.layers=[],this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,[e])},destroy:function(){this.mapDiv&&(this.handlers.click&&this.handlers.click.destroy(),this.handlers.drag&&this.handlers.drag.destroy(),this.ovmap&&this.ovmap.viewPortDiv.removeChild(this.extentRectangle),this.extentRectangle=null,this.rectEvents&&(this.rectEvents.destroy(),this.rectEvents=null),this.ovmap&&(this.ovmap.destroy(),this.ovmap=null),this.element.removeChild(this.mapDiv),this.mapDiv=null,this.div.removeChild(this.element),this.element=null,this.maximizeDiv&&(this.div.removeChild(this.maximizeDiv),this.maximizeDiv=null),this.minimizeDiv&&(this.div.removeChild(this.minimizeDiv),this.minimizeDiv=null),this.map.events.un({buttonclick:this.onButtonClick,moveend:this.update,changebaselayer:this.baseLayerDraw,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments))},draw:function(){if(OpenLayers.Control.prototype.draw.apply(this,arguments),0===this.layers.length){if(!this.map.baseLayer)return this.map.events.register("changebaselayer",this,this.baseLayerDraw),this.div;var e=this.map.baseLayer.clone();this.layers=[e]}if(this.element=document.createElement("div"),this.element.className=this.displayClass+"Element",this.element.style.display="none",this.mapDiv=document.createElement("div"),this.mapDiv.style.width=this.size.w+"px",this.mapDiv.style.height=this.size.h+"px",this.mapDiv.style.position="relative",this.mapDiv.style.overflow="hidden",this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap"),this.extentRectangle=document.createElement("div"),this.extentRectangle.style.position="absolute",this.extentRectangle.style.zIndex=1e3,this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.element.appendChild(this.mapDiv),this.div.appendChild(this.element),this.outsideViewport)this.element.style.display="";else{this.div.className+=" "+this.displayClass+"Container";var t=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,null,t,"absolute"),this.maximizeDiv.style.display="none",this.maximizeDiv.className=this.displayClass+"MaximizeButton olButton",this.maximizeTitle&&(this.maximizeDiv.title=this.maximizeTitle),this.div.appendChild(this.maximizeDiv);var t=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,null,t,"absolute"),this.minimizeDiv.style.display="none",this.minimizeDiv.className=this.displayClass+"MinimizeButton olButton",this.minimizeTitle&&(this.minimizeDiv.title=this.minimizeTitle),this.div.appendChild(this.minimizeDiv),this.minimizeControl()}return this.map.getExtent()&&this.update(),this.map.events.on({buttonclick:this.onButtonClick,moveend:this.update,scope:this}),this.maximized&&this.maximizeControl(),this.div},baseLayerDraw:function(){this.draw(),this.map.events.unregister("changebaselayer",this,this.baseLayerDraw)},rectDrag:function(e){var t=this.handlers.drag.last.x-e.x,a=this.handlers.drag.last.y-e.y;if(0!=t||0!=a){var i=this.rectPxBounds.top,s=this.rectPxBounds.left,r=Math.abs(this.rectPxBounds.getHeight()),o=this.rectPxBounds.getWidth(),n=Math.max(0,i-a);n=Math.min(n,this.ovmap.size.h-this.hComp-r);var l=Math.max(0,s-t);l=Math.min(l,this.ovmap.size.w-this.wComp-o),this.setRectPxBounds(new OpenLayers.Bounds(l,n+r,l+o,n))}},mapDivClick:function(e){var t=this.rectPxBounds.getCenterPixel(),a=e.xy.x-t.x,i=e.xy.y-t.y,s=this.rectPxBounds.top,r=this.rectPxBounds.left,o=Math.abs(this.rectPxBounds.getHeight()),n=this.rectPxBounds.getWidth(),l=Math.max(0,s+i);l=Math.min(l,this.ovmap.size.h-o);var c=Math.max(0,r+a);c=Math.min(c,this.ovmap.size.w-n),this.setRectPxBounds(new OpenLayers.Bounds(c,l+o,c+n,l)),this.updateMapToRect()},onButtonClick:function(e){e.buttonElement===this.minimizeDiv?this.minimizeControl():e.buttonElement===this.maximizeDiv&&this.maximizeControl()},maximizeControl:function(e){this.element.style.display="",this.showToggle(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.element.style.display="none",this.showToggle(!0),null!=e&&OpenLayers.Event.stop(e)},showToggle:function(e){this.maximizeDiv&&(this.maximizeDiv.style.display=e?"":"none"),this.minimizeDiv&&(this.minimizeDiv.style.display=e?"none":"")},update:function(){null==this.ovmap&&this.createMap(),!this.autoPan&&this.isSuitableOverview()||this.updateOverview(),this.updateRectToMap()},isSuitableOverview:function(){var e=this.map.getExtent(),t=this.map.getMaxExtent(),a=new OpenLayers.Bounds(Math.max(e.left,t.left),Math.max(e.bottom,t.bottom),Math.min(e.right,t.right),Math.min(e.top,t.top));this.ovmap.getProjection()!=this.map.getProjection()&&(a=a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()));var i=this.ovmap.getResolution()/this.map.getResolution();return i>this.minRatio&&i<=this.maxRatio&&this.ovmap.getExtent().containsBounds(a)},updateOverview:function(){var e=this.map.getResolution(),t=this.ovmap.getResolution(),a=t/e;a>this.maxRatio?t=this.minRatio*e:a<=this.minRatio&&(t=this.maxRatio*e);var i;this.ovmap.getProjection()!=this.map.getProjection()?(i=this.map.center.clone(),i.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())):i=this.map.center,this.ovmap.setCenter(i,this.ovmap.getZoomForResolution(t*this.resolutionFactor)),this.updateRectToMap()},createMap:function(){var e=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:!1},this.mapOptions);if(this.ovmap=new OpenLayers.Map(this.mapDiv,e),this.ovmap.viewPortDiv.appendChild(this.extentRectangle),OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy),this.ovmap.addLayers(this.layers),this.ovmap.zoomToMaxExtent(),this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width")),this.wComp=this.wComp?this.wComp:2,this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-bottom-width")),this.hComp=this.hComp?this.hComp:2,this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap}),this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:!0,double:!1,stopSingle:!0,stopDouble:!0,pixelTolerance:1,map:this.ovmap}),this.handlers.click.activate(),this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,!0),this.rectEvents.register("mouseover",this,function(e){this.handlers.drag.active||this.map.dragging||this.handlers.drag.activate()}),this.rectEvents.register("mouseout",this,function(e){this.handlers.drag.dragging||this.handlers.drag.deactivate()}),this.ovmap.getProjection()!=this.map.getProjection()){var t=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,a=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=t&&a?OpenLayers.INCHES_PER_UNIT[t]/OpenLayers.INCHES_PER_UNIT[a]:1}},updateRectToMap:function(){var e;e=this.ovmap.getProjection()!=this.map.getProjection()?this.map.getExtent().transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):this.map.getExtent();var t=this.getRectBoundsFromMapBounds(e);t&&this.setRectPxBounds(t)},updateMapToRect:function(){var e=this.getMapBoundsFromRectBounds(this.rectPxBounds);this.ovmap.getProjection()!=this.map.getProjection()&&(e=e.transform(this.ovmap.getProjectionObject(),this.map.getProjectionObject())),this.map.panTo(e.getCenterLonLat())},setRectPxBounds:function(e){var t=Math.max(e.top,0),a=Math.max(e.left,0),i=Math.min(e.top+Math.abs(e.getHeight()),this.ovmap.size.h-this.hComp),s=Math.min(e.left+e.getWidth(),this.ovmap.size.w-this.wComp),r=Math.max(s-a,0),o=Math.max(i-t,0);if(r<this.minRectSize||o<this.minRectSize){this.extentRectangle.className=this.displayClass+this.minRectDisplayClass;var n=a+r/2-this.minRectSize/2,l=t+o/2-this.minRectSize/2;this.extentRectangle.style.top=Math.round(l)+"px",this.extentRectangle.style.left=Math.round(n)+"px",this.extentRectangle.style.height=this.minRectSize+"px",this.extentRectangle.style.width=this.minRectSize+"px"}else this.extentRectangle.className=this.displayClass+"ExtentRectangle",this.extentRectangle.style.top=Math.round(t)+"px",this.extentRectangle.style.left=Math.round(a)+"px",this.extentRectangle.style.height=Math.round(o)+"px",this.extentRectangle.style.width=Math.round(r)+"px";this.rectPxBounds=new OpenLayers.Bounds(Math.round(a),Math.round(i),Math.round(s),Math.round(t))},getRectBoundsFromMapBounds:function(e){var t=this.getOverviewPxFromLonLat({lon:e.left,lat:e.bottom}),a=this.getOverviewPxFromLonLat({lon:e.right,lat:e.top}),i=null;return t&&a&&(i=new OpenLayers.Bounds(t.x,t.y,a.x,a.y)),i},getMapBoundsFromRectBounds:function(e){var t=this.getLonLatFromOverviewPx({x:e.left,y:e.bottom}),a=this.getLonLatFromOverviewPx({x:e.right,y:e.top});return new OpenLayers.Bounds(t.lon,t.lat,a.lon,a.lat)},getLonLatFromOverviewPx:function(e){var t=this.ovmap.size,a=this.ovmap.getResolution(),i=this.ovmap.getExtent().getCenterLonLat(),s=e.x-t.w/2,r=e.y-t.h/2;return{lon:i.lon+s*a,lat:i.lat-r*a}},getOverviewPxFromLonLat:function(e){var t=this.ovmap.getResolution(),a=this.ovmap.getExtent();if(a)return{x:Math.round(1/t*(e.lon-a.left)),y:Math.round(1/t*(a.top-e.lat))}},CLASS_NAME:"OpenLayers.Control.OverviewMap"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:["scales","resolutions","maxScale","minScale","maxResolution","minResolution","numZoomLevels","maxZoomLevel"],events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(e,t){this.metadata={},t=OpenLayers.Util.extend({},t),null!=this.alwaysInRange&&(t.alwaysInRange=this.alwaysInRange),this.addOptions(t),this.name=e,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object&&this.events.on(this.eventListeners))},destroy:function(e){null==e&&(e=!0),null!=this.map&&this.map.removeLayer(this,e),this.projection=null,this.map=null,this.name=null,this.div=null,this.options=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.eventListeners=null,this.events=null},clone:function(e){return null==e&&(e=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(e,this),e.map=null,e},getOptions:function(){var e={};for(var t in this.options)e[t]=this[t];return e},setName:function(e){e!=this.name&&(this.name=e,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(e,t){if(null==this.options&&(this.options={}),e&&("string"==typeof e.projection&&(e.projection=new OpenLayers.Projection(e.projection)),e.projection&&OpenLayers.Util.applyDefaults(e,OpenLayers.Projection.defaults[e.projection.getCode()]),!e.maxExtent||e.maxExtent instanceof OpenLayers.Bounds||(e.maxExtent=new OpenLayers.Bounds(e.maxExtent)),!e.minExtent||e.minExtent instanceof OpenLayers.Bounds||(e.minExtent=new OpenLayers.Bounds(e.minExtent))),OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits()),this.map){var a=this.map.getResolution(),i=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(var s in e)if(e.hasOwnProperty(s)&&OpenLayers.Util.indexOf(i,s)>=0){this.initResolutions(),t&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(a),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var e=!1;if(this.map){this.inRange=this.calculateInRange();var t=this.getExtent();if(t&&this.inRange&&this.visibility){var a=!0;this.moveTo(t,a,!1),this.events.triggerEvent("moveend",{zoomChanged:a}),e=!0}}return e},moveTo:function(e,t,a){var i=this.visibility;this.isBaseLayer||(i=i&&this.inRange),this.display(i)},moveByPx:function(e,t){},setMap:function(e){if(null==this.map){if(this.map=e,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.units=this.projection.getUnits()||this.units||this.map.units,this.initResolutions(),!this.isBaseLayer){this.inRange=this.calculateInRange();var t=this.visibility&&this.inRange;this.div.style.display=t?"":"none"}this.setTileSize()}},afterAdd:function(){},removeMap:function(e){},getImageSize:function(e){return this.imageSize||this.tileSize},setTileSize:function(e){var t=e?e:this.tileSize?this.tileSize:this.map.getTileSize();this.tileSize=t,this.gutter&&(this.imageSize=new OpenLayers.Size(t.w+2*this.gutter,t.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(e){e!=this.visibility&&(this.visibility=e,this.display(e),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(e){e!=("none"!=this.div.style.display)&&(this.div.style.display=e&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var e=!1;if(this.alwaysInRange)e=!0;else if(this.map){var t=this.map.getResolution();e=t>=this.minResolution&&t<=this.maxResolution}return e},setIsBaseLayer:function(e){e!=this.isBaseLayer&&(this.isBaseLayer=e,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){var e,t,a,i={},s=!0;for(e=0,t=this.RESOLUTION_PROPERTIES.length;e<t;e++)a=this.RESOLUTION_PROPERTIES[e],i[a]=this.options[a],s&&this.options[a]&&(s=!1);if(null==this.options.alwaysInRange&&(this.alwaysInRange=s),null==i.resolutions&&(i.resolutions=this.resolutionsFromScales(i.scales)),null==i.resolutions&&(i.resolutions=this.calculateResolutions(i)),null==i.resolutions){for(e=0,t=this.RESOLUTION_PROPERTIES.length;e<t;e++)a=this.RESOLUTION_PROPERTIES[e],i[a]=null!=this.options[a]?this.options[a]:this.map[a];null==i.resolutions&&(i.resolutions=this.resolutionsFromScales(i.scales)),null==i.resolutions&&(i.resolutions=this.calculateResolutions(i))}var r;this.options.maxResolution&&"auto"!==this.options.maxResolution&&(r=this.options.maxResolution),this.options.minScale&&(r=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units));var o;if(this.options.minResolution&&"auto"!==this.options.minResolution&&(o=this.options.minResolution),this.options.maxScale&&(o=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),i.resolutions&&(i.resolutions.sort(function(e,t){return t-e}),r||(r=i.resolutions[0]),!o)){var n=i.resolutions.length-1;o=i.resolutions[n]}if(this.resolutions=i.resolutions,this.resolutions){for(t=this.resolutions.length,this.scales=new Array(t),e=0;e<t;e++)this.scales[e]=OpenLayers.Util.getScaleFromResolution(this.resolutions[e],this.units);this.numZoomLevels=t}this.minResolution=o,o&&(this.maxScale=OpenLayers.Util.getScaleFromResolution(o,this.units)),this.maxResolution=r,r&&(this.minScale=OpenLayers.Util.getScaleFromResolution(r,this.units))},resolutionsFromScales:function(e){if(null!=e){var t,a,i;for(i=e.length,t=new Array(i),a=0;a<i;a++)t[a]=OpenLayers.Util.getResolutionFromScale(e[a],this.units);return t}},calculateResolutions:function(e){var t,a,i,s=e.maxResolution;null!=e.minScale?s=OpenLayers.Util.getResolutionFromScale(e.minScale,this.units):"auto"==s&&null!=this.maxExtent&&(t=this.map.getSize(),a=this.maxExtent.getWidth()/t.w,i=this.maxExtent.getHeight()/t.h,s=Math.max(a,i));var r=e.minResolution;if(null!=e.maxScale?r=OpenLayers.Util.getResolutionFromScale(e.maxScale,this.units):"auto"==e.minResolution&&null!=this.minExtent&&(t=this.map.getSize(),a=this.minExtent.getWidth()/t.w,i=this.minExtent.getHeight()/t.h,r=Math.max(a,i)),"number"!=typeof s&&"number"!=typeof r&&null!=this.maxExtent){var o=this.map.getTileSize();s=Math.max(this.maxExtent.getWidth()/o.w,this.maxExtent.getHeight()/o.h)}var n=e.maxZoomLevel,l=e.numZoomLevels;if("number"==typeof r&&"number"==typeof s&&void 0===l){var c=s/r;l=Math.floor(Math.log(c)/Math.log(2))+1}else void 0===l&&null!=n&&(l=n+1);if(!("number"!=typeof l||l<=0||"number"!=typeof s&&"number"!=typeof r)){var d=new Array(l),p=2;"number"==typeof r&&"number"==typeof s&&(p=Math.pow(s/r,1/(l-1)));var u;if("number"==typeof s)for(u=0;u<l;u++)d[u]=s/Math.pow(p,u);else for(u=0;u<l;u++)d[l-1-u]=r*Math.pow(p,u);return d}},getResolution:function(){var e=this.map.getZoom();return this.getResolutionForZoom(e)},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(e,t){var a=this.map.getSize(),i=Math.max(e.getWidth()/a.w,e.getHeight()/a.h);return this.getZoomForResolution(i,t)},getDataExtent:function(){},getResolutionForZoom:function(e){e=Math.max(0,Math.min(e,this.resolutions.length-1));var t;if(this.map.fractionalZoom){var a=Math.floor(e),i=Math.ceil(e);t=this.resolutions[a]-(e-a)*(this.resolutions[a]-this.resolutions[i])}else t=this.resolutions[Math.round(e)];return t},getZoomForResolution:function(e,t){var a,i,s;if(this.map.fractionalZoom){var r,o=0,n=this.resolutions.length-1,l=this.resolutions[o],c=this.resolutions[n];for(i=0,s=this.resolutions.length;i<s;++i)if(r=this.resolutions[i],r>=e&&(l=r,o=i),r<=e){c=r,n=i;break}var d=l-c;a=d>0?o+(l-e)/d:o}else{var p,u=Number.POSITIVE_INFINITY;for(i=0,s=this.resolutions.length;i<s;i++)if(t){if(p=Math.abs(this.resolutions[i]-e),p>u)break;u=p}else if(this.resolutions[i]<e)break;a=Math.max(0,i-1)}return a},getLonLatFromViewPortPx:function(e){var t=null,a=this.map;if(null!=e&&a.minPx){var i=a.getResolution(),s=a.getMaxExtent({restricted:!0}),r=(e.x-a.minPx.x)*i+s.left,o=(a.minPx.y-e.y)*i+s.top;t=new OpenLayers.LonLat(r,o),this.wrapDateLine&&(t=t.wrapDateLine(this.maxExtent))}return t},getViewPortPxFromLonLat:function(e,t){var a=null;if(null!=e){t=t||this.map.getResolution();var i=this.map.calculateBounds(null,t);a=new OpenLayers.Pixel(1/t*(e.lon-i.left),1/t*(i.top-e.lat))}return a},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=this.div.childNodes,a=0,i=t.length;a<i;++a){var s=t[a].firstChild||t[a],r=t[a].lastChild;r&&"iframe"===r.nodeName.toLowerCase()&&(s=r.parentNode),OpenLayers.Util.modifyDOMElement(s,null,null,null,null,null,null,e)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(e){this.div.style.zIndex=e},adjustBounds:function(e){if(this.gutter){var t=this.gutter*this.map.getResolution();e=new OpenLayers.Bounds(e.left-t,e.bottom-t,e.right+t,e.top+t)}if(this.wrapDateLine){var a={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()};e=e.wrapDateLine(this.maxExtent,a)}return e},CLASS_NAME:"OpenLayers.Layer"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.SphericalMercator={getExtent:function(){var e=null;return e=this.sphericalMercator?this.map.calculateBounds():OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this)},getLonLatFromViewPortPx:function(e){return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this,arguments)},getViewPortPxFromLonLat:function(e){return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this,arguments)},initMercatorParameters:function(){this.RESOLUTIONS=[];for(var e=156543.03390625,t=0;t<=this.MAX_ZOOM_LEVEL;++t)this.RESOLUTIONS[t]=e/Math.pow(2,t);this.units="m",this.projection=this.projection||"EPSG:900913"},forwardMercator:function(){var e=new OpenLayers.Projection("EPSG:4326"),t=new OpenLayers.Projection("EPSG:900913");return function(a,i){var s=OpenLayers.Projection.transform({x:a,y:i},e,t);return new OpenLayers.LonLat(s.x,s.y)}}(),inverseMercator:function(){var e=new OpenLayers.Projection("EPSG:4326"),t=new OpenLayers.Projection("EPSG:900913");return function(a,i){var s=OpenLayers.Projection.transform({x:a,y:i},t,e);return new OpenLayers.LonLat(s.x,s.y)}}()},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.EventPane=OpenLayers.Class(OpenLayers.Layer,{smoothDragPan:!0,isBaseLayer:!0,isFixed:!0,pane:null,mapObject:null,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),null==this.pane&&(this.pane=OpenLayers.Util.createDiv(this.div.id+"_EventPane"))},destroy:function(){this.mapObject=null,this.pane=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1,this.pane.style.display=this.div.style.display,this.pane.style.width="100%",this.pane.style.height="100%","msie"==OpenLayers.BROWSER_NAME&&(this.pane.style.background="url("+OpenLayers.Util.getImageLocation("blank.gif")+")"),this.isFixed?this.map.viewPortDiv.appendChild(this.pane):this.map.layerContainerDiv.appendChild(this.pane),this.loadMapObject(),null==this.mapObject&&this.loadWarningMessage()},removeMap:function(e){this.pane&&this.pane.parentNode&&this.pane.parentNode.removeChild(this.pane),OpenLayers.Layer.prototype.removeMap.apply(this,arguments)},loadWarningMessage:function(){this.div.style.backgroundColor="darkblue";var e=this.map.getSize(),t=Math.min(e.w,300),a=Math.min(e.h,200),i=new OpenLayers.Size(t,a),s=new OpenLayers.Pixel(e.w/2,e.h/2),r=s.add(-i.w/2,-i.h/2),o=OpenLayers.Util.createDiv(this.name+"_warning",r,i,null,null,null,"auto");o.style.padding="7px",o.style.backgroundColor="yellow",o.innerHTML=this.getWarningHTML(),this.div.appendChild(o)},getWarningHTML:function(){return""},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments),this.pane.style.display=this.div.style.display},setZIndex:function(e){OpenLayers.Layer.prototype.setZIndex.apply(this,arguments),this.pane.style.zIndex=parseInt(this.div.style.zIndex)+1},moveByPx:function(e,t){OpenLayers.Layer.prototype.moveByPx.apply(this,arguments),this.dragPanMapObject?this.dragPanMapObject(e,-t):this.moveTo(this.map.getCachedCenter())},moveTo:function(e,t,a){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),null!=this.mapObject){var i=this.map.getCenter(),s=this.map.getZoom();if(null!=i){var r=this.getMapObjectCenter(),o=this.getOLLonLatFromMapObjectLonLat(r),n=this.getMapObjectZoom(),l=this.getOLZoomFromMapObjectZoom(n);if(!i.equals(o)||s!=l)if(!t&&o&&this.dragPanMapObject&&this.smoothDragPan){var c=this.map.getViewPortPxFromLonLat(o),d=this.map.getViewPortPxFromLonLat(i);this.dragPanMapObject(d.x-c.x,c.y-d.y)}else{var p=this.getMapObjectLonLatFromOLLonLat(i),u=this.getMapObjectZoomFromOLZoom(s);this.setMapObjectCenter(p,u,a)}}}},getLonLatFromViewPortPx:function(e){var t=null;if(null!=this.mapObject&&null!=this.getMapObjectCenter()){var a=this.getMapObjectPixelFromOLPixel(e),i=this.getMapObjectLonLatFromMapObjectPixel(a);t=this.getOLLonLatFromMapObjectLonLat(i)}return t},getViewPortPxFromLonLat:function(e){var t=null;if(null!=this.mapObject&&null!=this.getMapObjectCenter()){var a=this.getMapObjectLonLatFromOLLonLat(e),i=this.getMapObjectPixelFromMapObjectLonLat(a);t=this.getOLPixelFromMapObjectPixel(i)}return t},getOLLonLatFromMapObjectLonLat:function(e){var t=null;if(null!=e){var a=this.getLongitudeFromMapObjectLonLat(e),i=this.getLatitudeFromMapObjectLonLat(e);t=new OpenLayers.LonLat(a,i)}return t},getMapObjectLonLatFromOLLonLat:function(e){var t=null;return null!=e&&(t=this.getMapObjectLonLatFromLonLat(e.lon,e.lat)),t},getOLPixelFromMapObjectPixel:function(e){var t=null;if(null!=e){var a=this.getXFromMapObjectPixel(e),i=this.getYFromMapObjectPixel(e);t=new OpenLayers.Pixel(a,i)}return t},getMapObjectPixelFromOLPixel:function(e){var t=null;return null!=e&&(t=this.getMapObjectPixelFromXY(e.x,e.y)),t},CLASS_NAME:"OpenLayers.Layer.EventPane"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.FixedZoomLevels=OpenLayers.Class({initialize:function(){},initResolutions:function(){for(var e=["minZoomLevel","maxZoomLevel","numZoomLevels"],t=0,a=e.length;t<a;t++){var i=e[t];this[i]=null!=this.options[i]?this.options[i]:this.map[i]}(null==this.minZoomLevel||this.minZoomLevel<this.MIN_ZOOM_LEVEL)&&(this.minZoomLevel=this.MIN_ZOOM_LEVEL);var s,r=this.MAX_ZOOM_LEVEL-this.minZoomLevel+1;if(s=null==this.options.numZoomLevels&&null!=this.options.maxZoomLevel||null==this.numZoomLevels&&null!=this.maxZoomLevel?this.maxZoomLevel-this.minZoomLevel+1:this.numZoomLevels,null!=s?this.numZoomLevels=Math.min(s,r):this.numZoomLevels=r,this.maxZoomLevel=this.minZoomLevel+this.numZoomLevels-1,null!=this.RESOLUTIONS){var o=0;this.resolutions=[];for(var t=this.minZoomLevel;t<=this.maxZoomLevel;t++)this.resolutions[o++]=this.RESOLUTIONS[t];this.maxResolution=this.resolutions[0],this.minResolution=this.resolutions[this.resolutions.length-1]}},getResolution:function(){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getResolution.apply(this,arguments);var e=null,t=this.map.getSize(),a=this.getExtent();return null!=t&&null!=a&&(e=Math.max(a.getWidth()/t.w,a.getHeight()/t.h)),e},getExtent:function(){var e=this.map.getSize(),t=this.getLonLatFromViewPortPx({x:0,y:0}),a=this.getLonLatFromViewPortPx({x:e.w,y:e.h});return null!=t&&null!=a?new OpenLayers.Bounds(t.lon,a.lat,a.lon,t.lat):null},getZoomForResolution:function(e){if(null!=this.resolutions)return OpenLayers.Layer.prototype.getZoomForResolution.apply(this,arguments);var t=OpenLayers.Layer.prototype.getExtent.apply(this,[]);return this.getZoomForExtent(t)},getOLZoomFromMapObjectZoom:function(e){var t=null;return null!=e&&(t=e-this.minZoomLevel,this.map.baseLayer!==this&&(t=this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))),t},getMapObjectZoomFromOLZoom:function(e){var t=null;return null!=e&&(t=e+this.minZoomLevel,this.map.baseLayer!==this&&(t=this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))),t},CLASS_NAME:"OpenLayers.Layer.FixedZoomLevels"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Google=OpenLayers.Class(OpenLayers.Layer.EventPane,OpenLayers.Layer.FixedZoomLevels,{MIN_ZOOM_LEVEL:0,MAX_ZOOM_LEVEL:21,RESOLUTIONS:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953125,858306884765625e-19,4291534423828125e-20,2145767211914062e-20,1072883605957031e-20,536441802978515e-20,268220901489257e-20,1341104507446289e-21,6.705522537231445e-7],type:null,wrapDateLine:!0,sphericalMercator:!1,version:null,initialize:function(e,t){t=t||{},t.version||(t.version="function"==typeof GMap2?"2":"3");var a=OpenLayers.Layer.Google["v"+t.version.replace(/\./g,"_")];if(!a)throw"Unsupported Google Maps API version: "+t.version;OpenLayers.Util.applyDefaults(t,a),OpenLayers.Util.applyDefaults(t,a.DEFAULTS),t.maxExtent&&(t.maxExtent=t.maxExtent.clone()),OpenLayers.Layer.EventPane.prototype.initialize.apply(this,[e,t]),OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this,[e,t]),this.sphericalMercator&&(OpenLayers.Util.extend(this,OpenLayers.Layer.SphericalMercator),this.initMercatorParameters())},clone:function(){return new OpenLayers.Layer.Google(this.name,this.getOptions())},setVisibility:function(e){var t=null==this.opacity?1:this.opacity;OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this,arguments),this.setOpacity(t)},display:function(e){this._dragging||this.setGMapVisibility(e),OpenLayers.Layer.EventPane.prototype.display.apply(this,arguments)},moveTo:function(e,t,a){this._dragging=a,OpenLayers.Layer.EventPane.prototype.moveTo.apply(this,arguments),delete this._dragging},setOpacity:function(e){if(e!==this.opacity&&(null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"}),this.opacity=e),this.getVisibility()){var t=this.getMapContainer();OpenLayers.Util.modifyDOMElement(t,null,null,null,null,null,null,e)}},destroy:function(){if(this.map){this.setGMapVisibility(!1);var e=OpenLayers.Layer.Google.cache[this.map.id];e&&e.count<=1&&this.removeGMapElements()}OpenLayers.Layer.EventPane.prototype.destroy.apply(this,arguments)},removeGMapElements:function(){var e=OpenLayers.Layer.Google.cache[this.map.id];if(e){var t=this.mapObject&&this.getMapContainer();t&&t.parentNode&&t.parentNode.removeChild(t);var a=e.termsOfUse;a&&a.parentNode&&a.parentNode.removeChild(a);var i=e.poweredBy;i&&i.parentNode&&i.parentNode.removeChild(i),this.mapObject&&window.google&&google.maps&&google.maps.event&&google.maps.event.clearListeners&&google.maps.event.clearListeners(this.mapObject,"tilesloaded")}},removeMap:function(e){this.visibility&&this.mapObject&&this.setGMapVisibility(!1);var t=OpenLayers.Layer.Google.cache[e.id];t&&(t.count<=1?(this.removeGMapElements(),delete OpenLayers.Layer.Google.cache[e.id]):--t.count),delete this.termsOfUse,delete this.poweredBy,delete this.mapObject,delete this.dragObject,OpenLayers.Layer.EventPane.prototype.removeMap.apply(this,arguments)},getOLBoundsFromMapObjectBounds:function(e){var t=null;if(null!=e){var a=e.getSouthWest(),i=e.getNorthEast();this.sphericalMercator?(a=this.forwardMercator(a.lng(),a.lat()),i=this.forwardMercator(i.lng(),i.lat())):(a=new OpenLayers.LonLat(a.lng(),a.lat()),i=new OpenLayers.LonLat(i.lng(),i.lat())),t=new OpenLayers.Bounds(a.lon,a.lat,i.lon,i.lat)}return t},getWarningHTML:function(){return OpenLayers.i18n("googleWarning")},getMapObjectCenter:function(){return this.mapObject.getCenter()},getMapObjectZoom:function(){return this.mapObject.getZoom()},getLongitudeFromMapObjectLonLat:function(e){return this.sphericalMercator?this.forwardMercator(e.lng(),e.lat()).lon:e.lng()},getLatitudeFromMapObjectLonLat:function(e){var t=this.sphericalMercator?this.forwardMercator(e.lng(),e.lat()).lat:e.lat();return t},getXFromMapObjectPixel:function(e){return e.x},getYFromMapObjectPixel:function(e){return e.y},CLASS_NAME:"OpenLayers.Layer.Google"}),OpenLayers.Layer.Google.cache={},OpenLayers.Layer.Google.v2={/**
     * Property: termsOfUse
     * {DOMElement} Div for Google's copyright and terms of use link
     */
termsOfUse:null,poweredBy:null,dragObject:null,loadMapObject:function(){this.type||(this.type=G_NORMAL_MAP);var e,t,a,i=OpenLayers.Layer.Google.cache[this.map.id];if(i)e=i.mapObject,t=i.termsOfUse,a=i.poweredBy,++i.count;else{var s=this.map.viewPortDiv,r=document.createElement("div");r.id=this.map.id+"_GMap2Container",r.style.position="absolute",r.style.width="100%",r.style.height="100%",s.appendChild(r);try{e=new GMap2(r),t=r.lastChild,s.appendChild(t),t.style.zIndex="1100",t.style.right="",t.style.bottom="",t.className="olLayerGoogleCopyright",a=r.lastChild,s.appendChild(a),a.style.zIndex="1100",a.style.right="",a.style.bottom="",a.className="olLayerGooglePoweredBy gmnoprint"}catch(e){throw e}OpenLayers.Layer.Google.cache[this.map.id]={mapObject:e,termsOfUse:t,poweredBy:a,count:1}}this.mapObject=e,this.termsOfUse=t,this.poweredBy=a,OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),this.type)===-1&&this.mapObject.addMapType(this.type),"function"==typeof e.getDragObject?this.dragObject=e.getDragObject():this.dragPanMapObject=null,this.isBaseLayer===!1&&this.setGMapVisibility("none"!==this.div.style.display)},onMapResize:function(){if(this.visibility&&this.mapObject.isLoaded())this.mapObject.checkResize();else{if(!this._resized)var e=this,t=GEvent.addListener(this.mapObject,"load",function(){GEvent.removeListener(t),delete e._resized,e.mapObject.checkResize(),e.moveTo(e.map.getCenter(),e.map.getZoom())});this._resized=!0}},setGMapVisibility:function(e){var t=OpenLayers.Layer.Google.cache[this.map.id];if(t){var a=this.mapObject.getContainer();e===!0?(this.mapObject.setMapType(this.type),a.style.display="",this.termsOfUse.style.left="",this.termsOfUse.style.display="",this.poweredBy.style.display="",t.displayed=this.id):(t.displayed===this.id&&delete t.displayed,t.displayed||(a.style.display="none",this.termsOfUse.style.display="none",this.termsOfUse.style.left="-9999px",this.poweredBy.style.display="none"))}},getMapContainer:function(){return this.mapObject.getContainer()},getMapObjectBoundsFromOLBounds:function(e){var t=null;if(null!=e){var a=this.sphericalMercator?this.inverseMercator(e.bottom,e.left):new OpenLayers.LonLat(e.bottom,e.left),i=this.sphericalMercator?this.inverseMercator(e.top,e.right):new OpenLayers.LonLat(e.top,e.right);t=new GLatLngBounds(new GLatLng(a.lat,a.lon),new GLatLng(i.lat,i.lon))}return t},setMapObjectCenter:function(e,t){this.mapObject.setCenter(e,t)},dragPanMapObject:function(e,t){this.dragObject.moveBy(new GSize(-e,t))},getMapObjectLonLatFromMapObjectPixel:function(e){return this.mapObject.fromContainerPixelToLatLng(e)},getMapObjectPixelFromMapObjectLonLat:function(e){return this.mapObject.fromLatLngToContainerPixel(e)},getMapObjectZoomFromMapObjectBounds:function(e){return this.mapObject.getBoundsZoomLevel(e)},getMapObjectLonLatFromLonLat:function(e,t){var a;if(this.sphericalMercator){var i=this.inverseMercator(e,t);a=new GLatLng(i.lat,i.lon)}else a=new GLatLng(t,e);return a},getMapObjectPixelFromXY:function(e,t){return new GPoint(e,t)}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(e){window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[e]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={};for(var t in this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(e,t){this.namespaces[e]=t,this.namespaceAlias[t]=e},read:function(e){var t=e.indexOf("<");t>0&&(e=e.substring(t));var a=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var t;return t=window.ActiveXObject&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom,t.loadXML(e),t},this),function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new XMLHttpRequest;return t.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(e),!1),t.overrideMimeType&&t.overrideMimeType("text/xml"),t.send(null),t.responseXML});return this.keepData&&(this.data=a),a},write:function(e){var t;if(this.xmldom)t=e.xml;else{var a=new XMLSerializer;if(1==e.nodeType){var i=document.implementation.createDocument("","",null);i.importNode&&(e=i.importNode(e,!0)),i.appendChild(e),t=a.serializeToString(i)}else t=a.serializeToString(e)}return t},createElementNS:function(e,t){var a;return a=this.xmldom?"string"==typeof e?this.xmldom.createNode(1,t,e):this.xmldom.createNode(1,t,""):document.createElementNS(e,t)},createDocumentFragment:function(){var e;return e=this.xmldom?this.xmldom.createDocumentFragment():document.createDocumentFragment()},createTextNode:function(e){var t;return"string"!=typeof e&&(e=String(e)),t=this.xmldom?this.xmldom.createTextNode(e):document.createTextNode(e)},getElementsByTagNameNS:function(e,t,a){var i=[];if(e.getElementsByTagNameNS)i=e.getElementsByTagNameNS(t,a);else for(var s,r,o=e.getElementsByTagName("*"),n=0,l=o.length;n<l;++n)s=o[n],r=s.prefix?s.prefix+":"+a:a,"*"!=a&&r!=s.nodeName||"*"!=t&&t!=s.namespaceURI||i.push(s);return i},getAttributeNodeNS:function(e,t,a){var i=null;if(e.getAttributeNodeNS)i=e.getAttributeNodeNS(t,a);else for(var s,r,o=e.attributes,n=0,l=o.length;n<l;++n)if(s=o[n],s.namespaceURI==t&&(r=s.prefix?s.prefix+":"+a:a,r==s.nodeName)){i=s;break}return i},getAttributeNS:function(e,t,a){var i="";if(e.getAttributeNS)i=e.getAttributeNS(t,a)||"";else{var s=this.getAttributeNodeNS(e,t,a);s&&(i=s.nodeValue)}return i},getChildValue:function(e,t){var a=t||"";if(e)for(var i=e.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 3:case 4:a+=i.nodeValue}return a},isSimpleContent:function(e){for(var t=!0,a=e.firstChild;a;a=a.nextSibling)if(1===a.nodeType){t=!1;break}return t},contentType:function(e){for(var t=!1,a=!1,i=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY,s=e.firstChild;s;s=s.nextSibling){switch(s.nodeType){case 1:a=!0;break;case 8:break;default:t=!0}if(a&&t)break}if(a&&t)i=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(a)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(t)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return i},hasAttributeNS:function(e,t,a){var i=!1;return i=e.hasAttributeNS?e.hasAttributeNS(t,a):!!this.getAttributeNodeNS(e,t,a)},setAttributeNS:function(e,t,a,i){if(e.setAttributeNS)e.setAttributeNS(t,a,i);else{if(!this.xmldom)throw"setAttributeNS not implemented";if(t){var s=e.ownerDocument.createNode(2,a,t);s.nodeValue=i,e.setAttributeNode(s)}else e.setAttribute(a,i)}},createElementNSPlus:function(e,t){t=t||{};var a=t.uri||this.namespaces[t.prefix];if(!a){var i=e.indexOf(":");a=this.namespaces[e.substring(0,i)]}a||(a=this.namespaces[this.defaultPrefix]);var s=this.createElementNS(a,e);t.attributes&&this.setAttributes(s,t.attributes);var r=t.value;return null!=r&&s.appendChild(this.createTextNode(r)),s},setAttributes:function(e,t){var a,i;for(var s in t)null!=t[s]&&t[s].toString&&(a=t[s].toString(),i=this.namespaces[s.substring(0,s.indexOf(":"))]||null,this.setAttributeNS(e,i,s,a))},readNode:function(e,t){t||(t={});var a=this.readers[e.namespaceURI?this.namespaceAlias[e.namespaceURI]:this.defaultPrefix];if(a){var i=e.localName||e.nodeName.split(":").pop(),s=a[i]||a["*"];s&&s.apply(this,[e,t])}return t},readChildNodes:function(e,t){t||(t={});for(var a,i=e.childNodes,s=0,r=i.length;s<r;++s)a=i[s],1==a.nodeType&&this.readNode(a,t);return t},writeNode:function(e,t,a){var i,s,r=e.indexOf(":");r>0?(i=e.substring(0,r),s=e.substring(r+1)):(i=a?this.namespaceAlias[a.namespaceURI]:this.defaultPrefix,s=e);var o=this.writers[i][s].apply(this,[t]);return a&&a.appendChild(o),o},getChildEl:function(e,t,a){return e&&this.getThisOrNextEl(e.firstChild,t,a)},getNextEl:function(e,t,a){return e&&this.getThisOrNextEl(e.nextSibling,t,a)},getThisOrNextEl:function(e,t,a){e:for(var i=e;i;i=i.nextSibling)switch(i.nodeType){case 1:if(!(t&&t!==(i.localName||i.nodeName.split(":").pop())||a&&a!==i.namespaceURI))break e;i=null;break e;case 3:if(/^\s*$/.test(i.nodeValue))break;case 4:case 6:case 12:case 10:case 11:i=null;break e}return i||null},lookupNamespaceURI:function(e,t){var a=null;if(e)if(e.lookupNamespaceURI)a=e.lookupNamespaceURI(t);else e:switch(e.nodeType){case 1:if(null!==e.namespaceURI&&e.prefix===t){a=e.namespaceURI;break e}var i=e.attributes.length;if(i)for(var s,r=0;r<i;++r){if(s=e.attributes[r],"xmlns"===s.prefix&&s.name==="xmlns:"+t){a=s.value||null;break e}if("xmlns"===s.name&&null===t){a=s.value||null;break e}}a=this.lookupNamespaceURI(e.parentNode,t);break e;case 2:a=this.lookupNamespaceURI(e.ownerElement,t);break e;case 9:a=this.lookupNamespaceURI(e.documentElement,t);break e;case 6:case 12:case 10:case 11:break e;default:a=this.lookupNamespaceURI(e.parentNode,t)}return a},getXMLDoc:function(){return OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&window.ActiveXObject&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFST=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.WFST.DEFAULTS);var t=OpenLayers.Format.WFST["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported WFST version: "+e.version;return new t(e)},OpenLayers.Format.WFST.DEFAULTS={version:"1.0.0"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(e,t,a){this.layer=e,this.lonlat=t,this.data=null!=a?a:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),this.layer=null,this.id=null,this.lonlat=null,this.data=null,null!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var e=!1;if(null!=this.layer&&null!=this.layer.map){var t=this.layer.map.getExtent();e=t.containsLonLat(this.lonlat)}return e},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(e){if(null!=this.lonlat){if(!this.popup){var t=this.marker?this.marker.icon:null,a=this.popupClass?this.popupClass:OpenLayers.Popup.Anchored;this.popup=new a(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,t,e)}null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this}return this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(e,t,a){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,t]),this.lonlat=null,this.geometry=e?e:null,this.state=null,this.attributes={},t&&(this.attributes=OpenLayers.Util.extend(this.attributes,t)),this.style=a?a:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,this.modified=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(e){var t=!1;if(this.layer&&this.layer.map){var a=this.layer.map.getExtent();if(e){var i=this.geometry.getBounds();t=a.intersectsBounds(i)}else{var s=a.toGeometry();t=s.intersects(this.geometry)}}return t},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(e,t,a){var i=!1;return this.geometry&&(i=this.geometry.atPoint(e,t,a)),i},destroyPopup:function(){},move:function(e){if(this.layer&&this.geometry.move){var t;t="OpenLayers.LonLat"==e.CLASS_NAME?this.layer.getViewPortPxFromLonLat(e):e;var a=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),i=this.layer.map.getResolution();return this.geometry.move(i*(t.x-a.x),i*(a.y-t.y)),this.layer.drawFeature(this),a}},toState:function(e){if(e==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=e;break;case OpenLayers.State.UPDATE:case OpenLayers.State.INSERT:}else if(e==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=e}else if(e==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.INSERT:break;case OpenLayers.State.DELETE:break;case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=e}else e==OpenLayers.State.UNKNOWN&&(this.state=e)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.rules=[],t&&t.rules&&this.addRules(t.rules),this.setDefaultStyle(e||OpenLayers.Feature.Vector.style.default),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy(),this.rules[e]=null;this.rules=null,this.defaultStyle=null},createSymbolizer:function(e){for(var t,a=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),e),i=this.rules,s=[],r=!1,o=0,n=i.length;o<n;o++){t=i[o];var l=t.evaluate(e);l&&(t instanceof OpenLayers.Rule&&t.elseFilter?s.push(t):(r=!0,this.applySymbolizer(t,a,e)))}if(0==r&&s.length>0){r=!0;for(var o=0,n=s.length;o<n;o++)this.applySymbolizer(s[o],a,e)}return i.length>0&&0==r&&(a.display="none"),null!=a.label&&"string"!=typeof a.label&&(a.label=String(a.label)),a},applySymbolizer:function(e,t,a){var i=a.geometry?this.getSymbolizerPrefix(a.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0],s=e.symbolizer[i]||e.symbolizer;if(this.defaultsPerSymbolizer===!0){var r=this.defaultStyle;OpenLayers.Util.applyDefaults(s,{pointRadius:r.pointRadius}),s.stroke!==!0&&s.graphic!==!0||OpenLayers.Util.applyDefaults(s,{strokeWidth:r.strokeWidth,strokeColor:r.strokeColor,strokeOpacity:r.strokeOpacity,strokeDashstyle:r.strokeDashstyle,strokeLinecap:r.strokeLinecap}),s.fill!==!0&&s.graphic!==!0||OpenLayers.Util.applyDefaults(s,{fillColor:r.fillColor,fillOpacity:r.fillOpacity}),s.graphic===!0&&OpenLayers.Util.applyDefaults(s,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})}return this.createLiterals(OpenLayers.Util.extend(t,s),a)},createLiterals:function(e,t){var a=OpenLayers.Util.extend({},t.attributes||t.data);OpenLayers.Util.extend(a,this.context);for(var i in this.propertyStyles)e[i]=OpenLayers.Style.createLiteral(e[i],a,t,i);return e},findPropertyStyles:function(){var e={},t=this.defaultStyle;this.addPropertyStyles(e,t);for(var a,i,s=this.rules,r=0,o=s.length;r<o;r++){a=s[r].symbolizer;for(var n in a){if(i=a[n],"object"!=typeof i){this.addPropertyStyles(e,a);break}this.addPropertyStyles(e,i)}}return e},addPropertyStyles:function(e,t){var a;for(var i in t)a=t[i],"string"==typeof a&&a.match(/\$\{\w+\}/)&&(e[i]=!0);return e},addRules:function(e){Array.prototype.push.apply(this.rules,e),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(e){this.defaultStyle=e,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(e){for(var t=OpenLayers.Style.SYMBOLIZER_PREFIXES,a=0,i=t.length;a<i;a++)if(e.CLASS_NAME.indexOf(t[a])!=-1)return t[a]},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,a=this.rules.length;t<a;++t)e.rules.push(this.rules[t].clone())}e.context=this.context&&OpenLayers.Util.extend({},this.context);var i=OpenLayers.Util.extend({},this.defaultStyle);return new OpenLayers.Style(i,e)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(e,t,a,i){return"string"==typeof e&&e.indexOf("${")!=-1&&(e=OpenLayers.String.format(e,t,[a,i]),e=isNaN(e)||!e?e:parseFloat(e)),e},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Filter=OpenLayers.Class({initialize:function(e){OpenLayers.Util.extend(this,e)},destroy:function(){},evaluate:function(e){return!0},clone:function(){return null},toString:function(){var e;return e=OpenLayers.Format&&OpenLayers.Format.CQL?OpenLayers.Format.CQL.prototype.write(this):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Filter"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,evaluate:function(e){var t=!1;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:if(e.geometry){var a=this.value;"OpenLayers.Bounds"==this.value.CLASS_NAME&&(a=this.value.toGeometry()),e.geometry.intersects(a)&&(t=!0)}break;default:throw new Error("evaluate is not implemented for this filter type.")}return t},clone:function(){var e=OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(e)},CLASS_NAME:"OpenLayers.Filter.Spatial"}),OpenLayers.Filter.Spatial.BBOX="BBOX",OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS",OpenLayers.Filter.Spatial.DWITHIN="DWITHIN",OpenLayers.Filter.Spatial.WITHIN="WITHIN",OpenLayers.Filter.Spatial.CONTAINS="CONTAINS",/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(e){this.fids=[],OpenLayers.Filter.prototype.initialize.apply(this,[e])},evaluate:function(e){for(var t=0,a=this.fids.length;t<a;t++){var i=e.fid||e.id;if(i==this.fids[t])return!0}return!1},clone:function(){var e=new OpenLayers.Filter.FeatureId;return OpenLayers.Util.extend(e,this),e.fids=this.fids.slice(),e},CLASS_NAME:"OpenLayers.Filter.FeatureId"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFST.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs",gml:"http://www.opengis.net/gml",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows"},defaultPrefix:"wfs",version:null,schemaLocations:null,srsName:null,extractAttributes:!0,xy:!0,stateName:null,initialize:function(e){this.stateName={},this.stateName[OpenLayers.State.INSERT]="wfs:Insert",this.stateName[OpenLayers.State.UPDATE]="wfs:Update",this.stateName[OpenLayers.State.DELETE]="wfs:Delete",OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},getSrsName:function(e,t){var a=t&&t.srsName;return a||(a=e&&e.layer?e.layer.projection.getCode():this.srsName),a},read:function(e,t){t=t||{},OpenLayers.Util.applyDefaults(t,{output:"features"}),"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var a={};return e&&this.readNode(e,a,!0),a.features&&"features"===t.output&&(a=a.features),a},readers:{wfs:{FeatureCollection:function(e,t){t.features=[],this.readChildNodes(e,t)}}},write:function(e,t){var a=this.writeNode("wfs:Transaction",{features:e,options:t}),i=this.schemaLocationAttr();return i&&this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",i),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{wfs:{GetFeature:function(e){var t=this.createElementNSPlus("wfs:GetFeature",{attributes:{service:"WFS",version:this.version,handle:e&&e.handle,outputFormat:e&&e.outputFormat,maxFeatures:e&&e.maxFeatures,"xsi:schemaLocation":this.schemaLocationAttr(e)}});if("string"==typeof this.featureType)this.writeNode("Query",e,t);else for(var a=0,i=this.featureType.length;a<i;a++)e.featureType=this.featureType[a],this.writeNode("Query",e,t);return t},Transaction:function(e){e=e||{};var t,a,i=e.options||{},s=this.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version,handle:i.handle}}),r=e.features;if(r){i.multi===!0&&OpenLayers.Util.extend(this.geometryTypes,{"OpenLayers.Geometry.Point":"MultiPoint","OpenLayers.Geometry.LineString":this.multiCurve===!0?"MultiCurve":"MultiLineString","OpenLayers.Geometry.Polygon":this.multiSurface===!0?"MultiSurface":"MultiPolygon"});var o,n;for(t=0,a=r.length;t<a;++t)n=r[t],o=this.stateName[n.state],o&&this.writeNode(o,{feature:n,options:i},s);i.multi===!0&&this.setGeometryTypes()}if(i.nativeElements)for(t=0,a=i.nativeElements.length;t<a;++t)this.writeNode("wfs:Native",i.nativeElements[t],s);return s},Native:function(e){var t=this.createElementNSPlus("wfs:Native",{attributes:{vendorId:e.vendorId,safeToIgnore:e.safeToIgnore},value:e.value});return t},Insert:function(e){var t=e.feature,a=e.options,i=this.createElementNSPlus("wfs:Insert",{attributes:{handle:a&&a.handle}});return this.srsName=this.getSrsName(t),this.writeNode("feature:_typeName",t,i),i},Update:function(e){var t=e.feature,a=e.options,i=this.createElementNSPlus("wfs:Update",{attributes:{handle:a&&a.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}});this.featureNS&&i.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var s=t.modified;null===this.geometryName||s&&void 0===s.geometry||(this.srsName=this.getSrsName(t),this.writeNode("Property",{name:this.geometryName,value:t.geometry},i));for(var r in t.attributes)void 0===t.attributes[r]||s&&s.attributes&&(!s.attributes||void 0===s.attributes[r])||this.writeNode("Property",{name:r,value:t.attributes[r]},i);return this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),i),i},Property:function(e){var t=this.createElementNSPlus("wfs:Property");return this.writeNode("Name",e.name,t),null!==e.value&&this.writeNode("Value",e.value,t),t},Name:function(e){return this.createElementNSPlus("wfs:Name",{value:e})},Value:function(e){var t;if(e instanceof OpenLayers.Geometry){t=this.createElementNSPlus("wfs:Value");var a=this.writeNode("feature:_geometry",e).firstChild;t.appendChild(a)}else t=this.createElementNSPlus("wfs:Value",{value:e});return t},Delete:function(e){var t=e.feature,a=e.options,i=this.createElementNSPlus("wfs:Delete",{attributes:{handle:a&&a.handle,typeName:(this.featureNS?this.featurePrefix+":":"")+this.featureType}});return this.featureNS&&i.setAttribute("xmlns:"+this.featurePrefix,this.featureNS),this.writeNode("ogc:Filter",new OpenLayers.Filter.FeatureId({fids:[t.fid]}),i),i}}},schemaLocationAttr:function(e){e=OpenLayers.Util.extend({featurePrefix:this.featurePrefix,schema:this.schema},e);var t=OpenLayers.Util.extend({},this.schemaLocations);e.schema&&(t[e.featurePrefix]=e.schema);var a,i=[];for(var s in t)a=this.namespaces[s],a&&i.push(a+" "+t[s]);var r=i.join(" ")||void 0;return r},setFilterProperty:function(e){if(e.filters)for(var t=0,a=e.filters.length;t<a;++t)OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this,e.filters[t]);else e instanceof OpenLayers.Filter.Spatial&&!e.property&&(e.property=this.geometryName)},CLASS_NAME:"OpenLayers.Format.WFST.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},defaultPrefix:"ogc",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=e.documentElement,a={exceptionReport:null};return t&&(this.readChildNodes(e,a),null===a.exceptionReport&&(a=(new OpenLayers.Format.OWSCommon).read(e))),a},readers:{ogc:{ServiceExceptionReport:function(e,t){t.exceptionReport={exceptions:[]},this.readChildNodes(e,t.exceptionReport)},ServiceException:function(e,t){var a={code:e.getAttribute("code"),locator:e.getAttribute("locator"),text:this.getChildValue(e)};t.exceptions.push(a)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,allowFallback:!1,name:null,stringifyOutput:!1,parser:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]);var t=this.CLASS_NAME;this.name=t.substring(t.lastIndexOf(".")+1)},getVersion:function(e,t){var a;return e?(a=this.version,a||(a=e.getAttribute("version"),a||(a=this.defaultVersion))):a=t&&t.version||this.version||this.defaultVersion,a},getParser:function(e){e=e||this.defaultVersion;var t=this.profile?"_"+this.profile:"";if(!this.parser||this.parser.VERSION!=e){var a=OpenLayers.Format[this.name]["v"+e.replace(/\./g,"_")+t];if(!a&&(""!==t&&this.allowFallback&&(t="",a=OpenLayers.Format[this.name]["v"+e.replace(/\./g,"_")]),!a))throw"Can't find a "+this.name+" parser for version "+e+t;this.parser=new a(this.options)}return this.parser},write:function(e,t){var a=this.getVersion(null,t);this.parser=this.getParser(a);var i=this.parser.write(e,t);return this.stringifyOutput===!1?i:OpenLayers.Format.XML.prototype.write.apply(this,[i])},read:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var a=e.documentElement,i=this.getVersion(a);this.parser=this.getParser(i);var s=this.parser.read(e,t),r=this.parser.errorProperty||null;if(null!==r&&void 0===s[r]){var o=new OpenLayers.Format.OGCExceptionReport;s.error=o.read(e)}return s.version=i,s},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(e){this.filters=[],OpenLayers.Filter.prototype.initialize.apply(this,[e])},destroy:function(){this.filters=null,OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(e){var t,a;switch(this.type){case OpenLayers.Filter.Logical.AND:for(t=0,a=this.filters.length;t<a;t++)if(0==this.filters[t].evaluate(e))return!1;return!0;case OpenLayers.Filter.Logical.OR:for(t=0,a=this.filters.length;t<a;t++)if(1==this.filters[t].evaluate(e))return!0;return!1;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(e)}},clone:function(){for(var e=[],t=0,a=this.filters.length;t<a;++t)e.push(this.filters[t].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:e})},CLASS_NAME:"OpenLayers.Filter.Logical"}),OpenLayers.Filter.Logical.AND="&&",OpenLayers.Filter.Logical.OR="||",OpenLayers.Filter.Logical.NOT="!",/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:!0,lowerBoundary:null,upperBoundary:null,initialize:function(e){OpenLayers.Filter.prototype.initialize.apply(this,[e]),this.type===OpenLayers.Filter.Comparison.LIKE&&void 0===e.matchCase&&(this.matchCase=null)},evaluate:function(e){e instanceof OpenLayers.Feature.Vector&&(e=e.attributes);var t,a=!1,i=e[this.property];switch(this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:t=this.value,a=this.matchCase||"string"!=typeof i||"string"!=typeof t?i==t:i.toUpperCase()==t.toUpperCase();break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:t=this.value,a=this.matchCase||"string"!=typeof i||"string"!=typeof t?i!=t:i.toUpperCase()!=t.toUpperCase();break;case OpenLayers.Filter.Comparison.LESS_THAN:a=i<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:a=i>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:a=i<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:a=i>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:a=i>=this.lowerBoundary&&i<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:var s=new RegExp(this.value,"gi");a=s.test(i);break;case OpenLayers.Filter.Comparison.IS_NULL:a=null===i}return a},value2regex:function(e,t,a){if("."==e)throw new Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");return e=e?e:"*",t=t?t:".",a=a?a:"!",this.value=this.value.replace(new RegExp("\\"+a+"(.|$)","g"),"\\$1"),this.value=this.value.replace(new RegExp("\\"+t,"g"),"."),this.value=this.value.replace(new RegExp("\\"+e,"g"),".*"),this.value=this.value.replace(new RegExp("\\\\.\\*","g"),"\\"+e),this.value=this.value.replace(new RegExp("\\\\\\.","g"),"\\"+t),this.value},regex2value:function(){var e=this.value;return e=e.replace(/!/g,"!!"),e=e.replace(/(\\)?\\\./g,function(e,t){return t?e:"!."}),e=e.replace(/(\\)?\\\*/g,function(e,t){return t?e:"!*"}),e=e.replace(/\\\\/g,"\\"),e=e.replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,this)},CLASS_NAME:"OpenLayers.Filter.Comparison"}),OpenLayers.Filter.Comparison.EQUAL_TO="==",OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=",OpenLayers.Filter.Comparison.LESS_THAN="<",OpenLayers.Filter.Comparison.GREATER_THAN=">",OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=",OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=",OpenLayers.Filter.Comparison.BETWEEN="..",OpenLayers.Filter.Comparison.LIKE="~",OpenLayers.Filter.Comparison.IS_NULL="NULL",/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:function(){return"toISOString"in Date.prototype?function(e){return e.toISOString()}:function(e){var t;return t=isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(e.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(e.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(e.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,a=e.match(this.dateRegEx);if(a&&(a[1]||a[7])){var i=parseInt(a[1],10)||0,s=parseInt(a[2],10)-1||0,r=parseInt(a[3],10)||1;t=new Date(Date.UTC(i,s,r));var o=a[7];if(o){var n=parseInt(a[4],10),l=parseInt(a[5],10),c=parseFloat(a[6]),d=0|c,p=Math.round(1e3*(c-d));if(t.setUTCHours(n,l,d,p),"Z"!==o){var u=parseInt(o,10),m=parseInt(a[8],10)||0,h=-1e3*(60*(60*u)+60*m);t=new Date(t.getTime()+h)}}}else t=new Date("invalid");return t}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){var t={};return this.readers.ogc.Filter.apply(this,[e,t]),t.filter},readers:{ogc:{_expression:function(e){for(var t,a="",i=e.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 1:t=this.readNode(i),t.property?a+="${"+t.property+"}":void 0!==t.value&&(a+=t.value);break;case 3:case 4:a+=i.nodeValue}return a},Filter:function(e,t){var a={fids:[],filters:[]};this.readChildNodes(e,a),a.fids.length>0?t.filter=new OpenLayers.Filter.FeatureId({fids:a.fids}):a.filters.length>0&&(t.filter=a.filters[0])},FeatureId:function(e,t){var a=e.getAttribute("fid");a&&t.fids.push(a)},And:function(e,t){var a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});this.readChildNodes(e,a),t.filters.push(a)},Or:function(e,t){var a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(e,a),t.filters.push(a)},Not:function(e,t){var a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsLessThan:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsGreaterThan:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsLessThanOrEqualTo:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsGreaterThanOrEqualTo:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsBetween:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(e,a),t.filters.push(a)},Literal:function(e,t){t.value=OpenLayers.String.numericIf(this.getChildValue(e),!0)},PropertyName:function(e,t){t.property=this.getChildValue(e)},LowerBoundary:function(e,t){t.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,e),!0)},UpperBoundary:function(e,t){t.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,e),!0)},Intersects:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(e,t){this.readSpatial(e,t,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(e,t){t.distance=parseInt(this.getChildValue(e)),t.distanceUnits=e.getAttribute("units")},Function:function(e,t){},PropertyIsNull:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.IS_NULL});this.readChildNodes(e,a),t.filters.push(a)}}},readSpatial:function(e,t,a){var i=new OpenLayers.Filter.Spatial({type:a});this.readChildNodes(e,i),i.value=i.components[0],delete i.components,t.filters.push(i)},encodeLiteral:function(e){return e instanceof Date&&(e=OpenLayers.Date.toISOString(e)),e},writeOgcExpression:function(e,t){return e instanceof OpenLayers.Filter.Function?this.writeNode("Function",e,t):this.writeNode("Literal",e,t),t},write:function(e){return this.writers.ogc.Filter.apply(this,[e])},writers:{ogc:{Filter:function(e){var t=this.createElementNSPlus("ogc:Filter");return this.writeNode(this.getFilterType(e),e,t),t},_featureIds:function(e){for(var t=this.createDocumentFragment(),a=0,i=e.fids.length;a<i;++a)this.writeNode("ogc:FeatureId",e.fids[a],t);return t},FeatureId:function(e){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:e}})},And:function(e){for(var t,a=this.createElementNSPlus("ogc:And"),i=0,s=e.filters.length;i<s;++i)t=e.filters[i],this.writeNode(this.getFilterType(t),t,a);return a},Or:function(e){for(var t,a=this.createElementNSPlus("ogc:Or"),i=0,s=e.filters.length;i<s;++i)t=e.filters[i],this.writeNode(this.getFilterType(t),t,a);return a},Not:function(e){var t=this.createElementNSPlus("ogc:Not"),a=e.filters[0];return this.writeNode(this.getFilterType(a),a,t),t},PropertyIsLessThan:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLessThan");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsGreaterThan:function(e){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThan");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLessThanOrEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsGreaterThanOrEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsBetween:function(e){var t=this.createElementNSPlus("ogc:PropertyIsBetween");return this.writeNode("PropertyName",e,t),this.writeNode("LowerBoundary",e,t),this.writeNode("UpperBoundary",e,t),t},PropertyName:function(e){return this.createElementNSPlus("ogc:PropertyName",{value:e.property})},Literal:function(e){var t=this.encodeLiteral||OpenLayers.Format.Filter.v1.prototype.encodeLiteral;return this.createElementNSPlus("ogc:Literal",{value:t(e)})},LowerBoundary:function(e){var t=this.createElementNSPlus("ogc:LowerBoundary");return this.writeOgcExpression(e.lowerBoundary,t),t},UpperBoundary:function(e){var t=this.createElementNSPlus("ogc:UpperBoundary");return this.writeNode("Literal",e.upperBoundary,t),t},INTERSECTS:function(e){return this.writeSpatial(e,"Intersects")},WITHIN:function(e){return this.writeSpatial(e,"Within")},CONTAINS:function(e){return this.writeSpatial(e,"Contains")},DWITHIN:function(e){var t=this.writeSpatial(e,"DWithin");return this.writeNode("Distance",e,t),t},Distance:function(e){return this.createElementNSPlus("ogc:Distance",{attributes:{units:e.distanceUnits},value:e.distance})},Function:function(e){for(var t=this.createElementNSPlus("ogc:Function",{attributes:{name:e.name}}),a=e.params,i=0,s=a.length;i<s;i++)this.writeOgcExpression(a[i],t);return t},PropertyIsNull:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNull");return this.writeNode("PropertyName",e,t),t}}},getFilterType:function(e){var t=this.filterMap[e.type];if(!t)throw"Filter writing not supported for rule type: "+e.type;return t},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan","<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",NULL:"PropertyIsNull",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"_featureIds"},CLASS_NAME:"OpenLayers.Format.Filter.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.id=null,this.bounds=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(e){e&&(this.bounds=e.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(e){var t=this.getBounds();t?this.bounds.extend(e):this.setBounds(e)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(e,t){},getVertices:function(e){},atPoint:function(e,t,a){var i=!1,s=this.getBounds();if(null!=s&&null!=e){var r=null!=t?t:0,o=null!=a?a:0,n=new OpenLayers.Bounds(this.bounds.left-r,this.bounds.bottom-o,this.bounds.right+r,this.bounds.top+o);i=n.containsLonLat(e)}return i},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){var e;return e=OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(e){var t;if(OpenLayers.Format&&OpenLayers.Format.WKT){var a=OpenLayers.Geometry.fromWKT.format;a||(a=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=a);var i=a.read(e);if(i instanceof OpenLayers.Feature.Vector)t=i.geometry;else if(OpenLayers.Util.isArray(i)){for(var s=i.length,r=new Array(s),o=0;o<s;++o)r[o]=i[o].geometry;t=new OpenLayers.Geometry.Collection(r)}}return t},OpenLayers.Geometry.segmentsIntersect=function(e,t,a){var i=a&&a.point,s=a&&a.tolerance,r=!1,o=e.x1-t.x1,n=e.y1-t.y1,l=e.x2-e.x1,c=e.y2-e.y1,d=t.y2-t.y1,p=t.x2-t.x1,u=d*l-p*c,m=p*n-d*o,h=l*n-c*o;if(0==u)0==m&&0==h&&(r=!0);else{var g=m/u,v=h/u;if(g>=0&&g<=1&&v>=0&&v<=1)if(i){var f=e.x1+g*l,y=e.y1+g*c;r=new OpenLayers.Geometry.Point(f,y)}else r=!0}if(s){var b;if(r){if(i){var L,f,y,w=[e,t];e:for(var O=0;O<2;++O){L=w[O];for(var x=1;x<3;++x)if(f=L["x"+x],y=L["y"+x],b=Math.sqrt(Math.pow(f-r.x,2)+Math.pow(y-r.y,2)),b<s){r.x=f,r.y=y;break e}}}}else{var S,C,f,y,E,k,w=[e,t];e:for(var O=0;O<2;++O){S=w[O],C=w[(O+1)%2];for(var x=1;x<3;++x)if(E={x:S["x"+x],y:S["y"+x]},k=OpenLayers.Geometry.distanceToSegment(E,C),k.distance<s){r=!i||new OpenLayers.Geometry.Point(E.x,E.y);break e}}}}return r},OpenLayers.Geometry.distanceToSegment=function(e,t){var a=OpenLayers.Geometry.distanceSquaredToSegment(e,t);return a.distance=Math.sqrt(a.distance),a},OpenLayers.Geometry.distanceSquaredToSegment=function(e,t){var a,i,s=e.x,r=e.y,o=t.x1,n=t.y1,l=t.x2,c=t.y2,d=l-o,p=c-n,u=(d*(s-o)+p*(r-n))/(Math.pow(d,2)+Math.pow(p,2));return u<=0?(a=o,i=n):u>=1?(a=l,i=c):(a=o+u*d,i=n+u*p),{distance:Math.pow(a-s,2)+Math.pow(i-r,2),x:a,y:i,along:u}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(e,t){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(e),this.y=parseFloat(t)},clone:function(e){return null==e&&(e=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(e,this),e},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(e,t){var a,i,s,r,o,n,l=!(t&&t.edge===!1),c=l&&t&&t.details;return e instanceof OpenLayers.Geometry.Point?(i=this.x,s=this.y,r=e.x,o=e.y,a=Math.sqrt(Math.pow(i-r,2)+Math.pow(s-o,2)),n=c?{x0:i,y0:s,x1:r,y1:o,distance:a}:a):(n=e.distanceTo(this,t),c&&(n={x0:n.x1,y0:n.y1,x1:n.x0,y1:n.y0,distance:n.distance})),n},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},toShortString:function(){return this.x+", "+this.y},move:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()},rotate:function(e,t){e*=Math.PI/180;var a=this.distanceTo(t),i=e+Math.atan2(this.y-t.y,this.x-t.x);this.x=t.x+a*Math.cos(i),this.y=t.y+a*Math.sin(i),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(e,t,a){return a=void 0==a?1:a,this.x=t.x+e*a*(this.x-t.x),this.y=t.y+e*(this.y-t.y),this.clearBounds(),this},intersects:function(e){var t=!1;return t="OpenLayers.Geometry.Point"==e.CLASS_NAME?this.equals(e):e.intersects(this)},transform:function(e,t){return e&&t&&(OpenLayers.Projection.transform(this,e,t),this.bounds=null),this},getVertices:function(e){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(e){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=e&&this.addComponents(e)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var geometry=eval("new "+this.CLASS_NAME+"()"),i=0,len=this.components.length;i<len;i++)geometry.addComponent(this.components[i].clone());return OpenLayers.Util.applyDefaults(geometry,this),geometry},getComponentsString:function(){for(var e=[],t=0,a=this.components.length;t<a;t++)e.push(this.components[t].toShortString());return e.join(",")},calculateBounds:function(){this.bounds=null;var e=new OpenLayers.Bounds,t=this.components;if(t)for(var a=0,i=t.length;a<i;a++)e.extend(t[a].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)},addComponents:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,a=e.length;t<a;t++)this.addComponent(e[t])},addComponent:function(e,t){var a=!1;if(e&&(null==this.componentTypes||OpenLayers.Util.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var i=this.components.slice(0,t),s=this.components.slice(t,this.components.length);i.push(e),this.components=i.concat(s)}else this.components.push(e);e.parent=this,this.clearBounds(),a=!0}return a},removeComponents:function(e){var t=!1;OpenLayers.Util.isArray(e)||(e=[e]);for(var a=e.length-1;a>=0;--a)t=this.removeComponent(e[a])||t;return t},removeComponent:function(e){return OpenLayers.Util.removeItem(this.components,e),this.clearBounds(),!0},getLength:function(){for(var e=0,t=0,a=this.components.length;t<a;t++)e+=this.components[t].getLength();return e},getArea:function(){for(var e=0,t=0,a=this.components.length;t<a;t++)e+=this.components[t].getArea();return e},getGeodesicArea:function(e){for(var t=0,a=0,i=this.components.length;a<i;a++)t+=this.components[a].getGeodesicArea(e);return t},getCentroid:function(e){if(!e)return this.components.length&&this.components[0].getCentroid();var t=this.components.length;if(!t)return!1;for(var a,i=[],s=[],r=0,o=Number.MAX_VALUE,n=0;n<t;++n){a=this.components[n];var l=a.getArea(),c=a.getCentroid(!0);isNaN(l)||isNaN(c.x)||isNaN(c.y)||(i.push(l),r+=l,o=l<o&&l>0?l:o,s.push(c))}if(t=i.length,0===r){for(var n=0;n<t;++n)i[n]=1;r=i.length}else{for(var n=0;n<t;++n)i[n]/=o;r/=o}for(var c,l,d=0,p=0,n=0;n<t;++n)c=s[n],l=i[n],d+=c.x*l,p+=c.y*l;return new OpenLayers.Geometry.Point(d/r,p/r)},getGeodesicLength:function(e){for(var t=0,a=0,i=this.components.length;a<i;a++)t+=this.components[a].getGeodesicLength(e);return t},move:function(e,t){for(var a=0,i=this.components.length;a<i;a++)this.components[a].move(e,t)},rotate:function(e,t){for(var a=0,i=this.components.length;a<i;++a)this.components[a].rotate(e,t)},resize:function(e,t,a){for(var i=0;i<this.components.length;++i)this.components[i].resize(e,t,a);return this},distanceTo:function(e,t){for(var a,i,s,r=!(t&&t.edge===!1),o=r&&t&&t.details,n=Number.POSITIVE_INFINITY,l=0,c=this.components.length;l<c&&(a=this.components[l].distanceTo(e,t),s=o?a.distance:a,!(s<n&&(n=s,i=a,0==n)));++l);return i},equals:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME==e.CLASS_NAME)if(OpenLayers.Util.isArray(e.components)&&e.components.length==this.components.length){for(var a=0,i=this.components.length;a<i;++a)if(!this.components[a].equals(e.components[a])){t=!1;break}}else t=!1;else t=!1;return t},transform:function(e,t){if(e&&t){for(var a=0,i=this.components.length;a<i;a++){var s=this.components[a];s.transform(e,t)}this.bounds=null}return this},intersects:function(e){for(var t=!1,a=0,i=this.components.length;a<i&&!(t=e.intersects(this.components[a]));++a);return t},getVertices:function(e){for(var t=[],a=0,i=this.components.length;a<i;++a)Array.prototype.push.apply(t,this.components[a].getVertices(e));return t},CLASS_NAME:"OpenLayers.Geometry.Collection"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(e,t){this.addComponent(e,t)},removePoint:function(e){this.removeComponent(e)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var e=0;if(this.components&&this.components.length>1)for(var t=1,a=this.components.length;t<a;t++)e+=this.components[t-1].distanceTo(this.components[t]);return e},getGeodesicLength:function(e){var t=this;if(e){var a=new OpenLayers.Projection("EPSG:4326");a.equals(e)||(t=this.clone().transform(e,a))}var i=0;if(t.components&&t.components.length>1)for(var s,r,o=1,n=t.components.length;o<n;o++)s=t.components[o-1],r=t.components[o],i+=OpenLayers.Util.distVincenty({lon:s.x,lat:s.y},{lon:r.x,lat:r.y});return 1e3*i},CLASS_NAME:"OpenLayers.Geometry.Curve"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(e){var t=this.components&&this.components.length>2;return t&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),t},intersects:function(e){var t=!1,a=e.CLASS_NAME;if("OpenLayers.Geometry.LineString"==a||"OpenLayers.Geometry.LinearRing"==a||"OpenLayers.Geometry.Point"==a){var i,s=this.getSortedSegments();i="OpenLayers.Geometry.Point"==a?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y}]:e.getSortedSegments();var r,o,n,l,c,d,p,u;e:for(var m=0,h=s.length;m<h;++m){r=s[m],o=r.x1,n=r.x2,l=r.y1,c=r.y2;for(var g=0,v=i.length;g<v&&(d=i[g],!(d.x1>n));++g)if(!(d.x2<o)&&(p=d.y1,u=d.y2,!(Math.min(p,u)>Math.max(l,c))&&!(Math.max(p,u)<Math.min(l,c))&&OpenLayers.Geometry.segmentsIntersect(r,d))){t=!0;break e}}}else t=e.intersects(this);return t},getSortedSegments:function(){function e(e,t){return e.x1-t.x1}for(var t,a,i=this.components.length-1,s=new Array(i),r=0;r<i;++r)t=this.components[r],a=this.components[r+1],t.x<a.x?s[r]={x1:t.x,y1:t.y,x2:a.x,y2:a.y}:s[r]={x1:a.x,y1:a.y,x2:t.x,y2:t.y};return s.sort(e)},splitWithSegment:function(e,t){for(var a,i,s,r,o,n=!(t&&t.edge===!1),l=t&&t.tolerance,c=[],d=this.getVertices(),p=[],u=[],m=!1,h={point:!0,tolerance:l},g=null,v=0,f=d.length-2;v<=f;++v)if(a=d[v],p.push(a.clone()),i=d[v+1],o={x1:a.x,y1:a.y,x2:i.x,y2:i.y},s=OpenLayers.Geometry.segmentsIntersect(e,o,h),s instanceof OpenLayers.Geometry.Point&&(r=!!(s.x===e.x1&&s.y===e.y1||s.x===e.x2&&s.y===e.y2||s.equals(a)||s.equals(i)),r||n)){if(s.equals(u[u.length-1])||u.push(s.clone()),0===v&&s.equals(a))continue;if(s.equals(i))continue;m=!0,s.equals(a)||p.push(s),c.push(new OpenLayers.Geometry.LineString(p)),p=[s.clone()]}if(m&&(p.push(i.clone()),c.push(new OpenLayers.Geometry.LineString(p))),u.length>0){var y=e.x1<e.x2?1:-1,b=e.y1<e.y2?1:-1;g={lines:c,points:u.sort(function(e,t){return y*e.x-y*t.x||b*e.y-b*t.y})}}return g},split:function(e,t){var a,i,s,r,o=null,n=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){var l,c,d,p,u,m,h=this.getVertices(),g=[];s=[];for(var v=0,f=h.length-2;v<=f;++v){l=h[v],c=h[v+1],d={x1:l.x,y1:l.y,x2:c.x,y2:c.y},r=r||[e],n&&g.push(l.clone());for(var y=0;y<r.length;++y)if(p=r[y].splitWithSegment(d,t),p&&(u=p.lines,u.length>0&&(u.unshift(y,1),Array.prototype.splice.apply(r,u),y+=u.length-2),n))for(var b=0,L=p.points.length;b<L;++b)m=p.points[b],m.equals(l)||(g.push(m),s.push(new OpenLayers.Geometry.LineString(g)),g=m.equals(c)?[]:[m.clone()])}n&&s.length>0&&g.length>0&&(g.push(c.clone()),s.push(new OpenLayers.Geometry.LineString(g)))}else o=e.splitWith(this,t);return r&&r.length>1?i=!0:r=[],s&&s.length>1?a=!0:s=[],(i||a)&&(o=n?[s,r]:r),o},splitWith:function(e,t){return e.split(this,t)},getVertices:function(e){var t;return t=e===!0?[this.components[0],this.components[this.components.length-1]]:e===!1?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(e,t){var a,i=!(t&&t.edge===!1),s=i&&t&&t.details,r={},o=Number.POSITIVE_INFINITY;if(e instanceof OpenLayers.Geometry.Point){for(var n,l=this.getSortedSegments(),c=e.x,d=e.y,p=0,u=l.length;p<u;++p)if(n=l[p],a=OpenLayers.Geometry.distanceToSegment(e,n),a.distance<o){if(o=a.distance,r=a,0===o)break}else if(n.x2>c&&(d>n.y1&&d<n.y2||d<n.y1&&d>n.y2))break;r=s?{distance:r.distance,x0:r.x,y0:r.y,x1:c,y1:d}:r.distance}else if(e instanceof OpenLayers.Geometry.LineString){var m,h,g,v,f,y=this.getSortedSegments(),b=e.getSortedSegments(),L=b.length,w={point:!0};e:for(var p=0,u=y.length;p<u;++p){m=y[p],v=m.x1,f=m.y1;for(var O=0;O<L;++O){if(h=b[O],g=OpenLayers.Geometry.segmentsIntersect(m,h,w)){o=0,r={distance:0,x0:g.x,y0:g.y,x1:g.x,y1:g.y};break e}a=OpenLayers.Geometry.distanceToSegment({x:v,y:f},h),a.distance<o&&(o=a.distance,r={distance:o,x0:v,y0:f,x1:a.x,y1:a.y})}}if(s||(r=r.distance),0!==o&&m){a=e.distanceTo(new OpenLayers.Geometry.Point(m.x2,m.y2),t);var x=s?a.distance:a;x<o&&(r=s?{distance:o,x0:a.x1,y0:a.y1,x1:a.x0,y1:a.y0}:x)}}else r=e.distanceTo(this,t),s&&(r={distance:r.distance,x0:r.x1,y0:r.y1,x1:r.x0,y1:r.y0});return r},simplify:function(e){if(this&&null!==this){var t=this.getVertices();if(t.length<3)return this;var a=function(e,t){return e-t},i=function(e,t,a,r){for(var o,l=0,c=0,d=t;d<a;d++)o=s(e[t],e[a],e[d]),o>l&&(l=o,c=d);l>r&&c!=t&&(n.push(c),i(e,t,c,r),i(e,c,a,r))},s=function(e,t,a){var i=Math.abs(.5*(e.x*t.y+t.x*a.y+a.x*e.y-t.x*e.y-a.x*t.y-e.x*a.y)),s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=i/s*2;return r},r=0,o=t.length-1,n=[];for(n.push(r),n.push(o);t[r].equals(t[o]);)o--,n.push(o);i(t,r,o,e);var l=[];n.sort(a);for(var c=0;c<n.length;c++)l.push(t[n[c]]);return new OpenLayers.Geometry.LineString(l)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(e,t){for(var a,i,s,r,o,n=null,l=t&&t.mutual,c=[],d=[e],p=0,u=this.components.length;p<u;++p){i=this.components[p],r=!1;for(var m=0;m<d.length;++m)if(a=i.split(d[m],t)){if(l){s=a[0];for(var h=0,g=s.length;h<g;++h)0===h&&c.length?c[c.length-1].addComponent(s[h]):c.push(new OpenLayers.Geometry.MultiLineString([s[h]]));r=!0,a=a[1]}if(a.length){a.unshift(m,1),Array.prototype.splice.apply(d,a);break}}r||(c.length?c[c.length-1].addComponent(i.clone()):c=[new OpenLayers.Geometry.MultiLineString(i.clone())])}return c&&c.length>1?r=!0:c=[],d&&d.length>1?o=!0:d=[],(r||o)&&(n=l?[c,d]:d),n},splitWith:function(e,t){var a,i,s,r,o,n,l,c=null,d=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){l=[],n=[e];for(var p=0,u=this.components.length;p<u;++p){o=!1,i=this.components[p];for(var m=0;m<n.length;++m)if(a=n[m].split(i,t)){d&&(s=a[0],s.length&&(s.unshift(m,1),Array.prototype.splice.apply(n,s),m+=s.length-2),a=a[1],0===a.length&&(a=[i.clone()]));for(var h=0,g=a.length;h<g;++h)0===h&&l.length?l[l.length-1].addComponent(a[h]):l.push(new OpenLayers.Geometry.MultiLineString([a[h]]));o=!0}o||(l.length?l[l.length-1].addComponent(i.clone()):l=[new OpenLayers.Geometry.MultiLineString([i.clone()])])}}else c=e.split(this);return n&&n.length>1?r=!0:n=[],l&&l.length>1?o=!0:l=[],(r||o)&&(c=d?[n,l]:l),c},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(e,t){var a=!1,i=this.components.pop();null==t&&e.equals(i)||(a=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments));var s=this.components[0];return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[s]),a},removeComponent:function(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);var a=this.components[0];OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[a])}return t},move:function(e,t){for(var a=0,i=this.components.length;a<i-1;a++)this.components[a].move(e,t)},rotate:function(e,t){for(var a=0,i=this.components.length;a<i-1;++a)this.components[a].rotate(e,t)},resize:function(e,t,a){for(var i=0,s=this.components.length;i<s-1;++i)this.components[i].resize(e,t,a);return this},transform:function(e,t){if(e&&t){for(var a=0,i=this.components.length;a<i-1;a++){var s=this.components[a];s.transform(e,t)}this.bounds=null}return this},getCentroid:function(){if(this.components){var e=this.components.length;if(e>0&&e<=2)return this.components[0].clone();if(e>2){var t=0,a=0,i=this.components[0].x,s=this.components[0].y,r=-1*this.getArea();if(0!=r){for(var o=0;o<e-1;o++){var n=this.components[o],l=this.components[o+1];t+=(n.x+l.x-2*i)*((n.x-i)*(l.y-s)-(l.x-i)*(n.y-s)),a+=(n.y+l.y-2*s)*((n.x-i)*(l.y-s)-(l.x-i)*(n.y-s))}var c=i+t/(6*r),d=s+a/(6*r)}else{for(var o=0;o<e-1;o++)t+=this.components[o].x,a+=this.components[o].y;var c=t/(e-1),d=a/(e-1)}return new OpenLayers.Geometry.Point(c,d)}return null}},getArea:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,a=0,i=this.components.length;a<i-1;a++){var s=this.components[a],r=this.components[a+1];t+=(s.x+r.x)*(r.y-s.y)}e=-t/2}return e},getGeodesicArea:function(e){var t=this;if(e){var a=new OpenLayers.Projection("EPSG:4326");a.equals(e)||(t=this.clone().transform(e,a))}var i=0,s=t.components&&t.components.length;if(s>2){for(var r,o,n=0;n<s-1;n++)r=t.components[n],o=t.components[n+1],i+=OpenLayers.Util.rad(o.x-r.x)*(2+Math.sin(OpenLayers.Util.rad(r.y))+Math.sin(OpenLayers.Util.rad(o.y)));i=6378137*i*6378137/2}return i},containsPoint:function(e){function t(e,t,a,i,s){return(e-s)*((i-t)/(s-a))+i}for(var a,i,s,r,o,n,l,c=OpenLayers.Number.limitSigDigs,d=14,p=c(e.x,d),u=c(e.y,d),m=this.components.length-1,h=0,g=0;g<m;++g)if(a=this.components[g],s=c(a.x,d),r=c(a.y,d),i=this.components[g+1],o=c(i.x,d),n=c(i.y,d),r!=n){if(l=c(t(u,s,r,o,n),d),l==p&&(r<n&&u>=r&&u<=n||r>n&&u<=r&&u>=n)){h=-1;break}l<=p||s!=o&&(l<Math.min(s,o)||l>Math.max(s,o))||(r<n&&u>=r&&u<n||r>n&&u<r&&u>=n)&&++h}else if(u==r&&(s<=o&&p>=s&&p<=o||s>=o&&p<=s&&p>=o)){h=-1;break}var v=h==-1?1:!!(1&h);return v},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var a=0,i=e.components.length;a<i&&!(t=e.components[a].intersects(this));++a);return t},getVertices:function(e){return e===!0?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,a=this.components.length;t<a;t++)e-=Math.abs(this.components[t].getArea())}return e},getGeodesicArea:function(e){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getGeodesicArea(e));for(var a=1,i=this.components.length;a<i;a++)t-=Math.abs(this.components[a].getGeodesicArea(e))}return t},containsPoint:function(e){var t=this.components.length,a=!1;if(t>0&&(a=this.components[0].containsPoint(e),1!==a&&a&&t>1))for(var i,s=1;s<t;++s)if(i=this.components[s].containsPoint(e)){a=1===i&&1;break}return a},intersects:function(e){var t,a,i=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)i=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){for(t=0,a=this.components.length;t<a&&!(i=e.intersects(this.components[t]));++t);if(!i)for(t=0,a=e.components.length;t<a&&!(i=this.containsPoint(e.components[t]));++t);}else for(t=0,a=e.components.length;t<a&&!(i=this.intersects(e.components[t]));++t);if(!i&&"OpenLayers.Geometry.Polygon"==e.CLASS_NAME){var s=this.components[0];for(t=0,a=s.components.length;t<a&&!(i=e.containsPoint(s.components[t]));++t);}return i},distanceTo:function(e,t){var a,i=!(t&&t.edge===!1);return a=!i&&this.intersects(e)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[e,t])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(e,t,a,i){var s=Math.PI*(1/a-.5);i&&(s+=i/180*Math.PI);for(var r,o,n,l=[],c=0;c<a;++c)r=s+2*c*Math.PI/a,o=e.x+t*Math.cos(r),n=e.y+t*Math.sin(r),l.push(new OpenLayers.Geometry.Point(o,n));var d=new OpenLayers.Geometry.LinearRing(l);return new OpenLayers.Geometry.Polygon([d])},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:!0,xy:!0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var t=this.getElementsByTagNameNS(e.documentElement,this.gmlns,this.featureName),a=[],i=0;i<t.length;i++){var s=this.parseFeature(t[i]);s&&a.push(s)}return a},parseFeature:function(e){for(var t,a,i,s,r=["MultiPolygon","Polygon","MultiLineString","LineString","MultiPoint","Point","Envelope"],o=0;o<r.length;++o)if(t=r[o],a=this.getElementsByTagNameNS(e,this.gmlns,t),a.length>0){if(s=this.parseGeometry[t.toLowerCase()],!s)throw new TypeError("Unsupported geometry type: "+t);i=s.apply(this,[a[0]]),this.internalProjection&&this.externalProjection&&i.transform(this.externalProjection,this.internalProjection);break}var n,l=this.getElementsByTagNameNS(e,this.gmlns,"Box");for(o=0;o<l.length;++o){var c=l[o],d=this.parseGeometry.box.apply(this,[c]),p=c.parentNode,u=p.localName||p.nodeName.split(":").pop();"boundedBy"===u?n=d:i=d.toGeometry()}var m;this.extractAttributes&&(m=this.parseAttributes(e));var h=new OpenLayers.Feature.Vector(i,m);h.bounds=n,h.gml={featureType:e.firstChild.nodeName.split(":")[1],featureNS:e.firstChild.namespaceURI,featureNSPrefix:e.firstChild.prefix};for(var g,v=e.firstChild;v&&(1!=v.nodeType||!(g=v.getAttribute("fid")||v.getAttribute("id")));)v=v.nextSibling;return h.fid=g,h},parseGeometry:{point:function(e){var t,a,i=[],t=this.getElementsByTagNameNS(e,this.gmlns,"pos");if(t.length>0&&(a=t[0].firstChild.nodeValue,a=a.replace(this.regExes.trimSpace,""),i=a.split(this.regExes.splitSpace)),0==i.length&&(t=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),t.length>0&&(a=t[0].firstChild.nodeValue,a=a.replace(this.regExes.removeSpace,""),i=a.split(","))),0==i.length&&(t=this.getElementsByTagNameNS(e,this.gmlns,"coord"),t.length>0)){var s=this.getElementsByTagNameNS(t[0],this.gmlns,"X"),r=this.getElementsByTagNameNS(t[0],this.gmlns,"Y");s.length>0&&r.length>0&&(i=[s[0].firstChild.nodeValue,r[0].firstChild.nodeValue])}return 2==i.length&&(i[2]=null),this.xy?new OpenLayers.Geometry.Point(i[0],i[1],i[2]):new OpenLayers.Geometry.Point(i[1],i[0],i[2])},multipoint:function(e){var t=this.getElementsByTagNameNS(e,this.gmlns,"Point"),a=[];if(t.length>0)for(var i,s=0;s<t.length;++s)i=this.parseGeometry.point.apply(this,[t[s]]),i&&a.push(i);return new OpenLayers.Geometry.MultiPoint(a)},linestring:function(e,t){var a,i,s=[],r=[];if(a=this.getElementsByTagNameNS(e,this.gmlns,"posList"),a.length>0){i=this.getChildValue(a[0]),i=i.replace(this.regExes.trimSpace,""),s=i.split(this.regExes.splitSpace);for(var o,n,l,c,d=parseInt(a[0].getAttribute("dimension")),p=0;p<s.length/d;++p)o=p*d,n=s[o],l=s[o+1],c=2==d?null:s[o+2],this.xy?r.push(new OpenLayers.Geometry.Point(n,l,c)):r.push(new OpenLayers.Geometry.Point(l,n,c))}if(0==s.length&&(a=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),a.length>0)){i=this.getChildValue(a[0]),i=i.replace(this.regExes.trimSpace,""),i=i.replace(this.regExes.trimComma,",");for(var u=i.split(this.regExes.splitSpace),p=0;p<u.length;++p)s=u[p].split(","),2==s.length&&(s[2]=null),this.xy?r.push(new OpenLayers.Geometry.Point(s[0],s[1],s[2])):r.push(new OpenLayers.Geometry.Point(s[1],s[0],s[2]))}var m=null;return 0!=r.length&&(m=t?new OpenLayers.Geometry.LinearRing(r):new OpenLayers.Geometry.LineString(r)),m},multilinestring:function(e){var t=this.getElementsByTagNameNS(e,this.gmlns,"LineString"),a=[];if(t.length>0)for(var i,s=0;s<t.length;++s)i=this.parseGeometry.linestring.apply(this,[t[s]]),i&&a.push(i);return new OpenLayers.Geometry.MultiLineString(a)},polygon:function(e){var t=this.getElementsByTagNameNS(e,this.gmlns,"LinearRing"),a=[];if(t.length>0)for(var i,s=0;s<t.length;++s)i=this.parseGeometry.linestring.apply(this,[t[s],!0]),i&&a.push(i);return new OpenLayers.Geometry.Polygon(a)},multipolygon:function(e){var t=this.getElementsByTagNameNS(e,this.gmlns,"Polygon"),a=[];if(t.length>0)for(var i,s=0;s<t.length;++s)i=this.parseGeometry.polygon.apply(this,[t[s]]),i&&a.push(i);return new OpenLayers.Geometry.MultiPolygon(a)},envelope:function(e){var t,a,i=[],s=this.getElementsByTagNameNS(e,this.gmlns,"lowerCorner");if(s.length>0){var r=[];if(s.length>0&&(t=s[0].firstChild.nodeValue,t=t.replace(this.regExes.trimSpace,""),r=t.split(this.regExes.splitSpace)),2==r.length&&(r[2]=null),this.xy)var o=new OpenLayers.Geometry.Point(r[0],r[1],r[2]);else var o=new OpenLayers.Geometry.Point(r[1],r[0],r[2])}var n=this.getElementsByTagNameNS(e,this.gmlns,"upperCorner");if(n.length>0){var r=[];if(n.length>0&&(t=n[0].firstChild.nodeValue,t=t.replace(this.regExes.trimSpace,""),r=t.split(this.regExes.splitSpace)),2==r.length&&(r[2]=null),this.xy)var l=new OpenLayers.Geometry.Point(r[0],r[1],r[2]);else var l=new OpenLayers.Geometry.Point(r[1],r[0],r[2])}if(o&&l){i.push(new OpenLayers.Geometry.Point(o.x,o.y)),i.push(new OpenLayers.Geometry.Point(l.x,o.y)),i.push(new OpenLayers.Geometry.Point(l.x,l.y)),i.push(new OpenLayers.Geometry.Point(o.x,l.y)),i.push(new OpenLayers.Geometry.Point(o.x,o.y));var c=new OpenLayers.Geometry.LinearRing(i);a=new OpenLayers.Geometry.Polygon([c])}return a},box:function(e){var t,a,i=this.getElementsByTagNameNS(e,this.gmlns,"coordinates"),s=null,r=null;if(i.length>0&&(t=i[0].firstChild.nodeValue,a=t.split(" "),2==a.length&&(s=a[0].split(","),r=a[1].split(","))),null!==s&&null!==r)return new OpenLayers.Bounds(parseFloat(s[0]),parseFloat(s[1]),parseFloat(r[0]),parseFloat(r[1]))}},parseAttributes:function(e){for(var t,a,i,s,r,o,n,l={},c=e.firstChild;c;){if(1==c.nodeType){for(t=c.childNodes,a=0;a<t.length;++a)i=t[a],1==i.nodeType&&(s=i.childNodes,1==s.length?(r=s[0],3!=r.nodeType&&4!=r.nodeType||(o=i.prefix?i.nodeName.split(":")[1]:i.nodeName,n=r.nodeValue.replace(this.regExes.trimSpace,""),l[o]=n)):l[i.nodeName.split(":").pop()]=null);break}c=c.nextSibling}return l},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName),a=0;a<e.length;a++)t.appendChild(this.createFeatureXML(e[a]));return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t=e.geometry,a=this.buildGeometryNode(t),i=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName);i.appendChild(a);var s=this.createElementNS(this.gmlns,"gml:"+this.featureName),r=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName),o=e.fid||e.id;r.setAttribute("fid",o),r.appendChild(i);for(var n in e.attributes){var l=this.createTextNode(e.attributes[n]),c=n.substring(n.lastIndexOf(":")+1),d=this.createElementNS(this.featureNS,this.featurePrefix+":"+c);d.appendChild(l),r.appendChild(d)}return s.appendChild(r),s},buildGeometryNode:function(e){this.externalProjection&&this.internalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t=e.CLASS_NAME,a=t.substring(t.lastIndexOf(".")+1),i=this.buildGeometry[a.toLowerCase()];return i.apply(this,[e])},buildGeometry:{point:function(e){var t=this.createElementNS(this.gmlns,"gml:Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){for(var t,a,i=this.createElementNS(this.gmlns,"gml:MultiPoint"),s=e.components,r=0;r<s.length;r++)t=this.createElementNS(this.gmlns,"gml:pointMember"),a=this.buildGeometry.point.apply(this,[s[r]]),t.appendChild(a),i.appendChild(t);return i},linestring:function(e){var t=this.createElementNS(this.gmlns,"gml:LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){for(var t,a,i=this.createElementNS(this.gmlns,"gml:MultiLineString"),s=e.components,r=0;r<s.length;++r)t=this.createElementNS(this.gmlns,"gml:lineStringMember"),a=this.buildGeometry.linestring.apply(this,[s[r]]),t.appendChild(a),i.appendChild(t);return i},linearring:function(e){var t=this.createElementNS(this.gmlns,"gml:LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){for(var t,a,i,s=this.createElementNS(this.gmlns,"gml:Polygon"),r=e.components,o=0;o<r.length;++o)i=0==o?"outerBoundaryIs":"innerBoundaryIs",t=this.createElementNS(this.gmlns,"gml:"+i),a=this.buildGeometry.linearring.apply(this,[r[o]]),t.appendChild(a),s.appendChild(t);return s},multipolygon:function(e){for(var t,a,i=this.createElementNS(this.gmlns,"gml:MultiPolygon"),s=e.components,r=0;r<s.length;++r)t=this.createElementNS(this.gmlns,"gml:polygonMember"),a=this.buildGeometry.polygon.apply(this,[s[r]]),t.appendChild(a),i.appendChild(t);return i},bounds:function(e){var t=this.createElementNS(this.gmlns,"gml:Box");return t.appendChild(this.buildCoordinatesNode(e)),t}},buildCoordinatesNode:function(e){var t=this.createElementNS(this.gmlns,"gml:coordinates");t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," ");var a=[];if(e instanceof OpenLayers.Bounds)a.push(e.left+","+e.bottom),a.push(e.right+","+e.top);else for(var i=e.components?e.components:[e],s=0;s<i.length;s++)a.push(i[s].x+","+i[s].y);var r=this.createTextNode(a.join(" "));return t.appendChild(r),t},CLASS_NAME:"OpenLayers.Format.GML"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GML||(OpenLayers.Format.GML={}),OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:!0,srsName:null,xy:!0,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,featureMember:/^(.*:)?featureMembers?$/},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.setGeometryTypes(),e&&e.featureNS&&this.setNamespace("feature",e.featureNS),this.singleFeatureType=!e||"string"==typeof e.featureType},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t=[];if(this.readNode(e,{features:t},!0),0==t.length){var a=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember");if(a.length)for(var i=0,s=a.length;i<s;++i)this.readNode(a[i],{features:t},!0);else{var a=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMembers");a.length&&this.readNode(a[0],{features:t},!0)}}return t},readNode:function(e,t,a){return a===!0&&this.autoConfig===!0&&(this.featureType=null,delete this.namespaceAlias[this.featureNS],delete this.namespaces.feature,this.featureNS=null),this.featureNS||e.prefix in this.namespaces||e.parentNode.namespaceURI!=this.namespaces.gml||!this.regExes.featureMember.test(e.parentNode.nodeName)||(this.featureType=e.nodeName.split(":").pop(),this.setNamespace("feature",e.namespaceURI),this.featureNS=e.namespaceURI,this.autoConfig=!0),OpenLayers.Format.XML.prototype.readNode.apply(this,[e,t])},readers:{gml:{_inherit:function(e,t,a){},featureMember:function(e,t){this.readChildNodes(e,t)},featureMembers:function(e,t){this.readChildNodes(e,t)},name:function(e,t){t.name=this.getChildValue(e)},boundedBy:function(e,t){var a={};this.readChildNodes(e,a),a.components&&a.components.length>0&&(t.bounds=a.components[0])},Point:function(e,t){var a={points:[]};this.readChildNodes(e,a),t.components||(t.components=[]),t.components.push(a.points[0])},coordinates:function(e,t){var a=this.getChildValue(e).replace(this.regExes.trimSpace,"");a=a.replace(this.regExes.trimComma,",");for(var i,s=a.split(this.regExes.splitSpace),r=s.length,o=new Array(r),n=0;n<r;++n)i=s[n].split(","),this.xy?o[n]=new OpenLayers.Geometry.Point(i[0],i[1],i[2]):o[n]=new OpenLayers.Geometry.Point(i[1],i[0],i[2]);t.points=o},coord:function(e,t){var a={};this.readChildNodes(e,a),t.points||(t.points=[]),t.points.push(new OpenLayers.Geometry.Point(a.x,a.y,a.z))},X:function(e,t){t.x=this.getChildValue(e)},Y:function(e,t){t.y=this.getChildValue(e)},Z:function(e,t){t.z=this.getChildValue(e)},MultiPoint:function(e,t){var a={components:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),t.components=[new OpenLayers.Geometry.MultiPoint(a.components)]},pointMember:function(e,t){this.readChildNodes(e,t)},LineString:function(e,t){var a={};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(a.points))},MultiLineString:function(e,t){var a={components:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),t.components=[new OpenLayers.Geometry.MultiLineString(a.components)]},lineStringMember:function(e,t){this.readChildNodes(e,t)},Polygon:function(e,t){var a={outer:null,inner:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),a.inner.unshift(a.outer),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.Polygon(a.inner))},LinearRing:function(e,t){var a={};this.readers.gml._inherit.apply(this,[e,a]),this.readChildNodes(e,a),t.components=[new OpenLayers.Geometry.LinearRing(a.points)]},MultiPolygon:function(e,t){var a={components:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),t.components=[new OpenLayers.Geometry.MultiPolygon(a.components)]},polygonMember:function(e,t){this.readChildNodes(e,t)},GeometryCollection:function(e,t){var a={components:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),t.components=[new OpenLayers.Geometry.Collection(a.components)]},geometryMember:function(e,t){this.readChildNodes(e,t)}},feature:{"*":function(e,t){var a,i=e.localName||e.nodeName.split(":").pop();t.features?this.singleFeatureType||OpenLayers.Util.indexOf(this.featureType,i)===-1?i===this.featureType&&(a="_typeName"):a="_typeName":0==e.childNodes.length||1==e.childNodes.length&&3==e.firstChild.nodeType?this.extractAttributes&&(a="_attribute"):a="_geometry",a&&this.readers.feature[a].apply(this,[e,t])},_typeName:function(e,t){var a={components:[],attributes:{}};this.readChildNodes(e,a),a.name&&(a.attributes.name=a.name);var i=new OpenLayers.Feature.Vector(a.components[0],a.attributes);this.singleFeatureType||(i.type=e.nodeName.split(":").pop(),i.namespace=e.namespaceURI);var s=e.getAttribute("fid")||this.getAttributeNS(e,this.namespaces.gml,"id");s&&(i.fid=s),this.internalProjection&&this.externalProjection&&i.geometry&&i.geometry.transform(this.externalProjection,this.internalProjection),a.bounds&&(i.bounds=a.bounds),t.features.push(i)},_geometry:function(e,t){this.geometryName||(this.geometryName=e.nodeName.split(":").pop()),this.readChildNodes(e,t)},_attribute:function(e,t){var a=e.localName||e.nodeName.split(":").pop(),i=this.getChildValue(e);t.attributes[a]=i}},wfs:{FeatureCollection:function(e,t){this.readChildNodes(e,t)}}},write:function(e){var t;t=OpenLayers.Util.isArray(e)?"featureMembers":"featureMember";var a=this.writeNode("gml:"+t,e);return this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:{featureMember:function(e){var t=this.createElementNSPlus("gml:featureMember");return this.writeNode("feature:_typeName",e,t),t},MultiPoint:function(e){for(var t=this.createElementNSPlus("gml:MultiPoint"),a=e.components||[e],i=0,s=a.length;i<s;++i)this.writeNode("pointMember",a[i],t);return t},pointMember:function(e){var t=this.createElementNSPlus("gml:pointMember");return this.writeNode("Point",e,t),t},MultiLineString:function(e){for(var t=this.createElementNSPlus("gml:MultiLineString"),a=e.components||[e],i=0,s=a.length;i<s;++i)this.writeNode("lineStringMember",a[i],t);return t},lineStringMember:function(e){var t=this.createElementNSPlus("gml:lineStringMember");return this.writeNode("LineString",e,t),t},MultiPolygon:function(e){for(var t=this.createElementNSPlus("gml:MultiPolygon"),a=e.components||[e],i=0,s=a.length;i<s;++i)this.writeNode("polygonMember",a[i],t);return t},polygonMember:function(e){var t=this.createElementNSPlus("gml:polygonMember");return this.writeNode("Polygon",e,t),t},GeometryCollection:function(e){for(var t=this.createElementNSPlus("gml:GeometryCollection"),a=0,i=e.components.length;a<i;++a)this.writeNode("geometryMember",e.components[a],t);return t},geometryMember:function(e){var t=this.createElementNSPlus("gml:geometryMember"),a=this.writeNode("feature:_geometry",e);return t.appendChild(a.firstChild),t}},feature:{_typeName:function(e){var t=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:e.fid}});e.geometry&&this.writeNode("feature:_geometry",e.geometry,t);for(var a in e.attributes){var i=e.attributes[a];null!=i&&this.writeNode("feature:_attribute",{name:a,value:i},t)}return t},_geometry:function(e){this.externalProjection&&this.internalProjection&&(e=e.clone().transform(this.internalProjection,this.externalProjection));var t=this.createElementNSPlus("feature:"+this.geometryName),a=this.geometryTypes[e.CLASS_NAME],i=this.writeNode("gml:"+a,e,t);return this.srsName&&i.setAttribute("srsName",this.srsName),t},_attribute:function(e){return this.createElementNSPlus("feature:"+e.name,{value:e.value})}},wfs:{FeatureCollection:function(e){for(var t=this.createElementNSPlus("wfs:FeatureCollection"),a=0,i=e.length;a<i;++a)this.writeNode("gml:featureMember",e[a],t);return t}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GML.v3=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",curve:!1,multiCurve:!0,surface:!1,multiSurface:!0,initialize:function(e){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[e])},readers:{gml:OpenLayers.Util.applyDefaults({_inherit:function(e,t,a){var i=parseInt(e.getAttribute("srsDimension"),10)||a&&a.srsDimension;i&&(t.srsDimension=i)},featureMembers:function(e,t){this.readChildNodes(e,t)},Curve:function(e,t){var a={points:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),t.components||(t.components=[]),t.components.push(new OpenLayers.Geometry.LineString(a.points))},segments:function(e,t){this.readChildNodes(e,t)},LineStringSegment:function(e,t){var a={};this.readChildNodes(e,a),a.points&&Array.prototype.push.apply(t.points,a.points)},pos:function(e,t){var a,i=this.getChildValue(e).replace(this.regExes.trimSpace,""),s=i.split(this.regExes.splitSpace);a=this.xy?new OpenLayers.Geometry.Point(s[0],s[1],s[2]):new OpenLayers.Geometry.Point(s[1],s[0],s[2]),t.points=[a]},posList:function(e,t){for(var a,i,s,r=this.getChildValue(e).replace(this.regExes.trimSpace,""),o=r.split(this.regExes.splitSpace),n=t.srsDimension||parseInt(e.getAttribute("srsDimension")||e.getAttribute("dimension"),10)||2,l=o.length/n,c=new Array(l),d=0,p=o.length;d<p;d+=n)a=o[d],i=o[d+1],s=2==n?void 0:o[d+2],this.xy?c[d/n]=new OpenLayers.Geometry.Point(a,i,s):c[d/n]=new OpenLayers.Geometry.Point(i,a,s);t.points=c},Surface:function(e,t){this.readChildNodes(e,t)},patches:function(e,t){this.readChildNodes(e,t)},PolygonPatch:function(e,t){this.readers.gml.Polygon.apply(this,[e,t])},exterior:function(e,t){var a={};this.readChildNodes(e,a),t.outer=a.components[0]},interior:function(e,t){var a={};this.readChildNodes(e,a),t.inner.push(a.components[0])},MultiCurve:function(e,t){var a={components:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),a.components.length>0&&(t.components=[new OpenLayers.Geometry.MultiLineString(a.components)])},curveMember:function(e,t){this.readChildNodes(e,t)},MultiSurface:function(e,t){var a={components:[]};this.readers.gml._inherit.apply(this,[e,a,t]),this.readChildNodes(e,a),a.components.length>0&&(t.components=[new OpenLayers.Geometry.MultiPolygon(a.components)])},surfaceMember:function(e,t){this.readChildNodes(e,t)},surfaceMembers:function(e,t){this.readChildNodes(e,t)},pointMembers:function(e,t){this.readChildNodes(e,t)},lineStringMembers:function(e,t){this.readChildNodes(e,t)},polygonMembers:function(e,t){this.readChildNodes(e,t)},geometryMembers:function(e,t){this.readChildNodes(e,t)},Envelope:function(e,t){var a={points:new Array(2)};this.readChildNodes(e,a),t.components||(t.components=[]);var i=a.points[0],s=a.points[1];t.components.push(new OpenLayers.Bounds(i.x,i.y,s.x,s.y))},lowerCorner:function(e,t){var a={};this.readers.gml.pos.apply(this,[e,a]),t.points[0]=a.points[0]},upperCorner:function(e,t){var a={};this.readers.gml.pos.apply(this,[e,a]),t.points[1]=a.points[0]}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(e){var t;t=OpenLayers.Util.isArray(e)?"featureMembers":"featureMember";var a=this.writeNode("gml:"+t,e);return this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(e){for(var t=this.createElementNSPlus("gml:featureMembers"),a=0,i=e.length;a<i;++a)this.writeNode("feature:_typeName",e[a],t);return t},Point:function(e){var t=this.createElementNSPlus("gml:Point");return this.writeNode("pos",e,t),t},pos:function(e){var t=this.xy?e.x+" "+e.y:e.y+" "+e.x;return this.createElementNSPlus("gml:pos",{value:t})},LineString:function(e){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("posList",e.components,t),t},Curve:function(e){var t=this.createElementNSPlus("gml:Curve");return this.writeNode("segments",e,t),t},segments:function(e){var t=this.createElementNSPlus("gml:segments");return this.writeNode("LineStringSegment",e,t),t},LineStringSegment:function(e){var t=this.createElementNSPlus("gml:LineStringSegment");return this.writeNode("posList",e.components,t),t},posList:function(e){for(var t,a=e.length,i=new Array(a),s=0;s<a;++s)t=e[s],this.xy?i[s]=t.x+" "+t.y:i[s]=t.y+" "+t.x;return this.createElementNSPlus("gml:posList",{value:i.join(" ")})},Surface:function(e){var t=this.createElementNSPlus("gml:Surface");return this.writeNode("patches",e,t),t},patches:function(e){var t=this.createElementNSPlus("gml:patches");return this.writeNode("PolygonPatch",e,t),t},PolygonPatch:function(e){var t=this.createElementNSPlus("gml:PolygonPatch",{attributes:{interpolation:"planar"}});this.writeNode("exterior",e.components[0],t);for(var a=1,i=e.components.length;a<i;++a)this.writeNode("interior",e.components[a],t);return t},Polygon:function(e){var t=this.createElementNSPlus("gml:Polygon");this.writeNode("exterior",e.components[0],t);for(var a=1,i=e.components.length;a<i;++a)this.writeNode("interior",e.components[a],t);return t},exterior:function(e){var t=this.createElementNSPlus("gml:exterior");return this.writeNode("LinearRing",e,t),t},interior:function(e){var t=this.createElementNSPlus("gml:interior");return this.writeNode("LinearRing",e,t),t},LinearRing:function(e){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("posList",e.components,t),t},MultiCurve:function(e){for(var t=this.createElementNSPlus("gml:MultiCurve"),a=e.components||[e],i=0,s=a.length;i<s;++i)this.writeNode("curveMember",a[i],t);return t},curveMember:function(e){var t=this.createElementNSPlus("gml:curveMember");return this.curve?this.writeNode("Curve",e,t):this.writeNode("LineString",e,t),t},MultiSurface:function(e){for(var t=this.createElementNSPlus("gml:MultiSurface"),a=e.components||[e],i=0,s=a.length;i<s;++i)this.writeNode("surfaceMember",a[i],t);return t},surfaceMember:function(e){var t=this.createElementNSPlus("gml:surfaceMember");return this.surface?this.writeNode("Surface",e,t):this.writeNode("Polygon",e,t),t},Envelope:function(e){var t=this.createElementNSPlus("gml:Envelope");return this.writeNode("lowerCorner",e,t),this.writeNode("upperCorner",e,t),this.srsName&&t.setAttribute("srsName",this.srsName),t},lowerCorner:function(e){var t=this.xy?e.left+" "+e.bottom:e.bottom+" "+e.left;return this.createElementNSPlus("gml:lowerCorner",{value:t})},upperCorner:function(e){var t=this.xy?e.right+" "+e.top:e.top+" "+e.right;return this.createElementNSPlus("gml:upperCorner",{value:t})}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":this.curve===!0?"Curve":"LineString","OpenLayers.Geometry.MultiLineString":this.multiCurve===!1?"MultiLineString":"MultiCurve","OpenLayers.Geometry.Polygon":this.surface===!0?"Surface":"Polygon","OpenLayers.Geometry.MultiPolygon":this.multiSurface===!1?"MultiPolygon":"MultiSurface","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.v3"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Filter.v1_1_0=OpenLayers.Class(OpenLayers.Format.GML.v3,OpenLayers.Format.Filter.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",initialize:function(e){OpenLayers.Format.GML.v3.prototype.initialize.apply(this,[e])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e,t){var a=e.getAttribute("matchCase"),i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,matchCase:!("false"===a||"0"===a)});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsNotEqualTo:function(e,t){var a=e.getAttribute("matchCase"),i=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO,matchCase:!("false"===a||"0"===a)});this.readChildNodes(e,i),t.filters.push(i)},PropertyIsLike:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(e,a);var i=e.getAttribute("wildCard"),s=e.getAttribute("singleChar"),r=e.getAttribute("escapeChar");a.value2regex(i,s,r),t.filters.push(a)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo",{attributes:{matchCase:e.matchCase}});return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsNotEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo",{attributes:{matchCase:e.matchCase}});return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLike:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{matchCase:e.matchCase,wildCard:"*",singleChar:".",escapeChar:"!"}});return this.writeNode("PropertyName",e,t),this.writeNode("Literal",e.regex2value(),t),t},BBOX:function(e){var t=this.createElementNSPlus("ogc:BBOX");e.property&&this.writeNode("PropertyName",e,t);var a=this.writeNode("gml:Envelope",e.value);return e.projection&&a.setAttribute("srsName",e.projection),t.appendChild(a),t},SortBy:function(e){for(var t=this.createElementNSPlus("ogc:SortBy"),a=0,i=e.length;a<i;a++)this.writeNode("ogc:SortProperty",e[a],t);return t},SortProperty:function(e){var t=this.createElementNSPlus("ogc:SortProperty");return this.writeNode("ogc:PropertyName",e,t),this.writeNode("ogc:SortOrder","DESC"==e.order?"DESC":"ASC",t),t},SortOrder:function(e){var t=this.createElementNSPlus("ogc:SortOrder",{value:e});return t}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature},writeSpatial:function(e,t){var a=this.createElementNSPlus("ogc:"+t);if(this.writeNode("PropertyName",e,a),e.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",e.value,a);else{var i;i=e.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",e.value).firstChild:this.writeNode("gml:Envelope",e.value),e.projection&&i.setAttribute("srsName",e.projection),a.appendChild(i)}return a},CLASS_NAME:"OpenLayers.Format.Filter.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OWSCommon=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",getVersion:function(e,t){var a=this.version;if(!a){var i=e.getAttribute("xmlns:ows");i&&"1.1"===i.substring(i.lastIndexOf("/")+1)&&(a="1.1.0"),a||(a=this.defaultVersion)}return a},CLASS_NAME:"OpenLayers.Format.OWSCommon"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OWSCommon.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var a={};return this.readChildNodes(e,a),a},readers:{ows:{Exception:function(e,t){var a={code:e.getAttribute("exceptionCode"),locator:e.getAttribute("locator"),texts:[]};t.exceptions.push(a),this.readChildNodes(e,a)},ExceptionText:function(e,t){var a=this.getChildValue(e);t.texts.push(a)},ServiceIdentification:function(e,t){t.serviceIdentification={},this.readChildNodes(e,t.serviceIdentification)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.abstract=this.getChildValue(e)},Keywords:function(e,t){t.keywords={},this.readChildNodes(e,t.keywords)},Keyword:function(e,t){t[this.getChildValue(e)]=!0},ServiceType:function(e,t){t.serviceType={codeSpace:e.getAttribute("codeSpace"),value:this.getChildValue(e)}},ServiceTypeVersion:function(e,t){t.serviceTypeVersion=this.getChildValue(e)},Fees:function(e,t){t.fees=this.getChildValue(e)},AccessConstraints:function(e,t){t.accessConstraints=this.getChildValue(e)},ServiceProvider:function(e,t){t.serviceProvider={},this.readChildNodes(e,t.serviceProvider)},ProviderName:function(e,t){t.providerName=this.getChildValue(e)},ProviderSite:function(e,t){t.providerSite=this.getAttributeNS(e,this.namespaces.xlink,"href")},ServiceContact:function(e,t){t.serviceContact={},this.readChildNodes(e,t.serviceContact)},IndividualName:function(e,t){t.individualName=this.getChildValue(e)},PositionName:function(e,t){t.positionName=this.getChildValue(e)},ContactInfo:function(e,t){t.contactInfo={},this.readChildNodes(e,t.contactInfo)},Phone:function(e,t){t.phone={},this.readChildNodes(e,t.phone)},Voice:function(e,t){t.voice=this.getChildValue(e)},Address:function(e,t){t.address={},this.readChildNodes(e,t.address)},DeliveryPoint:function(e,t){t.deliveryPoint=this.getChildValue(e)},City:function(e,t){t.city=this.getChildValue(e)},AdministrativeArea:function(e,t){t.administrativeArea=this.getChildValue(e)},PostalCode:function(e,t){t.postalCode=this.getChildValue(e)},Country:function(e,t){t.country=this.getChildValue(e)},ElectronicMailAddress:function(e,t){t.electronicMailAddress=this.getChildValue(e)},Role:function(e,t){t.role=this.getChildValue(e)},OperationsMetadata:function(e,t){t.operationsMetadata={},this.readChildNodes(e,t.operationsMetadata)},Operation:function(e,t){var a=e.getAttribute("name");t[a]={},this.readChildNodes(e,t[a])},DCP:function(e,t){t.dcp={},this.readChildNodes(e,t.dcp)},HTTP:function(e,t){t.http={},this.readChildNodes(e,t.http)},Get:function(e,t){t.get||(t.get=[]);var a={url:this.getAttributeNS(e,this.namespaces.xlink,"href")};this.readChildNodes(e,a),t.get.push(a)},Post:function(e,t){t.post||(t.post=[]);var a={url:this.getAttributeNS(e,this.namespaces.xlink,"href")};this.readChildNodes(e,a),t.post.push(a)},Parameter:function(e,t){t.parameters||(t.parameters={});var a=e.getAttribute("name");t.parameters[a]={},this.readChildNodes(e,t.parameters[a])},Constraint:function(e,t){t.constraints||(t.constraints={});var a=e.getAttribute("name");t.constraints[a]={},this.readChildNodes(e,t.constraints[a])},Value:function(e,t){t[this.getChildValue(e)]=!0},OutputFormat:function(e,t){t.formats.push({value:this.getChildValue(e)}),this.readChildNodes(e,t)},WGS84BoundingBox:function(e,t){var a={};a.crs=e.getAttribute("crs"),t.BoundingBox?t.BoundingBox.push(a):(t.projection=a.crs,a=t),this.readChildNodes(e,a)},BoundingBox:function(e,t){this.readers.ows.WGS84BoundingBox.apply(this,[e,t])},LowerCorner:function(e,t){var a=this.getChildValue(e).replace(this.regExes.trimSpace,"");a=a.replace(this.regExes.trimComma,",");var i=a.split(this.regExes.splitSpace);t.left=i[0],t.bottom=i[1]},UpperCorner:function(e,t){var a=this.getChildValue(e).replace(this.regExes.trimSpace,"");a=a.replace(this.regExes.trimComma,",");var i=a.split(this.regExes.splitSpace);t.right=i[0],t.top=i[1],t.bounds=new OpenLayers.Bounds(t.left,t.bottom,t.right,t.top),delete t.left,delete t.bottom,delete t.right,delete t.top},Language:function(e,t){t.language=this.getChildValue(e)}}},writers:{ows:{BoundingBox:function(e,t){var a=this.createElementNSPlus(t||"ows:BoundingBox",{attributes:{crs:e.projection}});return this.writeNode("ows:LowerCorner",e,a),this.writeNode("ows:UpperCorner",e,a),a},LowerCorner:function(e){var t=this.createElementNSPlus("ows:LowerCorner",{value:e.bounds.left+" "+e.bounds.bottom});return t},UpperCorner:function(e){var t=this.createElementNSPlus("ows:UpperCorner",{value:e.bounds.right+" "+e.bounds.top});return t},Identifier:function(e){var t=this.createElementNSPlus("ows:Identifier",{value:e});return t},Title:function(e){var t=this.createElementNSPlus("ows:Title",{value:e});return t},Abstract:function(e){var t=this.createElementNSPlus("ows:Abstract",{value:e});return t},OutputFormat:function(e){var t=this.createElementNSPlus("ows:OutputFormat",{value:e});return t}}},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OWSCommon.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(e,t){t.success=!1,t.exceptionReport={version:e.getAttribute("version"),language:e.getAttribute("language"),exceptions:[]},this.readChildNodes(e,t.exceptionReport)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Format.OWSCommon.v1.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFST.v1_1_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0,OpenLayers.Format.WFST.v1,{version:"1.1.0",schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"},initialize:function(e){OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this,[e]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[e])},readNode:function(e,t,a){return OpenLayers.Format.GML.v3.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({FeatureCollection:function(e,t){t.numberOfFeatures=parseInt(e.getAttribute("numberOfFeatures")),OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this,arguments)},TransactionResponse:function(e,t){t.insertIds=[],t.success=!1,this.readChildNodes(e,t)},TransactionSummary:function(e,t){t.success=!0},InsertResults:function(e,t){this.readChildNodes(e,t)},Feature:function(e,t){var a={fids:[]};this.readChildNodes(e,a),t.insertIds.push(a.fids[0])}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows},writers:{wfs:OpenLayers.Util.applyDefaults({GetFeature:function(e){var t=OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this,arguments);return e&&this.setAttributes(t,{resultType:e.resultType,startIndex:e.startIndex,count:e.count}),t},Query:function(e){e=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName},e);var t=e.featurePrefix,a=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+e.featureType,srsName:e.srsName}});if(e.featureNS&&a.setAttribute("xmlns:"+t,e.featureNS),e.propertyNames)for(var i=0,s=e.propertyNames.length;i<s;i++)this.writeNode("wfs:PropertyName",{property:e.propertyNames[i]},a);return e.filter&&(OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this,e.filter),this.writeNode("ogc:Filter",e.filter,a)),a},PropertyName:function(e){return this.createElementNSPlus("wfs:PropertyName",{value:e.property})}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(e){e=e||{},OpenLayers.Util.extend(this,e),this.options=e},mergeWithDefaultFilter:function(e){var t;return t=e&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,e]}):e||this.defaultFilter||void 0},destroy:function(){this.options=null,this.format=null},read:function(e){e=e||{},e.filter=this.mergeWithDefaultFilter(e.filter)},create:function(){},update:function(){},delete:function(){},commit:function(){},abort:function(e){},createCallback:function(e,t,a){return OpenLayers.Function.bind(function(){e.apply(this,[t,a])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(e){OpenLayers.Util.extend(this,e)},success:function(){return this.code>0},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)}(),read:function(json,filter){function walk(e,t){if(t&&"object"==typeof t)for(var a in t)t.hasOwnProperty(a)&&(t[a]=walk(a,t[a]));return filter(e,t)}var object;if(this.nativeJSON)object=JSON.parse(json,filter);else try{/^[\],:{}\s]*$/.test(json.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(object=eval("("+json+")"),"function"==typeof filter&&(object=walk("",object)))}catch(e){}return this.keepData&&(this.data=object),object},write:function(e,t){this.pretty=!!t;var a=null,i=typeof e;if(this.serialize[i])try{a=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[i].apply(this,[e])}catch(e){OpenLayers.Console.error("Trouble serializing: "+e)}return a},writeIndent:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(e){if(null==e)return"null";if(e.constructor==Date)return this.serialize.date.apply(this,[e]);if(e.constructor==Array)return this.serialize.array.apply(this,[e]);var t=["{"];this.level+=1;var a,i,s,r=!1;for(a in e)e.hasOwnProperty(a)&&(i=OpenLayers.Format.JSON.prototype.write.apply(this,[a,this.pretty]),s=OpenLayers.Format.JSON.prototype.write.apply(this,[e[a],this.pretty]),null!=i&&null!=s&&(r&&t.push(","),t.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),s),r=!0));return this.level-=1,t.push(this.writeNewline(),this.writeIndent(),"}"),t.join("")},array:function(e){var t,a=["["];this.level+=1;for(var i=0,s=e.length;i<s;++i)t=OpenLayers.Format.JSON.prototype.write.apply(this,[e[i],this.pretty]),null!=t&&(i>0&&a.push(","),a.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,a.push(this.writeNewline(),this.writeIndent(),"]"),a.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,a){var i=t[a];return i?i:(i=a.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(e,t,a){t=t?t:"FeatureCollection";var i=null,s=null;if(s="string"==typeof e?OpenLayers.Format.JSON.prototype.read.apply(this,[e,a]):e){if("string"!=typeof s.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+e);else if(this.isValidType(s,t))switch(t){case"Geometry":try{i=this.parseGeometry(s)}catch(e){OpenLayers.Console.error(e)}break;case"Feature":try{i=this.parseFeature(s),i.type="Feature"}catch(e){OpenLayers.Console.error(e)}break;case"FeatureCollection":switch(i=[],s.type){case"Feature":try{i.push(this.parseFeature(s))}catch(e){i=null,OpenLayers.Console.error(e)}break;case"FeatureCollection":for(var r=0,o=s.features.length;r<o;++r)try{i.push(this.parseFeature(s.features[r]))}catch(e){i=null,OpenLayers.Console.error(e)}break;default:try{var n=this.parseGeometry(s);i.push(new OpenLayers.Feature.Vector(n))}catch(e){i=null,OpenLayers.Console.error(e)}}}}else OpenLayers.Console.error("Bad JSON: "+e);return i},isValidType:function(e,t){var a=!1;switch(t){case"Geometry":OpenLayers.Util.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)==-1?OpenLayers.Console.error("Unsupported geometry type: "+e.type):a=!0;break;case"FeatureCollection":a=!0;break;default:e.type==t?a=!0:OpenLayers.Console.error("Cannot convert types from "+e.type+" to "+t)}return a},parseFeature:function(e){var t,a,i,s;i=e.properties?e.properties:{},s=e.geometry&&e.geometry.bbox||e.bbox;try{a=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new OpenLayers.Feature.Vector(a,i),s&&(t.bounds=OpenLayers.Bounds.fromArray(s)),e.id&&(t.fid=e.id),t},parseGeometry:function(e){if(null==e)return null;var t,a=!1;if("GeometryCollection"==e.type){if(!OpenLayers.Util.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var i=e.geometries.length,s=new Array(i),r=0;r<i;++r)s[r]=this.parseGeometry.apply(this,[e.geometries[r]]);t=new OpenLayers.Geometry.Collection(s),a=!0}else{if(!OpenLayers.Util.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return this.internalProjection&&this.externalProjection&&!a&&t.transform(this.externalProjection,this.internalProjection),t},parseCoords:{point:function(e){if(0==this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new OpenLayers.Geometry.Point(e[0],e[1])},multipoint:function(e){for(var t=[],a=null,i=0,s=e.length;i<s;++i){try{a=this.parseCoords.point.apply(this,[e[i]])}catch(e){throw e}t.push(a)}return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e){for(var t=[],a=null,i=0,s=e.length;i<s;++i){try{a=this.parseCoords.point.apply(this,[e[i]])}catch(e){throw e}t.push(a)}return new OpenLayers.Geometry.LineString(t)},multilinestring:function(e){for(var t=[],a=null,i=0,s=e.length;i<s;++i){try{a=this.parseCoords.linestring.apply(this,[e[i]])}catch(e){throw e}t.push(a)}return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){for(var t,a,i=[],s=0,r=e.length;s<r;++s){try{a=this.parseCoords.linestring.apply(this,[e[s]])}catch(e){throw e}t=new OpenLayers.Geometry.LinearRing(a.components),i.push(t)}return new OpenLayers.Geometry.Polygon(i)},multipolygon:function(e){for(var t=[],a=null,i=0,s=e.length;i<s;++i){try{a=this.parseCoords.polygon.apply(this,[e[i]])}catch(e){throw e}t.push(a)}return new OpenLayers.Geometry.MultiPolygon(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(e[0][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[0][1])])])}},write:function(e,t){var a={type:null};if(OpenLayers.Util.isArray(e)){a.type="FeatureCollection";var i=e.length;a.features=new Array(i);for(var s=0;s<i;++s){var r=e[s];if(!r instanceof OpenLayers.Feature.Vector){var o="FeatureCollection only supports collections of features: "+r;throw o}a.features[s]=this.extract.feature.apply(this,[r])}}else 0==e.CLASS_NAME.indexOf("OpenLayers.Geometry")?a=this.extract.geometry.apply(this,[e]):e instanceof OpenLayers.Feature.Vector&&(a=this.extract.feature.apply(this,[e]),e.layer&&e.layer.projection&&(a.crs=this.createCRSObject(e)));return OpenLayers.Format.JSON.prototype.write.apply(this,[a,t])},createCRSObject:function(e){var t=e.layer.projection.toString(),a={};if(t.match(/epsg:/i)){var i=parseInt(t.substring(t.indexOf(":")+1));a=4326==i?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+i}}}return a},extract:{feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),a={type:"Feature",properties:e.attributes,geometry:t};return null!=e.fid&&(a.id=e.fid),a},geometry:function(e){if(null==e)return null;this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t,a=e.CLASS_NAME.split(".")[2],i=this.extract[a.toLowerCase()].apply(this,[e]);return t="Collection"==a?{type:"GeometryCollection",geometries:i}:{type:a,coordinates:i}},point:function(e){return[e.x,e.y]},multipoint:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extract.point.apply(this,[e.components[a]]));return t},linestring:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extract.point.apply(this,[e.components[a]]));return t},multilinestring:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extract.linestring.apply(this,[e.components[a]]));return t},polygon:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extract.linestring.apply(this,[e.components[a]]));return t},multipolygon:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extract.polygon.apply(this,[e.components[a]]));return t},collection:function(e){for(var t=e.components.length,a=new Array(t),i=0;i<t;++i)a[i]=this.extract.geometry.apply(this,[e.components[i]]);return a}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.Script=OpenLayers.Class(OpenLayers.Protocol,{url:null,params:null,callback:null,callbackTemplate:"OpenLayers.Protocol.Script.registry.${id}",callbackKey:"callback",callbackPrefix:"",scope:null,format:null,pendingRequests:null,srsInBBOX:!1,initialize:function(e){if(e=e||{},this.params={},this.pendingRequests={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),this.format||(this.format=new OpenLayers.Format.GeoJSON),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({srsInBBOX:this.srsInBBOX});this.filterToParams=function(e,a){return t.write(e,a)}}},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=OpenLayers.Util.applyDefaults(e,this.options),e.params=OpenLayers.Util.applyDefaults(e.params,this.options.params),e.filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=new OpenLayers.Protocol.Response({requestType:"read"}),a=this.createRequest(e.url,e.params,OpenLayers.Function.bind(function(a){t.data=a,this.handleRead(t,e)},this));return t.priv=a,t},createRequest:function(e,t,a){var i=OpenLayers.Protocol.Script.register(a),s=OpenLayers.String.format(this.callbackTemplate,{id:i});t=OpenLayers.Util.extend({},t),t[this.callbackKey]=this.callbackPrefix+s,e=OpenLayers.Util.urlAppend(e,OpenLayers.Util.getParameterString(t));var r=document.createElement("script");r.type="text/javascript",r.src=e,r.id="OpenLayers_Protocol_Script_"+i,this.pendingRequests[r.id]=r;var o=document.getElementsByTagName("head")[0];return o.appendChild(r),r},destroyRequest:function(e){OpenLayers.Protocol.Script.unregister(e.id.split("_").pop()),delete this.pendingRequests[e.id],e.parentNode&&e.parentNode.removeChild(e)},handleRead:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){t.callback&&(e.data?(e.features=this.parseFeatures(e.data),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,this.destroyRequest(e.priv),t.callback.call(t.scope,e))},parseFeatures:function(e){return this.format.read(e)},abort:function(e){if(e)this.destroyRequest(e.priv);else for(var t in this.pendingRequests)this.destroyRequest(this.pendingRequests[t])},destroy:function(){this.abort(),delete this.params,delete this.format,OpenLayers.Protocol.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Protocol.Script"}),function(){var e=OpenLayers.Protocol.Script,t=0;e.registry={},e.register=function(a){var i="c"+ ++t;return e.registry[i]=function(){a.apply(this,arguments)},i},e.unregister=function(t){delete e.registry[t]}}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.EncodedPolyline=OpenLayers.Class(OpenLayers.Format,{geometryType:"linestring",initialize:function(e){OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){var t;if("linestring"==this.geometryType)t=OpenLayers.Geometry.LineString;else if("linearring"==this.geometryType)t=OpenLayers.Geometry.LinearRing;else if("multipoint"==this.geometryType)t=OpenLayers.Geometry.MultiPoint;else if("point"!=this.geometryType&&"polygon"!=this.geometryType)return null;for(var a=this.decodeDeltas(e,2),i=a.length,s=[],r=0;r+1<i;){var o=a[r++],n=a[r++];s.push(new OpenLayers.Geometry.Point(n,o))}return"point"==this.geometryType?new OpenLayers.Feature.Vector(s[0]):"polygon"==this.geometryType?new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(s)])):new OpenLayers.Feature.Vector(new t(s))},decode:function(e,t,a){for(var i=a||1e5,s=this.decodeDeltas(e,t,i),r=s.length,o=[],n=0;n+(t-1)<r;){for(var l=[],c=0;c<t;++c)l.push(s[n++]);o.push(l)}return o},write:function(e){var t;t=e.constructor==Array?e[0]:e;var a,i=t.geometry,s=i.CLASS_NAME.split(".")[2].toLowerCase();if("point"==s)a=new Array(i);else if("linestring"==s||"linearring"==s||"multipoint"==s)a=i.components;else{if("polygon"!=s)return null;a=i.components[0].components}for(var r=[],o=a.length,n=0;n<o;++n){var l=a[n];r.push(l.y),r.push(l.x)}return this.encodeDeltas(r,2)},encode:function(e,t,a){for(var i=a||1e5,s=[],r=e.length,o=0;o<r;++o)for(var n=e[o],l=0;l<t;++l)s.push(n[l]);return this.encodeDeltas(s,t,i)},encodeDeltas:function(e,t,a){var i,s=a||1e5,r=new Array(t);for(i=0;i<t;++i)r[i]=0;for(var o=e.length,n=0;n<o;)for(i=0;i<t;++i,++n){var l=e[n],c=l-r[i];r[i]=l,e[n]=c}return this.encodeFloats(e,s)},decodeDeltas:function(e,t,a){var i,s=a||1e5,r=new Array(t);for(i=0;i<t;++i)r[i]=0;for(var o=this.decodeFloats(e,s),n=o.length,l=0;l<n;)for(i=0;i<t;++i,++l)r[i]+=o[l],o[l]=r[i];return o},encodeFloats:function(e,t){for(var a=t||1e5,i=e.length,s=0;s<i;++s)e[s]=Math.round(e[s]*a);return this.encodeSignedIntegers(e)},decodeFloats:function(e,t){for(var a=t||1e5,i=this.decodeSignedIntegers(e),s=i.length,r=0;r<s;++r)i[r]/=a;return i},encodeSignedIntegers:function(e){for(var t=e.length,a=0;a<t;++a){var i=e[a],s=i<<1;i<0&&(s=~s),e[a]=s}return this.encodeUnsignedIntegers(e)},decodeSignedIntegers:function(e){for(var t=this.decodeUnsignedIntegers(e),a=t.length,i=0;i<a;++i){var s=t[i];t[i]=1&s?~(s>>1):s>>1}return t},encodeUnsignedIntegers:function(e){for(var t="",a=e.length,i=0;i<a;++i)t+=this.encodeUnsignedInteger(e[i]);return t},decodeUnsignedIntegers:function(e){for(var t=[],a=0,i=0,s=e.length,r=0;r<s;++r){var o=e.charCodeAt(r)-63;a|=(31&o)<<i,o<32?(t.push(a),a=0,i=0):i+=5}return t},encodeFloat:function(e,t){return e=Math.round(e*(t||1e5)),this.encodeSignedInteger(e)},decodeFloat:function(e,t){var a=this.decodeSignedInteger(e);return a/(t||1e5)},encodeSignedInteger:function(e){var t=e<<1;return e<0&&(t=~t),this.encodeUnsignedInteger(t)},decodeSignedInteger:function(e){var t=this.decodeUnsignedInteger(e);return 1&t?~(t>>1):t>>1},encodeUnsignedInteger:function(e){for(var t,a="";e>=32;)t=(32|31&e)+63,a+=String.fromCharCode(t),e>>=5;return t=e+63,a+=String.fromCharCode(t)},decodeUnsignedInteger:function(e){for(var t=0,a=0,i=e.length,s=0;s<i;++s){var r=e.charCodeAt(s)-63;if(t|=(31&r)<<a,r<32)break;a+=5}return t},CLASS_NAME:"OpenLayers.Format.EncodedPolyline"});/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:!0,defaultControl:null,saveState:!1,allowDepress:!1,activeState:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.controls=[],this.activeState={}},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var e,t=this.controls.length-1;t>=0;t--)e=this.controls[t],e.events&&e.events.un({activate:this.iconOn,deactivate:this.iconOff}),e.panel_div=null;this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var e,t=0,a=this.controls.length;t<a;t++)e=this.controls[t],(e===this.defaultControl||this.saveState&&this.activeState[e.id])&&e.activate();return this.saveState===!0&&(this.defaultControl=null),this.redraw(),!0}return!1},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var e,t=0,a=this.controls.length;t<a;t++)e=this.controls[t],this.activeState[e.id]=e.deactivate();return this.redraw(),!0}return!1},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick),this.addControlsToMap(this.controls),this.div},redraw:function(){for(var e=this.div.childNodes.length,t=e-1;t>=0;t--)this.div.removeChild(this.div.childNodes[t]);if(this.div.innerHTML="",this.active)for(var t=0,a=this.controls.length;t<a;t++)this.div.appendChild(this.controls[t].panel_div)},activateControl:function(e){if(!this.active)return!1;if(e.type==OpenLayers.Control.TYPE_BUTTON)return void e.trigger();if(e.type==OpenLayers.Control.TYPE_TOGGLE)return void(e.active?e.deactivate():e.activate());if(this.allowDepress&&e.active)e.deactivate();else{for(var t,a=0,i=this.controls.length;a<i;a++)t=this.controls[a],t==e||t.type!==OpenLayers.Control.TYPE_TOOL&&null!=t.type||t.deactivate();e.activate()}},addControls:function(e){OpenLayers.Util.isArray(e)||(e=[e]),this.controls=this.controls.concat(e);for(var t=0,a=e.length;t<a;t++){var i=e[t],s=this.createControlMarkup(i);OpenLayers.Element.addClass(s,i.displayClass+"ItemInactive"),OpenLayers.Element.addClass(s,"olButton"),""==i.title||s.title||(s.title=i.title),i.panel_div=s}this.map&&(this.addControlsToMap(e),this.redraw())},createControlMarkup:function(e){return document.createElement("div")},addControlsToMap:function(e){for(var t,a=0,i=e.length;a<i;a++)t=e[a],t.autoActivate===!0?(t.autoActivate=!1,this.map.addControl(t),t.autoActivate=!0):(this.map.addControl(t),t.deactivate()),t.events.on({activate:this.iconOn,deactivate:this.iconOff})},iconOn:function(){var e=this.panel_div,t=new RegExp("\\b("+this.displayClass+"Item)Inactive\\b");e.className=e.className.replace(t,"$1Active")},iconOff:function(){var e=this.panel_div,t=new RegExp("\\b("+this.displayClass+"Item)Active\\b");e.className=e.className.replace(t,"$1Inactive")},onButtonClick:function(e){for(var t=this.controls,a=e.buttonElement,i=t.length-1;i>=0;--i)if(t[i].panel_div===a){this.activateControl(t[i]);break}},getControlsBy:function(e,t){var a="function"==typeof t.test,i=OpenLayers.Array.filter(this.controls,function(i){return i[e]==t||a&&t.test(i[e])});return i},getControlsByName:function(e){return this.getControlsBy("name",e)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},CLASS_NAME:"OpenLayers.Control.Panel"});/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Button=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){},CLASS_NAME:"OpenLayers.Control.Button"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ZoomIn=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomIn()},CLASS_NAME:"OpenLayers.Control.ZoomIn"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ZoomOut=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomOut()},CLASS_NAME:"OpenLayers.Control.ZoomOut"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ZoomToMaxExtent=OpenLayers.Class(OpenLayers.Control.Button,{trigger:function(){this.map&&this.map.zoomToMaxExtent()},CLASS_NAME:"OpenLayers.Control.ZoomToMaxExtent"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ZoomPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),this.addControls([new OpenLayers.Control.ZoomIn,new OpenLayers.Control.ZoomToMaxExtent,new OpenLayers.Control.ZoomOut])},CLASS_NAME:"OpenLayers.Control.ZoomPanel"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(e,t,a,i){OpenLayers.Layer.prototype.initialize.apply(this,[e,i]),this.url=t,this.params||(this.params=OpenLayers.Util.extend({},a))},destroy:function(){this.url=null,this.params=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e])},setUrl:function(e){this.url=e},mergeNewParams:function(e){this.params=OpenLayers.Util.extend(this.params,e);var t=this.redraw();return null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),t},redraw:function(e){return e?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(e,t){for(var a=1,i=0,s=e.length;i<s;i++)a*=e.charCodeAt(i)*this.URL_HASH_FACTOR,a-=Math.floor(a);return t[Math.floor(a*t.length)]},getFullRequestString:function(e,t){var a=t||this.url,i=OpenLayers.Util.extend({},this.params);i=OpenLayers.Util.extend(i,e);var s=OpenLayers.Util.getParameterString(i);OpenLayers.Util.isArray(a)&&(a=this.selectUrl(s,a));var r=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(a));for(var o in i)o.toUpperCase()in r&&delete i[o];return s=OpenLayers.Util.getParameterString(i),OpenLayers.Util.urlAppend(a,s)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(e,t,a,i,s,r){this.layer=e,this.position=t.clone(),this.setBounds(a),this.url=i,s&&(this.size=s.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,r),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.layer=null,this.bounds=null,this.size=null,this.position=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.eventListeners=null,this.events=null},draw:function(e){e||this.clear();var t=this.shouldDraw();return t&&!e&&this.events.triggerEvent("beforedraw")===!1&&(t=null),t},shouldDraw:function(){var e=!1,t=this.layer.maxExtent;if(t){var a=this.layer.map,i=a.baseLayer.wrapDateLine&&a.getMaxExtent();this.bounds.intersectsBounds(t,{inclusive:!1,worldBounds:i})&&(e=!0)}return e||this.layer.displayOutsideMaxExtent},setBounds:function(e){if(e=e.clone(),this.layer.map.baseLayer.wrapDateLine){var t=this.layer.map.getMaxExtent(),a=this.layer.map.getResolution();e=e.wrapDateLine(t,{leftTolerance:a,rightTolerance:a})}this.bounds=e},moveTo:function(e,t,a){null==a&&(a=!0),this.setBounds(e),this.position=t.clone(),a&&this.draw()},clear:function(e){},CLASS_NAME:"OpenLayers.Tile"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(e,t,a,i,s,r){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=i,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack(),(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)&&(this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden"),null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.imgDiv=null,this.frame=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);return e?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.renderTile(),this.positionTile()):e===!1&&this.unload(),e},renderTile:function(){if(this.layer.async){var e=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(t){e==this.asyncRequestId&&(this.url=t,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),this.initImage()},positionTile:function(){var e=this.getTile().style,t=this.frame?this.size:this.layer.getImageSize(this.bounds),a=1;this.layer instanceof OpenLayers.Layer.Grid&&(a=this.layer.getServerResolution()/this.layer.map.getResolution()),e.left=this.position.x+"px",e.top=this.position.y+"px",e.width=Math.round(a*t.w)+"px",e.height=Math.round(a*t.h)+"px"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var e=this.imgDiv;if(e){var t=this.getTile();t.parentNode===this.layer.div&&this.layer.div.removeChild(t),this.setImgSrc(),this.layerAlphaHack===!0&&(e.style.filter=""),OpenLayers.Element.removeClass(e,"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=OpenLayers.Tile.Image.IMAGE.cloneNode(!1);var e=this.imgDiv.style;if(this.frame){var t=0,a=0;this.layer.gutter&&(t=this.layer.gutter/this.layer.tileSize.w*100,a=this.layer.gutter/this.layer.tileSize.h*100),e.left=-t+"%",e.top=-a+"%",e.width=2*t+100+"%",e.height=2*a+100+"%"}e.visibility="hidden",e.opacity=0,this.layer.opacity<1&&(e.filter="alpha(opacity="+100*this.layer.opacity+")"),e.position="absolute",this.layerAlphaHack&&(e.paddingTop=e.height,e.height="0",e.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},setImage:function(e){this.imgDiv=e},initImage:function(){if(!this.url&&!this.imgDiv)return void(this.isLoading=!1);this.events.triggerEvent("beforeload"),this.layer.div.appendChild(this.getTile()),this.events.triggerEvent(this._loadEvent);var e=this.getImage(),t=e.getAttribute("src")||"";this.url&&OpenLayers.Util.isEquivalentUrl(t,this.url)?this._loadTimeout=window.setTimeout(OpenLayers.Function.bind(this.onImageLoad,this),0):(this.stopLoading(),this.crossOriginKeyword&&e.removeAttribute("crossorigin"),OpenLayers.Event.observe(e,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(e,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url))},setImgSrc:function(e){var t=this.imgDiv;e?(t.style.visibility="hidden",t.style.opacity=0,this.crossOriginKeyword&&("data:"!==e.substr(0,5)?t.setAttribute("crossorigin",this.crossOriginKeyword):t.removeAttribute("crossorigin")),t.src=e):(this.stopLoading(),this.imgDiv=null,t.parentNode&&t.parentNode.removeChild(t))},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var e;return this.frame?(e=this.frame.cloneNode(!1),e.appendChild(this.imgDiv)):e=this.imgDiv,this.imgDiv=null,e}},onImageLoad:function(){var e=this.imgDiv;this.stopLoading(),e.style.visibility="inherit",e.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend"),this.layerAlphaHack===!0&&(e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e.src+"', sizingMethod='scale')")},onImageError:function(){var e=this.imgDiv;null!=e.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(e,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},stopLoading:function(){OpenLayers.Event.stopObservingElement(this.imgDiv),window.clearTimeout(this._loadTimeout),delete this._loadTimeout},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var e=document.createElement("canvas");e.width=this.size.w,e.height=this.size.h,this.canvasContext=e.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Tile.Image.IMAGE=function(){var e=new Image;return e.className="olTileImage",e.galleryImg="no",e}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:"resize",numLoadingTiles:0,serverResolutions:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,gridLayout:null,rowSign:null,transitionendEvents:["transitionend","webkitTransitionEnd","otransitionend","oTransitionEnd"],initialize:function(e,t,a,i){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this._removeBackBuffer=OpenLayers.Function.bind(this.removeBackBuffer,this),this.initProperties(),this.rowSign="t"===this.tileOriginCorner.substr(0,1)?1:-1},initProperties:function(){void 0===this.options.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),void 0===this.options.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid")},setMap:function(e){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,e),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(e){this.removeBackBuffer()},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.grid=null,this.tileSize=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var e=0,t=this.grid.length;e<t;e++)for(var a=this.grid[e],i=0,s=a.length;i<s;i++){var r=a[i];this.destroyTile(r)}this.grid=[],this.gridResolution=null,this.gridLayout=null}},addOptions:function(e,t){var a=void 0!==e.singleTile&&e.singleTile!==this.singleTile;OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this,arguments),this.map&&a&&(this.initProperties(),this.clearGrid(),this.tileSize=this.options.tileSize,this.setTileSize(),this.moveTo(null,!0))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e.gridResolution=null,e.backBuffer=null,e.backBufferTimerId=null,e.loading=!1,e.numLoadingTiles=0,e},moveTo:function(e,t,a){if(OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),e=e||this.map.getExtent(),null!=e){var i=!this.grid.length||t,s=this.getTilesBounds(),r=this.map.getResolution();this.getServerResolution(r);this.singleTile?(i||!a&&!s.containsBounds(e))&&(t&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),t&&"resize"!==this.transitionEffect||this.applyBackBuffer(r),this.initSingleTile(e)):(i=i||!s.intersectsBounds(e,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}),i?(!t||"resize"!==this.transitionEffect&&this.gridResolution!==r||this.applyBackBuffer(r),this.initGriddedTiles(e)):this.moveGriddedTiles())}},getTileData:function(e){var t=null,a=e.lon,i=e.lat,s=this.grid.length;if(this.map&&s){var r=this.map.getResolution(),o=this.tileSize.w,n=this.tileSize.h,l=this.grid[0][0].bounds,c=l.left,d=l.top;if(a<c&&this.map.baseLayer.wrapDateLine){var p=this.map.getMaxExtent().getWidth(),u=Math.ceil((c-a)/p);a+=p*u}var m=(a-c)/(r*o),h=(d-i)/(r*n),g=Math.floor(m),v=Math.floor(h);if(v>=0&&v<s){var f=this.grid[v][g];f&&(t={tile:f,i:Math.floor((m-g)*o),j:Math.floor((h-v)*n)})}}return t},destroyTile:function(e){this.removeTileMonitoringHooks(e),e.destroy()},getServerResolution:function(e){var t=Number.POSITIVE_INFINITY;if(e=e||this.map.getResolution(),this.serverResolutions&&OpenLayers.Util.indexOf(this.serverResolutions,e)===-1){var a,i,s,r;for(a=this.serverResolutions.length-1;a>=0&&(s=this.serverResolutions[a],i=Math.abs(s-e),!(i>t));a--)t=i,r=s;e=r}return e},getServerZoom:function(){var e=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,e):this.map.getZoomForResolution(e)+(this.zoomOffset||0)},applyBackBuffer:function(e){null!==this.backBufferTimerId&&this.removeBackBuffer();var t=this.backBuffer;if(!t){if(t=this.createBackBuffer(),!t)return;e===this.gridResolution?this.div.insertBefore(t,this.div.firstChild):this.map.baseLayer.div.parentNode.insertBefore(t,this.map.baseLayer.div),this.backBuffer=t;var a=this.grid[0][0].bounds;this.backBufferLonLat={lon:a.left,lat:a.top},this.backBufferResolution=this.gridResolution}for(var i,s=this.backBufferResolution/e,r=t.childNodes,o=r.length-1;o>=0;--o)i=r[o],i.style.top=(s*i._i*i._h|0)+"px",i.style.left=(s*i._j*i._w|0)+"px",i.style.width=Math.round(s*i._w)+"px",i.style.height=Math.round(s*i._h)+"px";var n=this.getViewPortPxFromLonLat(this.backBufferLonLat,e),l=this.map.layerContainerOriginPx.x,c=this.map.layerContainerOriginPx.y;t.style.left=Math.round(n.x-l)+"px",t.style.top=Math.round(n.y-c)+"px"},createBackBuffer:function(){var e;if(this.grid.length>0){e=document.createElement("div"),e.id=this.div.id+"_bb",e.className="olBackBuffer",e.style.position="absolute";var t=this.map;e.style.zIndex="resize"===this.transitionEffect?this.getZIndex()-1:t.Z_INDEX_BASE.BaseLayer-(t.getNumLayers()-t.getLayerIndex(this));for(var a=0,i=this.grid.length;a<i;a++)for(var s=0,r=this.grid[a].length;s<r;s++){var o=this.grid[a][s],n=this.grid[a][s].createBackBuffer();n&&(n._i=a,n._j=s,n._w=o.size.w,n._h=o.size.h,n.id=o.id+"_bb",e.appendChild(n))}}return e},removeBackBuffer:function(){if(this._transitionElement){for(var e=this.transitionendEvents.length-1;e>=0;--e)OpenLayers.Event.stopObserving(this._transitionElement,this.transitionendEvents[e],this._removeBackBuffer);delete this._transitionElement}this.backBuffer&&(this.backBuffer.parentNode&&this.backBuffer.parentNode.removeChild(this.backBuffer),this.backBuffer=null,this.backBufferResolution=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(e,t){this.singleTile||this.moveGriddedTiles()},setTileSize:function(e){this.singleTile&&(e=this.map.getSize(),e.h=parseInt(e.h*this.ratio,10),e.w=parseInt(e.w*this.ratio,10)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[e])},getTilesBounds:function(){var e=null,t=this.grid.length;if(t){var a=this.grid[t-1][0].bounds,i=this.grid[0].length*a.getWidth(),s=this.grid.length*a.getHeight();e=new OpenLayers.Bounds(a.left,a.bottom,a.left+i,a.bottom+s)}return e},initSingleTile:function(e){this.events.triggerEvent("retile");var t=e.getCenterLonLat(),a=e.getWidth()*this.ratio,i=e.getHeight()*this.ratio,s=new OpenLayers.Bounds(t.lon-a/2,t.lat-i/2,t.lon+a/2,t.lat+i/2),r=this.map.getLayerPxFromLonLat({lon:s.left,lat:s.top});this.grid.length||(this.grid[0]=[]);var o=this.grid[0][0];o?o.moveTo(s,r):(o=this.addTile(s,r),this.addTileMonitoringHooks(o),o.draw(),this.grid[0][0]=o),this.removeExcessTiles(1,1),this.gridResolution=this.getServerResolution()},calculateGridLayout:function(e,t,a){var i=a*this.tileSize.w,s=a*this.tileSize.h,r=e.left-t.lon,o=Math.floor(r/i)-this.buffer,n=this.rowSign,l=n*(t.lat-e.top+s),c=Math[~n?"floor":"ceil"](l/s)-this.buffer*n;return{tilelon:i,tilelat:s,startcol:o,startrow:c}},getTileOrigin:function(){var e=this.tileOrigin;if(!e){var t=this.getMaxExtent(),a={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner];e=new OpenLayers.LonLat(t[a[0]],t[a[1]])}return e},getTileBoundsForGridIndex:function(e,t){var a=this.getTileOrigin(),i=this.gridLayout,s=i.tilelon,r=i.tilelat,o=i.startcol,n=i.startrow,l=this.rowSign;return new OpenLayers.Bounds(a.lon+(o+t)*s,a.lat-(n+e*l)*r*l,a.lon+(o+t+1)*s,a.lat-(n+(e-1)*l)*r*l)},initGriddedTiles:function(e){this.events.triggerEvent("retile");var t=this.map.getSize(),a=this.getTileOrigin(),i=this.map.getResolution(),s=this.getServerResolution(),r=i/s,o={w:this.tileSize.w/r,h:this.tileSize.h/r},n=Math.ceil(t.h/o.h)+2*this.buffer+1,l=Math.ceil(t.w/o.w)+2*this.buffer+1,c=this.calculateGridLayout(e,a,s);this.gridLayout=c;var d=c.tilelon,p=c.tilelat,u=this.map.layerContainerOriginPx.x,m=this.map.layerContainerOriginPx.y,h=this.getTileBoundsForGridIndex(0,0),g=this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(h.left,h.top));g.x=Math.round(g.x)-u,g.y=Math.round(g.y)-m;var v=[],f=this.map.getCenter(),y=0;do{var b=this.grid[y];b||(b=[],this.grid.push(b));var L=0;do{h=this.getTileBoundsForGridIndex(y,L);var w=g.clone();w.x=w.x+L*Math.round(o.w),w.y=w.y+y*Math.round(o.h);var O=b[L];O?O.moveTo(h,w,!1):(O=this.addTile(h,w),this.addTileMonitoringHooks(O),b.push(O));var x=h.getCenterLonLat();v.push({tile:O,distance:Math.pow(x.lon-f.lon,2)+Math.pow(x.lat-f.lat,2)}),L+=1}while(h.right<=e.right+d*this.buffer||L<l);y+=1}while(h.bottom>=e.bottom-p*this.buffer||y<n);this.removeExcessTiles(y,L);var i=this.getServerResolution();this.gridResolution=i,v.sort(function(e,t){return e.distance-t.distance});for(var S=0,C=v.length;S<C;++S)v[S].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(e,t){var a=new this.tileClass(this,t,e,null,this.tileSize,this.tileOptions);return this.events.triggerEvent("addtile",{tile:a}),a},addTileMonitoringHooks:function(e){var t="olTileReplacing";e.onLoadStart=function(){this.loading===!1&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:e}),this.numLoadingTiles++,!this.singleTile&&this.backBuffer&&this.gridResolution===this.backBufferResolution&&OpenLayers.Element.addClass(e.getTile(),t)},e.onLoadEnd=function(a){this.numLoadingTiles--;var i="unload"===a.type;if(this.events.triggerEvent("tileloaded",{tile:e,aborted:i}),!this.singleTile&&!i&&this.backBuffer&&this.gridResolution===this.backBufferResolution){var s=e.getTile();if("none"===OpenLayers.Element.getStyle(s,"display")){var r=document.getElementById(e.id+"_bb");r&&r.parentNode.removeChild(r)}OpenLayers.Element.removeClass(s,t)}if(0===this.numLoadingTiles){if(this.backBuffer)if(0===this.backBuffer.childNodes.length)this.removeBackBuffer();else{this._transitionElement=i?this.div.lastChild:e.imgDiv;for(var o=this.transitionendEvents,n=o.length-1;n>=0;--n)OpenLayers.Event.observe(this._transitionElement,o[n],this._removeBackBuffer);this.backBufferTimerId=window.setTimeout(this._removeBackBuffer,this.removeBackBufferDelay)}this.loading=!1,this.events.triggerEvent("loadend")}},e.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:e})},e.events.on({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},moveGriddedTiles:function(){for(var e=this.buffer+1;;){var t=this.grid[0][0],a={x:t.position.x+this.map.layerContainerOriginPx.x,y:t.position.y+this.map.layerContainerOriginPx.y},i=this.getServerResolution()/this.map.getResolution(),s={w:Math.round(this.tileSize.w*i),h:Math.round(this.tileSize.h*i)};if(a.x>-s.w*(e-1))this.shiftColumn(!0,s);else if(a.x<-s.w*e)this.shiftColumn(!1,s);else if(a.y>-s.h*(e-1))this.shiftRow(!0,s);else{if(!(a.y<-s.h*e))break;this.shiftRow(!1,s)}}},shiftRow:function(e,t){var a=this.grid,i=e?0:a.length-1,s=e?-1:1,r=this.rowSign,o=this.gridLayout;o.startrow+=s*r;for(var n=a[i],l=a[e?"pop":"shift"](),c=0,d=l.length;c<d;c++){var p=l[c],u=n[c].position.clone();u.y+=t.h*s,p.moveTo(this.getTileBoundsForGridIndex(i,c),u)}a[e?"unshift":"push"](l)},shiftColumn:function(e,t){var a=this.grid,i=e?0:a[0].length-1,s=e?-1:1,r=this.gridLayout;r.startcol+=s;for(var o=0,n=a.length;o<n;o++){var l=a[o],c=l[i].position.clone(),d=l[e?"pop":"shift"]();c.x+=t.w*s,d.moveTo(this.getTileBoundsForGridIndex(o,i),c),l[e?"unshift":"push"](d)}},removeExcessTiles:function(e,t){for(var a,i;this.grid.length>e;){var s=this.grid.pop();for(a=0,i=s.length;a<i;a++){var r=s[a];this.destroyTile(r)}}for(a=0,i=this.grid.length;a<i;a++)for(;this.grid[a].length>t;){var s=this.grid[a],r=s.pop();this.destroyTile(r)}},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(e){var t=this.maxExtent,a=this.getResolution(),i=a*this.tileSize.w,s=a*this.tileSize.h,r=this.getLonLatFromViewPortPx(e),o=t.left+i*Math.floor((r.lon-t.left)/i),n=t.bottom+s*Math.floor((r.lat-t.bottom)/s);return new OpenLayers.Bounds(o,n,o+i,n+s)},CLASS_NAME:"OpenLayers.Layer.Grid"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.ArcXML=OpenLayers.Class(OpenLayers.Format.XML,{fontStyleKeys:["antialiasing","blockout","font","fontcolor","fontsize","fontstyle","glowing","interval","outline","printmode","shadow","transparency"],request:null,response:null,initialize:function(e){if(this.request=new OpenLayers.Format.ArcXML.Request,this.response=new OpenLayers.Format.ArcXML.Response,e)if("feature"==e.requesttype){this.request.get_image=null;var t=this.request.get_feature.query;this.addCoordSys(t.featurecoordsys,e.featureCoordSys),this.addCoordSys(t.filtercoordsys,e.filterCoordSys),e.polygon?(t.isspatial=!0,t.spatialfilter.polygon=e.polygon):e.envelope&&(t.isspatial=!0,t.spatialfilter.envelope={minx:0,miny:0,maxx:0,maxy:0},this.parseEnvelope(t.spatialfilter.envelope,e.envelope))}else if("image"==e.requesttype){this.request.get_feature=null;var a=this.request.get_image.properties;this.parseEnvelope(a.envelope,e.envelope),this.addLayers(a.layerlist,e.layers),this.addImageSize(a.imagesize,e.tileSize),this.addCoordSys(a.featurecoordsys,e.featureCoordSys),this.addCoordSys(a.filtercoordsys,e.filterCoordSys)}else this.request=null;OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},parseEnvelope:function(e,t){t&&4==t.length&&(e.minx=t[0],e.miny=t[1],e.maxx=t[2],e.maxy=t[3])},addLayers:function(e,t){for(var a=0,i=t.length;a<i;a++)e.push(t[a])},addImageSize:function(e,t){null!==t&&(e.width=t.w,e.height=t.h,e.printwidth=t.w,e.printheight=t.h)},addCoordSys:function(e,t){"string"==typeof t?(e.id=parseInt(t),e.string=t):"object"==typeof t&&null!==t.proj?(e.id=t.proj.srsProjNumber,e.string=t.proj.srsCode):e=t},iserror:function(e){var t=null;if(e){e=OpenLayers.Format.XML.prototype.read.apply(this,[e]);var a=e.documentElement.getElementsByTagName("ERROR");t=null!==a&&a.length>0}else t=""!==this.response.error;return t},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=null;if(e&&e.documentElement&&(t="ARCXML"==e.documentElement.nodeName?e.documentElement:e.documentElement.getElementsByTagName("ARCXML")[0]),!t||"parsererror"===t.firstChild.nodeName){var a,i;try{a=e.firstChild.nodeValue,i=e.firstChild.childNodes[1].firstChild.nodeValue}catch(e){}throw{message:"Error parsing the ArcXML request",error:a,source:i}}var s=this.parseResponse(t);return s},write:function(e){e||(e=this.request);var t=this.createElementNS("","ARCXML");t.setAttribute("version","1.1");var a=this.createElementNS("","REQUEST");if(null!=e.get_image){var i=this.createElementNS("","GET_IMAGE");a.appendChild(i);var s=this.createElementNS("","PROPERTIES");i.appendChild(s);var r=e.get_image.properties;if(null!=r.featurecoordsys){var o=this.createElementNS("","FEATURECOORDSYS");s.appendChild(o),0===r.featurecoordsys.id?o.setAttribute("string",r.featurecoordsys.string):o.setAttribute("id",r.featurecoordsys.id)}if(null!=r.filtercoordsys){var n=this.createElementNS("","FILTERCOORDSYS");s.appendChild(n),0===r.filtercoordsys.id?n.setAttribute("string",r.filtercoordsys.string):n.setAttribute("id",r.filtercoordsys.id)}if(null!=r.envelope){var l=this.createElementNS("","ENVELOPE");s.appendChild(l),l.setAttribute("minx",r.envelope.minx),l.setAttribute("miny",r.envelope.miny),l.setAttribute("maxx",r.envelope.maxx),l.setAttribute("maxy",r.envelope.maxy)}var c=this.createElementNS("","IMAGESIZE");if(s.appendChild(c),c.setAttribute("height",r.imagesize.height),c.setAttribute("width",r.imagesize.width),r.imagesize.height==r.imagesize.printheight&&r.imagesize.width==r.imagesize.printwidth||(c.setAttribute("printheight",r.imagesize.printheight),c.setArrtibute("printwidth",r.imagesize.printwidth)),null!=r.background){var d=this.createElementNS("","BACKGROUND");s.appendChild(d),d.setAttribute("color",r.background.color.r+","+r.background.color.g+","+r.background.color.b),null!==r.background.transcolor&&d.setAttribute("transcolor",r.background.transcolor.r+","+r.background.transcolor.g+","+r.background.transcolor.b)}if(null!=r.layerlist&&r.layerlist.length>0){var p=this.createElementNS("","LAYERLIST");s.appendChild(p);for(var u=0;u<r.layerlist.length;u++){var m=this.createElementNS("","LAYERDEF");if(p.appendChild(m),m.setAttribute("id",r.layerlist[u].id),m.setAttribute("visible",r.layerlist[u].visible),"object"==typeof r.layerlist[u].query){var h=r.layerlist[u].query;if(h.where.length<0)continue;var g=null;g="boolean"==typeof h.spatialfilter&&h.spatialfilter?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY"),g.setAttribute("where",h.where),"number"==typeof h.accuracy&&h.accuracy>0&&g.setAttribute("accuracy",h.accuracy),"number"==typeof h.featurelimit&&h.featurelimit<2e3&&g.setAttribute("featurelimit",h.featurelimit),"string"==typeof h.subfields&&"#ALL#"!=h.subfields&&g.setAttribute("subfields",h.subfields),"string"==typeof h.joinexpression&&h.joinexpression.length>0&&g.setAttribute("joinexpression",h.joinexpression),"string"==typeof h.jointables&&h.jointables.length>0&&g.setAttribute("jointables",h.jointables),m.appendChild(g)}"object"==typeof r.layerlist[u].renderer&&this.addRenderer(m,r.layerlist[u].renderer)}}}else if(null!=e.get_feature){var i=this.createElementNS("","GET_FEATURES");if(i.setAttribute("outputmode","newxml"),i.setAttribute("checkesc","true"),e.get_feature.geometry?i.setAttribute("geometry",e.get_feature.geometry):i.setAttribute("geometry","false"),e.get_feature.compact&&i.setAttribute("compact",e.get_feature.compact),"number"==e.get_feature.featurelimit&&i.setAttribute("featurelimit",e.get_feature.featurelimit),i.setAttribute("globalenvelope","true"),a.appendChild(i),null!=e.get_feature.layer&&e.get_feature.layer.length>0){var v=this.createElementNS("","LAYER");v.setAttribute("id",e.get_feature.layer),i.appendChild(v)}var f=e.get_feature.query;if(null!=f){var y=null;if(y=f.isspatial?this.createElementNS("","SPATIALQUERY"):this.createElementNS("","QUERY"),i.appendChild(y),"number"==typeof f.accuracy&&y.setAttribute("accuracy",f.accuracy),null!=f.featurecoordsys){var b=this.createElementNS("","FEATURECOORDSYS");0==f.featurecoordsys.id?b.setAttribute("string",f.featurecoordsys.string):b.setAttribute("id",f.featurecoordsys.id),y.appendChild(b)}if(null!=f.filtercoordsys){var L=this.createElementNS("","FILTERCOORDSYS");0===f.filtercoordsys.id?L.setAttribute("string",f.filtercoordsys.string):L.setAttribute("id",f.filtercoordsys.id),y.appendChild(L)}if(f.buffer>0){var w=this.createElementNS("","BUFFER");w.setAttribute("distance",f.buffer),y.appendChild(w)}if(f.isspatial){var O=this.createElementNS("","SPATIALFILTER");if(O.setAttribute("relation",f.spatialfilter.relation),y.appendChild(O),f.spatialfilter.envelope){var x=this.createElementNS("","ENVELOPE");x.setAttribute("minx",f.spatialfilter.envelope.minx),x.setAttribute("miny",f.spatialfilter.envelope.miny),x.setAttribute("maxx",f.spatialfilter.envelope.maxx),x.setAttribute("maxy",f.spatialfilter.envelope.maxy),O.appendChild(x)}else"object"==typeof f.spatialfilter.polygon&&O.appendChild(this.writePolygonGeometry(f.spatialfilter.polygon))}null!=f.where&&f.where.length>0&&y.setAttribute("where",f.where)}}return t.appendChild(a),OpenLayers.Format.XML.prototype.write.apply(this,[t])},addGroupRenderer:function(e,t){var a=this.createElementNS("","GROUPRENDERER");e.appendChild(a);for(var i=0;i<t.length;i++){var s=t[i];this.addRenderer(a,s)}},addRenderer:function(e,t){if(OpenLayers.Util.isArray(t))this.addGroupRenderer(e,t);else{var a=this.createElementNS("",t.type.toUpperCase()+"RENDERER");e.appendChild(a),"VALUEMAPRENDERER"==a.tagName?this.addValueMapRenderer(a,t):"VALUEMAPLABELRENDERER"==a.tagName?this.addValueMapLabelRenderer(a,t):"SIMPLELABELRENDERER"==a.tagName?this.addSimpleLabelRenderer(a,t):"SCALEDEPENDENTRENDERER"==a.tagName&&this.addScaleDependentRenderer(a,t)}},addScaleDependentRenderer:function(e,t){"string"!=typeof t.lower&&"number"!=typeof t.lower||e.setAttribute("lower",t.lower),"string"!=typeof t.upper&&"number"!=typeof t.upper||e.setAttribute("upper",t.upper),this.addRenderer(e,t.renderer)},addValueMapLabelRenderer:function(e,t){if(e.setAttribute("lookupfield",t.lookupfield),e.setAttribute("labelfield",t.labelfield),"object"==typeof t.exacts)for(var a=0,i=t.exacts.length;a<i;a++){var s=t.exacts[a],r=this.createElementNS("","EXACT");if("string"==typeof s.value&&r.setAttribute("value",s.value),"string"==typeof s.label&&r.setAttribute("label",s.label),"string"==typeof s.method&&r.setAttribute("method",s.method),e.appendChild(r),"object"==typeof s.symbol){var o=null;if("text"==s.symbol.type&&(o=this.createElementNS("","TEXTSYMBOL")),null!=o){for(var n=this.fontStyleKeys,l=0,c=n.length;l<c;l++){var d=n[l];s.symbol[d]&&o.setAttribute(d,s.symbol[d])}r.appendChild(o)}}}},addValueMapRenderer:function(e,t){if(e.setAttribute("lookupfield",t.lookupfield),"object"==typeof t.ranges)for(var a=0,i=t.ranges.length;a<i;a++){var s=t.ranges[a],r=this.createElementNS("","RANGE");if(r.setAttribute("lower",s.lower),r.setAttribute("upper",s.upper),e.appendChild(r),"object"==typeof s.symbol){var o=null;"simplepolygon"==s.symbol.type&&(o=this.createElementNS("","SIMPLEPOLYGONSYMBOL")),null!=o&&("string"==typeof s.symbol.boundarycolor&&o.setAttribute("boundarycolor",s.symbol.boundarycolor),"string"==typeof s.symbol.fillcolor&&o.setAttribute("fillcolor",s.symbol.fillcolor),"number"==typeof s.symbol.filltransparency&&o.setAttribute("filltransparency",s.symbol.filltransparency),r.appendChild(o))}}else if("object"==typeof t.exacts)for(var n=0,l=t.exacts.length;n<l;n++){var c=t.exacts[n],d=this.createElementNS("","EXACT");if("string"==typeof c.value&&d.setAttribute("value",c.value),"string"==typeof c.label&&d.setAttribute("label",c.label),"string"==typeof c.method&&d.setAttribute("method",c.method),e.appendChild(d),"object"==typeof c.symbol){var o=null;"simplemarker"==c.symbol.type&&(o=this.createElementNS("","SIMPLEMARKERSYMBOL")),null!=o&&("string"==typeof c.symbol.antialiasing&&o.setAttribute("antialiasing",c.symbol.antialiasing),"string"==typeof c.symbol.color&&o.setAttribute("color",c.symbol.color),"string"==typeof c.symbol.outline&&o.setAttribute("outline",c.symbol.outline),"string"==typeof c.symbol.overlap&&o.setAttribute("overlap",c.symbol.overlap),"string"==typeof c.symbol.shadow&&o.setAttribute("shadow",c.symbol.shadow),"number"==typeof c.symbol.transparency&&o.setAttribute("transparency",c.symbol.transparency),"string"==typeof c.symbol.usecentroid&&o.setAttribute("usecentroid",c.symbol.usecentroid),"number"==typeof c.symbol.width&&o.setAttribute("width",c.symbol.width),d.appendChild(o))}}},addSimpleLabelRenderer:function(e,t){e.setAttribute("field",t.field);for(var a=["featureweight","howmanylabels","labelbufferratio","labelpriorities","labelweight","linelabelposition","rotationalangles"],i=0,s=a.length;i<s;i++){var r=a[i];t[r]&&e.setAttribute(r,t[r])}if("text"==t.symbol.type){var o=t.symbol,n=this.createElementNS("","TEXTSYMBOL");e.appendChild(n);for(var a=this.fontStyleKeys,i=0,s=a.length;i<s;i++){var r=a[i];o[r]&&n.setAttribute(r,t[r])}}},writePolygonGeometry:function(e){if(!(e instanceof OpenLayers.Geometry.Polygon))throw{message:"Cannot write polygon geometry to ArcXML with an "+e.CLASS_NAME+" object.",geometry:e};for(var t=this.createElementNS("","POLYGON"),a=0,i=e.components.length;a<i;a++){for(var s=e.components[a],r=this.createElementNS("","RING"),o=0,n=s.components.length;o<n;o++){var l=s.components[o],c=this.createElementNS("","POINT");c.setAttribute("x",l.x),c.setAttribute("y",l.y),r.appendChild(c)}t.appendChild(r)}return t},parseResponse:function(e){if("string"==typeof e){var t=new OpenLayers.Format.XML;e=t.read(e)}var a=new OpenLayers.Format.ArcXML.Response,i=e.getElementsByTagName("ERROR");if(null!=i&&i.length>0)a.error=this.getChildValue(i,"Unknown error.");else{var s=e.getElementsByTagName("RESPONSE");if(null==s||0==s.length)return a.error="No RESPONSE tag found in ArcXML response.",a;var r=s[0].firstChild.nodeName;if("#text"==r&&(r=s[0].firstChild.nextSibling.nodeName),"IMAGE"==r){var o=e.getElementsByTagName("ENVELOPE"),n=e.getElementsByTagName("OUTPUT");if(null==o||0==o.length)a.error="No ENVELOPE tag found in ArcXML response.";else if(null==n||0==n.length)a.error="No OUTPUT tag found in ArcXML response.";else{var l=this.parseAttributes(o[0]),c=this.parseAttributes(n[0]);"string"==typeof c.type?a.image={envelope:l,output:{type:c.type,data:this.getChildValue(n[0])}}:a.image={envelope:l,output:c}}}else if("FEATURES"==r){var d=s[0].getElementsByTagName("FEATURES"),p=d[0].getElementsByTagName("FEATURECOUNT");if(a.features.featurecount=p[0].getAttribute("count"),a.features.featurecount>0){var u=d[0].getElementsByTagName("ENVELOPE");a.features.envelope=this.parseAttributes(u[0],"number");for(var m=d[0].getElementsByTagName("FEATURE"),h=0;h<m.length;h++){for(var g=new OpenLayers.Feature.Vector,v=m[h].getElementsByTagName("FIELD"),f=0;f<v.length;f++){var y=v[f].getAttribute("name"),b=v[f].getAttribute("value");g.attributes[y]=b}var L=m[h].getElementsByTagName("POLYGON");if(L.length>0){for(var w=L[0].getElementsByTagName("RING"),O=[],x=0;x<w.length;x++){var S=[];S.push(this.parsePointGeometry(w[x]));for(var C=w[x].getElementsByTagName("HOLE"),E=0;E<C.length;E++)S.push(this.parsePointGeometry(C[E]));C=null,O.push(new OpenLayers.Geometry.Polygon(S)),S=null}w=null,1==O.length?g.geometry=O[0]:g.geometry=new OpenLayers.Geometry.MultiPolygon(O)}a.features.feature.push(g)}}}else a.error="Unidentified response type."}return a},parseAttributes:function(e,t){for(var a={},i=0;i<e.attributes.length;i++)"number"==t?a[e.attributes[i].nodeName]=parseFloat(e.attributes[i].nodeValue):a[e.attributes[i].nodeName]=e.attributes[i].nodeValue;return a},parsePointGeometry:function(e){var t=[],a=e.getElementsByTagName("COORDS");if(a.length>0){var i=this.getChildValue(a[0]);i=i.split(/;/);for(var s=0;s<i.length;s++){var r=i[s].split(/ /);t.push(new OpenLayers.Geometry.Point(r[0],r[1]))}a=null}else{var o=e.getElementsByTagName("POINT");if(o.length>0)for(var n=0;n<o.length;n++)t.push(new OpenLayers.Geometry.Point(parseFloat(o[n].getAttribute("x")),parseFloat(o[n].getAttribute("y"))));o=null}return new OpenLayers.Geometry.LinearRing(t)},CLASS_NAME:"OpenLayers.Format.ArcXML"}),OpenLayers.Format.ArcXML.Request=OpenLayers.Class({initialize:function(e){var t={get_image:{properties:{background:null,draw:!0,envelope:{minx:0,miny:0,maxx:0,maxy:0},featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},imagesize:{height:0,width:0,dpi:96,printheight:0,printwidth:0,scalesymbols:!1},layerlist:[],output:{baseurl:"",legendbaseurl:"",legendname:"",legendpath:"",legendurl:"",name:"",path:"",type:"jpg",url:""}}},get_feature:{layer:"",query:{isspatial:!1,featurecoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},filtercoordsys:{id:0,string:"",datumtransformid:0,datumtransformstring:""},buffer:0,where:"",spatialfilter:{relation:"envelope_intersection",envelope:null}}},environment:{separators:{cs:" ",ts:";"}},layer:[],workspaces:[]};return OpenLayers.Util.extend(this,t)},CLASS_NAME:"OpenLayers.Format.ArcXML.Request"}),OpenLayers.Format.ArcXML.Response=OpenLayers.Class({initialize:function(e){var t={image:{envelope:null,output:""},features:{featurecount:0,envelope:null,feature:[]},error:""};return OpenLayers.Util.extend(this,t)},CLASS_NAME:"OpenLayers.Format.ArcXML.Response"}),
// XMLHttpRequest.js Copyright (C) 2010 Sergey Ilinsky (http://www.ilinsky.com)
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
function(){function e(){this._object=n&&!d?new n:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function t(){return new e}function a(e){if(e._object.send(e._data),l&&!e._async)for(e.readyState=t.OPENED,r(e);e.readyState<t.DONE;)if(e.readyState++,i(e),e._aborted)return}function i(e){t.onreadystatechange&&t.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function s(e){var t=e.responseXML,a=e.responseText;return c&&a&&t&&!t.documentElement&&e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(a)),t&&(c&&0!=t.parseError||!t.documentElement||t.documentElement&&"parsererror"==t.documentElement.tagName)?null:t}function r(e){try{e.responseText=e._object.responseText}catch(e){}try{e.responseXML=s(e._object)}catch(e){}try{e.status=e._object.status}catch(e){}try{e.statusText=e._object.statusText}catch(e){}}function o(e){e._object.onreadystatechange=new window.Function}var n=window.XMLHttpRequest,l=!!window.controllers,c=window.document.all&&!window.opera,d=c&&window.navigator.userAgent.match(/MSIE 7.0/);t.prototype=e.prototype,l&&n.wrapped&&(t.wrapped=n.wrapped),t.UNSENT=0,t.OPENED=1,t.HEADERS_RECEIVED=2,t.LOADING=3,t.DONE=4,t.prototype.readyState=t.UNSENT,t.prototype.responseText="",t.prototype.responseXML=null,t.prototype.status=0,t.prototype.statusText="",t.prototype.priority="NORMAL",t.prototype.onreadystatechange=null,t.onreadystatechange=null,t.onopen=null,t.onsend=null,t.onabort=null,t.prototype.open=function(e,a,s,n,d){delete this._headers,arguments.length<3&&(s=!0),this._async=s;var p,u=this,m=this.readyState;c&&s&&(p=function(){m!=t.DONE&&(o(u),u.abort())},window.attachEvent("onunload",p)),t.onopen&&t.onopen.apply(this,arguments),arguments.length>4?this._object.open(e,a,s,n,d):arguments.length>3?this._object.open(e,a,s,n):this._object.open(e,a,s),this.readyState=t.OPENED,i(this),this._object.onreadystatechange=function(){if(!l||s){if(u.readyState=u._object.readyState,r(u),u._aborted)return void(u.readyState=t.UNSENT);u.readyState==t.DONE&&(delete u._data,o(u),c&&s&&window.detachEvent("onunload",p)),m!=u.readyState&&i(u),m=u.readyState}}},t.prototype.send=function(e){t.onsend&&t.onsend.apply(this,arguments),arguments.length||(e=null),e&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e,a(this)},t.prototype.abort=function(){t.onabort&&t.onabort.apply(this,arguments),this.readyState>t.UNSENT&&(this._aborted=!0),this._object.abort(),o(this),this.readyState=t.UNSENT,delete this._data},t.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},t.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},t.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},t.prototype.addEventListener=function(e,t,a){for(var i,s=0;i=this._listeners[s];s++)if(i[0]==e&&i[1]==t&&i[2]==a)return;this._listeners.push([e,t,a])},t.prototype.removeEventListener=function(e,t,a){for(var i,s=0;(i=this._listeners[s])&&(i[0]!=e||i[1]!=t||i[2]!=a);s++);i&&this._listeners.splice(s,1)},t.prototype.dispatchEvent=function(e){var t={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};"readystatechange"==t.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[t]);for(var a,i=0;a=this._listeners[i];i++)a[0]!=t.type||a[2]||(a[1].handleEvent||a[1]).apply(this,[t])},t.prototype.toString=function(){return"[object XMLHttpRequest]"},t.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(e,t){t||(t=[]),e.__func=this,e.__func(t[0],t[1],t[2],t[3],t[4]),delete e.__func}),OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Request.XMLHttpRequest=t}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.ProxyHost="",OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(e,t){var a=0!==e.indexOf("http"),i=!a&&e.match(this.URL_SPLIT_REGEX);if(i){var s=window.location;a=i[1]==s.protocol&&i[3]==s.hostname;var r=i[4],o=s.port;(80!=r&&""!=r||"80"!=o&&""!=o)&&(a=a&&r==o)}return a||t&&(e="function"==typeof t?t(e):t+encodeURIComponent(e)),e},issue:function(e){var t=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});e=e||{},e.headers=e.headers||{},e=OpenLayers.Util.applyDefaults(e,t),e.headers=OpenLayers.Util.applyDefaults(e.headers,t.headers);var a,i=!1;for(a in e.headers)e.headers.hasOwnProperty(a)&&"x-requested-with"===a.toLowerCase()&&(i=!0);i===!1&&(e.headers["X-Requested-With"]="XMLHttpRequest");var s=new OpenLayers.Request.XMLHttpRequest,r=OpenLayers.Util.urlAppend(e.url,OpenLayers.Util.getParameterString(e.params||{}));r=OpenLayers.Request.makeSameOrigin(r,e.proxy),s.open(e.method,r,e.async,e.user,e.password);for(var o in e.headers)s.setRequestHeader(o,e.headers[o]);var n=this.events,l=this;return s.onreadystatechange=function(){if(s.readyState==OpenLayers.Request.XMLHttpRequest.DONE){var t=n.triggerEvent("complete",{request:s,config:e,requestUrl:r});t!==!1&&l.runCallbacks({request:s,config:e,requestUrl:r})}},e.async===!1?s.send(e.data):window.setTimeout(function(){0!==s.readyState&&s.send(e.data)},0),s},runCallbacks:function(e){var t,a=e.request,i=e.config,s=i.scope?OpenLayers.Function.bind(i.callback,i.scope):i.callback;i.success&&(t=i.scope?OpenLayers.Function.bind(i.success,i.scope):i.success);var r;i.failure&&(r=i.scope?OpenLayers.Function.bind(i.failure,i.scope):i.failure),"file:"==OpenLayers.Util.createUrlObject(i.url).protocol&&a.responseText&&(a.status=200),s(a),(!a.status||a.status>=200&&a.status<300)&&(this.events.triggerEvent("success",e),t&&t(a)),a.status&&(a.status<200||a.status>=300)&&(this.events.triggerEvent("failure",e),r&&r(a))},GET:function(e){return e=OpenLayers.Util.extend(e,{method:"GET"}),OpenLayers.Request.issue(e)},POST:function(e){return e=OpenLayers.Util.extend(e,{method:"POST"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},PUT:function(e){return e=OpenLayers.Util.extend(e,{method:"PUT"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},DELETE:function(e){return e=OpenLayers.Util.extend(e,{method:"DELETE"}),OpenLayers.Request.issue(e)},HEAD:function(e){return e=OpenLayers.Util.extend(e,{method:"HEAD"}),OpenLayers.Request.issue(e)},OPTIONS:function(e){return e=OpenLayers.Util.extend(e,{method:"OPTIONS"}),OpenLayers.Request.issue(e)}}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.ArcIMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{ClientVersion:"9.2",ServiceName:""},featureCoordSys:"4326",filterCoordSys:"4326",layers:null,async:!0,name:"ArcIMS",isBaseLayer:!0,DEFAULT_OPTIONS:{tileSize:new OpenLayers.Size(512,512),featureCoordSys:"4326",filterCoordSys:"4326",layers:null,isBaseLayer:!0,async:!0,name:"ArcIMS"},initialize:function(e,t,a){this.tileSize=new OpenLayers.Size(512,512),this.params=OpenLayers.Util.applyDefaults({ServiceName:a.serviceName},this.DEFAULT_PARAMS),this.options=OpenLayers.Util.applyDefaults(a,this.DEFAULT_OPTIONS),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,this.params,a]),this.transparent&&(this.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.format&&(this.format=OpenLayers.Util.alphaHack()?"image/gif":"image/png")),null===this.options.layers&&(this.options.layers=[])},getURL:function(e){var t="";e=this.adjustBounds(e);var a=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:e.toArray(),tileSize:this.tileSize})),i=new OpenLayers.Request.POST({url:this.getFullRequestString(),data:a.write(),async:!1});if(null!=i){var s=i.responseXML;s&&s.documentElement||(s=i.responseText);var r=new OpenLayers.Format.ArcXML,o=r.read(s);t=this.getUrlOrImage(o.image.output)}return t},getURLasync:function(e,t,a){e=this.adjustBounds(e);var i=new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options,{requesttype:"image",envelope:e.toArray(),tileSize:this.tileSize}));OpenLayers.Request.POST({url:this.getFullRequestString(),async:!0,data:i.write(),callback:function(e){var i=e.responseXML;i&&i.documentElement||(i=e.responseText);var s=new OpenLayers.Format.ArcXML,r=s.read(i);t.call(a,this.getUrlOrImage(r.image.output))},scope:this})},getUrlOrImage:function(e){var t="";return e.url?t=e.url:e.data&&(t="data:image/"+e.type+";base64,"+e.data),t},setLayerQuery:function(e,t){for(var a=0;a<this.options.layers.length;a++)if(e==this.options.layers[a].id)return void(this.options.layers[a].query=t);this.options.layers.push({id:e,visible:!0,query:t})},getFeatureInfo:function(e,t,a){var i=a.buffer||1,s=a.callback||function(){},r=a.scope||window,o={};OpenLayers.Util.extend(o,this.options),o.requesttype="feature",e instanceof OpenLayers.LonLat?(o.polygon=null,o.envelope=[e.lon-i,e.lat-i,e.lon+i,e.lat+i]):e instanceof OpenLayers.Geometry.Polygon&&(o.envelope=null,o.polygon=e);var n=new OpenLayers.Format.ArcXML(o);if(OpenLayers.Util.extend(n.request.get_feature,a),n.request.get_feature.layer=t.id,"number"==typeof t.query.accuracy)n.request.get_feature.query.accuracy=t.query.accuracy;else{var l=this.map.getCenter(),c=this.map.getViewPortPxFromLonLat(l);c.x++;var d=this.map.getLonLatFromPixel(c);n.request.get_feature.query.accuracy=d.lon-l.lon}n.request.get_feature.query.where=t.query.where,n.request.get_feature.query.spatialfilter.relation="area_intersection",OpenLayers.Request.POST({url:this.getFullRequestString({CustomService:"Query"}),data:n.write(),callback:function(e){var t=n.parseResponse(e.responseText);n.iserror()?s.call(r,null):s.call(r,t.features)}})},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcIMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},CLASS_NAME:"OpenLayers.Layer.ArcIMS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.PanZoom=OpenLayers.Class(OpenLayers.Control,{slideFactor:50,slideRatio:null,buttons:null,position:null,initialize:function(e){this.position=new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,OpenLayers.Control.PanZoom.Y),OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onButtonClick),this.removeButtons(),this.buttons=null,this.position=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(e){OpenLayers.Control.prototype.draw.apply(this,arguments),e=this.position,this.buttons=[];var t={w:18,h:18},a=new OpenLayers.Pixel(e.x+t.w/2,e.y);return this._addButton("panup","north-mini.png",a,t),e.y=a.y+t.h,this._addButton("panleft","west-mini.png",e,t),this._addButton("panright","east-mini.png",e.add(t.w,0),t),this._addButton("pandown","south-mini.png",a.add(0,2*t.h),t),this._addButton("zoomin","zoom-plus-mini.png",a.add(0,3*t.h+5),t),this._addButton("zoomworld","zoom-world-mini.png",a.add(0,4*t.h+5),t),this._addButton("zoomout","zoom-minus-mini.png",a.add(0,5*t.h+5),t),this.div},_addButton:function(e,t,a,i){var s=OpenLayers.Util.getImageLocation(t),r=OpenLayers.Util.createAlphaImageDiv(this.id+"_"+e,a,i,s,"absolute");return r.style.cursor="pointer",this.div.appendChild(r),r.action=e,r.className="olButton",this.buttons.push(r),r},_removeButton:function(e){this.div.removeChild(e),OpenLayers.Util.removeItem(this.buttons,e)},removeButtons:function(){for(var e=this.buttons.length-1;e>=0;--e)this._removeButton(this.buttons[e])},onButtonClick:function(e){var t=e.buttonElement;switch(t.action){case"panup":this.map.pan(0,-this.getSlideFactor("h"));break;case"pandown":this.map.pan(0,this.getSlideFactor("h"));break;case"panleft":this.map.pan(-this.getSlideFactor("w"),0);break;case"panright":this.map.pan(this.getSlideFactor("w"),0);break;case"zoomin":this.map.zoomIn();break;case"zoomout":this.map.zoomOut();break;case"zoomworld":this.map.zoomToMaxExtent()}},getSlideFactor:function(e){return this.slideRatio?this.map.getSize()[e]*this.slideRatio:this.slideFactor},CLASS_NAME:"OpenLayers.Control.PanZoom"}),OpenLayers.Control.PanZoom.X=4,OpenLayers.Control.PanZoom.Y=4,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.PanZoomBar=OpenLayers.Class(OpenLayers.Control.PanZoom,{zoomStopWidth:18,zoomStopHeight:11,slider:null,sliderEvents:null,zoombarDiv:null,zoomWorldIcon:!1,panIcons:!0,forceFixedZoomLevel:!1,mouseDragStart:null,deltaY:null,zoomStart:null,destroy:function(){this._removeZoomBar(),this.map.events.un({changebaselayer:this.redraw,updatesize:this.redraw,scope:this}),OpenLayers.Control.PanZoom.prototype.destroy.apply(this,arguments),delete this.mouseDragStart,delete this.zoomStart},setMap:function(e){OpenLayers.Control.PanZoom.prototype.setMap.apply(this,arguments),this.map.events.on({changebaselayer:this.redraw,updatesize:this.redraw,scope:this})},redraw:function(){null!=this.div&&(this.removeButtons(),this._removeZoomBar()),this.draw()},draw:function(e){OpenLayers.Control.prototype.draw.apply(this,arguments),e=this.position.clone(),this.buttons=[];var t={w:18,h:18};if(this.panIcons){var a=new OpenLayers.Pixel(e.x+t.w/2,e.y),i=t.w;this.zoomWorldIcon&&(a=new OpenLayers.Pixel(e.x+t.w,e.y)),this._addButton("panup","north-mini.png",a,t),e.y=a.y+t.h,this._addButton("panleft","west-mini.png",e,t),this.zoomWorldIcon&&(this._addButton("zoomworld","zoom-world-mini.png",e.add(t.w,0),t),i*=2),this._addButton("panright","east-mini.png",e.add(i,0),t),this._addButton("pandown","south-mini.png",a.add(0,2*t.h),t),this._addButton("zoomin","zoom-plus-mini.png",a.add(0,3*t.h+5),t),a=this._addZoomBar(a.add(0,4*t.h+5)),this._addButton("zoomout","zoom-minus-mini.png",a,t)}else this._addButton("zoomin","zoom-plus-mini.png",e,t),a=this._addZoomBar(e.add(0,t.h)),this._addButton("zoomout","zoom-minus-mini.png",a,t),this.zoomWorldIcon&&(a=a.add(0,t.h+3),this._addButton("zoomworld","zoom-world-mini.png",a,t));return this.div},_addZoomBar:function(e){var t=OpenLayers.Util.getImageLocation("slider.png"),a=this.id+"_"+this.map.id,i=this.map.getMinZoom(),s=this.map.getNumZoomLevels()-1-this.map.getZoom(),r=OpenLayers.Util.createAlphaImageDiv(a,e.add(-1,s*this.zoomStopHeight),{w:20,h:9},t,"absolute");r.style.cursor="move",this.slider=r,this.sliderEvents=new OpenLayers.Events(this,r,null,!0,{includeXY:!0}),this.sliderEvents.on({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp});var o={w:this.zoomStopWidth,h:this.zoomStopHeight*(this.map.getNumZoomLevels()-i)},t=OpenLayers.Util.getImageLocation("zoombar.png"),n=null;if(OpenLayers.Util.alphaHack()){var a=this.id+"_"+this.map.id;n=OpenLayers.Util.createAlphaImageDiv(a,e,{w:o.w,h:this.zoomStopHeight},t,"absolute",null,"crop"),n.style.height=o.h+"px"}else n=OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar"+this.map.id,e,o,t);return n.style.cursor="pointer",n.className="olButton",this.zoombarDiv=n,this.div.appendChild(n),this.startTop=parseInt(n.style.top),this.div.appendChild(r),this.map.events.register("zoomend",this,this.moveZoomBar),e=e.add(0,this.zoomStopHeight*(this.map.getNumZoomLevels()-i))},_removeZoomBar:function(){this.sliderEvents.un({touchstart:this.zoomBarDown,touchmove:this.zoomBarDrag,touchend:this.zoomBarUp,mousedown:this.zoomBarDown,mousemove:this.zoomBarDrag,mouseup:this.zoomBarUp}),this.sliderEvents.destroy(),this.div.removeChild(this.zoombarDiv),this.zoombarDiv=null,this.div.removeChild(this.slider),this.slider=null,this.map.events.unregister("zoomend",this,this.moveZoomBar)},onButtonClick:function(e){if(OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this,arguments),e.buttonElement===this.zoombarDiv){var t=e.buttonXY.y/this.zoomStopHeight;!this.forceFixedZoomLevel&&this.map.fractionalZoom||(t=Math.floor(t));var a=this.map.getNumZoomLevels()-1-t;a=Math.min(Math.max(a,0),this.map.getNumZoomLevels()-1),this.map.zoomTo(a)}},passEventToSlider:function(e){this.sliderEvents.handleBrowserEvent(e)},zoomBarDown:function(e){(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))&&(this.map.events.on({touchmove:this.passEventToSlider,mousemove:this.passEventToSlider,mouseup:this.passEventToSlider,scope:this}),this.mouseDragStart=e.xy.clone(),this.zoomStart=e.xy.clone(),this.div.style.cursor="move",this.zoombarDiv.offsets=null,OpenLayers.Event.stop(e))},zoomBarDrag:function(e){if(null!=this.mouseDragStart){var t=this.mouseDragStart.y-e.xy.y,a=OpenLayers.Util.pagePosition(this.zoombarDiv);if(e.clientY-a[1]>0&&e.clientY-a[1]<parseInt(this.zoombarDiv.style.height)-2){var i=parseInt(this.slider.style.top)-t;this.slider.style.top=i+"px",this.mouseDragStart=e.xy.clone()}this.deltaY=this.zoomStart.y-e.xy.y,OpenLayers.Event.stop(e)}},zoomBarUp:function(e){if((OpenLayers.Event.isLeftClick(e)||"touchend"===e.type)&&this.mouseDragStart){this.div.style.cursor="",this.map.events.un({touchmove:this.passEventToSlider,mouseup:this.passEventToSlider,mousemove:this.passEventToSlider,scope:this});var t=this.map.zoom;!this.forceFixedZoomLevel&&this.map.fractionalZoom?(t+=this.deltaY/this.zoomStopHeight,t=Math.min(Math.max(t,0),this.map.getNumZoomLevels()-1)):(t+=this.deltaY/this.zoomStopHeight,t=Math.max(Math.round(t),0)),this.map.zoomTo(t),this.mouseDragStart=null,this.zoomStart=null,this.deltaY=0,OpenLayers.Event.stop(e)}},moveZoomBar:function(){var e=(this.map.getNumZoomLevels()-1-this.map.getZoom())*this.zoomStopHeight+this.startTop+1;this.slider.style.top=e+"px"},CLASS_NAME:"OpenLayers.Control.PanZoomBar"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",CLASS_NAME:"OpenLayers.Format.WFSCapabilities"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wfs:"http://www.opengis.net/wfs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},errorProperty:"featureTypeList",defaultPrefix:"wfs",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wfs:{WFS_Capabilities:function(e,t){this.readChildNodes(e,t)},FeatureTypeList:function(e,t){t.featureTypeList={featureTypes:[]},this.readChildNodes(e,t.featureTypeList)},FeatureType:function(e,t){var a={};this.readChildNodes(e,a),t.featureTypes.push(a)},Name:function(e,t){var a=this.getChildValue(e);if(a){var i=a.split(":");t.name=i.pop(),i.length>0&&(t.featureNS=this.lookupNamespaceURI(e,i[0]))}},Title:function(e,t){var a=this.getChildValue(e);a&&(t.title=a)},Abstract:function(e,t){var a=this.getChildValue(e);a&&(t.abstract=a)}}},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},readers:{wfs:OpenLayers.Util.applyDefaults({DefaultSRS:function(e,t){var a=this.getChildValue(e);a&&(t.srs=a)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),ows:OpenLayers.Format.OWSCommon.v1.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Image=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!0,url:null,extent:null,size:null,tile:null,aspectRatio:null,initialize:function(e,t,a,i,s){this.url=t,this.extent=a,this.maxExtent=a,this.size=i,OpenLayers.Layer.prototype.initialize.apply(this,[e,s]),this.aspectRatio=this.extent.getHeight()/this.size.h/(this.extent.getWidth()/this.size.w)},destroy:function(){this.tile&&(this.removeTileMonitoringHooks(this.tile),this.tile.destroy(),this.tile=null),OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Image(this.name,this.url,this.extent,this.size,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e])},setMap:function(e){null==this.options.maxResolution&&(this.options.maxResolution=this.aspectRatio*this.extent.getWidth()/this.size.w),OpenLayers.Layer.prototype.setMap.apply(this,arguments)},moveTo:function(e,t,a){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var i=null==this.tile;if(t||i){this.setTileSize();var s=this.map.getLayerPxFromLonLat({lon:this.extent.left,lat:this.extent.top});i?(this.tile=new OpenLayers.Tile.Image(this,s,this.extent,null,this.tileSize),this.addTileMonitoringHooks(this.tile)):(this.tile.size=this.tileSize.clone(),this.tile.position=s.clone()),this.tile.draw()}},setTileSize:function(){var e=this.extent.getWidth()/this.map.getResolution(),t=this.extent.getHeight()/this.map.getResolution();this.tileSize=new OpenLayers.Size(e,t)},addTileMonitoringHooks:function(e){e.onLoadStart=function(){this.events.triggerEvent("loadstart")},e.events.register("loadstart",this,e.onLoadStart),e.onLoadEnd=function(){this.events.triggerEvent("loadend")},e.events.register("loadend",this,e.onLoadEnd),e.events.register("unload",this,e.onLoadEnd)},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,scope:this})},setUrl:function(e){this.url=e,this.tile.draw()},getURL:function(e){return this.url},CLASS_NAME:"OpenLayers.Layer.Image"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e,this.active=!1},destroy:function(){this.deactivate(),this.layer=null,this.options=null},setLayer:function(e){this.layer=e},activate:function(){return!this.active&&(this.active=!0,!0)},deactivate:function(){return!!this.active&&(this.active=!1,!0)},CLASS_NAME:"OpenLayers.Strategy"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.Save=OpenLayers.Class(OpenLayers.Strategy,{events:null,auto:!1,timer:null,initialize:function(e){OpenLayers.Strategy.prototype.initialize.apply(this,[e]),this.events=new OpenLayers.Events(this)},activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.auto&&("number"==typeof this.auto?this.timer=window.setInterval(OpenLayers.Function.bind(this.save,this),1e3*this.auto):this.layer.events.on({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.auto&&("number"==typeof this.auto?window.clearInterval(this.timer):this.layer.events.un({featureadded:this.triggerSave,afterfeaturemodified:this.triggerSave,scope:this})),e},triggerSave:function(e){var t=e.feature;t.state!==OpenLayers.State.INSERT&&t.state!==OpenLayers.State.UPDATE&&t.state!==OpenLayers.State.DELETE||this.save([e.feature])},save:function(e){e||(e=this.layer.features),this.events.triggerEvent("start",{features:e});var t=this.layer.projection,a=this.layer.map.getProjectionObject();if(!a.equals(t)){for(var i,s,r=e.length,o=new Array(r),n=0;n<r;++n)i=e[n],s=i.clone(),s.fid=i.fid,s.state=i.state,i.url&&(s.url=i.url),s._original=i,s.geometry.transform(a,t),o[n]=s;e=o}this.layer.protocol.commit(e,{callback:this.onCommit,scope:this})},onCommit:function(e){var t={response:e};if(e.success()){for(var a,i,s=e.reqFeatures,r=[],o=e.insertIds||[],n=0,l=0,c=s.length;l<c;++l)i=s[l],i=i._original||i,a=i.state,a&&(a==OpenLayers.State.DELETE?r.push(i):a==OpenLayers.State.INSERT&&(i.fid=o[n],++n),i.state=null);r.length>0&&this.layer.destroyFeatures(r),this.events.triggerEvent("success",t)}else this.events.triggerEvent("fail",t)},CLASS_NAME:"OpenLayers.Strategy.Save"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Events.featureclick=OpenLayers.Class({cache:null,map:null,provides:["featureclick","nofeatureclick","featureover","featureout"],initialize:function(e){if(this.target=e,e.object instanceof OpenLayers.Map)this.setMap(e.object);else{if(!(e.object instanceof OpenLayers.Layer.Vector))throw"Listeners for '"+this.provides.join("', '")+"' events can only be registered for OpenLayers.Layer.Vector or OpenLayers.Map instances";e.object.map?this.setMap(e.object.map):e.object.events.register("added",this,function(t){this.setMap(e.object.map)})}for(var t=this.provides.length-1;t>=0;--t)e.extensions[this.provides[t]]=!0},setMap:function(e){this.map=e,this.cache={},e.events.register("mousedown",this,this.start,{extension:!0}),e.events.register("mouseup",this,this.onClick,{extension:!0}),e.events.register("touchstart",this,this.start,{extension:!0}),e.events.register("touchmove",this,this.cancel,{extension:!0}),e.events.register("touchend",this,this.onClick,{extension:!0}),e.events.register("mousemove",this,this.onMousemove,{extension:!0})},start:function(e){this.startEvt=e},cancel:function(e){delete this.startEvt},onClick:function(e){if(this.startEvt&&("touchend"===e.type||OpenLayers.Event.isLeftClick(e))){var t=this.getFeatures(this.startEvt);delete this.startEvt;for(var a,i,s,r={},o=0,n=t.length;o<n&&(a=t[o],i=a.layer,r[i.id]=!0,s=this.triggerEvent("featureclick",{feature:a}),s!==!1);++o);for(o=0,n=this.map.layers.length;o<n;++o)i=this.map.layers[o],i instanceof OpenLayers.Layer.Vector&&!r[i.id]&&this.triggerEvent("nofeatureclick",{layer:i})}},onMousemove:function(e){delete this.startEvt;for(var t,a=this.getFeatures(e),i={},s=[],r=0,o=a.length;r<o;++r)t=a[r],i[t.id]=t,this.cache[t.id]||s.push(t);var n=[];for(var l in this.cache)t=this.cache[l],t.layer&&t.layer.map?i[t.id]||n.push(t):delete this.cache[l];var c;for(r=0,o=s.length;r<o&&(t=s[r],this.cache[t.id]=t,c=this.triggerEvent("featureover",{feature:t}),c!==!1);++r);for(r=0,o=n.length;r<o&&(t=n[r],delete this.cache[t.id],c=this.triggerEvent("featureout",{feature:t}),c!==!1);++r);},triggerEvent:function(e,t){var a=t.feature?t.feature.layer:t.layer,i=this.target.object;if(i instanceof OpenLayers.Map||i===a)return this.target.triggerEvent(e,t)},getFeatures:function(e){var t,a,i,s,r,o=e.clientX,n=e.clientY,l=[],c=[],d=[];for(s=this.map.layers.length-1;s>=0;--s)if(t=this.map.layers[s],"none"!==t.div.style.display)if(t.renderer instanceof OpenLayers.Renderer.Elements){if(t instanceof OpenLayers.Layer.Vector)for(a=document.elementFromPoint(o,n);a&&a._featureId;)i=t.getFeatureById(a._featureId),i?(l.push(i),a.style.display="none",c.push(a),a=document.elementFromPoint(o,n)):a=!1;d.push(t),t.div.style.display="none"}else t.renderer instanceof OpenLayers.Renderer.Canvas&&(i=t.renderer.getFeatureIdFromEvent(e),i&&(l.push(i),d.push(t)));for(s=0,r=c.length;s<r;++s)c[s].style.display="";for(s=d.length-1;s>=0;--s)d[s].div.style.display="block";return l},destroy:function(){for(var e=this.provides.length-1;e>=0;--e)delete this.target.extensions[this.provides[e]];this.map.events.un({mousemove:this.onMousemove,mousedown:this.start,mouseup:this.onClick,touchstart:this.start,touchmove:this.cancel,touchend:this.onClick,scope:this}),delete this.cache,delete this.map,delete this.target}}),OpenLayers.Events.nofeatureclick=OpenLayers.Events.featureclick,OpenLayers.Events.featureover=OpenLayers.Events.featureclick,OpenLayers.Events.featureout=OpenLayers.Events.featureclick,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GPX=OpenLayers.Class(OpenLayers.Format.XML,{defaultDesc:"No description available",extractWaypoints:!0,extractTracks:!0,extractRoutes:!0,extractAttributes:!0,namespaces:{gpx:"http://www.topografix.com/GPX/1/1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",creator:"OpenLayers",initialize:function(e){this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=[];if(this.extractTracks)for(var a=e.getElementsByTagName("trk"),i=0,s=a.length;i<s;i++){var r={};this.extractAttributes&&(r=this.parseAttributes(a[i]));for(var o=this.getElementsByTagNameNS(a[i],a[i].namespaceURI,"trkseg"),n=0,l=o.length;n<l;n++){var c=this.extractSegment(o[n],"trkpt");t.push(new OpenLayers.Feature.Vector(c,r))}}if(this.extractRoutes)for(var d=e.getElementsByTagName("rte"),p=0,u=d.length;p<u;p++){var r={};this.extractAttributes&&(r=this.parseAttributes(d[p]));var m=this.extractSegment(d[p],"rtept");t.push(new OpenLayers.Feature.Vector(m,r))}if(this.extractWaypoints)for(var h=e.getElementsByTagName("wpt"),g=0,s=h.length;g<s;g++){var r={};this.extractAttributes&&(r=this.parseAttributes(h[g]));var v=new OpenLayers.Geometry.Point(h[g].getAttribute("lon"),h[g].getAttribute("lat"));t.push(new OpenLayers.Feature.Vector(v,r))}if(this.internalProjection&&this.externalProjection)for(var f=0,y=t.length;f<y;f++)t[f].geometry.transform(this.externalProjection,this.internalProjection);return t},extractSegment:function(e,t){for(var a=this.getElementsByTagNameNS(e,e.namespaceURI,t),i=[],s=0,r=a.length;s<r;s++)i.push(new OpenLayers.Geometry.Point(a[s].getAttribute("lon"),a[s].getAttribute("lat")));return new OpenLayers.Geometry.LineString(i)},parseAttributes:function(e){for(var t,a,i={},s=e.firstChild;s;)1==s.nodeType&&s.firstChild&&(t=s.firstChild,3!=t.nodeType&&4!=t.nodeType||(a=s.prefix?s.nodeName.split(":")[1]:s.nodeName,"trkseg"!=a&&"rtept"!=a&&(i[a]=t.nodeValue))),s=s.nextSibling;return i},write:function(e,t){e=OpenLayers.Util.isArray(e)?e:[e];var a=this.createElementNS(this.namespaces.gpx,"gpx");a.setAttribute("version","1.1"),a.setAttribute("creator",this.creator),this.setAttributes(a,{"xsi:schemaLocation":this.schemaLocation}),t&&"object"==typeof t&&a.appendChild(this.buildMetadataNode(t));for(var i=0,s=e.length;i<s;i++)a.appendChild(this.buildFeatureNode(e[i]));return OpenLayers.Format.XML.prototype.write.apply(this,[a])},buildMetadataNode:function(e){for(var t=["name","desc","author"],a=this.createElementNS(this.namespaces.gpx,"metadata"),i=0;i<t.length;i++){var s=t[i];if(e[s]){var r=this.createElementNS(this.namespaces.gpx,s);r.appendChild(this.createTextNode(e[s])),a.appendChild(r)}}return a},buildFeatureNode:function(e){var t=e.geometry;if(t=t.clone(),this.internalProjection&&this.externalProjection&&t.transform(this.internalProjection,this.externalProjection),"OpenLayers.Geometry.Point"==t.CLASS_NAME){var a=this.buildWptNode(t);return this.appendAttributesNode(a,e),a}var i=this.createElementNS(this.namespaces.gpx,"trk");this.appendAttributesNode(i,e);var s=this.buildTrkSegNode(t);s=OpenLayers.Util.isArray(s)?s:[s];for(var r=0,o=s.length;r<o;r++)i.appendChild(s[r]);return i},buildTrkSegNode:function(e){var t,a,i,s,r;if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){for(t=this.createElementNS(this.namespaces.gpx,"trkseg"),a=0,i=e.components.length;a<i;a++)s=e.components[a],t.appendChild(this.buildTrkPtNode(s));return t}for(r=[],a=0,i=e.components.length;a<i;a++)r.push(this.buildTrkSegNode(e.components[a]));return r},buildTrkPtNode:function(e){var t=this.createElementNS(this.namespaces.gpx,"trkpt");return t.setAttribute("lon",e.x),t.setAttribute("lat",e.y),t},buildWptNode:function(e){var t=this.createElementNS(this.namespaces.gpx,"wpt");return t.setAttribute("lon",e.x),t.setAttribute("lat",e.y),t},appendAttributesNode:function(e,t){var a=this.createElementNS(this.namespaces.gpx,"name");a.appendChild(this.createTextNode(t.attributes.name||t.id)),e.appendChild(a);var i=this.createElementNS(this.namespaces.gpx,"desc");i.appendChild(this.createTextNode(t.attributes.description||this.defaultDesc)),e.appendChild(i)},CLASS_NAME:"OpenLayers.Format.GPX"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSDescribeLayer=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSDescribeLayer.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer,{initialize:function(e){OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var t,a,i=e.documentElement,s=i.childNodes,r={layerDescriptions:[]},o=0;o<s.length;++o)if(t=s[o],a=t.nodeName,"LayerDescription"==a){var n=t.getAttribute("name"),l="",c="",d="";t.getAttribute("owsType")?(l=t.getAttribute("owsType"),c=t.getAttribute("owsURL")):""!=t.getAttribute("wfs")?(l="WFS",c=t.getAttribute("wfs")):""!=t.getAttribute("wcs")&&(l="WCS",c=t.getAttribute("wcs"));var p=t.getElementsByTagName("Query");p.length>0&&(d=p[0].getAttribute("typeName"),d||(d=p[0].getAttribute("typename")));var u={layerName:n,owsType:l,owsURL:c,typeName:d};r.layerDescriptions.push(u),r.length=r.layerDescriptions.length,r[r.length-1]=u}else if("ServiceException"==a){var m=new OpenLayers.Format.OGCExceptionReport;return{error:m.read(e)}}return r},CLASS_NAME:"OpenLayers.Format.WMSDescribeLayer.v1_1_1"}),OpenLayers.Format.WMSDescribeLayer.v1_1_0=OpenLayers.Format.WMSDescribeLayer.v1_1_1,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.XYZ=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,sphericalMercator:!1,zoomOffset:0,serverResolutions:null,initialize:function(e,t,a){(a&&a.sphericalMercator||this.sphericalMercator)&&(a=OpenLayers.Util.extend({projection:"EPSG:900913",numZoomLevels:19},a)),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e||this.name,t||this.url,{},a])},clone:function(e){return null==e&&(e=new OpenLayers.Layer.XYZ(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var t=this.getXYZ(e),a=this.url;if(OpenLayers.Util.isArray(a)){var i=""+t.x+t.y+t.z;a=this.selectUrl(i,a)}return OpenLayers.String.format(a,t)},getXYZ:function(e){var t=this.getServerResolution(),a=Math.round((e.left-this.maxExtent.left)/(t*this.tileSize.w)),i=Math.round((this.maxExtent.top-e.top)/(t*this.tileSize.h)),s=this.getServerZoom();if(this.wrapDateLine){var r=Math.pow(2,s);a=(a%r+r)%r}return{x:a,y:i,z:s}},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.XYZ"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.OSM=OpenLayers.Class(OpenLayers.Layer.XYZ,{name:"OpenStreetMap",url:["http://a.tile.openstreetmap.org/${z}/${x}/${y}.png","http://b.tile.openstreetmap.org/${z}/${x}/${y}.png","http://c.tile.openstreetmap.org/${z}/${x}/${y}.png"],attribution:"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",sphericalMercator:!0,wrapDateLine:!0,tileOptions:null,initialize:function(e,t,a){OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options&&this.options.tileOptions)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.OSM(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},CLASS_NAME:"OpenLayers.Layer.OSM"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(e,t){this.container=OpenLayers.Util.getElement(e),OpenLayers.Util.extend(this,t)},destroy:function(){this.container=null,this.extent=null,this.size=null,this.resolution=null,this.map=null},supported:function(){return!1},setExtent:function(e,t){if(this.extent=e.clone(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var a=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/a);this.extent=e.wrapDateLine(this.map.getMaxExtent()).scale(a)}return t&&(this.resolution=null),!0},setSize:function(e){this.size=e.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution(),this.resolution},drawFeature:function(e,t){if(null==t&&(t=e.style),e.geometry){var a=e.geometry.getBounds();if(a){var i;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(i=this.map.getMaxExtent()),a.intersectsBounds(this.extent,{worldBounds:i})?this.calculateFeatureDx(a,i):t={display:"none"};var s=this.drawGeometry(e.geometry,t,e.id);if("none"!=t.display&&t.label&&s!==!1){var r=e.geometry.getCentroid();if(t.labelXOffset||t.labelYOffset){var o=isNaN(t.labelXOffset)?0:t.labelXOffset,n=isNaN(t.labelYOffset)?0:t.labelYOffset,l=this.getResolution();r.move(o*l,n*l)}this.drawText(e.id,t,r)}else this.removeText(e.id);return s}}},calculateFeatureDx:function(e,t){if(this.featureDx=0,t){var a=t.getWidth(),i=(this.extent.left+this.extent.right)/2,s=(e.left+e.right)/2,r=Math.round((s-i)/a);this.featureDx=r*a}},drawGeometry:function(e,t,a){},drawText:function(e,t,a){},removeText:function(e){},clear:function(){},getFeatureIdFromEvent:function(e){},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,a=e.length;t<a;++t){var i=e[t];this.eraseGeometry(i.geometry,i.id),this.removeText(i.id)}},eraseGeometry:function(e,t){},moveRoot:function(e){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(e){var t=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return e.stroke===!1&&(delete t.strokeWidth,delete t.strokeColor),e.fill===!1&&delete t.fillColor,OpenLayers.Util.extend(t,e),t},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(e,t){this.eraseFeatures(this.features[t][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(e){this.size=e.clone();var t=this.root;if(t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h,this.resolution=null,this.hitDetection){var a=this.hitCanvas;a.style.width=e.w+"px",a.style.height=e.h+"px",a.width=e.w,a.height=e.h}},drawFeature:function(e,t){var a;if(e.geometry){t=this.applyDefaultSymbolizer(t||e.style);var i,s=e.geometry.getBounds();this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(i=this.map.getMaxExtent());var r=s&&s.intersectsBounds(this.extent,{worldBounds:i});a="none"!==t.display&&!!s&&r,a?this.features[e.id]=[e,t]:delete this.features[e.id],this.pendingRedraw=!0}return this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),a},drawGeometry:function(e,t,a){var i=e.CLASS_NAME;if("OpenLayers.Geometry.Collection"!=i&&"OpenLayers.Geometry.MultiPoint"!=i&&"OpenLayers.Geometry.MultiLineString"!=i&&"OpenLayers.Geometry.MultiPolygon"!=i)switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(e,t,a);break;case"OpenLayers.Geometry.LineString":this.drawLineString(e,t,a);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(e,t,a);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(e,t,a)}else for(var s=0;s<e.components.length;s++)this.drawGeometry(e.components[s],t,a)},drawExternalGraphic:function(e,t,a){var i=new Image,s=t.title||t.graphicTitle;s&&(i.title=s);var r=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth;r=r?r:2*t.pointRadius,o=o?o:2*t.pointRadius;var n=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*r),l=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*o),c=t.graphicOpacity||t.fillOpacity,d=function(){if(this.features[a]){var t=this.getLocalXY(e),s=t[0],d=t[1];if(!isNaN(s)&&!isNaN(d)){var p=s+n|0,u=d+l|0,m=this.canvas;m.globalAlpha=c;var h=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);m.drawImage(i,p*h,u*h,r*h,o*h),this.hitDetection&&(this.setHitContextStyle("fill",a),this.hitContext.fillRect(p,u,r,o))}}};i.onload=OpenLayers.Function.bind(d,this),i.src=t.externalGraphic},drawNamedSymbol:function(e,t,a){var i,s,r,o,n,l,c,d,p,u=Math.PI/180,m=OpenLayers.Renderer.symbol[t.graphicName];if(!m)throw new Error(t.graphicName+" is not a valid symbol name");if(m.length&&!(m.length<2)){var h=this.getLocalXY(e),g=h[0],v=h[1];if(!isNaN(g)&&!isNaN(v)){if(this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round"),t.graphicName in this.cachedSymbolBounds)l=this.cachedSymbolBounds[t.graphicName];else{for(l=new OpenLayers.Bounds,n=0;n<m.length;n+=2)l.extend(new OpenLayers.LonLat(m[n],m[n+1]));this.cachedSymbolBounds[t.graphicName]=l}if(this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(g,v),this.hitDetection&&this.hitContext.translate(g,v),d=u*t.rotation,isNaN(d)||(this.canvas.rotate(d),this.hitDetection&&this.hitContext.rotate(d)),c=2*t.pointRadius/Math.max(l.getWidth(),l.getHeight()),this.canvas.scale(c,c),this.hitDetection&&this.hitContext.scale(c,c),r=l.getCenterLonLat().lon,o=l.getCenterLonLat().lat,this.canvas.translate(-r,-o),this.hitDetection&&this.hitContext.translate(-r,-o),p=t.strokeWidth,t.strokeWidth=p/c,t.fill!==!1){for(this.setCanvasStyle("fill",t),this.canvas.beginPath(),n=0;n<m.length;n+=2)i=m[n],s=m[n+1],0==n&&this.canvas.moveTo(i,s),this.canvas.lineTo(i,s);if(this.canvas.closePath(),this.canvas.fill(),this.hitDetection){for(this.setHitContextStyle("fill",a,t),this.hitContext.beginPath(),n=0;n<m.length;n+=2)i=m[n],s=m[n+1],0==n&&this.canvas.moveTo(i,s),this.hitContext.lineTo(i,s);this.hitContext.closePath(),this.hitContext.fill()}}if(t.stroke!==!1){for(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),n=0;n<m.length;n+=2)i=m[n],s=m[n+1],0==n&&this.canvas.moveTo(i,s),this.canvas.lineTo(i,s);if(this.canvas.closePath(),this.canvas.stroke(),this.hitDetection){for(this.setHitContextStyle("stroke",a,t,c),this.hitContext.beginPath(),n=0;n<m.length;n+=2)i=m[n],s=m[n+1],0==n&&this.hitContext.moveTo(i,s),this.hitContext.lineTo(i,s);this.hitContext.closePath(),this.hitContext.stroke()}}t.strokeWidth=p,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}}},setCanvasStyle:function(e,t){"fill"===e?(this.canvas.globalAlpha=t.fillOpacity,this.canvas.fillStyle=t.fillColor):"stroke"===e?(this.canvas.globalAlpha=t.strokeOpacity,this.canvas.strokeStyle=t.strokeColor,this.canvas.lineWidth=t.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(e){var t=Number(e.split("_").pop())+1;t>=16777216&&(this.hitOverflow=t-16777215,t=t%16777216+1);var a="000000"+t.toString(16),i=a.length;return a="#"+a.substring(i-6,i)},setHitContextStyle:function(e,t,a,i){var s=this.featureIdToHex(t);"fill"==e?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=s):"stroke"==e?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=s,"undefined"==typeof i?this.hitContext.lineWidth=a.strokeWidth+2:isNaN(i)||(this.hitContext.lineWidth=a.strokeWidth+2/i)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(e,t,a){if(t.graphic!==!1)if(t.externalGraphic)this.drawExternalGraphic(e,t,a);else if(t.graphicName&&"circle"!=t.graphicName)this.drawNamedSymbol(e,t,a);else{var i=this.getLocalXY(e),s=i[0],r=i[1];if(!isNaN(s)&&!isNaN(r)){var o=2*Math.PI,n=t.pointRadius;t.fill!==!1&&(this.setCanvasStyle("fill",t),this.canvas.beginPath(),this.canvas.arc(s,r,n,0,o,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",a,t),this.hitContext.beginPath(),this.hitContext.arc(s,r,n,0,o,!0),this.hitContext.fill())),t.stroke!==!1&&(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),this.canvas.arc(s,r,n,0,o,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",a,t),this.hitContext.beginPath(),this.hitContext.arc(s,r,n,0,o,!0),this.hitContext.stroke()),this.setCanvasStyle("reset"))}}},drawLineString:function(e,t,a){t=OpenLayers.Util.applyDefaults({fill:!1},t),this.drawLinearRing(e,t,a)},drawLinearRing:function(e,t,a){t.fill!==!1&&(this.setCanvasStyle("fill",t),this.renderPath(this.canvas,e,t,a,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",a,t),this.renderPath(this.hitContext,e,t,a,"fill"))),t.stroke!==!1&&(this.setCanvasStyle("stroke",t),this.renderPath(this.canvas,e,t,a,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",a,t),this.renderPath(this.hitContext,e,t,a,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(e,t,a,i,s){var r=t.components,o=r.length;e.beginPath();var n=this.getLocalXY(r[0]),l=n[0],c=n[1];if(!isNaN(l)&&!isNaN(c)){e.moveTo(n[0],n[1]);for(var d=1;d<o;++d){var p=this.getLocalXY(r[d]);e.lineTo(p[0],p[1])}"fill"===s?e.fill():e.stroke()}},drawPolygon:function(e,t,a){var i=e.components,s=i.length;this.drawLinearRing(i[0],t,a);for(var r=1;r<s;++r)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(i[r],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},t),a),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(i[r],OpenLayers.Util.applyDefaults({fill:!1},t),a)},drawText:function(e,t){var a=this.getLocalXY(e);this.setCanvasStyle("reset"),this.canvas.fillStyle=t.fontColor,this.canvas.globalAlpha=t.fontOpacity||1;var i=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),s=t.label.split("\n"),r=s.length;if(this.canvas.fillText){this.canvas.font=i,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]]||"middle";var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];null==o&&(o=-.5);var n=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width;a[1]+=n*o*(r-1);for(var l=0;l<r;l++)t.labelOutlineWidth&&(this.canvas.save(),this.canvas.globalAlpha=t.labelOutlineOpacity||t.fontOpacity||1,this.canvas.strokeStyle=t.labelOutlineColor,this.canvas.lineWidth=t.labelOutlineWidth,this.canvas.strokeText(s[l],a[0],a[1]+n*l+1),this.canvas.restore()),this.canvas.fillText(s[l],a[0],a[1]+n*l)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=i;var c=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];null==c&&(c=-.5);var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];null==o&&(o=-.5);var n=this.canvas.mozMeasureText("xx");a[1]+=n*(1+o*r);for(var l=0;l<r;l++){var d=a[0]+c*this.canvas.mozMeasureText(s[l]),p=a[1]+l*n;this.canvas.translate(d,p),this.canvas.mozDrawText(s[l]),this.canvas.translate(-d,-p)}}this.setCanvasStyle("reset")},getLocalXY:function(e){var t=this.getResolution(),a=this.extent,i=(e.x-this.featureDx)/t+-a.left/t,s=a.top/t-e.y/t;return[i,s]},clear:function(){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this.features={},this.hitDetection&&this.hitContext.clearRect(0,0,t,e)},getFeatureIdFromEvent:function(e){var t,a;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging){var i=e.xy,s=0|i.x,r=0|i.y,o=this.hitContext.getImageData(s,r,1,1).data;if(255===o[3]){var n=o[2]+256*(o[1]+256*o[0]);if(n){t="OpenLayers_Feature_Vector_"+(n-1+this.hitOverflow);try{a=this.features[t][0]}catch(e){}}}}return a},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t)delete this.features[e[t].id];this.redraw()},redraw:function(){if(!this.locked){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this.hitDetection&&this.hitContext.clearRect(0,0,t,e);var a,i,s,r=[],o=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent();for(var n in this.features)this.features.hasOwnProperty(n)&&(a=this.features[n][0],i=a.geometry,this.calculateFeatureDx(i.getBounds(),o),s=this.features[n][1],this.drawGeometry(i,s,a.id),s.label&&r.push([a,s]));for(var l,c=0,d=r.length;c<d;++c)l=r[c],this.drawText(l[0].geometry.getCentroid(),l[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OSM=OpenLayers.Class(OpenLayers.Format.XML,{checkTags:!1,interestingTagsExclude:null,areaTags:null,initialize:function(e){var t={interestingTagsExclude:["source","source_ref","source:ref","history","attribution","created_by"],areaTags:["area","building","leisure","tourism","ruins","historic","landuse","military","natural","sport"]};t=OpenLayers.Util.extend(t,e);for(var a={},i=0;i<t.interestingTagsExclude.length;i++)a[t.interestingTagsExclude[i]]=!0;t.interestingTagsExclude=a;for(var s={},i=0;i<t.areaTags.length;i++)s[t.areaTags[i]]=!0;t.areaTags=s,this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[t])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var t=this.getNodes(e),a=this.getWays(e),i=new Array(a.length),s=0;s<a.length;s++){for(var r=new Array(a[s].nodes.length),o=this.isWayArea(a[s])?1:0,n=0;n<a[s].nodes.length;n++){var l=t[a[s].nodes[n]],c=new OpenLayers.Geometry.Point(l.lon,l.lat);c.osm_id=parseInt(a[s].nodes[n]),r[n]=c,l.used=!0}var d=null;d=o?new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(r)):new OpenLayers.Geometry.LineString(r),this.internalProjection&&this.externalProjection&&d.transform(this.externalProjection,this.internalProjection);var p=new OpenLayers.Feature.Vector(d,a[s].tags);p.osm_id=parseInt(a[s].id),p.fid="way."+p.osm_id,i[s]=p}for(var u in t){var l=t[u];if(!l.used||this.checkTags){var m=null;if(this.checkTags){var h=this.getTags(l.node,!0);if(l.used&&!h[1])continue;m=h[0]}else m=this.getTags(l.node);var p=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(l.lon,l.lat),m);this.internalProjection&&this.externalProjection&&p.geometry.transform(this.externalProjection,this.internalProjection),p.osm_id=parseInt(u),p.fid="node."+p.osm_id,i.push(p)}l.node=null}return i},getNodes:function(e){for(var t=e.getElementsByTagName("node"),a={},i=0;i<t.length;i++){var s=t[i],r=s.getAttribute("id");a[r]={lat:s.getAttribute("lat"),lon:s.getAttribute("lon"),node:s}}return a},getWays:function(e){for(var t=e.getElementsByTagName("way"),a=[],i=0;i<t.length;i++){var s=t[i],r={id:s.getAttribute("id")};r.tags=this.getTags(s);var o=s.getElementsByTagName("nd");r.nodes=new Array(o.length);for(var n=0;n<o.length;n++)r.nodes[n]=o[n].getAttribute("ref");a.push(r)}return a},getTags:function(e,t){for(var a=e.getElementsByTagName("tag"),i={},s=!1,r=0;r<a.length;r++){var o=a[r].getAttribute("k");i[o]=a[r].getAttribute("v"),t&&(this.interestingTagsExclude[o]||(s=!0))}return t?[i,s]:i},isWayArea:function(e){var t=!1,a=!1;if(e.nodes[0]==e.nodes[e.nodes.length-1]&&(t=!0),this.checkTags)for(var i in e.tags)if(this.areaTags[i]){a=!0;break}return t&&(!this.checkTags||a)},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]),this.osm_id=1,this.created_nodes={};var t=this.createElementNS(null,"osm");t.setAttribute("version","0.5"),t.setAttribute("generator","OpenLayers "+OpenLayers.VERSION_NUMBER);for(var a=e.length-1;a>=0;a--)for(var i=this.createFeatureNodes(e[a]),s=0;s<i.length;s++)t.appendChild(i[s]);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureNodes:function(e){var t=[],a=e.geometry.CLASS_NAME,i=a.substring(a.lastIndexOf(".")+1);i=i.toLowerCase();var s=this.createXML[i];return s&&(t=s.apply(this,[e])),t},createXML:{point:function(e){var t=null,a=e.geometry?e.geometry:e;this.internalProjection&&this.externalProjection&&(a=a.clone(),a.transform(this.internalProjection,this.externalProjection));var i=!1;if(e.osm_id?(t=e.osm_id,this.created_nodes[t]&&(i=!0)):(t=-this.osm_id,this.osm_id++),i)s=this.created_nodes[t];else var s=this.createElementNS(null,"node");return this.created_nodes[t]=s,s.setAttribute("id",t),s.setAttribute("lon",a.x),s.setAttribute("lat",a.y),e.attributes&&this.serializeTags(e,s),this.setState(e,s),i?[]:[s]},linestring:function(e){var t,a=[],i=e.geometry;e.osm_id?t=e.osm_id:(t=-this.osm_id,this.osm_id++);var s=this.createElementNS(null,"way");s.setAttribute("id",t);for(var r=0;r<i.components.length;r++){var o=this.createXML.point.apply(this,[i.components[r]]);if(o.length){o=o[0];var n=o.getAttribute("id");a.push(o)}else n=i.components[r].osm_id,o=this.created_nodes[n];this.setState(e,o);var l=this.createElementNS(null,"nd");l.setAttribute("ref",n),s.appendChild(l)}return this.serializeTags(e,s),a.push(s),a},polygon:function(e){var t=OpenLayers.Util.extend({area:"yes"},e.attributes),a=new OpenLayers.Feature.Vector(e.geometry.components[0],t);return a.osm_id=e.osm_id,this.createXML.linestring.apply(this,[a])}},serializeTags:function(e,t){for(var a in e.attributes){var i=this.createElementNS(null,"tag");i.setAttribute("k",a),i.setAttribute("v",e.attributes[a]),t.appendChild(i)}},setState:function(e,t){if(e.state){var a=null;switch(e.state){case OpenLayers.State.UPDATE:a="modify";case OpenLayers.State.DELETE:a="delete"}a&&t.setAttribute("action",a)}},CLASS_NAME:"OpenLayers.Format.OSM"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(e,t,a){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return!0}return!1},deactivate:function(){var e=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var t=0,a=this.KEY_EVENTS.length;t<a;t++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[t],this.eventListener);e=!0}return e},handleKeyEvent:function(e){this.checkModifiers(e)&&this.callback(e.type,[e])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{documentDrag:!1,geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertex:null,vertices:null,virtualVertices:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(e,t){t=t||{},this.layer=e,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,t.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[t]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var a={down:function(e){this.vertex=null;var t=this.layer.getFeatureFromEvent(this.handlers.drag.evt);t?this.dragStart(t):this.clickout&&(this._unselect=this.feature)},move:function(e){delete this._unselect,this.vertex&&this.dragVertex(this.vertex,e)},up:function(){this.handlers.drag.stopDown=!1,this._unselect&&(this.unselectFeature(this._unselect),delete this._unselect)},done:function(e){this.vertex&&this.dragComplete(this.vertex)}},i={documentDrag:this.documentDrag,stopDown:!1},s={keydown:this.handleKeypress};this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,s),drag:new OpenLayers.Handler.Drag(this,a,i)}},destroy:function(){this.map&&this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.handlers.keyboard.activate()&&this.handlers.drag.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){var e=!1;if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.moveLayerBack(),this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.handlers.drag.deactivate(),this.handlers.keyboard.deactivate();var t=this.feature;t&&t.geometry&&t.layer&&this.unselectFeature(t),e=!0}return e},beforeSelectFeature:function(e){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:e})},selectFeature:function(e){if(!(this.feature===e||this.geometryTypes&&OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)==-1)){this.beforeSelectFeature(e)!==!1&&(this.feature&&this.unselectFeature(this.feature),this.feature=e,this.layer.selectedFeatures.push(e),this.layer.drawFeature(e,"select"),this.modified=!1,this.resetVertices(),this.onModificationStart(this.feature));var t=e.modified;!e.geometry||t&&t.geometry||(this._originalGeometry=e.geometry.clone())}},unselectFeature:function(e){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.layer.drawFeature(this.feature,"default"),this.feature=null,OpenLayers.Util.removeItem(this.layer.selectedFeatures,e),this.onModificationEnd(e),this.layer.events.triggerEvent("afterfeaturemodified",{feature:e,modified:this.modified}),this.modified=!1},dragStart:function(e){var t="OpenLayers.Geometry.Point"==e.geometry.CLASS_NAME;this.standalone||(e._sketch||!t)&&e._sketch||(this.toggle&&this.feature===e&&(this._unselect=e),this.selectFeature(e)),(e._sketch||t)&&(this.vertex=e,this.handlers.drag.stopDown=!0)},dragVertex:function(e,t){var a=this.map.getLonLatFromViewPortPx(t),i=e.geometry;i.move(a.lon-i.x,a.lat-i.y),this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}):(e._index?(e.geometry.parent.addComponent(e.geometry,e._index),delete e._index,OpenLayers.Util.removeItem(this.virtualVertices,e),this.vertices.push(e)):e==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):e!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}),this.virtualVertices.length>0&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:"select")),this.layer.drawFeature(e)},dragComplete:function(e){this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var e=this.feature;e.modified=OpenLayers.Util.extend(e.modified,{geometry:this._originalGeometry}),delete this._originalGeometry}},resetVertices:function(){this.vertices.length>0&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),this.virtualVertices.length>0&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(e){var t=e.keyCode;if(this.feature&&OpenLayers.Util.indexOf(this.deleteCodes,t)!=-1){var a=this.layer.getFeatureFromEvent(this.handlers.drag.evt);a&&OpenLayers.Util.indexOf(this.vertices,a)!=-1&&!this.handlers.drag.dragging&&a.geometry.parent&&(a.geometry.parent.removeComponent(a.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:a.geometry,feature:this.feature,pixel:e.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:"select"),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))}},collectVertices:function(){function e(a){var i,s,r,o;if("OpenLayers.Geometry.Point"==a.CLASS_NAME)s=new OpenLayers.Feature.Vector(a),s._sketch=!0,s.renderIntent=t.vertexRenderIntent,t.vertices.push(s);else{var n=a.components.length;for("OpenLayers.Geometry.LinearRing"==a.CLASS_NAME&&(n-=1),i=0;i<n;++i)r=a.components[i],"OpenLayers.Geometry.Point"==r.CLASS_NAME?(s=new OpenLayers.Feature.Vector(r),s._sketch=!0,s.renderIntent=t.vertexRenderIntent,t.vertices.push(s)):e(r);if(t.createVertices&&"OpenLayers.Geometry.MultiPoint"!=a.CLASS_NAME)for(i=0,o=a.components.length;i<o-1;++i){var l=a.components[i],c=a.components[i+1];if("OpenLayers.Geometry.Point"==l.CLASS_NAME&&"OpenLayers.Geometry.Point"==c.CLASS_NAME){var d=(l.x+c.x)/2,p=(l.y+c.y)/2,u=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(d,p),null,t.virtualStyle);u.geometry.parent=a,u._index=i+1,u._sketch=!0,t.virtualVertices.push(u)}}}}this.vertices=[],this.virtualVertices=[];var t=this;e.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var e=this.feature.geometry,t=e.getBounds().getCenterLonLat(),a=new OpenLayers.Geometry.Point(t.lon,t.lat),i=new OpenLayers.Feature.Vector(a);a.move=function(t,a){OpenLayers.Geometry.Point.prototype.move.call(this,t,a),e.move(t,a)},i._sketch=!0,this.dragHandle=i,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var e=this.feature.geometry,t=e.getBounds(),a=t.getCenterLonLat(),i=new OpenLayers.Geometry.Point(a.lon,a.lat),s=new OpenLayers.Geometry.Point(t.right,t.bottom),r=new OpenLayers.Feature.Vector(s),o=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,n=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,l=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;s.move=function(t,a){OpenLayers.Geometry.Point.prototype.move.call(this,t,a);var s=this.x-i.x,r=this.y-i.y,c=s-t,d=r-a;if(l){var p=Math.atan2(d,c),u=Math.atan2(r,s),m=u-p;m*=180/Math.PI,e.rotate(m,i)}if(o){var h,g;if(n)h=r/d,g=s/c/h;else{var v=Math.sqrt(c*c+d*d),f=Math.sqrt(s*s+r*r);h=f/v}e.resize(h,i,g)}},r._sketch=!0,this.radiusHandle=r,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(e){this.handlers.drag.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Bing=OpenLayers.Class(OpenLayers.Layer.XYZ,{key:null,serverResolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135,.29858214169740677,.14929107084870338,.07464553542435169],attributionTemplate:'<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',metadata:null,protocolRegex:/^http:/i,type:"Road",culture:"en-US",metadataParams:null,tileOptions:null,protocol:~window.location.href.indexOf("http")?"":"http:",initialize:function(e){e=OpenLayers.Util.applyDefaults({sphericalMercator:!0},e);var t=e.name||"Bing "+(e.type||this.type),a=[t,null,e];OpenLayers.Layer.XYZ.prototype.initialize.apply(this,a),this.tileOptions=OpenLayers.Util.extend({crossOriginKeyword:"anonymous"},this.options.tileOptions),this.loadMetadata()},loadMetadata:function(){this._callbackId="_callback_"+this.id.replace(/\./g,"_"),window[this._callbackId]=OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata,this);var e=OpenLayers.Util.applyDefaults({key:this.key,jsonp:this._callbackId,include:"ImageryProviders"},this.metadataParams),t=this.protocol+"//dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.type+"?"+OpenLayers.Util.getParameterString(e),a=document.createElement("script");a.type="text/javascript",a.src=t,a.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(a)},initLayer:function(){var e=this.metadata.resourceSets[0].resources[0],t=e.imageUrl.replace("{quadkey}","${quadkey}");t=t.replace("{culture}",this.culture),t=t.replace(this.protocolRegex,this.protocol),this.url=[];for(var a=0;a<e.imageUrlSubdomains.length;++a)this.url.push(t.replace("{subdomain}",e.imageUrlSubdomains[a]));this.addOptions({maxResolution:Math.min(this.serverResolutions[e.zoomMin],this.maxResolution||Number.POSITIVE_INFINITY),numZoomLevels:Math.min(e.zoomMax+1-e.zoomMin,this.numZoomLevels)},!0),this.isBaseLayer||this.redraw(),this.updateAttribution()},getURL:function(e){if(this.url){for(var t=this.getXYZ(e),a=t.x,i=t.y,s=t.z,r=[],o=s;o>0;--o){var n="0",l=1<<o-1;0!=(a&l)&&n++,0!=(i&l)&&(n++,n++),r.push(n)}var c=r.join(""),d=this.selectUrl(""+a+i+s,this.url);return OpenLayers.String.format(d,{quadkey:c})}},updateAttribution:function(){var e=this.metadata;if(e.resourceSets&&this.map&&this.map.center){var t,a,i,s,r,o,n,l=e.resourceSets[0].resources[0],c=this.map.getExtent().transform(this.map.getProjectionObject(),new OpenLayers.Projection("EPSG:4326")),d=l.imageryProviders||[],p=OpenLayers.Util.indexOf(this.serverResolutions,this.getServerResolution()),u="";for(a=0,i=d.length;a<i;++a)for(t=d[a],s=0,r=t.coverageAreas.length;s<r;++s)n=t.coverageAreas[s],o=OpenLayers.Bounds.fromArray(n.bbox,!0),c.intersectsBounds(o)&&p<=n.zoomMax&&p>=n.zoomMin&&(u+=t.attribution+" ");var m=e.brandLogoUri.replace(this.protocolRegex,this.protocol);this.attribution=OpenLayers.String.format(this.attributionTemplate,{type:this.type.toLowerCase(),logo:m,copyrights:u}),this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"attribution"})}},setMap:function(){OpenLayers.Layer.XYZ.prototype.setMap.apply(this,arguments),this.map.events.register("moveend",this,this.updateAttribution)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Bing(this.options)),e=OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},destroy:function(){this.map&&this.map.events.unregister("moveend",this,this.updateAttribution),OpenLayers.Layer.XYZ.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.Bing"}),OpenLayers.Layer.Bing.processMetadata=function(e){this.metadata=e,this.initLayer();var t=document.getElementById(this._callbackId);t.parentNode.removeChild(t),window[this._callbackId]=void 0,delete this._callbackId},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(e,t){if(this.styles={default:new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),delete:new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)},e instanceof OpenLayers.Style)this.styles.default=e,this.styles.select=e,this.styles.temporary=e,this.styles.delete=e;else if("object"==typeof e)for(var a in e)if(e[a]instanceof OpenLayers.Style)this.styles[a]=e[a];else{if("object"!=typeof e[a]){this.styles.default=new OpenLayers.Style(e),this.styles.select=new OpenLayers.Style(e),this.styles.temporary=new OpenLayers.Style(e),this.styles.delete=new OpenLayers.Style(e);break}this.styles[a]=new OpenLayers.Style(e[a])}OpenLayers.Util.extend(this,t)},destroy:function(){for(var e in this.styles)this.styles[e].destroy();this.styles=null},createSymbolizer:function(e,t){e||(e=new OpenLayers.Feature.Vector),this.styles[t]||(t="default"),e.renderIntent=t;var a={};return this.extendDefault&&"default"!=t&&(a=this.styles.default.createSymbolizer(e)),OpenLayers.Util.extend(a,this.styles[t].createSymbolizer(e))},addUniqueValueRules:function(e,t,a,i){var s=[];for(var r in a)s.push(new OpenLayers.Rule({symbolizer:a[r],context:i,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:t,value:r})}));this.styles[e].addRules(s)},CLASS_NAME:"OpenLayers.StyleMap"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(e,t){if(OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.renderer&&this.renderer.supported()||this.assignRenderer(),this.renderer&&this.renderer.supported()||(this.renderer=null,this.displayError()),this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={},this.strategies)for(var a=0,i=this.strategies.length;a<i;a++)this.strategies[a].setLayer(this)},destroy:function(){if(this.strategies){var e,t,a;for(t=0,a=this.strategies.length;t<a;t++)e=this.strategies[t],e.autoDestroy&&e.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.features=null,this.selectedFeatures=null,this.unrenderedFeatures=null,this.renderer&&this.renderer.destroy(),this.renderer=null,this.geometryType=null,this.drawn=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){null==e&&(e=new OpenLayers.Layer.Vector(this.name,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e]);for(var t=this.features,a=t.length,i=new Array(a),s=0;s<a;++s)i[s]=t[s].clone();return e.features=i,e},refresh:function(e){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",e)},assignRenderer:function(){for(var e=0,t=this.renderers.length;e<t;e++){var a=this.renderers[e],i="function"==typeof a?a:OpenLayers.Renderer[a];if(i&&i.prototype.supported()){this.renderer=new i(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(e){if(OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.renderer){this.renderer.map=this.map;var t=this.map.getSize();t.w=t.w*this.ratio,t.h=t.h*this.ratio,this.renderer.setSize(t)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var e,t,a;for(t=0,a=this.strategies.length;t<a;t++)e=this.strategies[t],e.autoActivate&&e.activate()}},removeMap:function(e){if(this.drawn=!1,this.strategies){var t,a,i;for(a=0,i=this.strategies.length;a<i;a++)t=this.strategies[a],t.autoActivate&&t.deactivate()}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var e=this.map.getSize();e.w=e.w*this.ratio,e.h=e.h*this.ratio,this.renderer.setSize(e)},moveTo:function(e,t,a){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var i=!0;if(!a){this.renderer.root.style.visibility="hidden";var s=this.map.getSize(),r=s.w,o=s.h,n=r/2*this.ratio-r/2,l=o/2*this.ratio-o/2;n+=this.map.layerContainerOriginPx.x,n=-Math.round(n),l+=this.map.layerContainerOriginPx.y,l=-Math.round(l),this.div.style.left=n+"px",this.div.style.top=l+"px";var c=this.map.getExtent().scale(this.ratio);if(i=this.renderer.setExtent(c,t),this.renderer.root.style.visibility="visible",OpenLayers.IS_GECKO===!0&&(this.div.scrollLeft=this.div.scrollLeft),!t&&i)for(var d in this.unrenderedFeatures){var p=this.unrenderedFeatures[d];this.drawFeature(p)}}if(!this.drawn||t||!i){this.drawn=!0;for(var p,d=0,u=this.features.length;d<u;d++)this.renderer.locked=d!==u-1,p=this.features[d],this.drawFeature(p)}},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments);var t=this.div.style.display;t!=this.renderer.root.style.display&&(this.renderer.root.style.display=t)},addFeatures:function(e,t){OpenLayers.Util.isArray(e)||(e=[e]);var a=!t||!t.silent;if(a){var i={features:e},s=this.events.triggerEvent("beforefeaturesadded",i);if(s===!1)return;e=i.features}for(var r=[],o=0,n=e.length;o<n;o++){o!=e.length-1?this.renderer.locked=!0:this.renderer.locked=!1;var l=e[o];if(this.geometryType&&!(l.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);if(l.layer=this,!l.style&&this.style&&(l.style=OpenLayers.Util.extend({},this.style)),a){if(this.events.triggerEvent("beforefeatureadded",{feature:l})===!1)continue;this.preFeatureInsert(l)}r.push(l),this.features.push(l),this.drawFeature(l),a&&(this.events.triggerEvent("featureadded",{feature:l}),this.onFeatureInsert(l))}a&&this.events.triggerEvent("featuresadded",{features:r})},removeFeatures:function(e,t){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures(t);OpenLayers.Util.isArray(e)||(e=[e]),e===this.selectedFeatures&&(e=e.slice());var a=!t||!t.silent;a&&this.events.triggerEvent("beforefeaturesremoved",{features:e});for(var i=e.length-1;i>=0;i--){0!=i&&e[i-1].geometry?this.renderer.locked=!0:this.renderer.locked=!1;var s=e[i];delete this.unrenderedFeatures[s.id],a&&this.events.triggerEvent("beforefeatureremoved",{feature:s}),this.features=OpenLayers.Util.removeItem(this.features,s),s.layer=null,s.geometry&&this.renderer.eraseFeatures(s),OpenLayers.Util.indexOf(this.selectedFeatures,s)!=-1&&OpenLayers.Util.removeItem(this.selectedFeatures,s),a&&this.events.triggerEvent("featureremoved",{feature:s})}a&&this.events.triggerEvent("featuresremoved",{features:e})}},removeAllFeatures:function(e){var t=!e||!e.silent,a=this.features;t&&this.events.triggerEvent("beforefeaturesremoved",{features:a});for(var i,s=a.length-1;s>=0;s--)i=a[s],t&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),i.layer=null,t&&this.events.triggerEvent("featureremoved",{feature:i});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],t&&this.events.triggerEvent("featuresremoved",{features:a})},destroyFeatures:function(e,t){var a=void 0==e;if(a&&(e=this.features),e){this.removeFeatures(e,t);for(var i=e.length-1;i>=0;i--)e[i].destroy()}},drawFeature:function(e,t){if(this.drawn){if("object"!=typeof t){t||e.state!==OpenLayers.State.DELETE||(t="delete");var a=t||e.renderIntent;t=e.style||this.style,t||(t=this.styleMap.createSymbolizer(e,a))}var i=this.renderer.drawFeature(e,t);i===!1||null===i?this.unrenderedFeatures[e.id]=e:delete this.unrenderedFeatures[e.id]}},eraseFeatures:function(e){this.renderer.eraseFeatures(e)},getFeatureFromEvent:function(e){if(!this.renderer)throw new Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var t=null,a=this.renderer.getFeatureIdFromEvent(e);return a&&(t="string"==typeof a?this.getFeatureById(a):a),t},getFeatureBy:function(e,t){for(var a=null,i=0,s=this.features.length;i<s;++i)if(this.features[i][e]==t){a=this.features[i];break}return a},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeatureByFid:function(e){return this.getFeatureBy("fid",e)},getFeaturesByAttribute:function(e,t){var a,i,s=this.features.length,r=[];for(a=0;a<s;a++)i=this.features[a],i&&i.attributes&&i.attributes[e]===t&&r.push(i);return r},onFeatureInsert:function(e){},preFeatureInsert:function(e){},getDataExtent:function(){var e=null,t=this.features;if(t&&t.length>0)for(var a=null,i=0,s=t.length;i<s;i++)a=t[i].geometry,a&&(null===e&&(e=new OpenLayers.Bounds),e.extend(a.getBounds()));return e},CLASS_NAME:"OpenLayers.Layer.Vector"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.PointGrid=OpenLayers.Class(OpenLayers.Layer.Vector,{dx:null,dy:null,ratio:1.5,maxFeatures:250,rotation:0,origin:null,gridBounds:null,initialize:function(e){e=e||{},OpenLayers.Layer.Vector.prototype.initialize.apply(this,[e.name,e])},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),e.events.register("moveend",this,this.onMoveEnd)},removeMap:function(e){e.events.unregister("moveend",this,this.onMoveEnd),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},setRatio:function(e){this.ratio=e,this.updateGrid(!0)},setMaxFeatures:function(e){this.maxFeatures=e,this.updateGrid(!0)},setSpacing:function(e,t){this.dx=e,this.dy=t||e,this.updateGrid(!0)},setOrigin:function(e){this.origin=e,this.updateGrid(!0)},getOrigin:function(){return this.origin||(this.origin=this.map.getExtent().getCenterLonLat()),this.origin},setRotation:function(e){this.rotation=e,this.updateGrid(!0)},onMoveEnd:function(){this.updateGrid()},getViewBounds:function(){var e=this.map.getExtent();if(this.rotation){var t=this.getOrigin(),a=new OpenLayers.Geometry.Point(t.lon,t.lat),i=e.toGeometry();i.rotate(-this.rotation,a),e=i.getBounds()}return e},updateGrid:function(e){if(e||this.invalidBounds()){var t=this.getViewBounds(),a=this.getOrigin(),i=new OpenLayers.Geometry.Point(a.lon,a.lat),s=t.getWidth(),r=t.getHeight(),o=s/r,n=Math.sqrt(this.dx*this.dy*this.maxFeatures/o),l=n*o,c=Math.min(s*this.ratio,l),d=Math.min(r*this.ratio,n),p=t.getCenterLonLat();this.gridBounds=new OpenLayers.Bounds(p.lon-c/2,p.lat-d/2,p.lon+c/2,p.lat+d/2);for(var u,m,h,g=Math.floor(d/this.dy),v=Math.floor(c/this.dx),f=a.lon+this.dx*Math.ceil((this.gridBounds.left-a.lon)/this.dx),y=a.lat+this.dy*Math.ceil((this.gridBounds.bottom-a.lat)/this.dy),b=new Array(g*v),L=0;L<v;++L){u=f+L*this.dx;for(var w=0;w<g;++w)m=y+w*this.dy,h=new OpenLayers.Geometry.Point(u,m),this.rotation&&h.rotate(this.rotation,i),b[L*g+w]=new OpenLayers.Feature.Vector(h)}this.destroyFeatures(this.features,{silent:!0}),this.addFeatures(b,{silent:!0})}},invalidBounds:function(){return!this.gridBounds||!this.gridBounds.containsBounds(this.getViewBounds())},CLASS_NAME:"OpenLayers.Layer.PointGrid"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,interval:0,maxDelta:Number.POSITIVE_INFINITY,delta:0,cumulative:!0,initialize:function(e,t,a){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.wheelListener=null},onWheelEvent:function(e){if(this.map&&this.checkModifiers(e)){for(var t=!1,a=!1,i=!1,s=OpenLayers.Event.element(e);null!=s&&!i&&!t;){if(!t)try{var r;if(s.currentStyle)r=s.currentStyle.overflow;else{var o=document.defaultView.getComputedStyle(s,null);r=o.getPropertyValue("overflow")}t=r&&"auto"==r||"scroll"==r}catch(e){}if(!a&&(a=OpenLayers.Element.hasClass(s,"olScrollable"),!a))for(var n=0,l=this.map.layers.length;n<l;n++){var c=this.map.layers[n];if(s==c.div||s==c.pane){a=!0;break}}i=s==this.map.div,s=s.parentNode}if(!t&&i){if(a){var d=0;if(e.wheelDelta?(d=e.wheelDelta,d%160===0&&(d*=.75),d/=120):e.detail&&(d=-(e.detail/Math.abs(e.detail))),this.delta+=d,window.clearTimeout(this._timeoutId),this.interval&&Math.abs(this.delta)<this.maxDelta){var p=OpenLayers.Util.extend({},e);this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(p)},this),this.interval)}else this.wheelZoom(e)}OpenLayers.Event.stop(e)}}},wheelZoom:function(e){var t=this.delta;this.delta=0,t&&(e.xy=this.map.events.getMousePosition(e),t<0?this.callback("down",[e,this.cumulative?Math.max(-this.maxDelta,t):-1]):this.callback("up",[e,this.cumulative?Math.min(this.maxDelta,t):1]))},activate:function(e){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.observe(window,"DOMMouseScroll",t),OpenLayers.Event.observe(window,"mousewheel",t),OpenLayers.Event.observe(document,"mousewheel",t),!0}return!1},deactivate:function(e){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.stopObserving(window,"DOMMouseScroll",t),OpenLayers.Event.stopObserving(window,"mousewheel",t),OpenLayers.Event.stopObserving(document,"mousewheel",t),!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Symbolizer=OpenLayers.Class({zIndex:0,initialize:function(e){OpenLayers.Util.extend(this,e)},clone:function(){var Type=eval(this.CLASS_NAME);return new Type(OpenLayers.Util.extend({},this))},CLASS_NAME:"OpenLayers.Symbolizer"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Symbolizer.Raster=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Raster"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Rule=OpenLayers.Class({id:null,name:null,title:null,description:null,context:null,filter:null,elseFilter:!1,symbolizer:null,symbolizers:null,minScaleDenominator:null,maxScaleDenominator:null,initialize:function(e){this.symbolizer={},OpenLayers.Util.extend(this,e),this.symbolizers&&delete this.symbolizer,this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e in this.symbolizer)this.symbolizer[e]=null;this.symbolizer=null,delete this.symbolizers},evaluate:function(e){var t=this.getContext(e),a=!0;if(this.minScaleDenominator||this.maxScaleDenominator)var i=e.layer.map.getScale();return this.minScaleDenominator&&(a=i>=OpenLayers.Style.createLiteral(this.minScaleDenominator,t)),a&&this.maxScaleDenominator&&(a=i<OpenLayers.Style.createLiteral(this.maxScaleDenominator,t)),a&&this.filter&&(a="OpenLayers.Filter.FeatureId"==this.filter.CLASS_NAME?this.filter.evaluate(e):this.filter.evaluate(t)),a},getContext:function(e){var t=this.context;return t||(t=e.attributes||e.data),"function"==typeof this.context&&(t=this.context(e)),t},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.symbolizers){var t=this.symbolizers.length;e.symbolizers=new Array(t);for(var a=0;a<t;++a)e.symbolizers[a]=this.symbolizers[a].clone()}else{e.symbolizer={};var i,s;for(var r in this.symbolizer)i=this.symbolizer[r],s=typeof i,"object"===s?e.symbolizer[r]=OpenLayers.Util.extend({},i):"string"===s&&(e.symbolizer[r]=i)}return e.filter=this.filter&&this.filter.clone(),e.context=this.context&&OpenLayers.Util.extend({},this.context),new OpenLayers.Rule(e)},CLASS_NAME:"OpenLayers.Rule"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SLD=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{profile:null,defaultVersion:"1.0.0",stringifyOutput:!0,namedLayersAsArray:!1,CLASS_NAME:"OpenLayers.Format.SLD"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Symbolizer.Polygon=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Polygon"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GML.v2=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",initialize:function(e){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[e])},readers:{gml:OpenLayers.Util.applyDefaults({outerBoundaryIs:function(e,t){var a={};this.readChildNodes(e,a),t.outer=a.components[0]},innerBoundaryIs:function(e,t){var a={};this.readChildNodes(e,a),t.inner.push(a.components[0])},Box:function(e,t){var a={};this.readChildNodes(e,a),t.components||(t.components=[]);var i=a.points[0],s=a.points[1];t.components.push(new OpenLayers.Bounds(i.x,i.y,s.x,s.y))}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(e){var t;t=OpenLayers.Util.isArray(e)?"wfs:FeatureCollection":"gml:featureMember";var a=this.writeNode(t,e);return this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({Point:function(e){var t=this.createElementNSPlus("gml:Point");return this.writeNode("coordinates",[e],t),t},coordinates:function(e){for(var t,a=e.length,i=new Array(a),s=0;s<a;++s)t=e[s],this.xy?i[s]=t.x+","+t.y:i[s]=t.y+","+t.x,void 0!=t.z&&(i[s]+=","+t.z);return this.createElementNSPlus("gml:coordinates",{attributes:{decimal:".",cs:",",ts:" "},value:1==a?i[0]:i.join(" ")})},LineString:function(e){var t=this.createElementNSPlus("gml:LineString");return this.writeNode("coordinates",e.components,t),t},Polygon:function(e){var t=this.createElementNSPlus("gml:Polygon");this.writeNode("outerBoundaryIs",e.components[0],t);for(var a=1;a<e.components.length;++a)this.writeNode("innerBoundaryIs",e.components[a],t);return t},outerBoundaryIs:function(e){var t=this.createElementNSPlus("gml:outerBoundaryIs");return this.writeNode("LinearRing",e,t),t},innerBoundaryIs:function(e){var t=this.createElementNSPlus("gml:innerBoundaryIs");return this.writeNode("LinearRing",e,t),t},LinearRing:function(e){var t=this.createElementNSPlus("gml:LinearRing");return this.writeNode("coordinates",e.components,t),t},Box:function(e){var t=this.createElementNSPlus("gml:Box");return this.writeNode("coordinates",[{x:e.left,y:e.bottom},{x:e.right,y:e.top}],t),this.srsName&&t.setAttribute("srsName",this.srsName),t}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},CLASS_NAME:"OpenLayers.Format.GML.v2"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Filter.v1_0_0=OpenLayers.Class(OpenLayers.Format.GML.v2,OpenLayers.Format.Filter.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",initialize:function(e){OpenLayers.Format.GML.v2.prototype.initialize.apply(this,[e])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsNotEqualTo:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO});this.readChildNodes(e,a),t.filters.push(a)},PropertyIsLike:function(e,t){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(e,a);var i=e.getAttribute("wildCard"),s=e.getAttribute("singleChar"),r=e.getAttribute("escape");a.value2regex(i,s,r),t.filters.push(a)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsNotEqualTo:function(e){var t=this.createElementNSPlus("ogc:PropertyIsNotEqualTo");return this.writeNode("PropertyName",e,t),this.writeOgcExpression(e.value,t),t},PropertyIsLike:function(e){var t=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{wildCard:"*",singleChar:".",escape:"!"}});return this.writeNode("PropertyName",e,t),this.writeNode("Literal",e.regex2value(),t),t},BBOX:function(e){var t=this.createElementNSPlus("ogc:BBOX");e.property&&this.writeNode("PropertyName",e,t);var a=this.writeNode("gml:Box",e.value,t);return e.projection&&a.setAttribute("srsName",e.projection),t}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},writeSpatial:function(e,t){var a=this.createElementNSPlus("ogc:"+t);if(this.writeNode("PropertyName",e,a),e.value instanceof OpenLayers.Filter.Function)this.writeNode("Function",e.value,a);else{var i;i=e.value instanceof OpenLayers.Geometry?this.writeNode("feature:_geometry",e.value).firstChild:this.writeNode("gml:Box",e.value),e.projection&&i.setAttribute("srsName",e.projection),a.appendChild(i)}return a},CLASS_NAME:"OpenLayers.Format.Filter.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFST.v1_0_0=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,OpenLayers.Format.WFST.v1,{version:"1.0.0",srsNameInQuery:!1,schemaLocations:{wfs:"http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"},initialize:function(e){OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this,[e]),OpenLayers.Format.WFST.v1.prototype.initialize.apply(this,[e])},readNode:function(e,t,a){return OpenLayers.Format.GML.v2.prototype.readNode.apply(this,arguments)},readers:{wfs:OpenLayers.Util.applyDefaults({WFS_TransactionResponse:function(e,t){t.insertIds=[],t.success=!1,this.readChildNodes(e,t)},InsertResult:function(e,t){var a={fids:[]};this.readChildNodes(e,a),t.insertIds=t.insertIds.concat(a.fids)},TransactionResult:function(e,t){this.readChildNodes(e,t)},Status:function(e,t){this.readChildNodes(e,t)},SUCCESS:function(e,t){t.success=!0}},OpenLayers.Format.WFST.v1.prototype.readers.wfs),gml:OpenLayers.Format.GML.v2.prototype.readers.gml,feature:OpenLayers.Format.GML.v2.prototype.readers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc},writers:{wfs:OpenLayers.Util.applyDefaults({Query:function(e){e=OpenLayers.Util.extend({featureNS:this.featureNS,featurePrefix:this.featurePrefix,featureType:this.featureType,srsName:this.srsName,srsNameInQuery:this.srsNameInQuery},e);var t=e.featurePrefix,a=this.createElementNSPlus("wfs:Query",{attributes:{typeName:(t?t+":":"")+e.featureType}});if(e.srsNameInQuery&&e.srsName&&a.setAttribute("srsName",e.srsName),e.featureNS&&a.setAttribute("xmlns:"+t,e.featureNS),e.propertyNames)for(var i=0,s=e.propertyNames.length;i<s;i++)this.writeNode("ogc:PropertyName",{property:e.propertyNames[i]},a);return e.filter&&(this.setFilterProperty(e.filter),this.writeNode("ogc:Filter",e.filter,a)),a}},OpenLayers.Format.WFST.v1.prototype.writers.wfs),gml:OpenLayers.Format.GML.v2.prototype.writers.gml,feature:OpenLayers.Format.GML.v2.prototype.writers.feature,ogc:OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.WFST.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(e){this.compare=e?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(e){this.exists(e)&&this.remove(e);var t=e.id;this.determineZIndex(e);for(var a,i=-1,s=this.order.length;s-i>1;){a=parseInt((i+s)/2);var r=this.compare(this,e,OpenLayers.Util.getElement(this.order[a]));r>0?i=a:s=a}return this.order.splice(s,0,t),this.indices[t]=this.getZIndex(e),this.getNextElement(s)},remove:function(e){var t=e.id,a=OpenLayers.Util.indexOf(this.order,t);if(a>=0)if(this.order.splice(a,1),delete this.indices[t],this.order.length>0){var i=this.order[this.order.length-1];this.maxZIndex=this.indices[i]}else this.maxZIndex=0},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(e){return null!=this.indices[e.id]},getZIndex:function(e){return e._style.graphicZIndex},determineZIndex:function(e){var t=e._style.graphicZIndex;null==t?(t=this.maxZIndex,e._style.graphicZIndex=t):t>this.maxZIndex&&(this.maxZIndex=t)},getNextElement:function(e){var t=e+1;if(t<this.order.length){var a=OpenLayers.Util.getElement(this.order[t]);return void 0==a&&(a=this.getNextElement(t)),a}return null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(e,t,a){var i=e.getZIndex(t),s=0;if(a){var r=e.getZIndex(a);s=i-r}return s},Z_ORDER_DRAWING_ORDER:function(e,t,a){var i=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,a);return a&&0==i&&(i=1),i},Z_ORDER_Y_ORDER:function(e,t,a){var i=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,a);if(a&&0===i){var s=a._boundsBottom-t._boundsBottom;i=0===s?1:s}return i}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),t&&(t.zIndexing||t.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(t.yOrdering))},destroy:function(){this.clear(),this.rendererRoot=null,this.root=null,this.xmlns=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var e,t=this.vectorRoot;if(t)for(;e=t.firstChild;)t.removeChild(e);if(t=this.textRoot)for(;e=t.firstChild;)t.removeChild(e);this.indexer&&this.indexer.clear()},setExtent:function(e,t){var a=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),i=this.getResolution();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var s,r=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/r),o=this.map.getMaxExtent();o.right>e.left&&o.right<e.right?s=!0:o.left>e.left&&o.left<e.right&&(s=!1),(s!==this.rightOfDateLine||t)&&(a=!1,this.xOffset=s===!0?o.getWidth()/i:0),this.rightOfDateLine=s}return a},getNodeType:function(e,t){},drawGeometry:function(e,t,a){var i=e.CLASS_NAME,s=!0;if("OpenLayers.Geometry.Collection"==i||"OpenLayers.Geometry.MultiPoint"==i||"OpenLayers.Geometry.MultiLineString"==i||"OpenLayers.Geometry.MultiPolygon"==i){for(var r=0,o=e.components.length;r<o;r++)s=this.drawGeometry(e.components[r],t,a)&&s;return s}s=!1;var n=!1;if("none"!=t.display&&(t.backgroundGraphic?this.redrawBackgroundNode(e.id,e,t,a):n=!0,s=this.redrawNode(e.id,e,t,a)),0==s){var l=document.getElementById(e.id);l&&(l._style.backgroundGraphic&&(n=!0),l.parentNode.removeChild(l))}if(n){var l=document.getElementById(e.id+this.BACKGROUND_ID_SUFFIX);l&&l.parentNode.removeChild(l)}return s},redrawNode:function(e,t,a,i){a=this.applyDefaultSymbolizer(a);var s=this.nodeFactory(e,this.getNodeType(t,a));s._featureId=i,s._boundsBottom=t.getBounds().bottom,s._geometryClass=t.CLASS_NAME,s._style=a;var r=this.drawGeometryNode(s,t,a);if(r===!1)return!1;if(s=r.node,this.indexer){var o=this.indexer.insert(s);o?this.vectorRoot.insertBefore(s,o):this.vectorRoot.appendChild(s)}else s.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(s);return this.postDraw(s),r.complete},redrawBackgroundNode:function(e,t,a,i){var s=OpenLayers.Util.extend({},a);return s.externalGraphic=s.backgroundGraphic,s.graphicXOffset=s.backgroundXOffset,s.graphicYOffset=s.backgroundYOffset,s.graphicZIndex=s.backgroundGraphicZIndex,s.graphicWidth=s.backgroundWidth||s.graphicWidth,s.graphicHeight=s.backgroundHeight||s.graphicHeight,s.backgroundGraphic=null,s.backgroundXOffset=null,s.backgroundYOffset=null,s.backgroundGraphicZIndex=null,this.redrawNode(e+this.BACKGROUND_ID_SUFFIX,t,s,null)},drawGeometryNode:function(e,t,a){a=a||e._style;var i,s={isFilled:void 0===a.fill||a.fill,isStroked:void 0===a.stroke?!!a.strokeWidth:a.stroke};switch(t.CLASS_NAME){case"OpenLayers.Geometry.Point":a.graphic===!1&&(s.isFilled=!1,s.isStroked=!1),i=this.drawPoint(e,t);break;case"OpenLayers.Geometry.LineString":s.isFilled=!1,i=this.drawLineString(e,t);break;case"OpenLayers.Geometry.LinearRing":i=this.drawLinearRing(e,t);break;case"OpenLayers.Geometry.Polygon":i=this.drawPolygon(e,t);break;case"OpenLayers.Geometry.Rectangle":i=this.drawRectangle(e,t)}return e._options=s,0!=i&&{node:this.setStyle(e,a,s,t),complete:i}},postDraw:function(e){},drawPoint:function(e,t){},drawLineString:function(e,t){},drawLinearRing:function(e,t){},drawPolygon:function(e,t){},drawRectangle:function(e,t){},drawCircle:function(e,t){},removeText:function(e){var t=document.getElementById(e+this.LABEL_ID_SUFFIX);t&&this.textRoot.removeChild(t);var a=document.getElementById(e+this.LABEL_OUTLINE_SUFFIX);a&&this.textRoot.removeChild(a)},getFeatureIdFromEvent:function(e){var t=e.target,a=t&&t.correspondingUseElement,i=a?a:t||e.srcElement;return i._featureId},eraseGeometry:function(e,t){if("OpenLayers.Geometry.MultiPoint"==e.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==e.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==e.CLASS_NAME||"OpenLayers.Geometry.Collection"==e.CLASS_NAME)for(var a=0,i=e.components.length;a<i;a++)this.eraseGeometry(e.components[a],t);else{var s=OpenLayers.Util.getElement(e.id);if(s&&s.parentNode&&(s.geometry&&(s.geometry.destroy(),s.geometry=null),s.parentNode.removeChild(s),this.indexer&&this.indexer.remove(s),s._style.backgroundGraphic)){var r=e.id+this.BACKGROUND_ID_SUFFIX,o=OpenLayers.Util.getElement(r);o&&o.parentNode&&o.parentNode.removeChild(o)}}},nodeFactory:function(e,t){var a=OpenLayers.Util.getElement(e);return a?this.nodeTypeCompare(a,t)||(a.parentNode.removeChild(a),a=this.nodeFactory(e,t)):a=this.createNode(t,e),a},nodeTypeCompare:function(e,t){},createNode:function(e,t){},moveRoot:function(e){var t=this.root;e.root.parentNode==this.rendererRoot&&(t=e.root),t.parentNode.removeChild(t),e.rendererRoot.appendChild(t)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(e){return"circle"!=e&&!!e},CLASS_NAME:"OpenLayers.Renderer.Elements"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ArgParser=OpenLayers.Class(OpenLayers.Control,{center:null,zoom:null,layers:null,displayProjection:null,getParameters:function(e){e=e||window.location.href;var t=OpenLayers.Util.getParameters(e),a=e.indexOf("#");return a>0&&(e="?"+e.substring(a+1,e.length),OpenLayers.Util.extend(t,OpenLayers.Util.getParameters(e))),t},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,a=this.map.controls.length;t<a;t++){var i=this.map.controls[t];if(i!=this&&"OpenLayers.Control.ArgParser"==i.CLASS_NAME){i.displayProjection!=this.displayProjection&&(this.displayProjection=i.displayProjection);break}}if(t==this.map.controls.length){var s=this.getParameters();s.layers&&(this.layers=s.layers,this.map.events.register("addlayer",this,this.configureLayers),this.configureLayers()),s.lat&&s.lon&&(this.center=new OpenLayers.LonLat(parseFloat(s.lon),parseFloat(s.lat)),s.zoom&&(this.zoom=parseFloat(s.zoom)),this.map.events.register("changebaselayer",this,this.setCenter),this.setCenter())}},setCenter:function(){this.map.baseLayer&&(this.map.events.unregister("changebaselayer",this,this.setCenter),this.displayProjection&&this.center.transform(this.displayProjection,this.map.getProjectionObject()),this.map.setCenter(this.center,this.zoom))},configureLayers:function(){if(this.layers.length==this.map.layers.length){this.map.events.unregister("addlayer",this,this.configureLayers);for(var e=0,t=this.layers.length;e<t;e++){var a=this.map.layers[e],i=this.layers.charAt(e);"B"==i?this.map.setBaseLayer(a):"T"!=i&&"F"!=i||a.setVisibility("T"==i)}}},CLASS_NAME:"OpenLayers.Control.ArgParser"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Permalink=OpenLayers.Class(OpenLayers.Control,{argParserClass:OpenLayers.Control.ArgParser,element:null,anchor:!1,base:"",displayProjection:null,initialize:function(e,t,a){null===e||"object"!=typeof e||OpenLayers.Util.isElement(e)?(OpenLayers.Control.prototype.initialize.apply(this,[a]),this.element=OpenLayers.Util.getElement(e),this.base=t||document.location.href):(a=e,this.base=document.location.href,OpenLayers.Control.prototype.initialize.apply(this,[a]),null!=this.element&&(this.element=OpenLayers.Util.getElement(this.element)))},destroy:function(){this.element&&this.element.parentNode==this.div&&(this.div.removeChild(this.element),this.element=null),this.map&&this.map.events.unregister("moveend",this,this.updateLink),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);for(var t=0,a=this.map.controls.length;t<a;t++){var i=this.map.controls[t];if(i.CLASS_NAME==this.argParserClass.CLASS_NAME){i.displayProjection!=this.displayProjection&&(this.displayProjection=i.displayProjection);break}}t==this.map.controls.length&&this.map.addControl(new this.argParserClass({displayProjection:this.displayProjection}))},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||this.anchor||(this.element=document.createElement("a"),this.element.innerHTML=OpenLayers.i18n("Permalink"),this.element.href="",this.div.appendChild(this.element)),this.map.events.on({moveend:this.updateLink,changelayer:this.updateLink,changebaselayer:this.updateLink,scope:this}),this.updateLink(),this.div},updateLink:function(){var e=this.anchor?"#":"?",t=this.base,a=null;t.indexOf("#")!=-1&&0==this.anchor&&(a=t.substring(t.indexOf("#"),t.length)),t.indexOf(e)!=-1&&(t=t.substring(0,t.indexOf(e)));var i=t.split("#");t=i[0]+e+OpenLayers.Util.getParameterString(this.createParams()),a&&(t+=a),this.anchor&&!this.element?window.location.href=t:this.element.href=t},createParams:function(e,t,a){e=e||this.map.getCenter();var i=OpenLayers.Util.getParameters(this.base);if(e){i.zoom=t||this.map.getZoom();var s=e.lat,r=e.lon;if(this.displayProjection){var o=OpenLayers.Projection.transform({x:r,y:s},this.map.getProjectionObject(),this.displayProjection);r=o.x,s=o.y}i.lat=Math.round(1e5*s)/1e5,i.lon=Math.round(1e5*r)/1e5,a=a||this.map.layers,i.layers="";for(var n=0,l=a.length;n<l;n++){var c=a[n];c.isBaseLayer?i.layers+=c==this.map.baseLayer?"B":"0":i.layers+=c.getVisibility()?"T":"F"}}return i},CLASS_NAME:"OpenLayers.Control.Permalink"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(e,t,a){var i=[];i.push(e,t,{},a),OpenLayers.Layer.Grid.prototype.initialize.apply(this,i)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),a=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),i=Math.round((e.bottom-this.tileOrigin.lat)/(t*this.tileSize.h)),s=this.getServerZoom(),r=this.serviceVersion+"/"+this.layername+"/"+s+"/"+a+"/"+i+"."+this.type,o=this.url;return OpenLayers.Util.isArray(o)&&(o=this.selectUrl(r,o)),o+r},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WCSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",CLASS_NAME:"OpenLayers.Format.WCSCapabilities"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WCSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g,splitSpace:/\s+/},defaultPrefix:"wcs",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WCSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1,{namespaces:{wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows"},errorProperty:"service",readers:{wcs:{WCS_Capabilities:function(e,t){this.readChildNodes(e,t)},Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},name:function(e,t){t.name=this.getChildValue(e)},label:function(e,t){t.label=this.getChildValue(e)},keywords:function(e,t){t.keywords=[],this.readChildNodes(e,t.keywords)},keyword:function(e,t){t.push(this.getChildValue(e))},responsibleParty:function(e,t){t.responsibleParty={},this.readChildNodes(e,t.responsibleParty)},individualName:function(e,t){t.individualName=this.getChildValue(e)},organisationName:function(e,t){t.organisationName=this.getChildValue(e)},positionName:function(e,t){t.positionName=this.getChildValue(e)},contactInfo:function(e,t){t.contactInfo={},this.readChildNodes(e,t.contactInfo)},phone:function(e,t){t.phone={},this.readChildNodes(e,t.phone)},voice:function(e,t){t.voice=this.getChildValue(e)},facsimile:function(e,t){t.facsimile=this.getChildValue(e)},address:function(e,t){t.address={},this.readChildNodes(e,t.address)},deliveryPoint:function(e,t){t.deliveryPoint=this.getChildValue(e)},city:function(e,t){t.city=this.getChildValue(e)},postalCode:function(e,t){t.postalCode=this.getChildValue(e)},country:function(e,t){t.country=this.getChildValue(e)},electronicMailAddress:function(e,t){t.electronicMailAddress=this.getChildValue(e)},fees:function(e,t){t.fees=this.getChildValue(e)},accessConstraints:function(e,t){t.accessConstraints=this.getChildValue(e)},ContentMetadata:function(e,t){t.contentMetadata=[],this.readChildNodes(e,t.contentMetadata)},CoverageOfferingBrief:function(e,t){var a={};this.readChildNodes(e,a),t.push(a)},name:function(e,t){t.name=this.getChildValue(e)},label:function(e,t){t.label=this.getChildValue(e)},lonLatEnvelope:function(e,t){var a=this.getElementsByTagNameNS(e,"http://www.opengis.net/gml","pos");if(2==a.length){var i={},s={};OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[a[0],i]),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[a[1],s]),t.lonLatEnvelope={},t.lonLatEnvelope.srsName=e.getAttribute("srsName"),t.lonLatEnvelope.min=i.points[0],t.lonLatEnvelope.max=s.points[0]}}}},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.layer.events.on({refresh:this.load,scope:this}),1==this.layer.visibility||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),e},load:function(e){var t=this.layer;t.events.triggerEvent("loadstart",{filter:t.filter}),t.protocol.read(OpenLayers.Util.applyDefaults({callback:this.merge,filter:t.filter,scope:this},e)),t.events.un({visibilitychanged:this.load,scope:this})},merge:function(e){var t=this.layer;t.destroyFeatures();var a=e.features;if(a&&a.length>0){var i=t.projection,s=t.map.getProjectionObject();if(!s.equals(i))for(var r,o=0,n=a.length;o<n;++o)r=a[o].geometry,r&&r.transform(i,s);t.addFeatures(a)}t.events.triggerEvent("loadend",{response:e})},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"â",zoomOutId:"olZoomOutLink",draw:function(){var e=OpenLayers.Control.prototype.draw.apply(this),t=this.getOrCreateLinks(e),a=t.zoomIn,i=t.zoomOut,s=this.map.events;return i.parentNode!==e&&(s=this.events,s.attachToElement(i.parentNode)),s.register("buttonclick",this,this.onZoomClick),this.zoomInLink=a,this.zoomOutLink=i,e},getOrCreateLinks:function(e){var t=document.getElementById(this.zoomInId),a=document.getElementById(this.zoomOutId);return t||(t=document.createElement("a"),t.href="#zoomIn",t.appendChild(document.createTextNode(this.zoomInText)),t.className="olControlZoomIn",e.appendChild(t)),OpenLayers.Element.addClass(t,"olButton"),a||(a=document.createElement("a"),a.href="#zoomOut",a.appendChild(document.createTextNode(this.zoomOutText)),a.className="olControlZoomOut",e.appendChild(a)),OpenLayers.Element.addClass(a,"olButton"),{zoomIn:t,zoomOut:a}},onZoomClick:function(e){var t=e.buttonElement;t===this.zoomInLink?this.map.zoomIn():t===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.PointTrack=OpenLayers.Class(OpenLayers.Layer.Vector,{dataFrom:null,styleFrom:null,addNodes:function(e,t){if(e.length<2)throw new Error("At least two point features have to be added to create a line from");for(var a,i,s,r=new Array(e.length-1),o=0,n=e.length;o<n;o++){if(a=e[o],s=a.geometry){if("OpenLayers.Geometry.Point"!=s.CLASS_NAME)throw new TypeError("Only features with point geometries are supported.")}else{var l=a.lonlat;s=new OpenLayers.Geometry.Point(l.lon,l.lat)}if(o>0){var c=null!=this.dataFrom?e[o+this.dataFrom].data||e[o+this.dataFrom].attributes:null,d=null!=this.styleFrom?e[o+this.styleFrom].style:null,p=new OpenLayers.Geometry.LineString([i,s]);r[o-1]=new OpenLayers.Feature.Vector(p,c,d)}i=s}this.addFeatures(r,t)},CLASS_NAME:"OpenLayers.Layer.PointTrack"}),OpenLayers.Layer.PointTrack.SOURCE_NODE=-1,OpenLayers.Layer.PointTrack.TARGET_NODE=0,OpenLayers.Layer.PointTrack.dataFrom={SOURCE_NODE:-1,TARGET_NODE:0},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.WFS=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.WFS.DEFAULTS);var t=OpenLayers.Protocol.WFS["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported WFS version: "+e.version;return new t(e)},OpenLayers.Protocol.WFS.fromWMSLayer=function(e,t){var a,i,s=e.params.LAYERS,r=(OpenLayers.Util.isArray(s)?s[0]:s).split(":");r.length>1&&(i=r[0]),a=r.pop();var o={url:e.url,featureType:a,featurePrefix:i,srsName:e.projection&&e.projection.getCode()||e.map&&e.map.getProjectionObject().getCode(),version:"1.1.0"};return new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t,o))},OpenLayers.Protocol.WFS.DEFAULTS={version:"1.0.0"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=0,a=this.markers.length;t<a;t++)this.markers[t].setOpacity(this.opacity)}},moveTo:function(e,t,a){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),t||!this.drawn){for(var i=0,s=this.markers.length;i<s;i++)this.drawMarker(this.markers[i]);this.drawn=!0}},addMarker:function(e){this.markers.push(e),this.opacity<1&&e.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(e.map=this.map,this.drawMarker(e))},removeMarker:function(e){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,e),e.erase())},clearMarkers:function(){if(null!=this.markers)for(;this.markers.length>0;)this.removeMarker(this.markers[0])},drawMarker:function(e){var t=this.map.getLayerPxFromLonLat(e.lonlat);if(null==t)e.display(!1);else if(e.isDrawn())e.icon&&e.icon.moveTo(t);else{var a=e.draw(t);this.div.appendChild(a)}},getDataExtent:function(){var e=null;if(this.markers&&this.markers.length>0)for(var e=new OpenLayers.Bounds,t=0,a=this.markers.length;t<a;t++){var i=this.markers[t];e.extend(i.lonlat)}return e},CLASS_NAME:"OpenLayers.Layer.Markers"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Pan=OpenLayers.Class(OpenLayers.Control.Button,{slideFactor:50,slideRatio:null,direction:null,initialize:function(e,t){this.direction=e,this.CLASS_NAME+=this.direction,OpenLayers.Control.prototype.initialize.apply(this,[t])},trigger:function(){if(this.map){var e=OpenLayers.Function.bind(function(e){return this.slideRatio?this.map.getSize()[e]*this.slideRatio:this.slideFactor},this);switch(this.direction){case OpenLayers.Control.Pan.NORTH:this.map.pan(0,-e("h"));break;case OpenLayers.Control.Pan.SOUTH:this.map.pan(0,e("h"));break;case OpenLayers.Control.Pan.WEST:this.map.pan(-e("w"),0);break;case OpenLayers.Control.Pan.EAST:this.map.pan(e("w"),0)}}},CLASS_NAME:"OpenLayers.Control.Pan"}),OpenLayers.Control.Pan.NORTH="North",OpenLayers.Control.Pan.SOUTH="South",OpenLayers.Control.Pan.EAST="East",OpenLayers.Control.Pan.WEST="West",/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.CSWGetDomain=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Format.CSWGetDomain.DEFAULTS);var t=OpenLayers.Format.CSWGetDomain["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported CSWGetDomain version: "+e.version;return new t(e)},OpenLayers.Format.CSWGetDomain.DEFAULTS={version:"2.0.2"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.CSWGetDomain.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",csw:"http://www.opengis.net/cat/csw/2.0.2"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",PropertyName:null,ParameterName:null,read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetDomainResponse:function(e,t){this.readChildNodes(e,t)},DomainValues:function(e,t){OpenLayers.Util.isArray(t.DomainValues)||(t.DomainValues=[]);for(var a=e.attributes,i={},s=0,r=a.length;s<r;++s)i[a[s].name]=a[s].nodeValue;this.readChildNodes(e,i),t.DomainValues.push(i)},PropertyName:function(e,t){t.PropertyName=this.getChildValue(e)},ParameterName:function(e,t){t.ParameterName=this.getChildValue(e)},ListOfValues:function(e,t){OpenLayers.Util.isArray(t.ListOfValues)||(t.ListOfValues=[]),this.readChildNodes(e,t.ListOfValues)},Value:function(e,t){for(var a=e.attributes,i={},s=0,r=a.length;s<r;++s)i[a[s].name]=a[s].nodeValue;i.value=this.getChildValue(e),t.push({Value:i})},ConceptualScheme:function(e,t){t.ConceptualScheme={},this.readChildNodes(e,t.ConceptualScheme)},Name:function(e,t){t.Name=this.getChildValue(e)},Document:function(e,t){t.Document=this.getChildValue(e)},Authority:function(e,t){t.Authority=this.getChildValue(e)},RangeOfValues:function(e,t){t.RangeOfValues={},this.readChildNodes(e,t.RangeOfValues)},MinValue:function(e,t){for(var a=e.attributes,i={},s=0,r=a.length;s<r;++s)i[a[s].name]=a[s].nodeValue;i.value=this.getChildValue(e),t.MinValue=i},MaxValue:function(e,t){for(var a=e.attributes,i={},s=0,r=a.length;s<r;++s)i[a[s].name]=a[s].nodeValue;i.value=this.getChildValue(e),t.MaxValue=i}}},write:function(e){var t=this.writeNode("csw:GetDomain",e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},writers:{csw:{GetDomain:function(e){var t=this.createElementNSPlus("csw:GetDomain",{attributes:{service:"CSW",version:this.version}});return e.PropertyName||this.PropertyName?this.writeNode("csw:PropertyName",e.PropertyName||this.PropertyName,t):(e.ParameterName||this.ParameterName)&&this.writeNode("csw:ParameterName",e.ParameterName||this.ParameterName,t),this.readChildNodes(t,e),t},PropertyName:function(e){var t=this.createElementNSPlus("csw:PropertyName",{value:e});return t},ParameterName:function(e){var t=this.createElementNSPlus("csw:ParameterName",{value:e});return t}}},CLASS_NAME:"OpenLayers.Format.CSWGetDomain.v2_0_2"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.ArcXML.Features=OpenLayers.Class(OpenLayers.Format.XML,{read:function(e){var t=new OpenLayers.Format.ArcXML,a=t.read(e);return a.features.feature}}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Snapping=OpenLayers.Class(OpenLayers.Control,{DEFAULTS:{tolerance:10,node:!0,edge:!0,vertex:!0},greedy:!0,precedence:["node","vertex","edge"],resolution:null,geoToleranceCache:null,layer:null,feature:null,point:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.options=e||{},this.options.layer&&this.setLayer(this.options.layer);var t=OpenLayers.Util.extend({},this.options.defaults);this.defaults=OpenLayers.Util.applyDefaults(t,this.DEFAULTS),this.setTargets(this.options.targets),0===this.targets.length&&this.layer&&this.addTargetLayer(this.layer),this.geoToleranceCache={}},setLayer:function(e){this.active?(this.deactivate(),this.layer=e,this.activate()):this.layer=e},setTargets:function(e){if(this.targets=[],e&&e.length)for(var t,a=0,i=e.length;a<i;++a)t=e[a],t instanceof OpenLayers.Layer.Vector?this.addTargetLayer(t):this.addTarget(t)},addTargetLayer:function(e){this.addTarget({layer:e})},addTarget:function(e){e=OpenLayers.Util.applyDefaults(e,this.defaults),e.nodeTolerance=e.nodeTolerance||e.tolerance,e.vertexTolerance=e.vertexTolerance||e.tolerance,e.edgeTolerance=e.edgeTolerance||e.tolerance,this.targets.push(e)},removeTargetLayer:function(e){for(var t,a=this.targets.length-1;a>=0;--a)t=this.targets[a],t.layer===e&&this.removeTarget(t)},removeTarget:function(e){return OpenLayers.Util.removeItem(this.targets,e)},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);return e&&this.layer&&this.layer.events&&this.layer.events.on({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);return e&&this.layer&&this.layer.events&&this.layer.events.un({sketchstarted:this.onSketchModified,sketchmodified:this.onSketchModified,vertexmodified:this.onVertexModified,scope:this}),this.feature=null,this.point=null,e},onSketchModified:function(e){this.feature=e.feature,this.considerSnapping(e.vertex,e.vertex)},onVertexModified:function(e){this.feature=e.feature;var t=this.layer.map.getLonLatFromViewPortPx(e.pixel);this.considerSnapping(e.vertex,new OpenLayers.Geometry.Point(t.lon,t.lat))},considerSnapping:function(e,t){for(var a,i,s={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY,x:null,y:null},r=!1,o=0,n=this.targets.length;o<n;++o)if(i=this.targets[o],a=this.testTarget(i,t)){if(this.greedy){s=a,s.target=i,r=!0;break}(a.rank<s.rank||a.rank===s.rank&&a.dist<s.dist)&&(s=a,s.target=i,r=!0)}if(r){var l=this.events.triggerEvent("beforesnap",{point:e,x:s.x,y:s.y,distance:s.dist,layer:s.target.layer,snapType:this.precedence[s.rank]});l!==!1?(e.x=s.x,e.y=s.y,this.point=e,this.events.triggerEvent("snap",{point:e,snapType:this.precedence[s.rank],layer:s.target.layer,distance:s.dist})):r=!1}this.point&&!r&&(e.x=t.x,e.y=t.y,this.point=null,this.events.triggerEvent("unsnap",{point:e}))},testTarget:function(e,t){var a=this.layer.map.getResolution();if("minResolution"in e&&a<e.minResolution)return null;if("maxResolution"in e&&a>=e.maxResolution)return null;for(var i,s,r,o,n,l,c,d={node:this.getGeoTolerance(e.nodeTolerance,a),vertex:this.getGeoTolerance(e.vertexTolerance,a),edge:this.getGeoTolerance(e.edgeTolerance,a)},p=Math.max(d.node,d.vertex,d.edge),u={rank:Number.POSITIVE_INFINITY,dist:Number.POSITIVE_INFINITY},m=!1,h=e.layer.features,g=this.precedence.length,v=new OpenLayers.LonLat(t.x,t.y),f=0,y=h.length;f<y;++f)if(i=h[f],i!==this.feature&&!i._sketch&&i.state!==OpenLayers.State.DELETE&&(!e.filter||e.filter.evaluate(i))&&i.atPoint(v,p,p))for(var b=0,L=Math.min(u.rank+1,g);b<L;++b)if(s=this.precedence[b],e[s])if("edge"===s){if(n=i.geometry.distanceTo(t,{details:!0}),l=n.distance,l<=d[s]&&l<u.dist){u={rank:b,dist:l,x:n.x0,y:n.y0},m=!0;break}}else{r=i.geometry.getVertices("node"===s),c=!1;for(var w=0,O=r.length;w<O;++w)o=r[w],l=o.distanceTo(t),l<=d[s]&&(b<u.rank||b===u.rank&&l<u.dist)&&(u={rank:b,dist:l,x:o.x,y:o.y},m=!0,c=!0);if(c)break}return m?u:null},getGeoTolerance:function(e,t){t!==this.resolution&&(this.resolution=t,this.geoToleranceCache={});var a=this.geoToleranceCache[e];return void 0===a&&(a=e*t,this.geoToleranceCache[e]=a),a},destroy:function(){this.active&&this.deactivate(),delete this.layer,delete this.targets,OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Snapping"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OWSCommon.v1_1_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1,{namespaces:{ows:"http://www.opengis.net/ows/1.1",xlink:"http://www.w3.org/1999/xlink"},readers:{ows:OpenLayers.Util.applyDefaults({ExceptionReport:function(e,t){t.exceptionReport={version:e.getAttribute("version"),language:e.getAttribute("xml:lang"),exceptions:[]},this.readChildNodes(e,t.exceptionReport)},AllowedValues:function(e,t){t.allowedValues={},this.readChildNodes(e,t.allowedValues)},AnyValue:function(e,t){t.anyValue=!0},DataType:function(e,t){t.dataType=this.getChildValue(e)},Range:function(e,t){t.range={},this.readChildNodes(e,t.range)},MinimumValue:function(e,t){t.minValue=this.getChildValue(e)},MaximumValue:function(e,t){t.maxValue=this.getChildValue(e)},Identifier:function(e,t){t.identifier=this.getChildValue(e)},SupportedCRS:function(e,t){t.supportedCRS=this.getChildValue(e)}},OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)},writers:{ows:OpenLayers.Util.applyDefaults({Range:function(e){var t=this.createElementNSPlus("ows:Range",{attributes:{"ows:rangeClosure":e.closure}});return this.writeNode("ows:MinimumValue",e.minValue,t),this.writeNode("ows:MaximumValue",e.maxValue,t),t},MinimumValue:function(e){var t=this.createElementNSPlus("ows:MinimumValue",{value:e});return t},MaximumValue:function(e){var t=this.createElementNSPlus("ows:MaximumValue",{value:e});return t},Value:function(e){var t=this.createElementNSPlus("ows:Value",{value:e});return t}},OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)},CLASS_NAME:"OpenLayers.Format.OWSCommon.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WCSGetCoverage=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.1.2",schemaLocation:"http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",write:function(e){var t=this.writeNode("wcs:GetCoverage",e);return this.setAttributeNS(t,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[t])},writers:{wcs:{GetCoverage:function(e){var t=this.createElementNSPlus("wcs:GetCoverage",{attributes:{version:e.version||this.VERSION,service:"WCS"}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("wcs:DomainSubset",e.domainSubset,t),this.writeNode("wcs:Output",e.output,t),t},DomainSubset:function(e){var t=this.createElementNSPlus("wcs:DomainSubset",{});return this.writeNode("ows:BoundingBox",e.boundingBox,t),e.temporalSubset&&this.writeNode("wcs:TemporalSubset",e.temporalSubset,t),t},TemporalSubset:function(e){for(var t=this.createElementNSPlus("wcs:TemporalSubset",{}),a=0,i=e.timePeriods.length;a<i;++a)this.writeNode("wcs:TimePeriod",e.timePeriods[a],t);return t},TimePeriod:function(e){var t=this.createElementNSPlus("wcs:TimePeriod",{});return this.writeNode("wcs:BeginPosition",e.begin,t),this.writeNode("wcs:EndPosition",e.end,t),e.resolution&&this.writeNode("wcs:TimeResolution",e.resolution,t),t},BeginPosition:function(e){var t=this.createElementNSPlus("wcs:BeginPosition",{value:e});return t},EndPosition:function(e){var t=this.createElementNSPlus("wcs:EndPosition",{value:e});return t},TimeResolution:function(e){var t=this.createElementNSPlus("wcs:TimeResolution",{value:e});return t},Output:function(e){var t=this.createElementNSPlus("wcs:Output",{attributes:{format:e.format,store:e.store}});return e.gridCRS&&this.writeNode("wcs:GridCRS",e.gridCRS,t),t},GridCRS:function(e){var t=this.createElementNSPlus("wcs:GridCRS",{});return this.writeNode("wcs:GridBaseCRS",e.baseCRS,t),e.type&&this.writeNode("wcs:GridType",e.type,t),e.origin&&this.writeNode("wcs:GridOrigin",e.origin,t),this.writeNode("wcs:GridOffsets",e.offsets,t),e.CS&&this.writeNode("wcs:GridCS",e.CS,t),t},GridBaseCRS:function(e){return this.createElementNSPlus("wcs:GridBaseCRS",{value:e})},GridOrigin:function(e){return this.createElementNSPlus("wcs:GridOrigin",{value:e})},GridType:function(e){return this.createElementNSPlus("wcs:GridType",{value:e})},GridOffsets:function(e){return this.createElementNSPlus("wcs:GridOffsets",{value:e})},GridCS:function(e){return this.createElementNSPlus("wcs:GridCS",{value:e})}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},CLASS_NAME:"OpenLayers.Format.WCSGetCoverage"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){this.features=[],this.styles={},this.fetched={};var t={depth:0,styleBaseUrl:this.styleBaseUrl};return this.parseData(e,t)},parseData:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var a=["Link","NetworkLink","Style","StyleMap","Placemark"],i=0,s=a.length;i<s;++i){var r=a[i],o=this.getElementsByTagNameNS(e,"*",r);if(0!=o.length)switch(r.toLowerCase()){case"link":case"networklink":this.parseLinks(o,t);break;case"style":this.extractStyles&&this.parseStyles(o,t);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(o,t);break;case"placemark":this.parseFeatures(o,t)}}return this.features},parseLinks:function(e,t){if(t.depth>=this.maxDepth)return!1;var a=OpenLayers.Util.extend({},t);a.depth++;for(var i=0,s=e.length;i<s;i++){var r=this.parseProperty(e[i],"*","href");if(r&&!this.fetched[r]){this.fetched[r]=!0;var o=this.fetchLink(r);o&&this.parseData(o,a)}}},fetchLink:function(e){var t=OpenLayers.Request.GET({url:e,async:!1});if(t)return t.responseText},parseStyles:function(e,t){for(var a=0,i=e.length;a<i;a++){var s=this.parseStyle(e[a]);if(s){var r=(t.styleBaseUrl||"")+"#"+s.id;this.styles[r]=s}}},parseKmlColor:function(e){var t=null;if(e){var a=e.match(this.regExes.kmlColor);a&&(t={color:"#"+a[4]+a[3]+a[2],opacity:parseInt(a[1],16)/255})}return t},parseStyle:function(e){for(var t,a,i={},s=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],r=0,o=s.length;r<o;++r)if(t=s[r],a=this.getElementsByTagNameNS(e,"*",t)[0])switch(t.toLowerCase()){case"linestyle":var n=this.parseProperty(a,"*","color"),l=this.parseKmlColor(n);l&&(i.strokeColor=l.color,i.strokeOpacity=l.opacity);var c=this.parseProperty(a,"*","width");c&&(i.strokeWidth=c);break;case"polystyle":var n=this.parseProperty(a,"*","color"),l=this.parseKmlColor(n);l&&(i.fillOpacity=l.opacity,i.fillColor=l.color);var d=this.parseProperty(a,"*","fill");"0"==d&&(i.fillColor="none");var p=this.parseProperty(a,"*","outline");"0"==p&&(i.strokeWidth="0");break;case"iconstyle":var u=parseFloat(this.parseProperty(a,"*","scale")||1),c=32*u,m=32*u,h=this.getElementsByTagNameNS(a,"*","Icon")[0];if(h){var g=this.parseProperty(h,"*","href");if(g){var v=this.parseProperty(h,"*","w"),f=this.parseProperty(h,"*","h"),y="http://maps.google.com/mapfiles/kml";!OpenLayers.String.startsWith(g,y)||v||f||(v=64,f=64,u/=2),v=v||f,f=f||v,v&&(c=parseInt(v)*u),f&&(m=parseInt(f)*u);var b=g.match(this.regExes.kmlIconPalette);if(b){var L=b[1],w=b[2],O=this.parseProperty(h,"*","x"),x=this.parseProperty(h,"*","y"),S=O?O/32:0,C=x?7-x/32:7,E=8*C+S;g="http://maps.google.com/mapfiles/kml/pal"+L+"/icon"+E+w}i.graphicOpacity=1,i.externalGraphic=g}}var k=this.getElementsByTagNameNS(a,"*","hotSpot")[0];if(k){var O=parseFloat(k.getAttribute("x")),x=parseFloat(k.getAttribute("y")),P=k.getAttribute("xunits");"pixels"==P?i.graphicXOffset=-O*u:"insetPixels"==P?i.graphicXOffset=-c+O*u:"fraction"==P&&(i.graphicXOffset=-c*O);var T=k.getAttribute("yunits");"pixels"==T?i.graphicYOffset=-m+x*u+1:"insetPixels"==T?i.graphicYOffset=-(x*u)+1:"fraction"==T&&(i.graphicYOffset=-m*(1-x)+1)}i.graphicWidth=c,i.graphicHeight=m;break;case"balloonstyle":var N=OpenLayers.Util.getXmlNodeValue(a);N&&(i.balloonStyle=N.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":var n=this.parseProperty(a,"*","color"),l=this.parseKmlColor(n);l&&(i.fontColor=l.color,i.fontOpacity=l.opacity)}!i.strokeColor&&i.fillColor&&(i.strokeColor=i.fillColor);var A=e.getAttribute("id");return A&&i&&(i.id=A),i},parseStyleMaps:function(e,t){for(var a=0,i=e.length;a<i;a++)for(var s=e[a],r=this.getElementsByTagNameNS(s,"*","Pair"),o=s.getAttribute("id"),n=0,l=r.length;n<l;n++){var c=r[n],d=this.parseProperty(c,"*","key"),p=this.parseProperty(c,"*","styleUrl");p&&"normal"==d&&(this.styles[(t.styleBaseUrl||"")+"#"+o]=this.styles[(t.styleBaseUrl||"")+p])}},parseFeatures:function(e,t){for(var a=[],i=0,s=e.length;i<s;i++){var r=e[i],o=this.parseFeature.apply(this,[r]);if(!o)throw"Bad Placemark: "+i;if(this.extractStyles&&o.attributes&&o.attributes.styleUrl&&(o.style=this.getStyle(o.attributes.styleUrl,t)),this.extractStyles){var n=this.getElementsByTagNameNS(r,"*","Style")[0];if(n){var l=this.parseStyle(n);l&&(o.style=OpenLayers.Util.extend(o.style,l))}}if(this.extractTracks){var c=this.getElementsByTagNameNS(r,this.namespaces.gx,"Track");if(c&&c.length>0){var d=c[0],p={features:[],feature:o};this.readNode(d,p),p.features.length>0&&a.push.apply(a,p.features)}}else a.push(o)}this.features=this.features.concat(a)},readers:{kml:{when:function(e,t){t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)))},_trackPointAttribute:function(e,t){var a=e.nodeName.split(":").pop();t.attributes[a].push(this.getChildValue(e))}},gx:{Track:function(e,t){var a={whens:[],points:[],angles:[]};if(this.trackAttributes){var i;a.attributes={};for(var s=0,r=this.trackAttributes.length;s<r;++s)i=this.trackAttributes[s],a.attributes[i]=[],i in this.readers.kml||(this.readers.kml[i]=this.readers.kml._trackPointAttribute)}if(this.readChildNodes(e,a),a.whens.length!==a.points.length)throw new Error("gx:Track with unequal number of when ("+a.whens.length+") and gx:coord ("+a.points.length+") elements.");var o=a.angles.length>0;if(o&&a.whens.length!==a.angles.length)throw new Error("gx:Track with unequal number of when ("+a.whens.length+") and gx:angles ("+a.angles.length+") elements.");for(var n,l,c,s=0,r=a.whens.length;s<r;++s){if(n=t.feature.clone(),n.fid=t.feature.fid||t.feature.id,l=a.points[s],n.geometry=l,"z"in l&&(n.attributes.altitude=l.z),this.internalProjection&&this.externalProjection&&n.geometry.transform(this.externalProjection,this.internalProjection),this.trackAttributes)for(var d=0,p=this.trackAttributes.length;d<p;++d){var i=this.trackAttributes[d];n.attributes[i]=a.attributes[i][s]}n.attributes.when=a.whens[s],n.attributes.trackId=t.feature.id,o&&(c=a.angles[s],n.attributes.heading=parseFloat(c[0]),n.attributes.tilt=parseFloat(c[1]),n.attributes.roll=parseFloat(c[2])),t.features.push(n)}},coord:function(e,t){var a=this.getChildValue(e),i=a.replace(this.regExes.trimSpace,"").split(/\s+/),s=new OpenLayers.Geometry.Point(i[0],i[1]);i.length>2&&(s.z=parseFloat(i[2])),t.points.push(s)},angles:function(e,t){var a=this.getChildValue(e),i=a.replace(this.regExes.trimSpace,"").split(/\s+/);t.angles.push(i)}}},parseFeature:function(e){for(var t,a,i,s,r=["MultiGeometry","Polygon","LineString","Point"],o=0,n=r.length;o<n;++o)if(t=r[o],this.internalns=e.namespaceURI?e.namespaceURI:this.kmlns,a=this.getElementsByTagNameNS(e,this.internalns,t),a.length>0){var s=this.parseGeometry[t.toLowerCase()];if(!s)throw new TypeError("Unsupported geometry type: "+t);i=s.apply(this,[a[0]]),this.internalProjection&&this.externalProjection&&i.transform(this.externalProjection,this.internalProjection);break}var l;this.extractAttributes&&(l=this.parseAttributes(e));var c=new OpenLayers.Feature.Vector(i,l),d=e.getAttribute("id")||e.getAttribute("name");return null!=d&&(c.fid=d),c},getStyle:function(e,t){var a=OpenLayers.Util.removeTail(e),i=OpenLayers.Util.extend({},t);if(i.depth++,i.styleBaseUrl=a,!this.styles[e]&&!OpenLayers.String.startsWith(e,"#")&&i.depth<=this.maxDepth&&!this.fetched[a]){var s=this.fetchLink(a);s&&this.parseData(s,i)}var r=OpenLayers.Util.extend({},this.styles[e]);return r},parseGeometry:{point:function(e){var t=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),a=[];if(t.length>0){var i=t[0].firstChild.nodeValue;i=i.replace(this.regExes.removeSpace,""),a=i.split(",")}var s=null;if(!(a.length>1))throw"Bad coordinate string: "+i;return 2==a.length&&(a[2]=null),s=new OpenLayers.Geometry.Point(a[0],a[1],a[2])},linestring:function(e,t){var a=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),i=null;if(a.length>0){var s=this.getChildValue(a[0]);s=s.replace(this.regExes.trimSpace,""),s=s.replace(this.regExes.trimComma,",");for(var r,o,n=s.split(this.regExes.splitSpace),l=n.length,c=new Array(l),d=0;d<l;++d){if(r=n[d].split(","),o=r.length,!(o>1))throw"Bad LineString point coordinates: "+n[d];2==r.length&&(r[2]=null),c[d]=new OpenLayers.Geometry.Point(r[0],r[1],r[2])}if(!l)throw"Bad LineString coordinates: "+s;i=t?new OpenLayers.Geometry.LinearRing(c):new OpenLayers.Geometry.LineString(c)}return i},polygon:function(e){var t=this.getElementsByTagNameNS(e,this.internalns,"LinearRing"),a=t.length,i=new Array(a);if(a>0)for(var s,r=0,o=t.length;r<o;++r){if(s=this.parseGeometry.linestring.apply(this,[t[r],!0]),!s)throw"Bad LinearRing geometry: "+r;i[r]=s}return new OpenLayers.Geometry.Polygon(i)},multigeometry:function(e){for(var t,a,i=[],s=e.childNodes,r=0,o=s.length;r<o;++r)if(t=s[r],1==t.nodeType){var n=t.prefix?t.nodeName.split(":")[1]:t.nodeName,a=this.parseGeometry[n.toLowerCase()];a&&i.push(a.apply(this,[t]))}return new OpenLayers.Geometry.Collection(i)}},parseAttributes:function(e){var t={},a=e.getElementsByTagName("ExtendedData");a.length&&(t=this.parseExtendedData(a[0]));for(var i,s,r,o=e.childNodes,n=0,l=o.length;n<l;++n)if(i=o[n],1==i.nodeType&&(s=i.childNodes,s.length>=1&&s.length<=3)){var r;switch(s.length){case 1:r=s[0];break;case 2:var c=s[0],d=s[1];r=3==c.nodeType||4==c.nodeType?c:d;break;case 3:default:r=s[1]}if(3==r.nodeType||4==r.nodeType){var p=i.prefix?i.nodeName.split(":")[1]:i.nodeName,u=OpenLayers.Util.getXmlNodeValue(r);u&&(u=u.replace(this.regExes.trimSpace,""),t[p]=u)}}return t},parseExtendedData:function(e){var t,a,i,s,r={},o=e.getElementsByTagName("Data");for(t=0,a=o.length;t<a;t++){i=o[t],s=i.getAttribute("name");var n={},l=i.getElementsByTagName("value");if(l.length&&(n.value=this.getChildValue(l[0])),this.kvpAttributes)r[s]=n.value;else{var c=i.getElementsByTagName("displayName");c.length&&(n.displayName=this.getChildValue(c[0])),r[s]=n}}var d=e.getElementsByTagName("SimpleData");for(t=0,a=d.length;t<a;t++){var n={};i=d[t],s=i.getAttribute("name"),n.value=this.getChildValue(i),this.kvpAttributes?r[s]=n.value:(n.displayName=s,r[s]=n)}return r},parseProperty:function(e,t,a){var i,s=this.getElementsByTagNameNS(e,t,a);try{i=OpenLayers.Util.getXmlNodeValue(s[0])}catch(e){i=null}return i},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS(this.kmlns,"kml"),a=this.createFolderXML(),i=0,s=e.length;i<s;++i)a.appendChild(this.createPlacemarkXML(e[i]));return t.appendChild(a),OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFolderXML:function(){var e=this.createElementNS(this.kmlns,"Folder");if(this.foldersName){var t=this.createElementNS(this.kmlns,"name"),a=this.createTextNode(this.foldersName);t.appendChild(a),e.appendChild(t)}if(this.foldersDesc){var i=this.createElementNS(this.kmlns,"description"),s=this.createTextNode(this.foldersDesc);i.appendChild(s),e.appendChild(i)}return e},createPlacemarkXML:function(e){var t=this.createElementNS(this.kmlns,"name"),a=e.style&&e.style.label?e.style.label:e.id,i=e.attributes.name||a;t.appendChild(this.createTextNode(i));var s=this.createElementNS(this.kmlns,"description"),r=e.attributes.description||this.placemarksDesc;s.appendChild(this.createTextNode(r));var o=this.createElementNS(this.kmlns,"Placemark");null!=e.fid&&o.setAttribute("id",e.fid),o.appendChild(t),o.appendChild(s);var n=this.buildGeometryNode(e.geometry);if(o.appendChild(n),e.attributes){var l=this.buildExtendedData(e.attributes);l&&o.appendChild(l)}return o},buildGeometryNode:function(e){var t=e.CLASS_NAME,a=t.substring(t.lastIndexOf(".")+1),i=this.buildGeometry[a.toLowerCase()],s=null;return i&&(s=i.apply(this,[e])),s},buildGeometry:{point:function(e){var t=this.createElementNS(this.kmlns,"Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){return this.buildGeometry.collection.apply(this,[e])},linestring:function(e){var t=this.createElementNS(this.kmlns,"LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){return this.buildGeometry.collection.apply(this,[e])},linearring:function(e){var t=this.createElementNS(this.kmlns,"LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){for(var t,a,i,s=this.createElementNS(this.kmlns,"Polygon"),r=e.components,o=0,n=r.length;o<n;++o)i=0==o?"outerBoundaryIs":"innerBoundaryIs",t=this.createElementNS(this.kmlns,i),a=this.buildGeometry.linearring.apply(this,[r[o]]),t.appendChild(a),s.appendChild(t);return s},multipolygon:function(e){return this.buildGeometry.collection.apply(this,[e])},collection:function(e){for(var t,a=this.createElementNS(this.kmlns,"MultiGeometry"),i=0,s=e.components.length;i<s;++i)t=this.buildGeometryNode.apply(this,[e.components[i]]),t&&a.appendChild(t);return a}},buildCoordinatesNode:function(e){var t,a=this.createElementNS(this.kmlns,"coordinates"),i=e.components;if(i){for(var s,r=i.length,o=new Array(r),n=0;n<r;++n)s=i[n],o[n]=this.buildCoordinates(s);t=o.join(" ")}else t=this.buildCoordinates(e);var l=this.createTextNode(t);return a.appendChild(l),a},buildCoordinates:function(e){return this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection)),e.x+","+e.y},buildExtendedData:function(e){var t=this.createElementNS(this.kmlns,"ExtendedData");for(var a in e)if(e[a]&&"name"!=a&&"description"!=a&&"styleUrl"!=a){var i=this.createElementNS(this.kmlns,"Data");i.setAttribute("name",a);var s=this.createElementNS(this.kmlns,"value");if("object"==typeof e[a]){if(e[a].value&&s.appendChild(this.createTextNode(e[a].value)),e[a].displayName){var r=this.createElementNS(this.kmlns,"displayName");r.appendChild(this.getXMLDoc().createCDATASection(e[a].displayName)),i.appendChild(r)}}else s.appendChild(this.createTextNode(e[a]));i.appendChild(s),t.appendChild(i)}return this.isSimpleContent(t)?null:t},CLASS_NAME:"OpenLayers.Format.KML"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.1",profile:null,CLASS_NAME:"OpenLayers.Format.WMSCapabilities"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{wms:"http://www.opengis.net/wms",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"wms",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=e;e&&9==e.nodeType&&(e=e.documentElement);var a={};if(this.readNode(e,a),void 0===a.service){var i=new OpenLayers.Format.OGCExceptionReport;a.error=i.read(t)}return a},readers:{wms:{Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},Name:function(e,t){t.name=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.abstract=this.getChildValue(e)},BoundingBox:function(e,t){var a={};a.bbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))];var i={x:parseFloat(e.getAttribute("resx")),y:parseFloat(e.getAttribute("resy"))};return isNaN(i.x)&&isNaN(i.y)||(a.res=i),a},OnlineResource:function(e,t){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")},ContactInformation:function(e,t){t.contactInformation={},this.readChildNodes(e,t.contactInformation)},ContactPersonPrimary:function(e,t){t.personPrimary={},this.readChildNodes(e,t.personPrimary)},ContactPerson:function(e,t){t.person=this.getChildValue(e)},ContactOrganization:function(e,t){t.organization=this.getChildValue(e)},ContactPosition:function(e,t){t.position=this.getChildValue(e)},ContactAddress:function(e,t){t.contactAddress={},this.readChildNodes(e,t.contactAddress)},AddressType:function(e,t){t.type=this.getChildValue(e)},Address:function(e,t){t.address=this.getChildValue(e)},City:function(e,t){t.city=this.getChildValue(e)},StateOrProvince:function(e,t){t.stateOrProvince=this.getChildValue(e)},PostCode:function(e,t){t.postcode=this.getChildValue(e)},Country:function(e,t){t.country=this.getChildValue(e)},ContactVoiceTelephone:function(e,t){t.phone=this.getChildValue(e)},ContactFacsimileTelephone:function(e,t){t.fax=this.getChildValue(e)},ContactElectronicMailAddress:function(e,t){t.email=this.getChildValue(e)},Fees:function(e,t){var a=this.getChildValue(e);a&&"none"!=a.toLowerCase()&&(t.fees=a)},AccessConstraints:function(e,t){var a=this.getChildValue(e);a&&"none"!=a.toLowerCase()&&(t.accessConstraints=a)},Capability:function(e,t){t.capability={nestedLayers:[],layers:[]},this.readChildNodes(e,t.capability)},Request:function(e,t){t.request={},this.readChildNodes(e,t.request)},GetCapabilities:function(e,t){t.getcapabilities={formats:[]},this.readChildNodes(e,t.getcapabilities)},Format:function(e,t){OpenLayers.Util.isArray(t.formats)?t.formats.push(this.getChildValue(e)):t.format=this.getChildValue(e)},DCPType:function(e,t){this.readChildNodes(e,t)},HTTP:function(e,t){this.readChildNodes(e,t)},Get:function(e,t){t.get={},this.readChildNodes(e,t.get),t.href||(t.href=t.get.href)},Post:function(e,t){t.post={},this.readChildNodes(e,t.post),t.href||(t.href=t.get.href)},GetMap:function(e,t){t.getmap={formats:[]},this.readChildNodes(e,t.getmap)},GetFeatureInfo:function(e,t){t.getfeatureinfo={formats:[]},this.readChildNodes(e,t.getfeatureinfo)},Exception:function(e,t){t.exception={formats:[]},this.readChildNodes(e,t.exception)},Layer:function(e,t){var a,i;t.capability?(i=t.capability,a=t):i=t;var s=e.getAttributeNode("queryable"),r=s&&s.specified?e.getAttribute("queryable"):null;s=e.getAttributeNode("cascaded");var o=s&&s.specified?e.getAttribute("cascaded"):null;s=e.getAttributeNode("opaque");var n=s&&s.specified?e.getAttribute("opaque"):null,l=e.getAttribute("noSubsets"),c=e.getAttribute("fixedWidth"),d=e.getAttribute("fixedHeight"),p=a||{},u=OpenLayers.Util.extend,m={nestedLayers:[],styles:a?[].concat(a.styles):[],srs:a?u({},p.srs):{},metadataURLs:[],bbox:a?u({},p.bbox):{},llbbox:p.llbbox,dimensions:a?u({},p.dimensions):{},authorityURLs:a?u({},p.authorityURLs):{},identifiers:{},keywords:[],queryable:r&&""!==r?"1"===r||"true"===r:p.queryable||!1,cascaded:null!==o?parseInt(o):p.cascaded||0,opaque:n?"1"===n||"true"===n:p.opaque||!1,noSubsets:null!==l?"1"===l||"true"===l:p.noSubsets||!1,fixedWidth:null!=c?parseInt(c):p.fixedWidth||0,fixedHeight:null!=d?parseInt(d):p.fixedHeight||0,minScale:p.minScale,maxScale:p.maxScale,attribution:p.attribution};if(t.nestedLayers.push(m),m.capability=i,this.readChildNodes(e,m),delete m.capability,m.name){var h=m.name.split(":"),g=i.request,v=g.getfeatureinfo;h.length>0&&(m.prefix=h[0]),i.layers.push(m),void 0===m.formats&&(m.formats=g.getmap.formats),void 0===m.infoFormats&&v&&(m.infoFormats=v.formats)}},Attribution:function(e,t){t.attribution={},this.readChildNodes(e,t.attribution)},LogoURL:function(e,t){t.logo={width:e.getAttribute("width"),height:e.getAttribute("height")},this.readChildNodes(e,t.logo)},Style:function(e,t){var a={};t.styles.push(a),this.readChildNodes(e,a)},LegendURL:function(e,t){var a={width:e.getAttribute("width"),height:e.getAttribute("height")};t.legend=a,this.readChildNodes(e,a)},MetadataURL:function(e,t){var a={type:e.getAttribute("type")};t.metadataURLs.push(a),this.readChildNodes(e,a)},DataURL:function(e,t){t.dataURL={},this.readChildNodes(e,t.dataURL)},FeatureListURL:function(e,t){t.featureListURL={},this.readChildNodes(e,t.featureListURL)},AuthorityURL:function(e,t){var a=e.getAttribute("name"),i={};this.readChildNodes(e,i),t.authorityURLs[a]=i.href},Identifier:function(e,t){var a=e.getAttribute("authority");t.identifiers[a]=this.getChildValue(e)},KeywordList:function(e,t){this.readChildNodes(e,t)},SRS:function(e,t){t.srs[this.getChildValue(e)]=!0}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMT_MS_Capabilities:function(e,t){this.readChildNodes(e,t)},Keyword:function(e,t){t.keywords&&t.keywords.push(this.getChildValue(e))},DescribeLayer:function(e,t){t.describelayer={formats:[]},this.readChildNodes(e,t.describelayer)},GetLegendGraphic:function(e,t){t.getlegendgraphic={formats:[]},this.readChildNodes(e,t.getlegendgraphic)},GetStyles:function(e,t){t.getstyles={formats:[]},this.readChildNodes(e,t.getstyles)},PutStyles:function(e,t){t.putstyles={formats:[]},this.readChildNodes(e,t.putstyles)},UserDefinedSymbolization:function(e,t){var a={supportSLD:1==parseInt(e.getAttribute("SupportSLD")),userLayer:1==parseInt(e.getAttribute("UserLayer")),userStyle:1==parseInt(e.getAttribute("UserStyle")),remoteWFS:1==parseInt(e.getAttribute("RemoteWFS"))};t.userSymbols=a},LatLonBoundingBox:function(e,t){t.llbbox=[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))]},BoundingBox:function(e,t){var a=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[e,t]);a.srs=e.getAttribute("SRS"),t.bbox[a.srs]=a},ScaleHint:function(e,t){var a=e.getAttribute("min"),i=e.getAttribute("max"),s=Math.pow(2,.5),r=OpenLayers.INCHES_PER_UNIT.m;0!=a&&(t.maxScale=parseFloat((a/s*r*OpenLayers.DOTS_PER_INCH).toPrecision(13))),i!=Number.POSITIVE_INFINITY&&(t.minScale=parseFloat((i/s*r*OpenLayers.DOTS_PER_INCH).toPrecision(13)))},Dimension:function(e,t){var a=e.getAttribute("name").toLowerCase(),i={name:a,units:e.getAttribute("units"),unitsymbol:e.getAttribute("unitSymbol")};t.dimensions[i.name]=i},Extent:function(e,t){var a=e.getAttribute("name").toLowerCase();if(a in t.dimensions){var i=t.dimensions[a];i.nearestVal="1"===e.getAttribute("nearestValue"),i.multipleVal="1"===e.getAttribute("multipleValues"),i.current="1"===e.getAttribute("current"),i.default=e.getAttribute("default")||"";var s=this.getChildValue(e);i.values=s.split(",")}}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.0",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(e,t){for(var a=this.getChildValue(e),i=a.split(/ +/),s=0,r=i.length;s<r;s++)t.srs[i[s]]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.WFS.v1=OpenLayers.Class(OpenLayers.Protocol,{version:null,srsName:"EPSG:4326",featureType:null,featureNS:null,geometryName:"the_geom",schema:null,featurePrefix:"feature",formatOptions:null,readFormat:null,readOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=OpenLayers.Format.WFST(OpenLayers.Util.extend({version:this.version,featureType:this.featureType,featureNS:this.featureNS,featurePrefix:this.featurePrefix,geometryName:this.geometryName,srsName:this.srsName,schema:this.schema},this.formatOptions))),!e.geometryName&&parseFloat(this.format.version)>1&&this.setGeometryName(null)},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),a=OpenLayers.Format.XML.prototype.write.apply(this.format,[this.format.writeNode("wfs:GetFeature",e)]);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),params:e.params,headers:e.headers,data:a}),t},setFeatureType:function(e){this.featureType=e,this.format.featureType=e},setGeometryName:function(e){this.geometryName=e,this.format.geometryName=e},handleRead:function(e,t){if(t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options),t.callback){var a=e.priv;if(a.status>=200&&a.status<300){var i=this.parseResponse(a,t.readOptions);i&&i.success!==!1?(t.readOptions&&"object"==t.readOptions.output?OpenLayers.Util.extend(e,i):e.features=i,e.code=OpenLayers.Protocol.Response.SUCCESS):(e.code=OpenLayers.Protocol.Response.FAILURE,e.error=i)}else e.code=OpenLayers.Protocol.Response.FAILURE;t.callback.call(t.scope,e)}},parseResponse:function(e,t){var a=e.responseXML;if(a&&a.documentElement||(a=e.responseText),!a||a.length<=0)return null;var i=null!==this.readFormat?this.readFormat.read(a):this.format.read(a,t);if(!this.featureNS){var s=this.readFormat||this.format;this.featureNS=s.featureNS,s.autoConfig=!1,this.geometryName||this.setGeometryName(s.geometryName)}return i},commit:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options);var a=new OpenLayers.Protocol.Response({requestType:"commit",reqFeatures:e});return a.priv=OpenLayers.Request.POST({url:t.url,headers:t.headers,data:this.format.write(e,t),callback:this.createCallback(this.handleCommit,a,t)}),a},handleCommit:function(e,t){if(t.callback){var a=e.priv,i=a.responseXML;i&&i.documentElement||(i=a.responseText);var s=this.format.read(i)||{};e.insertIds=s.insertIds||[],s.success?e.code=OpenLayers.Protocol.Response.SUCCESS:(e.code=OpenLayers.Protocol.Response.FAILURE,e.error=s),t.callback.call(t.scope,e)}},filterDelete:function(e,t){t=OpenLayers.Util.extend({},t),OpenLayers.Util.applyDefaults(t,this.options);var a=(new OpenLayers.Protocol.Response({requestType:"commit"}),this.format.createElementNSPlus("wfs:Transaction",{attributes:{service:"WFS",version:this.version}})),i=this.format.createElementNSPlus("wfs:Delete",{attributes:{typeName:(t.featureNS?this.featurePrefix+":":"")+t.featureType}});t.featureNS&&i.setAttribute("xmlns:"+this.featurePrefix,t.featureNS);var s=this.format.writeNode("ogc:Filter",e);i.appendChild(s),a.appendChild(i);var r=OpenLayers.Format.XML.prototype.write.apply(this.format,[a]);return OpenLayers.Request.POST({url:this.url,callback:t.callback||function(){},data:r})},abort:function(e){e&&e.priv.abort()},CLASS_NAME:"OpenLayers.Protocol.WFS.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{in:"click",out:"clickout"},mousemove:{in:"over",out:"out"},dblclick:{in:"dblclick",out:null},mousedown:{in:null,out:null},mouseup:{in:null,out:null},touchstart:{in:"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(e,t,a,i){OpenLayers.Handler.prototype.initialize.apply(this,[e,a,i]),this.layer=t},touchstart:function(e){return this.startTouch(),!!OpenLayers.Event.isMultiTouch(e)||this.mousedown(e)},touchmove:function(e){OpenLayers.Event.preventDefault(e)},mousedown:function(e){return(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))&&(this.down=e.xy),!this.handle(e)||!this.stopDown},mouseup:function(e){return this.up=e.xy,!this.handle(e)||!this.stopUp},click:function(e){return!this.handle(e)||!this.stopClick},mousemove:function(e){return!this.callbacks.over&&!this.callbacks.out||(this.handle(e),!0)},dblclick:function(e){return!this.handle(e)},geometryTypeMatches:function(e){return null==this.geometryTypes||OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)>-1},handle:function(e){this.feature&&!this.feature.layer&&(this.feature=null);var t=e.type,a=!1,i=!!this.feature,s="click"==t||"dblclick"==t||"touchstart"==t;if(this.feature=this.layer.getFeatureFromEvent(e),this.feature&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature){"touchstart"===t&&OpenLayers.Event.preventDefault(e);var r=this.feature!=this.lastFeature;this.geometryTypeMatches(this.feature)?(i&&r?(this.lastFeature&&this.triggerCallback(t,"out",[this.lastFeature]),this.triggerCallback(t,"in",[this.feature])):i&&!s||this.triggerCallback(t,"in",[this.feature]),this.lastFeature=this.feature,a=!0):(this.lastFeature&&(i&&r||s)&&this.triggerCallback(t,"out",[this.lastFeature]),this.feature=null)}else this.lastFeature&&(i||s)&&this.triggerCallback(t,"out",[this.lastFeature]);return a},triggerCallback:function(e,t,a){var i=this.EVENTMAP[e][t];if(i)if("click"==e&&this.up&&this.down){var s=Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2));s<=this.clickTolerance&&this.callback(i,a),this.up=this.down=null}else this.callback(i,a)},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.feature=null,this.lastFeature=null,this.down=null,this.up=null,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(e){for(var t,a=this.layers,i=0;i<a.length;i++)if(t=a[i].getFeatureFromEvent(e))return t},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),e.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(e){e.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var e,t=0;t<this.map.layers.length;++t)e=this.map.layers[t],OpenLayers.Util.indexOf(this.layers,e)!=-1&&e.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var e,t=0;t<this.layers.length;++t)e=this.layers[t],this.renderer&&e.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(e.renderer)},handleChangeLayer:function(e){var t=e.layer;"order"==e.property&&OpenLayers.Util.indexOf(this.layers,t)!=-1&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),null===this.scope&&(this.scope=this),this.initLayer(e);var a={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(a.over=this.overFeature,a.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(a,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(e){OpenLayers.Util.isArray(e)?(this.layers=e,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:e})):this.layer=e},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(e){var t,a,i,s,r=this.layers||[this.layer];for(i=0;i<r.length;++i)if(t=r[i],s=0,null!=t.selectedFeatures)for(;t.selectedFeatures.length>s;)a=t.selectedFeatures[s],e&&e.except==a?++s:this.unselect(a)},clickFeature:function(e){if(!this.hover){var t=OpenLayers.Util.indexOf(e.layer.selectedFeatures,e)>-1;t?this.toggleSelect()?this.unselect(e):this.multipleSelect()||this.unselectAll({except:e}):(this.multipleSelect()||this.unselectAll({except:e}),this.select(e))}},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(e){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(e){var t=e.layer;this.hover&&(this.highlightOnly?this.highlight(e):OpenLayers.Util.indexOf(t.selectedFeatures,e)==-1&&this.select(e))},outFeature:function(e){if(this.hover)if(this.highlightOnly){if(e._lastHighlighter==this.id)if(e._prevHighlighter&&e._prevHighlighter!=this.id){delete e._lastHighlighter;var t=this.map.getControl(e._prevHighlighter);t&&t.highlight(e)}else this.unhighlight(e)}else this.unselect(e)},highlight:function(e){var t=e.layer,a=this.events.triggerEvent("beforefeaturehighlighted",{feature:e});if(a!==!1){e._prevHighlighter=e._lastHighlighter,e._lastHighlighter=this.id;var i=this.selectStyle||this.renderIntent;t.drawFeature(e,i),this.events.triggerEvent("featurehighlighted",{feature:e})}},unhighlight:function(e){var t=e.layer;void 0==e._prevHighlighter?delete e._lastHighlighter:e._prevHighlighter==this.id?delete e._prevHighlighter:(e._lastHighlighter=e._prevHighlighter,delete e._prevHighlighter),t.drawFeature(e,e.style||e.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:e})},select:function(e){var t=this.onBeforeSelect.call(this.scope,e),a=e.layer;t!==!1&&(t=a.events.triggerEvent("beforefeatureselected",{feature:e}),t!==!1&&(a.selectedFeatures.push(e),this.highlight(e),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=a.selectedFeatures[0]),a.events.triggerEvent("featureselected",{feature:e}),this.onSelect.call(this.scope,e)))},unselect:function(e){var t=e.layer;this.unhighlight(e),OpenLayers.Util.removeItem(t.selectedFeatures,e),t.events.triggerEvent("featureunselected",{feature:e}),this.onUnselect.call(this.scope,e)},selectBox:function(e){if(e instanceof OpenLayers.Bounds){var t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),a=this.map.getLonLatFromPixel({x:e.right,y:e.top}),i=new OpenLayers.Bounds(t.lon,t.lat,a.lon,a.lat);this.multipleSelect()||this.unselectAll();var s=this.multiple;this.multiple=!0;var r=this.layers||[this.layer];this.events.triggerEvent("boxselectionstart",{layers:r});for(var o,n=0;n<r.length;++n){o=r[n];for(var l=0,c=o.features.length;l<c;++l){var d=o.features[l];d.getVisibility()&&(null==this.geometryTypes||OpenLayers.Util.indexOf(this.geometryTypes,d.geometry.CLASS_NAME)>-1)&&i.toGeometry().intersects(d.geometry)&&OpenLayers.Util.indexOf(o.selectedFeatures,d)==-1&&this.select(d)}}this.multiple=s,this.events.triggerEvent("boxselectionend",{layers:r})}},setMap:function(e){this.handlers.feature.setMap(e),this.box&&this.handlers.box.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(e){var t=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(e),this.handlers.feature.layer=this.layer,t&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,lastTouchPx:null,initialize:function(e,t,a){a&&a.layerOptions&&a.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),!0},createFeature:function(e){var t=this.layer.getLonLatFromViewPortPx(e),a=new OpenLayers.Geometry.Point(t.lon,t.lat);this.point=new OpenLayers.Feature.Vector(a),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),this.layer=null,!0)},destroyFeature:function(e){!this.layer||!e&&this.persist||this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var e=this.layer;e&&e.features.length>1&&this.layer.features[0].destroy()},finalize:function(e){var t=e?"cancel":"done";this.mouseDown=!1,this.lastDown=null,this.lastUp=null,this.lastTouchPx=null,this.callback(t,[this.geometryClone()]),this.destroyFeature(e)},cancel:function(){this.finalize(!0)},click:function(e){return OpenLayers.Event.stop(e),!1},dblclick:function(e){return OpenLayers.Event.stop(e),!1},modifyFeature:function(e){this.point||this.createFeature(e);var t=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=t.lon,this.point.geometry.y=t.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var e=this.point&&this.point.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPoint([e])),e},geometryClone:function(){var e=this.getGeometry();return e&&e.clone()},mousedown:function(e){return this.down(e)},touchstart:function(e){return this.startTouch(),this.lastTouchPx=e.xy,this.down(e)},mousemove:function(e){return this.move(e)},touchmove:function(e){return this.lastTouchPx=e.xy,this.move(e)},mouseup:function(e){return this.up(e)},touchend:function(e){return e.xy=this.lastTouchPx,this.up(e)},down:function(e){return this.mouseDown=!0,this.lastDown=e.xy,this.touch||this.modifyFeature(e.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(e){return this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy),!0},up:function(e){return this.mouseDown=!1,this.stoppedDown=this.stopDown,!this.checkModifiers(e)||(!(!this.lastUp||!this.lastUp.equals(e.xy))||(!this.lastDown||!this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)||(this.touch&&this.modifyFeature(e.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=e.xy,this.finalize(),!this.stopUp)))},mouseout:function(e){OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(e,t,a){var i=!0;if(null!=a&&e&&t){var s=e.distanceTo(t);s>a&&(i=!1)}return i},CLASS_NAME:"OpenLayers.Handler.Point"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(e){var t=this.layer.getLonLatFromViewPortPx(e),a=new OpenLayers.Geometry.Point(t.lon,t.lat);this.point=new OpenLayers.Feature.Vector(a),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(e){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,e),this.line=null},destroyPersistedFeature:function(){var e=this.layer;e&&e.features.length>2&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(e){this.layer.removeFeatures([this.point]);var t=this.layer.getLonLatFromViewPortPx(e);this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon,t.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(e,t){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e,t),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(e,t){var a=this.getCurrentPointIndex()-1,i=this.line.geometry.components[a];!i||isNaN(i.x)||isNaN(i.y)||this.insertXY(i.x+e,i.y+t)},insertDirectionLength:function(e,t){e*=Math.PI/180;var a=t*Math.cos(e),i=t*Math.sin(e);this.insertDeltaXY(a,i)},insertDeflectionLength:function(e,t){var a=this.getCurrentPointIndex()-1;if(a>0){var i=this.line.geometry.components[a],s=this.line.geometry.components[a-1],r=Math.atan2(i.y-s.y,i.x-s.x);this.insertDirectionLength(180*r/Math.PI+e,t)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var e=this.line.geometry,t=e.components,a=this.getCurrentPointIndex()-1,i=t[a],s=e.removeComponent(i);if(s){if(this.touch&&a>0){t=e.components;var r=t[a-1],o=this.getCurrentPointIndex(),n=t[o];n.x=r.x,n.y=r.y}this.redoStack||(this.redoStack=[]),this.redoStack.push(i),this.drawFeature()}return s},redo:function(){var e=this.redoStack&&this.redoStack.pop();return e&&(this.line.geometry.addComponent(e,this.getCurrentPointIndex()),this.drawFeature()),!!e},freehandMode:function(e){return this.freehandToggle&&e[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(e,t){this.line||this.createFeature(e);var a=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=a.lon,this.point.geometry.y=a.lat,this.callback("modify",[this.point.geometry,this.getSketch(),t]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var e=this.line&&this.line.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiLineString([e])),e},touchstart:function(e){return this.timerId&&this.passesTolerance(this.lastTouchPx,e.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,e))},down:function(e){var t=this.stopDown;return this.freehandMode(e)&&(t=!0,this.touch&&(this.modifyFeature(e.xy,!!this.lastUp),OpenLayers.Event.stop(e))),this.touch||this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)||this.modifyFeature(e.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=e.xy,this.stoppedDown=t,!t},move:function(e){return this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(e.xy),!1):(this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy,!!this.lastUp),!0)},up:function(e){return!this.mouseDown||this.lastUp&&this.lastUp.equals(e.xy)||(this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(e.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(e.xy),this.lastUp=e.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){var e=this.line.geometry.components.length-1;this.line.geometry.removeComponent(this.line.geometry.components[e]),this.removePoint(),this.finalize()},dblclick:function(e){return this.freehandMode(e)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Spherical=OpenLayers.Spherical||{},OpenLayers.Spherical.DEFAULT_RADIUS=6378137,OpenLayers.Spherical.computeDistanceBetween=function(e,t,a){var i=a||OpenLayers.Spherical.DEFAULT_RADIUS,s=Math.sin(Math.PI*(t.lon-e.lon)/360),r=Math.sin(Math.PI*(t.lat-e.lat)/360),o=r*r+s*s*Math.cos(Math.PI*e.lat/180)*Math.cos(Math.PI*t.lat/180);return 2*i*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))},OpenLayers.Spherical.computeHeading=function(e,t){var a=Math.sin(Math.PI*(e.lon-t.lon)/180)*Math.cos(Math.PI*t.lat/180),i=Math.cos(Math.PI*e.lat/180)*Math.sin(Math.PI*t.lat/180)-Math.sin(Math.PI*e.lat/180)*Math.cos(Math.PI*t.lat/180)*Math.cos(Math.PI*(e.lon-t.lon)/180);return 180*Math.atan2(a,i)/Math.PI},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.CacheWrite=OpenLayers.Class(OpenLayers.Control,{layers:null,imageFormat:"image/png",quotaRegEx:/quota/i,setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);var t,a=this.layers||e.layers;for(t=a.length-1;t>=0;--t)this.addLayer({layer:a[t]});this.layers||e.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(e){e.layer.events.on({tileloadstart:this.makeSameOrigin,tileloaded:this.onTileLoaded,scope:this})},removeLayer:function(e){e.layer.events.un({tileloadstart:this.makeSameOrigin,tileloaded:this.onTileLoaded,scope:this})},makeSameOrigin:function(e){if(this.active){var t=e.tile;if(t instanceof OpenLayers.Tile.Image&&!t.crossOriginKeyword&&"data:"!==t.url.substr(0,5)){var a=OpenLayers.Request.makeSameOrigin(t.url,OpenLayers.ProxyHost);OpenLayers.Control.CacheWrite.urlMap[a]=t.url,t.url=a}}},onTileLoaded:function(e){this.active&&!e.aborted&&e.tile instanceof OpenLayers.Tile.Image&&"data:"!==e.tile.url.substr(0,5)&&(this.cache({tile:e.tile}),delete OpenLayers.Control.CacheWrite.urlMap[e.tile.url])},cache:function(e){if(window.localStorage){var t=e.tile;try{var a=t.getCanvasContext();if(a){var i=OpenLayers.Control.CacheWrite.urlMap,s=i[t.url]||t.url;window.localStorage.setItem("olCache_"+s,a.canvas.toDataURL(this.imageFormat))}}catch(e){var r=e.name||e.message;r&&this.quotaRegEx.test(r)?this.events.triggerEvent("cachefull",{tile:t}):OpenLayers.Console.error(e.toString())}}},destroy:function(){if(this.layers||this.map){var e,t=this.layers||this.map.layers;for(e=t.length-1;e>=0;--e)this.removeLayer({layer:t[e]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheWrite"}),OpenLayers.Control.CacheWrite.clearCache=function(){if(window.localStorage){var e,t;for(e=window.localStorage.length-1;e>=0;--e)t=window.localStorage.key(e),"olCache_"===t.substr(0,8)&&window.localStorage.removeItem(t)}},OpenLayers.Control.CacheWrite.urlMap={},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Context=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{layerOptions:null,layerParams:null,read:function(e,t){var a,i=OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this,arguments);if(t&&t.map)if(this.context=i,t.map instanceof OpenLayers.Map)a=this.mergeContextToMap(i,t.map);else{var s=t.map;(OpenLayers.Util.isElement(s)||"string"==typeof s)&&(s={div:s}),a=this.contextToMap(i,s)}else a=i;return a},getLayerFromContext:function(e){var t,a,i={queryable:e.queryable,visibility:e.visibility,maxExtent:e.maxExtent,metadata:OpenLayers.Util.applyDefaults(e.metadata,{styles:e.styles,formats:e.formats,abstract:e.abstract,dataURL:e.dataURL}),numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.tileSize?new OpenLayers.Size(e.tileSize.width,e.tileSize.height):void 0,minScale:e.minScale||e.maxScaleDenominator,maxScale:e.maxScale||e.minScaleDenominator,srs:e.srs,dimensions:e.dimensions,metadataURL:e.metadataURL};this.layerOptions&&OpenLayers.Util.applyDefaults(i,this.layerOptions);var s={layers:e.name,transparent:e.transparent,version:e.version};if(e.formats&&e.formats.length>0)for(s.format=e.formats[0].value,t=0,a=e.formats.length;t<a;t++){var r=e.formats[t];if(1==r.current){s.format=r.value;break}}if(e.styles&&e.styles.length>0)for(t=0,a=e.styles.length;t<a;t++){var o=e.styles[t];if(1==o.current){o.href?s.sld=o.href:o.body?s.sld_body=o.body:s.styles=o.name;break}}this.layerParams&&OpenLayers.Util.applyDefaults(s,this.layerParams);var n=null,l=e.service;return l==OpenLayers.Format.Context.serviceTypes.WFS?(i.strategies=[new OpenLayers.Strategy.BBOX],i.protocol=new OpenLayers.Protocol.WFS({url:e.url,featurePrefix:e.name.split(":")[0],featureType:e.name.split(":").pop()}),n=new OpenLayers.Layer.Vector(e.title||e.name,i)):l==OpenLayers.Format.Context.serviceTypes.KML?(i.strategies=[new OpenLayers.Strategy.Fixed],i.protocol=new OpenLayers.Protocol.HTTP({url:e.url,format:new OpenLayers.Format.KML}),n=new OpenLayers.Layer.Vector(e.title||e.name,i)):l==OpenLayers.Format.Context.serviceTypes.GML?(i.strategies=[new OpenLayers.Strategy.Fixed],i.protocol=new OpenLayers.Protocol.HTTP({url:e.url,format:new OpenLayers.Format.GML}),n=new OpenLayers.Layer.Vector(e.title||e.name,i)):e.features?(n=new OpenLayers.Layer.Vector(e.title||e.name,i),n.addFeatures(e.features)):e.categoryLayer!==!0&&(n=new OpenLayers.Layer.WMS(e.title||e.name,e.url,s,i)),n},getLayersFromContext:function(e){for(var t=[],a=0,i=e.length;a<i;a++){var s=this.getLayerFromContext(e[a]);null!==s&&t.push(s)}return t},contextToMap:function(e,t){t=OpenLayers.Util.applyDefaults({maxExtent:e.maxExtent,projection:e.projection,units:e.units},t),t.maxExtent&&(t.maxResolution=t.maxExtent.getWidth()/OpenLayers.Map.TILE_WIDTH);var a={contactInformation:e.contactInformation,abstract:e.abstract,keywords:e.keywords,logo:e.logo,descriptionURL:e.descriptionURL};t.metadata=a;var i=new OpenLayers.Map(t);return i.addLayers(this.getLayersFromContext(e.layersContext)),i.setCenter(e.bounds.getCenterLonLat(),i.getZoomForExtent(e.bounds,!0)),i},mergeContextToMap:function(e,t){return t.addLayers(this.getLayersFromContext(e.layersContext)),t},write:function(e,t){return e=this.toContext(e),OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,arguments)},CLASS_NAME:"OpenLayers.Format.Context"}),OpenLayers.Format.Context.serviceTypes={WMS:"urn:ogc:serviceType:WMS",WFS:"urn:ogc:serviceType:WFS",WCS:"urn:ogc:serviceType:WCS",GML:"urn:ogc:serviceType:GML",SLD:"urn:ogc:serviceType:SLD",FES:"urn:ogc:serviceType:FES",KML:"urn:ogc:serviceType:KML"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMC=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"1.1.0",layerToContext:function(e){var t=this.getParser(),a={queryable:e.queryable,visibility:e.visibility,name:e.params.LAYERS,title:e.name,abstract:e.metadata.abstract,dataURL:e.metadata.dataURL,metadataURL:e.metadataURL,server:{version:e.params.VERSION,url:e.url},maxExtent:e.maxExtent,transparent:e.params.TRANSPARENT,numZoomLevels:e.numZoomLevels,units:e.units,isBaseLayer:e.isBaseLayer,opacity:1==e.opacity?void 0:e.opacity,displayInLayerSwitcher:e.displayInLayerSwitcher,singleTile:e.singleTile,tileSize:e.singleTile||!e.tileSize?void 0:{width:e.tileSize.w,height:e.tileSize.h},minScale:e.options.resolutions||e.options.scales||e.options.maxResolution||e.options.minScale?e.minScale:void 0,maxScale:e.options.resolutions||e.options.scales||e.options.minResolution||e.options.maxScale?e.maxScale:void 0,formats:[],styles:[],srs:e.srs,dimensions:e.dimensions};if(e.metadata.servertitle&&(a.server.title=e.metadata.servertitle),e.metadata.formats&&e.metadata.formats.length>0)for(var i=0,s=e.metadata.formats.length;i<s;i++){var r=e.metadata.formats[i];a.formats.push({value:r.value,current:r.value==e.params.FORMAT})}else a.formats.push({value:e.params.FORMAT,current:!0});if(e.metadata.styles&&e.metadata.styles.length>0)for(var i=0,s=e.metadata.styles.length;i<s;i++){var o=e.metadata.styles[i];o.href==e.params.SLD||o.body==e.params.SLD_BODY||o.name==e.params.STYLES?o.current=!0:o.current=!1,a.styles.push(o)}else a.styles.push({href:e.params.SLD,body:e.params.SLD_BODY,name:e.params.STYLES||t.defaultStyleName,title:t.defaultStyleTitle,current:!0});return a},toContext:function(e){var t={},a=e.layers;if("OpenLayers.Map"==e.CLASS_NAME){var i=e.metadata||{};t.size=e.getSize(),t.bounds=e.getExtent(),t.projection=e.projection,t.title=e.title,t.keywords=i.keywords,t.abstract=i.abstract,t.logo=i.logo,t.descriptionURL=i.descriptionURL,t.contactInformation=i.contactInformation,t.maxExtent=e.maxExtent}else OpenLayers.Util.applyDefaults(t,e),void 0!=t.layers&&delete t.layers;if(void 0==t.layersContext&&(t.layersContext=[]),void 0!=a&&OpenLayers.Util.isArray(a))for(var s=0,r=a.length;s<r;s++){var o=a[s];o instanceof OpenLayers.Layer.WMS&&t.layersContext.push(this.layerToContext(o))}return t},CLASS_NAME:"OpenLayers.Format.WMC"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMC.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"",getNamespacePrefix:function(e){var t=null;if(null==e)t=this.namespaces[this.defaultPrefix];else for(t in this.namespaces)if(this.namespaces[t]==e)break;return t},defaultPrefix:"wmc",rootPrefix:null,defaultStyleName:"",defaultStyleTitle:"Default",initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=e.documentElement;this.rootPrefix=t.prefix;var a={version:t.getAttribute("version")};return this.runChildNodes(a,t),a},runChildNodes:function(e,t){for(var a,i,s,r,o=t.childNodes,n=0,l=o.length;n<l;++n)a=o[n],1==a.nodeType&&(s=this.getNamespacePrefix(a.namespaceURI),r=a.nodeName.split(":").pop(),i=this["read_"+s+"_"+r],i&&i.apply(this,[e,a]))},read_wmc_General:function(e,t){this.runChildNodes(e,t)},read_wmc_BoundingBox:function(e,t){e.projection=t.getAttribute("SRS"),e.bounds=new OpenLayers.Bounds(t.getAttribute("minx"),t.getAttribute("miny"),t.getAttribute("maxx"),t.getAttribute("maxy"))},read_wmc_LayerList:function(e,t){e.layersContext=[],this.runChildNodes(e,t)},read_wmc_Layer:function(e,t){var a={visibility:"1"!=t.getAttribute("hidden"),queryable:"1"==t.getAttribute("queryable"),formats:[],styles:[],metadata:{}};this.runChildNodes(a,t),e.layersContext.push(a)},read_wmc_Extension:function(e,t){this.runChildNodes(e,t)},read_ol_units:function(e,t){e.units=this.getChildValue(t)},read_ol_maxExtent:function(e,t){var a=new OpenLayers.Bounds(t.getAttribute("minx"),t.getAttribute("miny"),t.getAttribute("maxx"),t.getAttribute("maxy"));e.maxExtent=a},read_ol_transparent:function(e,t){e.transparent=this.getChildValue(t)},read_ol_numZoomLevels:function(e,t){e.numZoomLevels=parseInt(this.getChildValue(t))},read_ol_opacity:function(e,t){e.opacity=parseFloat(this.getChildValue(t))},read_ol_singleTile:function(e,t){e.singleTile="true"==this.getChildValue(t)},read_ol_tileSize:function(e,t){var a={width:t.getAttribute("width"),height:t.getAttribute("height")};e.tileSize=a},read_ol_isBaseLayer:function(e,t){e.isBaseLayer="true"==this.getChildValue(t)},read_ol_displayInLayerSwitcher:function(e,t){e.displayInLayerSwitcher="true"==this.getChildValue(t)},read_wmc_Server:function(e,t){e.version=t.getAttribute("version"),e.url=this.getOnlineResource_href(t),e.metadata.servertitle=t.getAttribute("title")},read_wmc_FormatList:function(e,t){this.runChildNodes(e,t)},read_wmc_Format:function(e,t){var a={value:this.getChildValue(t)};"1"==t.getAttribute("current")&&(a.current=!0),e.formats.push(a)},read_wmc_StyleList:function(e,t){this.runChildNodes(e,t)},read_wmc_Style:function(e,t){var a={};this.runChildNodes(a,t),"1"==t.getAttribute("current")&&(a.current=!0),e.styles.push(a)},read_wmc_SLD:function(e,t){this.runChildNodes(e,t)},read_sld_StyledLayerDescriptor:function(e,t){var a=OpenLayers.Format.XML.prototype.write.apply(this,[t]);e.body=a},read_sld_FeatureTypeStyle:function(e,t){var a=OpenLayers.Format.XML.prototype.write.apply(this,[t]);e.body=a},read_wmc_OnlineResource:function(e,t){e.href=this.getAttributeNS(t,this.namespaces.xlink,"href")},read_wmc_Name:function(e,t){var a=this.getChildValue(t);a&&(e.name=a)},read_wmc_Title:function(e,t){var a=this.getChildValue(t);a&&(e.title=a)},read_wmc_MetadataURL:function(e,t){e.metadataURL=this.getOnlineResource_href(t)},read_wmc_KeywordList:function(e,t){e.keywords=[],this.runChildNodes(e.keywords,t)},read_wmc_Keyword:function(e,t){e.push(this.getChildValue(t))},read_wmc_Abstract:function(e,t){var a=this.getChildValue(t);a&&(e.abstract=a)},read_wmc_LogoURL:function(e,t){e.logo={width:t.getAttribute("width"),height:t.getAttribute("height"),format:t.getAttribute("format"),href:this.getOnlineResource_href(t)}},read_wmc_DescriptionURL:function(e,t){e.descriptionURL=this.getOnlineResource_href(t)},read_wmc_ContactInformation:function(e,t){var a={};this.runChildNodes(a,t),e.contactInformation=a},read_wmc_ContactPersonPrimary:function(e,t){var a={};this.runChildNodes(a,t),e.personPrimary=a},read_wmc_ContactPerson:function(e,t){var a=this.getChildValue(t);a&&(e.person=a)},read_wmc_ContactOrganization:function(e,t){var a=this.getChildValue(t);a&&(e.organization=a)},read_wmc_ContactPosition:function(e,t){var a=this.getChildValue(t);a&&(e.position=a)},read_wmc_ContactAddress:function(e,t){var a={};this.runChildNodes(a,t),e.contactAddress=a},read_wmc_AddressType:function(e,t){var a=this.getChildValue(t);a&&(e.type=a)},read_wmc_Address:function(e,t){var a=this.getChildValue(t);a&&(e.address=a)},read_wmc_City:function(e,t){var a=this.getChildValue(t);a&&(e.city=a)},read_wmc_StateOrProvince:function(e,t){var a=this.getChildValue(t);a&&(e.stateOrProvince=a)},read_wmc_PostCode:function(e,t){var a=this.getChildValue(t);a&&(e.postcode=a)},read_wmc_Country:function(e,t){var a=this.getChildValue(t);a&&(e.country=a)},read_wmc_ContactVoiceTelephone:function(e,t){var a=this.getChildValue(t);a&&(e.phone=a)},read_wmc_ContactFacsimileTelephone:function(e,t){var a=this.getChildValue(t);a&&(e.fax=a)},read_wmc_ContactElectronicMailAddress:function(e,t){var a=this.getChildValue(t);a&&(e.email=a)},read_wmc_DataURL:function(e,t){e.dataURL=this.getOnlineResource_href(t)},read_wmc_LegendURL:function(e,t){var a={width:t.getAttribute("width"),height:t.getAttribute("height"),format:t.getAttribute("format"),href:this.getOnlineResource_href(t)};e.legend=a},read_wmc_DimensionList:function(e,t){e.dimensions={},this.runChildNodes(e.dimensions,t)},read_wmc_Dimension:function(e,t){var a=t.getAttribute("name").toLowerCase(),i={name:a,units:t.getAttribute("units")||"",unitSymbol:t.getAttribute("unitSymbol")||"",userValue:t.getAttribute("userValue")||"",nearestValue:"1"===t.getAttribute("nearestValue"),multipleValues:"1"===t.getAttribute("multipleValues"),current:"1"===t.getAttribute("current"),default:t.getAttribute("default")||""},s=this.getChildValue(t);i.values=s.split(","),e[i.name]=i},write:function(e,t){var a=this.createElementDefaultNS("ViewContext");return this.setAttributes(a,{version:this.VERSION,id:t&&"string"==typeof t.id?t.id:OpenLayers.Util.createUniqueID("OpenLayers_Context_")}),this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),a.appendChild(this.write_wmc_General(e)),a.appendChild(this.write_wmc_LayerList(e)),OpenLayers.Format.XML.prototype.write.apply(this,[a])},createElementDefaultNS:function(e,t,a){var i=this.createElementNS(this.namespaces[this.defaultPrefix],e);return t&&i.appendChild(this.createTextNode(t)),a&&this.setAttributes(i,a),i},setAttributes:function(e,t){var a;for(var i in t)a=t[i].toString(),a.match(/[A-Z]/)?this.setAttributeNS(e,null,i,a):e.setAttribute(i,a)},write_wmc_General:function(e){var t=this.createElementDefaultNS("General");e.size&&t.appendChild(this.createElementDefaultNS("Window",null,{width:e.size.w,height:e.size.h}));var a=e.bounds;return t.appendChild(this.createElementDefaultNS("BoundingBox",null,{minx:a.left.toPrecision(18),miny:a.bottom.toPrecision(18),maxx:a.right.toPrecision(18),maxy:a.top.toPrecision(18),SRS:e.projection})),t.appendChild(this.createElementDefaultNS("Title",e.title)),e.keywords&&t.appendChild(this.write_wmc_KeywordList(e.keywords)),e.abstract&&t.appendChild(this.createElementDefaultNS("Abstract",e.abstract)),e.logo&&t.appendChild(this.write_wmc_URLType("LogoURL",e.logo.href,e.logo)),e.descriptionURL&&t.appendChild(this.write_wmc_URLType("DescriptionURL",e.descriptionURL)),e.contactInformation&&t.appendChild(this.write_wmc_ContactInformation(e.contactInformation)),t.appendChild(this.write_ol_MapExtension(e)),t},write_wmc_KeywordList:function(e){for(var t=this.createElementDefaultNS("KeywordList"),a=0,i=e.length;a<i;a++)t.appendChild(this.createElementDefaultNS("Keyword",e[a]));return t},write_wmc_ContactInformation:function(e){var t=this.createElementDefaultNS("ContactInformation");return e.personPrimary&&t.appendChild(this.write_wmc_ContactPersonPrimary(e.personPrimary)),e.position&&t.appendChild(this.createElementDefaultNS("ContactPosition",e.position)),e.contactAddress&&t.appendChild(this.write_wmc_ContactAddress(e.contactAddress)),e.phone&&t.appendChild(this.createElementDefaultNS("ContactVoiceTelephone",e.phone)),e.fax&&t.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone",e.fax)),e.email&&t.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress",e.email)),t},write_wmc_ContactPersonPrimary:function(e){var t=this.createElementDefaultNS("ContactPersonPrimary");return e.person&&t.appendChild(this.createElementDefaultNS("ContactPerson",e.person)),e.organization&&t.appendChild(this.createElementDefaultNS("ContactOrganization",e.organization)),t},write_wmc_ContactAddress:function(e){var t=this.createElementDefaultNS("ContactAddress");return e.type&&t.appendChild(this.createElementDefaultNS("AddressType",e.type)),e.address&&t.appendChild(this.createElementDefaultNS("Address",e.address)),e.city&&t.appendChild(this.createElementDefaultNS("City",e.city)),e.stateOrProvince&&t.appendChild(this.createElementDefaultNS("StateOrProvince",e.stateOrProvince)),e.postcode&&t.appendChild(this.createElementDefaultNS("PostCode",e.postcode)),e.country&&t.appendChild(this.createElementDefaultNS("Country",e.country)),t},write_ol_MapExtension:function(e){var t=this.createElementDefaultNS("Extension"),a=e.maxExtent;if(a){var i=this.createElementNS(this.namespaces.ol,"ol:maxExtent");this.setAttributes(i,{minx:a.left.toPrecision(18),miny:a.bottom.toPrecision(18),maxx:a.right.toPrecision(18),maxy:a.top.toPrecision(18)}),t.appendChild(i)}return t},write_wmc_LayerList:function(e){for(var t=this.createElementDefaultNS("LayerList"),a=0,i=e.layersContext.length;a<i;++a)t.appendChild(this.write_wmc_Layer(e.layersContext[a]));return t},write_wmc_Layer:function(e){var t=this.createElementDefaultNS("Layer",null,{queryable:e.queryable?"1":"0",hidden:e.visibility?"0":"1"});return t.appendChild(this.write_wmc_Server(e)),t.appendChild(this.createElementDefaultNS("Name",e.name)),t.appendChild(this.createElementDefaultNS("Title",e.title)),e.abstract&&t.appendChild(this.createElementDefaultNS("Abstract",e.abstract)),e.dataURL&&t.appendChild(this.write_wmc_URLType("DataURL",e.dataURL)),e.metadataURL&&t.appendChild(this.write_wmc_URLType("MetadataURL",e.metadataURL)),t},write_wmc_LayerExtension:function(e){var t=this.createElementDefaultNS("Extension"),a=e.maxExtent,i=this.createElementNS(this.namespaces.ol,"ol:maxExtent");if(this.setAttributes(i,{minx:a.left.toPrecision(18),miny:a.bottom.toPrecision(18),maxx:a.right.toPrecision(18),maxy:a.top.toPrecision(18)}),t.appendChild(i),e.tileSize&&!e.singleTile){var s=this.createElementNS(this.namespaces.ol,"ol:tileSize");this.setAttributes(s,e.tileSize),t.appendChild(s)}for(var r,o=["transparent","numZoomLevels","units","isBaseLayer","opacity","displayInLayerSwitcher","singleTile"],n=0,l=o.length;n<l;++n)r=this.createOLPropertyNode(e,o[n]),r&&t.appendChild(r);return t},createOLPropertyNode:function(e,t){var a=null;return null!=e[t]&&(a=this.createElementNS(this.namespaces.ol,"ol:"+t),a.appendChild(this.createTextNode(e[t].toString()))),a},write_wmc_Server:function(e){var t=e.server,a=this.createElementDefaultNS("Server"),i={service:"OGC:WMS",version:t.version};return t.title&&(i.title=t.title),this.setAttributes(a,i),a.appendChild(this.write_wmc_OnlineResource(t.url)),a},write_wmc_URLType:function(e,t,a){var i=this.createElementDefaultNS(e);if(i.appendChild(this.write_wmc_OnlineResource(t)),a)for(var s=["width","height","format"],r=0;r<s.length;r++)s[r]in a&&i.setAttribute(s[r],a[s[r]]);return i},write_wmc_DimensionList:function(e){var t=this.createElementDefaultNS("DimensionList");for(var a in e.dimensions){var i={},s=e.dimensions[a];for(var r in s)"boolean"==typeof s[r]?i[r]=Number(s[r]):i[r]=s[r];var o="";i.values&&(o=i.values.join(","),delete i.values),t.appendChild(this.createElementDefaultNS("Dimension",o,i))}return t},write_wmc_FormatList:function(e){for(var t=this.createElementDefaultNS("FormatList"),a=0,i=e.formats.length;a<i;a++){var s=e.formats[a];t.appendChild(this.createElementDefaultNS("Format",s.value,s.current&&1==s.current?{current:"1"}:null))}return t},write_wmc_StyleList:function(e){var t=this.createElementDefaultNS("StyleList"),a=e.styles;if(a&&OpenLayers.Util.isArray(a))for(var i,s=0,r=a.length;s<r;s++){var o=a[s],n=this.createElementDefaultNS("Style",null,o.current&&1==o.current?{current:"1"}:null);if(o.href){i=this.createElementDefaultNS("SLD"),o.name&&i.appendChild(this.createElementDefaultNS("Name",o.name)),o.title&&i.appendChild(this.createElementDefaultNS("Title",o.title)),o.legend&&i.appendChild(this.write_wmc_URLType("LegendURL",o.legend.href,o.legend));var l=this.write_wmc_OnlineResource(o.href);i.appendChild(l),n.appendChild(i)}else if(o.body){i=this.createElementDefaultNS("SLD"),o.name&&i.appendChild(this.createElementDefaultNS("Name",o.name)),o.title&&i.appendChild(this.createElementDefaultNS("Title",o.title)),o.legend&&i.appendChild(this.write_wmc_URLType("LegendURL",o.legend.href,o.legend));var c=OpenLayers.Format.XML.prototype.read.apply(this,[o.body]),d=c.documentElement;i.ownerDocument&&i.ownerDocument.importNode&&(d=i.ownerDocument.importNode(d,!0)),i.appendChild(d),n.appendChild(i)}else n.appendChild(this.createElementDefaultNS("Name",o.name)),n.appendChild(this.createElementDefaultNS("Title",o.title)),o.abstract&&n.appendChild(this.createElementDefaultNS("Abstract",o.abstract)),o.legend&&n.appendChild(this.write_wmc_URLType("LegendURL",o.legend.href,o.legend));t.appendChild(n)}return t},write_wmc_OnlineResource:function(e){var t=this.createElementDefaultNS("OnlineResource");return this.setAttributeNS(t,this.namespaces.xlink,"xlink:type","simple"),this.setAttributeNS(t,this.namespaces.xlink,"xlink:href",e),t},getOnlineResource_href:function(e){var t={},a=e.getElementsByTagName("OnlineResource");return a.length>0&&this.read_wmc_OnlineResource(t,a[0]),t.href},CLASS_NAME:"OpenLayers.Format.WMC.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.PanPanel=OpenLayers.Class(OpenLayers.Control.Panel,{slideFactor:50,slideRatio:null,initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]);var e={slideFactor:this.slideFactor,slideRatio:this.slideRatio};this.addControls([new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST,e),new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST,e)])},CLASS_NAME:"OpenLayers.Control.PanPanel"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",template:"${layers}",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this}),this.updateAttribution(),this.div},updateAttribution:function(){var e=[];if(this.map&&this.map.layers){for(var t=0,a=this.map.layers.length;t<a;t++){var i=this.map.layers[t];i.attribution&&i.getVisibility()&&OpenLayers.Util.indexOf(e,i.attribution)===-1&&e.push(i.attribution)}this.div.innerHTML=OpenLayers.String.format(this.template,{layers:e.join(this.separator)})}},CLASS_NAME:"OpenLayers.Control.Attribution"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(e){OpenLayers.Util.extend(this,e)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(e){this.points.unshift({xy:e,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(e){for(var t,a,i=(new Date).getTime(),s=0,r=this.points.length;s<r&&(a=this.points[s],!(i-a.tick>this.delay));s++)t=a;if(t){var o=(new Date).getTime()-t.tick,n=Math.sqrt(Math.pow(e.x-t.xy.x,2)+Math.pow(e.y-t.xy.y,2)),l=n/o;if(!(0==l||l<this.threshold)){var c=Math.asin((e.y-t.xy.y)/n);return t.xy.x<=e.x&&(c=Math.PI-c),{speed:l,theta:c}}}},move:function(e,t){var a=e.speed,i=Math.cos(e.theta),s=-Math.sin(e.theta),r=(new Date).getTime(),o=0,n=0,l=function(){if(null!=this.timerId){var e=(new Date).getTime()-r,l=-this.deceleration*Math.pow(e,2)/2+a*e,c=l*i,d=l*s,p={};p.end=!1;var u=-this.deceleration*e+a;u<=0&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,p.end=!0),p.x=c-o,p.y=d-n,o=c,n=d,t(p.x,p.y,p.end)}};this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(l,this))},CLASS_NAME:"OpenLayers.Kinetic"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WPSExecute=OpenLayers.Class(OpenLayers.Format.XML,OpenLayers.Format.Filter.v1_1_0,{namespaces:{ows:"http://www.opengis.net/ows/1.1",gml:"http://www.opengis.net/gml",wps:"http://www.opengis.net/wps/1.0.0",wfs:"http://www.opengis.net/wfs",ogc:"http://www.opengis.net/ogc",wcs:"http://www.opengis.net/wcs",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",schemaLocationAttr:function(e){},write:function(e){var t;window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),this.xmldom=t):t=document.implementation.createDocument("","",null);var a=this.writeNode("wps:Execute",e,t);return this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[a])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},writers:{wps:{Execute:function(e){var t=this.createElementNSPlus("wps:Execute",{attributes:{version:this.VERSION,service:"WPS"}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("wps:DataInputs",e.dataInputs,t),this.writeNode("wps:ResponseForm",e.responseForm,t),t},ResponseForm:function(e){var t=this.createElementNSPlus("wps:ResponseForm",{});return e.rawDataOutput&&this.writeNode("wps:RawDataOutput",e.rawDataOutput,t),e.responseDocument&&this.writeNode("wps:ResponseDocument",e.responseDocument,t),t},ResponseDocument:function(e){var t=this.createElementNSPlus("wps:ResponseDocument",{attributes:{storeExecuteResponse:e.storeExecuteResponse,lineage:e.lineage,status:e.status}});if(e.outputs)for(var a=0,i=e.outputs.length;a<i;a++)this.writeNode("wps:Output",e.outputs[a],t);return t},Output:function(e){var t=this.createElementNSPlus("wps:Output",{attributes:{asReference:e.asReference,mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}});return this.writeNode("ows:Identifier",e.identifier,t),this.writeNode("ows:Title",e.title,t),this.writeNode("ows:Abstract",e.abstract,t),t},RawDataOutput:function(e){var t=this.createElementNSPlus("wps:RawDataOutput",{attributes:{mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}});return this.writeNode("ows:Identifier",e.identifier,t),t},DataInputs:function(e){for(var t=this.createElementNSPlus("wps:DataInputs",{}),a=0,i=e.length;a<i;++a)this.writeNode("wps:Input",e[a],t);return t},Input:function(e){var t=this.createElementNSPlus("wps:Input",{});return this.writeNode("ows:Identifier",e.identifier,t),e.title&&this.writeNode("ows:Title",e.title,t),e.data&&this.writeNode("wps:Data",e.data,t),e.reference&&this.writeNode("wps:Reference",e.reference,t),e.boundingBoxData&&this.writeNode("wps:BoundingBoxData",e.boundingBoxData,t),t},Data:function(e){var t=this.createElementNSPlus("wps:Data",{});return e.literalData?this.writeNode("wps:LiteralData",e.literalData,t):e.complexData?this.writeNode("wps:ComplexData",e.complexData,t):e.boundingBoxData&&this.writeNode("ows:BoundingBox",e.boundingBoxData,t),t},LiteralData:function(e){var t=this.createElementNSPlus("wps:LiteralData",{attributes:{uom:e.uom},value:e.value});return t},ComplexData:function(e){var t=this.createElementNSPlus("wps:ComplexData",{attributes:{mimeType:e.mimeType,encoding:e.encoding,schema:e.schema}}),a=e.value;return"string"==typeof a?t.appendChild(this.getXMLDoc().createCDATASection(e.value)):t.appendChild(a),t},Reference:function(e){var t=this.createElementNSPlus("wps:Reference",{attributes:{mimeType:e.mimeType,"xlink:href":e.href,method:e.method,encoding:e.encoding,schema:e.schema}});return e.body&&this.writeNode("wps:Body",e.body,t),t},BoundingBoxData:function(e,t){this.writers.ows.BoundingBox.apply(this,[e,t,"wps:BoundingBoxData"])},Body:function(e){var t=this.createElementNSPlus("wps:Body",{});return e.wcs?this.writeNode("wcs:GetCoverage",e.wcs,t):e.wfs?(this.featureType=e.wfs.featureType,this.version=e.wfs.version,this.writeNode("wfs:GetFeature",e.wfs,t)):this.writeNode("wps:Execute",e,t),t}},wcs:OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,wfs:OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows},readers:{wps:{ExecuteResponse:function(e,t){t.executeResponse={lang:e.getAttribute("lang"),statusLocation:e.getAttribute("statusLocation"),serviceInstance:e.getAttribute("serviceInstance"),service:e.getAttribute("service")},this.readChildNodes(e,t.executeResponse)},Process:function(e,t){t.process={},this.readChildNodes(e,t.process)},Status:function(e,t){t.status={creationTime:e.getAttribute("creationTime")},this.readChildNodes(e,t.status)},ProcessSucceeded:function(e,t){t.processSucceeded=!0},ProcessOutputs:function(e,t){t.processOutputs=[],this.readChildNodes(e,t.processOutputs)},Output:function(e,t){var a={};this.readChildNodes(e,a),t.push(a)},Reference:function(e,t){t.reference={href:e.getAttribute("href"),mimeType:e.getAttribute("mimeType"),encoding:e.getAttribute("encoding"),schema:e.getAttribute("schema")}},Data:function(e,t){t.data={},this.readChildNodes(e,t)},LiteralData:function(e,t){t.literalData={dataType:e.getAttribute("dataType"),uom:e.getAttribute("uom"),value:this.getChildValue(e)}},ComplexData:function(e,t){if(t.complexData={mimeType:e.getAttribute("mimeType"),schema:e.getAttribute("schema"),encoding:e.getAttribute("encoding"),value:""},this.isSimpleContent(e)){var a;for(a=e.firstChild;a;a=a.nextSibling)switch(a.nodeType){case 3:case 4:t.complexData.value+=a.nodeValue}}else for(a=e.firstChild;a;a=a.nextSibling)1==a.nodeType&&(t.complexData.value=a)},BoundingBox:function(e,t){t.boundingBoxData={dimensions:e.getAttribute("dimensions"),crs:e.getAttribute("crs")},this.readChildNodes(e,t.boundingBoxData)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSExecute"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.GeoRSS=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,icon:null,popupSize:null,useFeedTitle:!0,initialize:function(e,t,a){OpenLayers.Layer.Markers.prototype.initialize.apply(this,[e,a]),this.location=t,this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadRSS:function(){this.loaded||(this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,scope:this}),this.loaded=!0)},moveTo:function(e,t,a){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadRSS()},parseData:function(e){var t=e.responseXML;if(t&&t.documentElement||(t=OpenLayers.Format.XML.prototype.read(e.responseText)),this.useFeedTitle){var a=null;try{a=t.getElementsByTagNameNS("*","title")[0].firstChild.nodeValue}catch(e){a=t.getElementsByTagName("title")[0].firstChild.nodeValue}a&&this.setName(a)}var i={};OpenLayers.Util.extend(i,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(i.externalProjection=this.projection,i.internalProjection=this.map.getProjectionObject());for(var s=new OpenLayers.Format.GeoRSS(i),r=s.read(t),o=0,n=r.length;o<n;o++){var l={},c=r[o];if(c.geometry){var d=c.attributes.title?c.attributes.title:"Untitled",p=c.attributes.description?c.attributes.description:"No description.",u=c.attributes.link?c.attributes.link:"",m=c.geometry.getBounds().getCenterLonLat();if(l.icon=null==this.icon?OpenLayers.Marker.defaultIcon():this.icon.clone(),l.popupSize=this.popupSize?this.popupSize.clone():new OpenLayers.Size(250,120),d||p){l.title=d,l.description=p;var h='<div class="olLayerGeoRSSClose">[x]</div>';h+='<div class="olLayerGeoRSSTitle">',u&&(h+='<a class="link" href="'+u+'" target="_blank">'),h+=d,u&&(h+="</a>"),h+="</div>",h+='<div style="" class="olLayerGeoRSSDescription">',h+=p,h+="</div>",l.popupContentHTML=h}var c=new OpenLayers.Feature(this,m,l);this.features.push(c);var g=c.createMarker();g.events.register("click",c,this.markerClick),this.addMarker(g)}}this.events.triggerEvent("loadend")},markerClick:function(e){var t=this==this.layer.selectedFeature;this.layer.selectedFeature=t?null:this;for(var a=0,i=this.layer.map.popups.length;a<i;a++)this.layer.map.removePopup(this.layer.map.popups[a]);if(!t){var s=this.createPopup();OpenLayers.Event.observe(s.div,"click",OpenLayers.Function.bind(function(){for(var e=0,t=this.layer.map.popups.length;e<t;e++)this.layer.map.removePopup(this.layer.map.popups[e])},this)),this.layer.map.addPopup(s)}OpenLayers.Event.stop(e)},clearFeatures:function(){if(null!=this.features)for(;this.features.length>0;){var e=this.features[0];OpenLayers.Util.removeItem(this.features,e),e.destroy()}},CLASS_NAME:"OpenLayers.Layer.GeoRSS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Symbolizer.Point=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Point"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Symbolizer.Line=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Line"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Symbolizer.Text=OpenLayers.Class(OpenLayers.Symbolizer,{initialize:function(e){OpenLayers.Symbolizer.prototype.initialize.apply(this,arguments)},CLASS_NAME:"OpenLayers.Symbolizer.Text"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SLD.v1=OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0,{namespaces:{sld:"http://www.opengis.net/sld",ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"sld",schemaLocation:null,multipleSymbolizers:!1,featureTypeCounter:null,defaultSymbolizer:{fillColor:"#808080",fillOpacity:1,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,strokeDashstyle:"solid",pointRadius:3,graphicName:"square"},read:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var a={namedLayers:t.namedLayersAsArray===!0?[]:{}};return this.readChildNodes(e,a),a},readers:OpenLayers.Util.applyDefaults({sld:{StyledLayerDescriptor:function(e,t){t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Name:function(e,t){t.name=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.description=this.getChildValue(e)},NamedLayer:function(e,t){var a={userStyles:[],namedStyles:[]};this.readChildNodes(e,a);for(var i=0,s=a.userStyles.length;i<s;++i)a.userStyles[i].layerName=a.name;OpenLayers.Util.isArray(t.namedLayers)?t.namedLayers.push(a):t.namedLayers[a.name]=a},NamedStyle:function(e,t){t.namedStyles.push(this.getChildName(e.firstChild))},UserStyle:function(e,t){var a={defaultsPerSymbolizer:!0,rules:[]};this.featureTypeCounter=-1,this.readChildNodes(e,a);var i;this.multipleSymbolizers?(delete a.defaultsPerSymbolizer,i=new OpenLayers.Style2(a)):i=new OpenLayers.Style(this.defaultSymbolizer,a),t.userStyles.push(i)},IsDefault:function(e,t){"1"==this.getChildValue(e)&&(t.isDefault=!0)},FeatureTypeStyle:function(e,t){++this.featureTypeCounter;var a={rules:this.multipleSymbolizers?t.rules:[]};this.readChildNodes(e,a),this.multipleSymbolizers||(t.rules=a.rules)},Rule:function(e,t){var a;this.multipleSymbolizers&&(a={symbolizers:[]});var i=new OpenLayers.Rule(a);this.readChildNodes(e,i),t.rules.push(i)},ElseFilter:function(e,t){t.elseFilter=!0},MinScaleDenominator:function(e,t){t.minScaleDenominator=parseFloat(this.getChildValue(e))},MaxScaleDenominator:function(e,t){t.maxScaleDenominator=parseFloat(this.getChildValue(e))},TextSymbolizer:function(e,t){var a={};this.readChildNodes(e,a),this.multipleSymbolizers?(a.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Text(a))):t.symbolizer.Text=OpenLayers.Util.applyDefaults(a,t.symbolizer.Text)},LabelPlacement:function(e,t){this.readChildNodes(e,t)},PointPlacement:function(e,t){var a={};this.readChildNodes(e,a),a.labelRotation=a.rotation,delete a.rotation;var i,s=t.labelAnchorPointX,r=t.labelAnchorPointY;s<=1/3?i="l":s>1/3&&s<2/3?i="c":s>=2/3&&(i="r"),r<=1/3?i+="b":r>1/3&&r<2/3?i+="m":r>=2/3&&(i+="t"),a.labelAlign=i,OpenLayers.Util.applyDefaults(t,a)},AnchorPoint:function(e,t){this.readChildNodes(e,t)},AnchorPointX:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.labelAnchorPointX=a)},AnchorPointY:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.labelAnchorPointY=a)},Displacement:function(e,t){this.readChildNodes(e,t)},DisplacementX:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.labelXOffset=a)},DisplacementY:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.labelYOffset=a)},LinePlacement:function(e,t){this.readChildNodes(e,t)},PerpendicularOffset:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.labelPerpendicularOffset=a)},Label:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.label=a)},Font:function(e,t){this.readChildNodes(e,t)},Halo:function(e,t){var a={};this.readChildNodes(e,a),t.haloRadius=a.haloRadius,t.haloColor=a.fillColor,t.haloOpacity=a.fillOpacity},Radius:function(e,t){var a=this.readers.ogc._expression.call(this,e);null!=a&&(t.haloRadius=a)},RasterSymbolizer:function(e,t){var a={};this.readChildNodes(e,a),this.multipleSymbolizers?(a.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Raster(a))):t.symbolizer.Raster=OpenLayers.Util.applyDefaults(a,t.symbolizer.Raster)},Geometry:function(e,t){t.geometry={},this.readChildNodes(e,t.geometry)},ColorMap:function(e,t){t.colorMap=[],this.readChildNodes(e,t.colorMap)},ColorMapEntry:function(e,t){var a=e.getAttribute("quantity"),i=e.getAttribute("opacity");t.push({color:e.getAttribute("color"),quantity:null!==a?parseFloat(a):void 0,label:e.getAttribute("label")||void 0,opacity:null!==i?parseFloat(i):void 0})},LineSymbolizer:function(e,t){var a={};this.readChildNodes(e,a),this.multipleSymbolizers?(a.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Line(a))):t.symbolizer.Line=OpenLayers.Util.applyDefaults(a,t.symbolizer.Line)},PolygonSymbolizer:function(e,t){var a={fill:!1,stroke:!1};this.multipleSymbolizers||(a=t.symbolizer.Polygon||a),this.readChildNodes(e,a),this.multipleSymbolizers?(a.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Polygon(a))):t.symbolizer.Polygon=a},PointSymbolizer:function(e,t){var a={fill:!1,stroke:!1,graphic:!1};this.multipleSymbolizers||(a=t.symbolizer.Point||a),this.readChildNodes(e,a),this.multipleSymbolizers?(a.zIndex=this.featureTypeCounter,t.symbolizers.push(new OpenLayers.Symbolizer.Point(a))):t.symbolizer.Point=a},Stroke:function(e,t){t.stroke=!0,this.readChildNodes(e,t)},Fill:function(e,t){t.fill=!0,this.readChildNodes(e,t)},CssParameter:function(e,t){var a=e.getAttribute("name"),i=this.cssMap[a];if(t.label&&("fill"===a?i="fontColor":"fill-opacity"===a&&(i="fontOpacity")),i){var s=this.readers.ogc._expression.call(this,e);s&&(t[i]=s)}},Graphic:function(e,t){t.graphic=!0;var a={};this.readChildNodes(e,a);for(var i,s,r=["stroke","strokeColor","strokeWidth","strokeOpacity","strokeLinecap","fill","fillColor","fillOpacity","graphicName","rotation","graphicFormat"],o=0,n=r.length;o<n;++o)i=r[o],s=a[i],void 0!=s&&(t[i]=s);if(void 0!=a.opacity&&(t.graphicOpacity=a.opacity),void 0!=a.size){var l=a.size/2;isNaN(l)?t.graphicWidth=a.size:t.pointRadius=a.size/2}void 0!=a.href&&(t.externalGraphic=a.href),void 0!=a.rotation&&(t.rotation=a.rotation)},ExternalGraphic:function(e,t){this.readChildNodes(e,t)},Mark:function(e,t){this.readChildNodes(e,t)},WellKnownName:function(e,t){t.graphicName=this.getChildValue(e)},Opacity:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.opacity=a)},Size:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.size=a)},Rotation:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.rotation=a)},OnlineResource:function(e,t){t.href=this.getAttributeNS(e,this.namespaces.xlink,"href")},Format:function(e,t){t.graphicFormat=this.getChildValue(e)}}},OpenLayers.Format.Filter.v1_0_0.prototype.readers),cssMap:{stroke:"strokeColor","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","stroke-linecap":"strokeLinecap","stroke-dasharray":"strokeDashstyle",fill:"fillColor","fill-opacity":"fillOpacity","font-family":"fontFamily","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle"},getCssProperty:function(e){var t=null;for(var a in this.cssMap)if(this.cssMap[a]==e){t=a;break}return t},getGraphicFormat:function(e){var t;for(var a in this.graphicFormats)if(this.graphicFormats[a].test(e)){t=a;break}return t||this.defaultGraphicFormat},defaultGraphicFormat:"image/png",graphicFormats:{"image/jpeg":/\.jpe?g$/i,"image/gif":/\.gif$/i,"image/png":/\.png$/i},write:function(e){return this.writers.sld.StyledLayerDescriptor.apply(this,[e])},writers:OpenLayers.Util.applyDefaults({sld:{_OGCExpression:function(e,t){var a=this.createElementNSPlus(e),i="string"==typeof t?t.split("${"):[t];a.appendChild(this.createTextNode(i[0]));for(var s,r,o=1,n=i.length;o<n;o++)s=i[o],r=s.indexOf("}"),r>0?(this.writeNode("ogc:PropertyName",{property:s.substring(0,r)},a),a.appendChild(this.createTextNode(s.substring(++r)))):a.appendChild(this.createTextNode("${"+s));return a},StyledLayerDescriptor:function(e){var t=this.createElementNSPlus("sld:StyledLayerDescriptor",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});if(t.setAttribute("xmlns:ogc",this.namespaces.ogc),t.setAttribute("xmlns:gml",this.namespaces.gml),e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),OpenLayers.Util.isArray(e.namedLayers))for(var a=0,i=e.namedLayers.length;a<i;++a)this.writeNode("NamedLayer",e.namedLayers[a],t);else for(var s in e.namedLayers)this.writeNode("NamedLayer",e.namedLayers[s],t);return t},Name:function(e){return this.createElementNSPlus("sld:Name",{value:e})},Title:function(e){return this.createElementNSPlus("sld:Title",{value:e})},Abstract:function(e){return this.createElementNSPlus("sld:Abstract",{value:e})},NamedLayer:function(e){var t=this.createElementNSPlus("sld:NamedLayer");if(this.writeNode("Name",e.name,t),e.namedStyles)for(var a=0,i=e.namedStyles.length;a<i;++a)this.writeNode("NamedStyle",e.namedStyles[a],t);if(e.userStyles)for(var a=0,i=e.userStyles.length;a<i;++a)this.writeNode("UserStyle",e.userStyles[a],t);return t},NamedStyle:function(e){var t=this.createElementNSPlus("sld:NamedStyle");return this.writeNode("Name",e,t),t},UserStyle:function(e){var t=this.createElementNSPlus("sld:UserStyle");if(e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),e.isDefault&&this.writeNode("IsDefault",e.isDefault,t),this.multipleSymbolizers&&e.rules){for(var a,i,s,r,o,n={0:[]},l=[0],c=0,d=e.rules.length;c<d;++c)if(a=e.rules[c],a.symbolizers){i={};for(var p=0,u=a.symbolizers.length;p<u;++p)s=a.symbolizers[p],r=s.zIndex,r in i||(o=a.clone(),o.symbolizers=[],i[r]=o),i[r].symbolizers.push(s.clone());for(r in i)r in n||(l.push(r),n[r]=[]),n[r].push(i[r])}else n[0].push(a.clone());l.sort();for(var m,c=0,d=l.length;c<d;++c)m=n[l[c]],m.length>0&&(o=e.clone(),o.rules=n[l[c]],this.writeNode("FeatureTypeStyle",o,t))}else this.writeNode("FeatureTypeStyle",e,t);return t},IsDefault:function(e){return this.createElementNSPlus("sld:IsDefault",{value:e?"1":"0"})},FeatureTypeStyle:function(e){for(var t=this.createElementNSPlus("sld:FeatureTypeStyle"),a=0,i=e.rules.length;a<i;++a)this.writeNode("Rule",e.rules[a],t);return t},Rule:function(e){var t=this.createElementNSPlus("sld:Rule");e.name&&this.writeNode("Name",e.name,t),e.title&&this.writeNode("Title",e.title,t),e.description&&this.writeNode("Abstract",e.description,t),e.elseFilter?this.writeNode("ElseFilter",null,t):e.filter&&this.writeNode("ogc:Filter",e.filter,t),void 0!=e.minScaleDenominator&&this.writeNode("MinScaleDenominator",e.minScaleDenominator,t),void 0!=e.maxScaleDenominator&&this.writeNode("MaxScaleDenominator",e.maxScaleDenominator,t);var a,i;if(this.multipleSymbolizers&&e.symbolizers)for(var i,s=0,r=e.symbolizers.length;s<r;++s)i=e.symbolizers[s],a=i.CLASS_NAME.split(".").pop(),this.writeNode(a+"Symbolizer",i,t);else for(var o=OpenLayers.Style.SYMBOLIZER_PREFIXES,s=0,n=o.length;s<n;++s)a=o[s],i=e.symbolizer[a],i&&this.writeNode(a+"Symbolizer",i,t);return t},ElseFilter:function(){return this.createElementNSPlus("sld:ElseFilter")},MinScaleDenominator:function(e){return this.createElementNSPlus("sld:MinScaleDenominator",{value:e})},MaxScaleDenominator:function(e){return this.createElementNSPlus("sld:MaxScaleDenominator",{value:e})},LineSymbolizer:function(e){var t=this.createElementNSPlus("sld:LineSymbolizer");return this.writeNode("Stroke",e,t),t},Stroke:function(e){var t=this.createElementNSPlus("sld:Stroke");return void 0!=e.strokeColor&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeColor"},t),void 0!=e.strokeOpacity&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeOpacity"},t),void 0!=e.strokeWidth&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeWidth"},t),void 0!=e.strokeDashstyle&&"solid"!==e.strokeDashstyle&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeDashstyle"},t),void 0!=e.strokeLinecap&&this.writeNode("CssParameter",{symbolizer:e,key:"strokeLinecap"},t),t},CssParameter:function(e){return this.createElementNSPlus("sld:CssParameter",{attributes:{name:this.getCssProperty(e.key)},value:e.symbolizer[e.key]})},TextSymbolizer:function(e){var t=this.createElementNSPlus("sld:TextSymbolizer");return null!=e.label&&this.writeNode("Label",e.label,t),null==e.fontFamily&&null==e.fontSize&&null==e.fontWeight&&null==e.fontStyle||this.writeNode("Font",e,t),null==e.labelAnchorPointX&&null==e.labelAnchorPointY&&null==e.labelAlign&&null==e.labelXOffset&&null==e.labelYOffset&&null==e.labelRotation&&null==e.labelPerpendicularOffset||this.writeNode("LabelPlacement",e,t),null==e.haloRadius&&null==e.haloColor&&null==e.haloOpacity||this.writeNode("Halo",e,t),null==e.fontColor&&null==e.fontOpacity||this.writeNode("Fill",{fillColor:e.fontColor,fillOpacity:e.fontOpacity},t),t},LabelPlacement:function(e){var t=this.createElementNSPlus("sld:LabelPlacement");return null==e.labelAnchorPointX&&null==e.labelAnchorPointY&&null==e.labelAlign&&null==e.labelXOffset&&null==e.labelYOffset&&null==e.labelRotation||null!=e.labelPerpendicularOffset||this.writeNode("PointPlacement",e,t),null!=e.labelPerpendicularOffset&&this.writeNode("LinePlacement",e,t),t},LinePlacement:function(e){var t=this.createElementNSPlus("sld:LinePlacement");return this.writeNode("PerpendicularOffset",e.labelPerpendicularOffset,t),t},PerpendicularOffset:function(e){return this.createElementNSPlus("sld:PerpendicularOffset",{value:e})},PointPlacement:function(e){var t=this.createElementNSPlus("sld:PointPlacement");return null==e.labelAnchorPointX&&null==e.labelAnchorPointY&&null==e.labelAlign||this.writeNode("AnchorPoint",e,t),null==e.labelXOffset&&null==e.labelYOffset||this.writeNode("Displacement",e,t),null!=e.labelRotation&&this.writeNode("Rotation",e.labelRotation,t),t},AnchorPoint:function(e){var t=this.createElementNSPlus("sld:AnchorPoint"),a=e.labelAnchorPointX,i=e.labelAnchorPointY;if(null!=a&&this.writeNode("AnchorPointX",a,t),null!=i&&this.writeNode("AnchorPointY",i,t),null==a&&null==i){var s=e.labelAlign.substr(0,1),r=e.labelAlign.substr(1,1);"l"===s?a=0:"c"===s?a=.5:"r"===s&&(a=1),"b"===r?i=0:"m"===r?i=.5:"t"===r&&(i=1),this.writeNode("AnchorPointX",a,t),this.writeNode("AnchorPointY",i,t)}return t},AnchorPointX:function(e){return this.createElementNSPlus("sld:AnchorPointX",{value:e})},AnchorPointY:function(e){return this.createElementNSPlus("sld:AnchorPointY",{value:e})},Displacement:function(e){var t=this.createElementNSPlus("sld:Displacement");return null!=e.labelXOffset&&this.writeNode("DisplacementX",e.labelXOffset,t),null!=e.labelYOffset&&this.writeNode("DisplacementY",e.labelYOffset,t),t},DisplacementX:function(e){return this.createElementNSPlus("sld:DisplacementX",{value:e})},DisplacementY:function(e){return this.createElementNSPlus("sld:DisplacementY",{value:e})},Font:function(e){var t=this.createElementNSPlus("sld:Font");return e.fontFamily&&this.writeNode("CssParameter",{symbolizer:e,key:"fontFamily"},t),e.fontSize&&this.writeNode("CssParameter",{symbolizer:e,key:"fontSize"},t),e.fontWeight&&this.writeNode("CssParameter",{symbolizer:e,key:"fontWeight"},t),e.fontStyle&&this.writeNode("CssParameter",{symbolizer:e,key:"fontStyle"},t),t},Label:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Label",e)},Halo:function(e){var t=this.createElementNSPlus("sld:Halo");return e.haloRadius&&this.writeNode("Radius",e.haloRadius,t),(e.haloColor||e.haloOpacity)&&this.writeNode("Fill",{fillColor:e.haloColor,fillOpacity:e.haloOpacity},t),t},Radius:function(e){return this.createElementNSPlus("sld:Radius",{value:e})},RasterSymbolizer:function(e){var t=this.createElementNSPlus("sld:RasterSymbolizer");return e.geometry&&this.writeNode("Geometry",e.geometry,t),e.opacity&&this.writeNode("Opacity",e.opacity,t),e.colorMap&&this.writeNode("ColorMap",e.colorMap,t),t},Geometry:function(e){var t=this.createElementNSPlus("sld:Geometry");return e.property&&this.writeNode("ogc:PropertyName",e,t),t},ColorMap:function(e){for(var t=this.createElementNSPlus("sld:ColorMap"),a=0,i=e.length;a<i;++a)this.writeNode("ColorMapEntry",e[a],t);return t},ColorMapEntry:function(e){var t=this.createElementNSPlus("sld:ColorMapEntry"),a=e;return t.setAttribute("color",a.color),void 0!==a.opacity&&t.setAttribute("opacity",parseFloat(a.opacity)),void 0!==a.quantity&&t.setAttribute("quantity",parseFloat(a.quantity)),void 0!==a.label&&t.setAttribute("label",a.label),t},PolygonSymbolizer:function(e){var t=this.createElementNSPlus("sld:PolygonSymbolizer");return e.fill!==!1&&this.writeNode("Fill",e,t),e.stroke!==!1&&this.writeNode("Stroke",e,t),t},Fill:function(e){var t=this.createElementNSPlus("sld:Fill");return e.fillColor&&this.writeNode("CssParameter",{symbolizer:e,key:"fillColor"},t),null!=e.fillOpacity&&this.writeNode("CssParameter",{symbolizer:e,key:"fillOpacity"},t),t},PointSymbolizer:function(e){var t=this.createElementNSPlus("sld:PointSymbolizer");return this.writeNode("Graphic",e,t),t},Graphic:function(e){var t=this.createElementNSPlus("sld:Graphic");return void 0!=e.externalGraphic?this.writeNode("ExternalGraphic",e,t):this.writeNode("Mark",e,t),void 0!=e.graphicOpacity&&this.writeNode("Opacity",e.graphicOpacity,t),void 0!=e.pointRadius?this.writeNode("Size",2*e.pointRadius,t):void 0!=e.graphicWidth&&this.writeNode("Size",e.graphicWidth,t),void 0!=e.rotation&&this.writeNode("Rotation",e.rotation,t),t},ExternalGraphic:function(e){var t=this.createElementNSPlus("sld:ExternalGraphic");this.writeNode("OnlineResource",e.externalGraphic,t);var a=e.graphicFormat||this.getGraphicFormat(e.externalGraphic);return this.writeNode("Format",a,t),t},Mark:function(e){var t=this.createElementNSPlus("sld:Mark");return e.graphicName&&this.writeNode("WellKnownName",e.graphicName,t),e.fill!==!1&&this.writeNode("Fill",e,t),e.stroke!==!1&&this.writeNode("Stroke",e,t),t},WellKnownName:function(e){return this.createElementNSPlus("sld:WellKnownName",{value:e})},Opacity:function(e){return this.createElementNSPlus("sld:Opacity",{value:e})},Size:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Size",e)},Rotation:function(e){return this.createElementNSPlus("sld:Rotation",{value:e})},OnlineResource:function(e){return this.createElementNSPlus("sld:OnlineResource",{attributes:{"xlink:type":"simple","xlink:href":e}})},Format:function(e){return this.createElementNSPlus("sld:Format",{value:e})}}},OpenLayers.Format.Filter.v1_0_0.prototype.writers),CLASS_NAME:"OpenLayers.Format.SLD.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.WMS=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{service:"WMS",version:"1.1.1",request:"GetMap",styles:"",format:"image/jpeg"},isBaseLayer:!0,encodeBBOX:!1,noMagic:!1,yx:{},initialize:function(e,t,a,i){var s=[];a=OpenLayers.Util.upperCaseObject(a),parseFloat(a.VERSION)>=1.3&&!a.EXCEPTIONS&&(a.EXCEPTIONS="INIMAGE"),s.push(e,t,a,i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,s),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),!this.noMagic&&this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=i&&i.isBaseLayer||(this.isBaseLayer=!1),"image/jpeg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"image/gif":"image/png"))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMS(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},reverseAxisOrder:function(){var e=this.projection.getCode();return parseFloat(this.params.VERSION)>=1.3&&!!(this.yx[e]||OpenLayers.Projection.defaults[e]&&OpenLayers.Projection.defaults[e].yx)},getURL:function(e){e=this.adjustBounds(e);var t=this.getImageSize(),a={},i=this.reverseAxisOrder();a.BBOX=this.encodeBBOX?e.toBBOX(null,i):e.toArray(i),a.WIDTH=t.w,a.HEIGHT=t.h;var s=this.getFullRequestString(a);return s},mergeNewParams:function(e){var t=OpenLayers.Util.upperCaseObject(e),a=[t];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},getFullRequestString:function(e,t){var a=this.map.getProjectionObject(),i=this.projection&&this.projection.equals(a)?this.projection.getCode():a.getCode(),s="none"==i?null:i;return parseFloat(this.params.VERSION)>=1.3?this.params.CRS=s:this.params.SRS=s,"boolean"==typeof this.params.TRANSPARENT&&(e.TRANSPARENT=this.params.TRANSPARENT?"TRUE":"FALSE"),OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments)},CLASS_NAME:"OpenLayers.Layer.WMS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.KaMap=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,DEFAULT_PARAMS:{i:"jpeg",map:""},initialize:function(e,t,a,i){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getURL:function(e){e=this.adjustBounds(e);var t=this.map.getResolution(),a=Math.round(1e4*this.map.getScale())/1e4,i=Math.round(e.left/t),s=-Math.round(e.top/t);return this.getFullRequestString({t:s,l:i,s:a})},calculateGridLayout:function(e,t,a){var i=a*this.tileSize.w,s=a*this.tileSize.h,r=e.left,o=Math.floor(r/i)-this.buffer,n=e.top,l=Math.floor(n/s)+this.buffer;return{tilelon:i,tilelat:s,startcol:o,startrow:l}},getTileBoundsForGridIndex:function(e,t){var a=(this.getTileOrigin(),this.gridLayout),i=a.tilelon,s=a.tilelat,r=(a.startcol+t)*i,o=(a.startrow-e)*s;return new OpenLayers.Bounds(r,o,r+i,o+s)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.KaMap(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e},getTileBounds:function(e){var t=this.getResolution(),a=t*this.tileSize.w,i=t*this.tileSize.h,s=this.getLonLatFromViewPortPx(e),r=a*Math.floor(s.lon/a),o=i*Math.floor(s.lat/i);return new OpenLayers.Bounds(r,o,r+a,o+i)},CLASS_NAME:"OpenLayers.Layer.KaMap"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMC.v1_1_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",initialize:function(e){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[e])},read_sld_MinScaleDenominator:function(e,t){var a=parseFloat(this.getChildValue(t));a>0&&(e.maxScale=a)},read_sld_MaxScaleDenominator:function(e,t){e.minScale=parseFloat(this.getChildValue(t))},read_wmc_SRS:function(e,t){"srs"in e||(e.srs={}),e.srs[this.getChildValue(t)]=!0},write_wmc_Layer:function(e){var t=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[e]);if(e.maxScale){var a=this.createElementNS(this.namespaces.sld,"sld:MinScaleDenominator");a.appendChild(this.createTextNode(e.maxScale.toPrecision(16))),t.appendChild(a)}if(e.minScale){var i=this.createElementNS(this.namespaces.sld,"sld:MaxScaleDenominator");i.appendChild(this.createTextNode(e.minScale.toPrecision(16))),t.appendChild(i)}if(e.srs)for(var s in e.srs)t.appendChild(this.createElementDefaultNS("SRS",s));return t.appendChild(this.write_wmc_FormatList(e)),t.appendChild(this.write_wmc_StyleList(e)),e.dimensions&&t.appendChild(this.write_wmc_DimensionList(e)),t.appendChild(this.write_wmc_LayerExtension(e)),t},CLASS_NAME:"OpenLayers.Format.WMC.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.XLS=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.1.0",stringifyOutput:!0,CLASS_NAME:"OpenLayers.Format.XLS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.XLS.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{xls:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},xy:!0,defaultPrefix:"xls",schemaLocation:null,read:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var a={};return this.readChildNodes(e,a),a},readers:{xls:{XLS:function(e,t){t.version=e.getAttribute("version"),this.readChildNodes(e,t)},Response:function(e,t){this.readChildNodes(e,t)},GeocodeResponse:function(e,t){t.responseLists=[],this.readChildNodes(e,t)},GeocodeResponseList:function(e,t){var a={features:[],numberOfGeocodedAddresses:parseInt(e.getAttribute("numberOfGeocodedAddresses"))};t.responseLists.push(a),this.readChildNodes(e,a)},GeocodedAddress:function(e,t){var a=new OpenLayers.Feature.Vector;t.features.push(a),this.readChildNodes(e,a),a.geometry=a.components[0]},GeocodeMatchCode:function(e,t){t.attributes.matchCode={accuracy:parseFloat(e.getAttribute("accuracy")),matchType:e.getAttribute("matchType")}},Address:function(e,t){var a={countryCode:e.getAttribute("countryCode"),addressee:e.getAttribute("addressee"),street:[],place:[]};t.attributes.address=a,this.readChildNodes(e,a)},freeFormAddress:function(e,t){t.freeFormAddress=this.getChildValue(e)},StreetAddress:function(e,t){this.readChildNodes(e,t)},Building:function(e,t){t.building={number:e.getAttribute("number"),subdivision:e.getAttribute("subdivision"),buildingName:e.getAttribute("buildingName")}},Street:function(e,t){t.street.push(this.getChildValue(e))},Place:function(e,t){t.place[e.getAttribute("type")]=this.getChildValue(e)},PostalCode:function(e,t){t.postalCode=this.getChildValue(e)}},gml:OpenLayers.Format.GML.v3.prototype.readers.gml},write:function(e){return this.writers.xls.XLS.apply(this,[e])},writers:{xls:{XLS:function(e){var t=this.createElementNSPlus("xls:XLS",{attributes:{version:this.VERSION,"xsi:schemaLocation":this.schemaLocation}});return this.writeNode("RequestHeader",e.header,t),this.writeNode("Request",e,t),t},RequestHeader:function(e){return this.createElementNSPlus("xls:RequestHeader")},Request:function(e){var t=this.createElementNSPlus("xls:Request",{attributes:{methodName:"GeocodeRequest",requestID:e.requestID||"",version:this.VERSION}});return this.writeNode("GeocodeRequest",e.addresses,t),t},GeocodeRequest:function(e){for(var t=this.createElementNSPlus("xls:GeocodeRequest"),a=0,i=e.length;a<i;a++)this.writeNode("Address",e[a],t);return t},Address:function(e){var t=this.createElementNSPlus("xls:Address",{attributes:{countryCode:e.countryCode}});return e.freeFormAddress?this.writeNode("freeFormAddress",e.freeFormAddress,t):(e.street&&this.writeNode("StreetAddress",e,t),e.municipality&&this.writeNode("Municipality",e.municipality,t),e.countrySubdivision&&this.writeNode("CountrySubdivision",e.countrySubdivision,t),e.postalCode&&this.writeNode("PostalCode",e.postalCode,t)),t},freeFormAddress:function(e){return this.createElementNSPlus("freeFormAddress",{value:e})},StreetAddress:function(e){var t=this.createElementNSPlus("xls:StreetAddress");e.building&&this.writeNode(t,"Building",e.building);var a=e.street;OpenLayers.Util.isArray(a)||(a=[a]);for(var i=0,s=a.length;i<s;i++)this.writeNode("Street",a[i],t);return t},Building:function(e){return this.createElementNSPlus("xls:Building",{attributes:{number:e.number,subdivision:e.subdivision,buildingName:e.buildingName}})},Street:function(e){return this.createElementNSPlus("xls:Street",{value:e})},Municipality:function(e){return this.createElementNSPlus("xls:Place",{attributes:{type:"Municipality"},value:e})},CountrySubdivision:function(e){return this.createElementNSPlus("xls:Place",{attributes:{type:"CountrySubdivision"},value:e})},PostalCode:function(e){return this.createElementNSPlus("xls:PostalCode",{value:e})}}},CLASS_NAME:"OpenLayers.Format.XLS.v1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.XLS.v1_1_0=OpenLayers.Class(OpenLayers.Format.XLS.v1,{VERSION:"1.1",schemaLocation:"http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",CLASS_NAME:"OpenLayers.Format.XLS.v1_1_0"}),OpenLayers.Format.XLS.v1_1=OpenLayers.Format.XLS.v1_1_0,/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(e){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){var e="http://www.w3.org/TR/SVG11/feature#";return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature(e+"SVG","1.1")||document.implementation.hasFeature(e+"BasicStructure","1.1"))},inValidRange:function(e,t,a){var i=e+(a?0:this.translationParameters.x),s=t+(a?0:this.translationParameters.y);return i>=-this.MAX_PIXEL&&i<=this.MAX_PIXEL&&s>=-this.MAX_PIXEL&&s<=this.MAX_PIXEL},setExtent:function(e,t){var a=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),i=this.getResolution(),s=-e.left/i,r=e.top/i;if(t){this.left=s,this.top=r;var o="0 0 "+this.size.w+" "+this.size.h;return this.rendererRoot.setAttributeNS(null,"viewBox",o),this.translate(this.xOffset,0),!0}var n=this.translate(s-this.left+this.xOffset,r-this.top);return n||this.setExtent(e,!0),a&&n},translate:function(e,t){if(this.inValidRange(e,t,!0)){var a="";return(e||t)&&(a="translate("+e+","+t+")"),this.root.setAttributeNS(null,"transform",a),this.translationParameters={x:e,y:t},!0}return!1},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(e,t){var a=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":a=t.externalGraphic?"image":this.isComplexSymbol(t.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":a="rect";break;case"OpenLayers.Geometry.LineString":a="polyline";break;case"OpenLayers.Geometry.LinearRing":a="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":a="path"}return a},setStyle:function(e,t,a){t=t||e._style,a=a||e._options;var i=t.title||t.graphicTitle;if(i){e.setAttributeNS(null,"title",i);var s=e.getElementsByTagName("title");if(s.length>0)s[0].firstChild.textContent=i;else{var r=this.nodeFactory(null,"title");r.textContent=i,e.appendChild(r)}}var o,n=parseFloat(e.getAttributeNS(null,"r")),l=1;if("OpenLayers.Geometry.Point"==e._geometryClass&&n){if(e.style.visibility="",t.graphic===!1)e.style.visibility="hidden";else if(t.externalGraphic){o=this.getPosition(e),t.graphicWidth&&t.graphicHeight&&e.setAttributeNS(null,"preserveAspectRatio","none");var c=t.graphicWidth||t.graphicHeight,d=t.graphicHeight||t.graphicWidth;c=c?c:2*t.pointRadius,d=d?d:2*t.pointRadius;var p=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*c),u=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*d),m=t.graphicOpacity||t.fillOpacity;e.setAttributeNS(null,"x",(o.x+p).toFixed()),e.setAttributeNS(null,"y",(o.y+u).toFixed()),e.setAttributeNS(null,"width",c),e.setAttributeNS(null,"height",d),e.setAttributeNS(this.xlinkns,"xlink:href",t.externalGraphic),e.setAttributeNS(null,"style","opacity: "+m),e.onclick=OpenLayers.Event.preventDefault}else if(this.isComplexSymbol(t.graphicName)){var h=3*t.pointRadius,g=2*h,v=this.importSymbol(t.graphicName);o=this.getPosition(e),l=3*this.symbolMetrics[v.id][0]/g;var f=e.parentNode,y=e.nextSibling;f&&f.removeChild(e),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(v.firstChild.cloneNode(!0)),e.setAttributeNS(null,"viewBox",v.getAttributeNS(null,"viewBox")),e.setAttributeNS(null,"width",g),e.setAttributeNS(null,"height",g),e.setAttributeNS(null,"x",o.x-h),e.setAttributeNS(null,"y",o.y-h),y?f.insertBefore(e,y):f&&f.appendChild(e)}else e.setAttributeNS(null,"r",t.pointRadius);var b=t.rotation;if((void 0!==b||void 0!==e._rotation)&&o)if(e._rotation=b,b|=0,"svg"!==e.nodeName)e.setAttributeNS(null,"transform","rotate("+b+" "+o.x+" "+o.y+")");else{var L=this.symbolMetrics[v.id];e.firstChild.setAttributeNS(null,"transform","rotate("+b+" "+L[1]+" "+L[2]+")")}}return a.isFilled?(e.setAttributeNS(null,"fill",t.fillColor),e.setAttributeNS(null,"fill-opacity",t.fillOpacity)):e.setAttributeNS(null,"fill","none"),a.isStroked?(e.setAttributeNS(null,"stroke",t.strokeColor),e.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),e.setAttributeNS(null,"stroke-width",t.strokeWidth*l),e.setAttributeNS(null,"stroke-linecap",t.strokeLinecap||"round"),e.setAttributeNS(null,"stroke-linejoin","round"),t.strokeDashstyle&&e.setAttributeNS(null,"stroke-dasharray",this.dashStyle(t,l))):e.setAttributeNS(null,"stroke","none"),t.pointerEvents&&e.setAttributeNS(null,"pointer-events",t.pointerEvents),null!=t.cursor&&e.setAttributeNS(null,"cursor",t.cursor),e},dashStyle:function(e,t){var a=e.strokeWidth*t,i=e.strokeDashstyle;switch(i){case"solid":return"none";case"dot":return[1,4*a].join();case"dash":return[4*a,4*a].join();case"dashdot":return[4*a,4*a,1,4*a].join();case"longdash":return[8*a,4*a].join();case"longdashdot":return[8*a,4*a,1,4*a].join();default:return OpenLayers.String.trim(i).replace(/\s+/g,",")}},createNode:function(e,t){var a=document.createElementNS(this.xmlns,e);return t&&a.setAttributeNS(null,"id",t),a},nodeTypeCompare:function(e,t){return t==e.nodeName},createRenderRoot:function(){var e=this.nodeFactory(this.container.id+"_svgRoot","svg");return e.style.display="block",e},createRoot:function(e){return this.nodeFactory(this.container.id+e,"g")},createDefs:function(){var e=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(e),e},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,a){var i=this.getResolution(),s=(t.x-this.featureDx)/i+this.left,r=this.top-t.y/i;return!!this.inValidRange(s,r)&&(e.setAttributeNS(null,"cx",s),e.setAttributeNS(null,"cy",r),e.setAttributeNS(null,"r",a),e)},drawLineString:function(e,t){var a=this.getComponentsString(t.components);return!!a.path&&(e.setAttributeNS(null,"points",a.path),a.complete?e:null)},drawLinearRing:function(e,t){var a=this.getComponentsString(t.components);return!!a.path&&(e.setAttributeNS(null,"points",a.path),a.complete?e:null)},drawPolygon:function(e,t){for(var a,i,s="",r=!0,o=!0,n=0,l=t.components.length;n<l;n++)s+=" M",a=this.getComponentsString(t.components[n].components," "),i=a.path,i?(s+=" "+i,o=a.complete&&o):r=!1;return s+=" z",!!r&&(e.setAttributeNS(null,"d",s),e.setAttributeNS(null,"fill-rule","evenodd"),o?e:null)},drawRectangle:function(e,t){var a=this.getResolution(),i=(t.x-this.featureDx)/a+this.left,s=this.top-t.y/a;return!!this.inValidRange(i,s)&&(e.setAttributeNS(null,"x",i),e.setAttributeNS(null,"y",s),e.setAttributeNS(null,"width",t.width/a),e.setAttributeNS(null,"height",t.height/a),e)},drawText:function(e,t,a){var i=!!t.labelOutlineWidth;if(i){var s=OpenLayers.Util.extend({},t);s.fontColor=s.labelOutlineColor,s.fontStrokeColor=s.labelOutlineColor,s.fontStrokeWidth=t.labelOutlineWidth,t.labelOutlineOpacity&&(s.fontOpacity=t.labelOutlineOpacity),delete s.labelOutlineWidth,this.drawText(e,s,a)}var r=this.getResolution(),o=(a.x-this.featureDx)/r+this.left,n=a.y/r-this.top,l=i?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,c=this.nodeFactory(e+l,"text");c.setAttributeNS(null,"x",o),c.setAttributeNS(null,"y",-n),t.fontColor&&c.setAttributeNS(null,"fill",t.fontColor),t.fontStrokeColor&&c.setAttributeNS(null,"stroke",t.fontStrokeColor),t.fontStrokeWidth&&c.setAttributeNS(null,"stroke-width",t.fontStrokeWidth),t.fontOpacity&&c.setAttributeNS(null,"opacity",t.fontOpacity),t.fontFamily&&c.setAttributeNS(null,"font-family",t.fontFamily),t.fontSize&&c.setAttributeNS(null,"font-size",t.fontSize),t.fontWeight&&c.setAttributeNS(null,"font-weight",t.fontWeight),t.fontStyle&&c.setAttributeNS(null,"font-style",t.fontStyle),t.labelSelect===!0?(c.setAttributeNS(null,"pointer-events","visible"),c._featureId=e):c.setAttributeNS(null,"pointer-events","none");var d=t.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign;c.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[d[0]]||"middle"),OpenLayers.IS_GECKO===!0&&c.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[d[1]]||"central");for(var p=t.label.split("\n"),u=p.length;c.childNodes.length>u;)c.removeChild(c.lastChild);for(var m=0;m<u;m++){var h=this.nodeFactory(e+l+"_tspan_"+m,"tspan");if(t.labelSelect===!0&&(h._featureId=e,h._geometry=a,h._geometryClass=a.CLASS_NAME),OpenLayers.IS_GECKO===!1&&h.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[d[1]]||"-35%"),h.setAttribute("x",o),0==m){var g=OpenLayers.Renderer.SVG.LABEL_VFACTOR[d[1]];null==g&&(g=-.5),h.setAttribute("dy",g*(u-1)+"em")}else h.setAttribute("dy","1em");h.textContent=""===p[m]?" ":p[m],h.parentNode||c.appendChild(h)}c.parentNode||this.textRoot.appendChild(c)},getComponentsString:function(e,t){for(var a,i,s=[],r=!0,o=e.length,n=[],l=0;l<o;l++)i=e[l],s.push(i),a=this.getShortString(i),a?n.push(a):(l>0&&this.getShortString(e[l-1])&&n.push(this.clipLine(e[l],e[l-1])),l<o-1&&this.getShortString(e[l+1])&&n.push(this.clipLine(e[l],e[l+1])),r=!1);return{path:n.join(t||","),complete:r}},clipLine:function(e,t){if(t.equals(e))return"";var a,i=this.getResolution(),s=this.MAX_PIXEL-this.translationParameters.x,r=this.MAX_PIXEL-this.translationParameters.y,o=(t.x-this.featureDx)/i+this.left,n=this.top-t.y/i,l=(e.x-this.featureDx)/i+this.left,c=this.top-e.y/i;return(l<-s||l>s)&&(a=(c-n)/(l-o),l=l<0?-s:s,c=n+(l-o)*a),(c<-r||c>r)&&(a=(l-o)/(c-n),c=c<0?-r:r,l=o+(c-n)*a),l+","+c},getShortString:function(e){var t=this.getResolution(),a=(e.x-this.featureDx)/t+this.left,i=this.top-e.y/t;return!!this.inValidRange(a,i)&&a+","+i},getPosition:function(e){return{x:parseFloat(e.getAttributeNS(null,"cx")),y:parseFloat(e.getAttributeNS(null,"cy"))}},importSymbol:function(e){this.defs||(this.defs=this.createDefs());var t=this.container.id+"-"+e,a=document.getElementById(t);if(null!=a)return a;var i=OpenLayers.Renderer.symbol[e];if(!i)throw new Error(e+" is not a valid symbol name");var s=this.nodeFactory(t,"symbol"),r=this.nodeFactory(null,"polygon");s.appendChild(r);for(var o,n,l=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),c=[],d=0;d<i.length;d+=2)o=i[d],n=i[d+1],l.left=Math.min(l.left,o),l.bottom=Math.min(l.bottom,n),l.right=Math.max(l.right,o),l.top=Math.max(l.top,n),c.push(o,",",n);r.setAttributeNS(null,"points",c.join(" "));var p=l.getWidth(),u=l.getHeight(),m=[l.left-p,l.bottom-u,3*p,3*u];return s.setAttributeNS(null,"viewBox",m.join(" ")),this.symbolMetrics[t]=[Math.max(p,u),l.getCenterLonLat().lon,l.getCenterLonLat().lat],this.defs.appendChild(s),s},getFeatureIdFromEvent:function(e){var t=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);if(!t){var a=e.target;t=a.parentNode&&a!=this.rendererRoot?a.parentNode._featureId:void 0}return t},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(e){OpenLayers.Event.preventDefault(e)},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SLD.v1_0_0=OpenLayers.Class(OpenLayers.Format.SLD.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OWSContext=OpenLayers.Class(OpenLayers.Format.Context,{defaultVersion:"0.3.1",getVersion:function(e,t){var a=OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this,arguments);return"0.3.0"===a&&(a=this.defaultVersion),a},toContext:function(e){var t={};return"OpenLayers.Map"==e.CLASS_NAME&&(t.bounds=e.getExtent(),t.maxExtent=e.maxExtent,t.projection=e.projection,t.size=e.getSize(),t.layers=e.layers),t},CLASS_NAME:"OpenLayers.Format.OWSContext"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.OWSContext.v0_3_1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{owc:"http://www.opengis.net/ows-context",gml:"http://www.opengis.net/gml",kml:"http://www.opengis.net/kml/2.2",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},VERSION:"0.3.1",schemaLocation:"http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",defaultPrefix:"owc",extractAttributes:!0,xy:!0,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},featureNS:"http://mapserver.gis.umn.edu/mapserver",featureType:"vector",geometryName:"geometry",nestingLayerLookup:null,initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this)},setNestingPath:function(e){if(e.layersContext)for(var t=0,a=e.layersContext.length;t<a;t++){var i=e.layersContext[t],s=[],r=e.title||"";e.metadata&&e.metadata.nestingPath&&(s=e.metadata.nestingPath.slice()),""!=r&&s.push(r),i.metadata.nestingPath=s,i.layersContext&&this.setNestingPath(i)}},decomposeNestingPath:function(e){var t=[];if(OpenLayers.Util.isArray(e)){for(var a=e.slice();a.length>0;)t.push(a.slice()),a.pop();t.reverse()}return t},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};this.readNode(e,t),this.setNestingPath({layersContext:t.layersContext});var a=[];return this.processLayer(a,t),delete t.layersContext,t.layersContext=a,t},processLayer:function(e,t){if(t.layersContext)for(var a=0,i=t.layersContext.length;a<i;a++){var s=t.layersContext[a];e.push(s),s.layersContext&&this.processLayer(e,s)}},write:function(e,t){var a="OWSContext";this.nestingLayerLookup={},t=t||{},OpenLayers.Util.applyDefaults(t,e);var i=this.writeNode(a,t);return this.nestingLayerLookup=null,this.setAttributeNS(i,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[i])},readers:{kml:{Document:function(e,t){t.features=new OpenLayers.Format.KML({kmlns:this.namespaces.kml,extractStyles:!0}).read(e)}},owc:{OWSContext:function(e,t){this.readChildNodes(e,t)},General:function(e,t){this.readChildNodes(e,t)},ResourceList:function(e,t){this.readChildNodes(e,t)},Layer:function(e,t){var a={metadata:{},visibility:"1"!=e.getAttribute("hidden"),queryable:"1"==e.getAttribute("queryable"),opacity:null!=e.getAttribute("opacity")?parseFloat(e.getAttribute("opacity")):null,name:e.getAttribute("name"),categoryLayer:null==e.getAttribute("name"),formats:[],styles:[]};t.layersContext||(t.layersContext=[]),t.layersContext.push(a),this.readChildNodes(e,a)},InlineGeometry:function(e,t){t.features=[];var a,i=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember");if(i.length>=1&&(a=i[0]),a&&a.firstChild){var s=a.firstChild.nextSibling?a.firstChild.nextSibling:a.firstChild;this.setNamespace("feature",s.namespaceURI),this.featureType=s.localName||s.nodeName.split(":").pop(),this.readChildNodes(e,t)}},Server:function(e,t){(t.service||t.version)&&t.service==OpenLayers.Format.Context.serviceTypes.WMS||(t.service=e.getAttribute("service"),t.version=e.getAttribute("version"),this.readChildNodes(e,t))},Name:function(e,t){t.name=this.getChildValue(e),this.readChildNodes(e,t)},Title:function(e,t){t.title=this.getChildValue(e),this.readChildNodes(e,t)},StyleList:function(e,t){this.readChildNodes(e,t.styles)},Style:function(e,t){var a={};t.push(a),this.readChildNodes(e,a)},LegendURL:function(e,t){var a={};t.legend=a,this.readChildNodes(e,a)},OnlineResource:function(e,t){t.url=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)}},ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,gml:OpenLayers.Format.GML.v2.prototype.readers.gml,sld:OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,feature:OpenLayers.Format.GML.v2.prototype.readers.feature},writers:{owc:{OWSContext:function(e){var t=this.createElementNSPlus("OWSContext",{attributes:{version:this.VERSION,id:e.id||OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")}});return this.writeNode("General",e,t),this.writeNode("ResourceList",e,t),t},General:function(e){var t=this.createElementNSPlus("General");return this.writeNode("ows:BoundingBox",e,t),this.writeNode("ows:Title",e.title||"OpenLayers OWSContext",t),t},ResourceList:function(e){for(var t=this.createElementNSPlus("ResourceList"),a=0,i=e.layers.length;a<i;a++){var s=e.layers[a],r=this.decomposeNestingPath(s.metadata.nestingPath);this.writeNode("_Layer",{layer:s,subPaths:r},t)}return t},Server:function(e){var t=this.createElementNSPlus("Server",{attributes:{version:e.version,service:e.service}});return this.writeNode("OnlineResource",e,t),t},OnlineResource:function(e){var t=this.createElementNSPlus("OnlineResource",{attributes:{"xlink:href":e.url}});return t},InlineGeometry:function(e){var t=this.createElementNSPlus("InlineGeometry"),a=e.getDataExtent();null!==a&&this.writeNode("gml:boundedBy",a,t);for(var i=0,s=e.features.length;i<s;i++)this.writeNode("gml:featureMember",e.features[i],t);return t},StyleList:function(e){for(var t=this.createElementNSPlus("StyleList"),a=0,i=e.length;a<i;a++)this.writeNode("Style",e[a],t);return t},Style:function(e){var t=this.createElementNSPlus("Style");return this.writeNode("Name",e,t),this.writeNode("Title",e,t),e.legend&&this.writeNode("LegendURL",e,t),t},Name:function(e){var t=this.createElementNSPlus("Name",{value:e.name});return t},Title:function(e){var t=this.createElementNSPlus("Title",{value:e.title});return t},LegendURL:function(e){var t=this.createElementNSPlus("LegendURL");return this.writeNode("OnlineResource",e.legend,t),t},_WMS:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:e.params.LAYERS,queryable:e.queryable?"1":"0",hidden:e.visibility?"0":"1",opacity:e.hasOwnProperty("opacity")?e.opacity:null}});return this.writeNode("ows:Title",e.name,t),this.writeNode("ows:OutputFormat",e.params.FORMAT,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WMS,version:e.params.VERSION,url:e.url},t),e.metadata.styles&&e.metadata.styles.length>0&&this.writeNode("StyleList",e.metadata.styles,t),t},_Layer:function(e){var t,a,i,s;if(t=e.layer,a=e.subPaths,i=null,s=null,a.length>0){var r=a[0].join("/"),o=r.lastIndexOf("/");return i=this.nestingLayerLookup[r],s=o>0?r.substring(o+1,r.length):r,i||(i=this.createElementNSPlus("Layer"),this.writeNode("ows:Title",s,i),this.nestingLayerLookup[r]=i),e.subPaths.shift(),this.writeNode("_Layer",e,i),i}return t instanceof OpenLayers.Layer.WMS?i=this.writeNode("_WMS",t):t instanceof OpenLayers.Layer.Vector&&(t.protocol instanceof OpenLayers.Protocol.WFS.v1?i=this.writeNode("_WFS",t):t.protocol instanceof OpenLayers.Protocol.HTTP?t.protocol.format instanceof OpenLayers.Format.GML?(t.protocol.format.version="2.1.2",i=this.writeNode("_GML",t)):t.protocol.format instanceof OpenLayers.Format.KML&&(t.protocol.format.version="2.2",i=this.writeNode("_KML",t)):(this.setNamespace("feature",this.featureNS),i=this.writeNode("_InlineGeometry",t))),t.options.maxScale&&this.writeNode("sld:MinScaleDenominator",t.options.maxScale,i),t.options.minScale&&this.writeNode("sld:MaxScaleDenominator",t.options.minScale,i),this.nestingLayerLookup[t.name]=i,i},_WFS:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:e.protocol.featurePrefix+":"+e.protocol.featureType,hidden:e.visibility?"0":"1"}});return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.WFS,version:e.protocol.version,url:e.protocol.url},t),t},_InlineGeometry:function(e){var t=this.createElementNSPlus("Layer",{attributes:{name:this.featureType,hidden:e.visibility?"0":"1"}});return this.writeNode("ows:Title",e.name,t),this.writeNode("InlineGeometry",e,t),t},_GML:function(e){var t=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.GML,url:e.protocol.url,version:e.protocol.format.version},t),t},_KML:function(e){var t=this.createElementNSPlus("Layer");return this.writeNode("ows:Title",e.name,t),this.writeNode("Server",{service:OpenLayers.Format.Context.serviceTypes.KML,version:e.protocol.format.version,url:e.protocol.url},t),t}},gml:OpenLayers.Util.applyDefaults({boundedBy:function(e){var t=this.createElementNSPlus("gml:boundedBy");return this.writeNode("gml:Box",e,t),t}},OpenLayers.Format.GML.v2.prototype.writers.gml),ows:OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,sld:OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,feature:OpenLayers.Format.GML.v2.prototype.writers.feature},CLASS_NAME:"OpenLayers.Format.OWSContext.v0_3_1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,keepInMap:!1,closeOnMove:!1,map:null,initialize:function(e,t,a,i,s,r){null==e&&(e=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")),this.id=e,this.lonlat=t,this.contentSize=null!=a?a:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT),null!=i&&(this.contentHTML=i),this.backgroundColor=OpenLayers.Popup.COLOR,this.opacity=OpenLayers.Popup.OPACITY,this.border=OpenLayers.Popup.BORDER,this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden"),this.div.className=this.displayClass;var o=this.id+"_GroupDiv";this.groupDiv=OpenLayers.Util.createDiv(o,null,null,null,"relative",null,"hidden");var e=this.div.id+"_contentDiv";this.contentDiv=OpenLayers.Util.createDiv(e,null,this.contentSize.clone(),null,"relative"),this.contentDiv.className=this.contentDisplayClass,this.groupDiv.appendChild(this.contentDiv),this.div.appendChild(this.groupDiv),s&&this.addCloseBox(r),this.registerEvents()},destroy:function(){this.id=null,this.lonlat=null,this.size=null,this.contentHTML=null,this.backgroundColor=null,this.opacity=null,this.border=null,this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide),this.events.destroy(),this.events=null,this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv)),this.closeDiv=null,this.div.removeChild(this.groupDiv),this.groupDiv=null,null!=this.map&&this.map.removePopup(this),this.map=null,this.div=null,this.autoSize=null,this.minSize=null,this.maxSize=null,this.padding=null,this.panMapIfOutOfView=null},draw:function(e){return null==e&&null!=this.lonlat&&null!=this.map&&(e=this.map.getLayerPxFromLonLat(this.lonlat)),this.closeOnMove&&this.map.events.register("movestart",this,this.hide),this.disableFirefoxOverflowHack||"firefox"!=OpenLayers.BROWSER_NAME||(this.map.events.register("movestart",this,function(){var e=document.defaultView.getComputedStyle(this.contentDiv,null),t=e.getPropertyValue("overflow");"hidden"!=t&&(this.contentDiv._oldOverflow=t,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var e=this.contentDiv._oldOverflow;e&&(this.contentDiv.style.overflow=e,this.contentDiv._oldOverflow=null)})),this.moveTo(e),this.autoSize||this.size||this.setSize(this.contentSize),this.setBackgroundColor(),this.setOpacity(),this.setBorder(),this.setContentHTML(),this.panMapIfOutOfView&&this.panIntoView(),this.div},updatePosition:function(){if(this.lonlat&&this.map){var e=this.map.getLayerPxFromLonLat(this.lonlat);e&&this.moveTo(e)}},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="",this.panMapIfOutOfView&&this.panIntoView()},hide:function(){this.div.style.display="none"},setSize:function(e){this.size=e.clone();var t=this.getContentDivPadding(),a=t.left+t.right,i=t.top+t.bottom;if(this.fixPadding(),a+=this.padding.left+this.padding.right,i+=this.padding.top+this.padding.bottom,this.closeDiv){var s=parseInt(this.closeDiv.style.width);a+=s+t.right}this.size.w+=a,this.size.h+=i,"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=t.left+t.right,this.contentSize.h+=t.bottom+t.top),null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px"),null!=this.contentDiv&&(this.contentDiv.style.width=e.w+"px",this.contentDiv.style.height=e.h+"px")},updateSize:function(){var e="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",t=this.map?this.map.div:document.body,a=OpenLayers.Util.getRenderedDimensions(e,null,{displayClass:this.displayClass,containerElement:t}),i=this.getSafeContentSize(a),s=null;if(i.equals(a))s=a;else{var r={w:i.w<a.w?i.w:null,h:i.h<a.h?i.h:null};if(r.w&&r.h)s=i;else{var o=OpenLayers.Util.getRenderedDimensions(e,r,{displayClass:this.contentDisplayClass,containerElement:t}),n=OpenLayers.Element.getStyle(this.contentDiv,"overflow");if("hidden"!=n&&o.equals(i)){var l=OpenLayers.Util.getScrollbarWidth();r.w?o.h+=l:o.w+=l}s=this.getSafeContentSize(o)}}this.setSize(s)},setBackgroundColor:function(e){void 0!=e&&(this.backgroundColor=e),null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(e){void 0!=e&&(this.opacity=e),null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(e){void 0!=e&&(this.border=e),null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(e){null!=e&&(this.contentHTML=e),null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var e=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImgLoad))},t=this.contentDiv.getElementsByTagName("img"),a=0,i=t.length;a<i;a++){var s=t[a];if(0==s.width||0==s.height){var r={popup:this,img:s};s._onImgLoad=OpenLayers.Function.bind(e,r),OpenLayers.Event.observe(s,"load",s._onImgLoad)}}},getSafeContentSize:function(e){var t=e.clone(),a=this.getContentDivPadding(),i=a.left+a.right,s=a.top+a.bottom;if(this.fixPadding(),i+=this.padding.left+this.padding.right,s+=this.padding.top+this.padding.bottom,this.closeDiv){var r=parseInt(this.closeDiv.style.width);i+=r+a.right}if(this.minSize&&(t.w=Math.max(t.w,this.minSize.w-i),t.h=Math.max(t.h,this.minSize.h-s)),this.maxSize&&(t.w=Math.min(t.w,this.maxSize.w-i),t.h=Math.min(t.h,this.maxSize.h-s)),this.map&&this.map.size){var o=0,n=0;if(this.keepInMap&&!this.panMapIfOutOfView){var l=this.map.getPixelFromLonLat(this.lonlat);switch(this.relativePosition){case"tr":o=l.x,n=this.map.size.h-l.y;break;case"tl":o=this.map.size.w-l.x,n=this.map.size.h-l.y;break;case"bl":o=this.map.size.w-l.x,n=l.y;break;case"br":o=l.x,n=l.y;break;default:o=l.x,n=this.map.size.h-l.y}}var c=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-s-n,d=this.map.size.w-this.map.paddingForPopups.left-this.map.paddingForPopups.right-i-o;t.w=Math.min(t.w,d),t.h=Math.min(t.h,c)}return t},getContentDivPadding:function(){var e=this._contentDivPadding;return e||(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),e=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,"padding-top")),this._contentDivPadding=e,this.div.parentNode==document.body&&(document.body.removeChild(this.div),this.div.style.display="")),e},addCloseBox:function(e){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17}),this.closeDiv.className="olPopupCloseBox";var t=this.getContentDivPadding();this.closeDiv.style.right=t.right+"px",this.closeDiv.style.top=t.top+"px",this.groupDiv.appendChild(this.closeDiv);var a=e||function(e){this.hide(),OpenLayers.Event.stop(e)};OpenLayers.Event.observe(this.closeDiv,"touchend",OpenLayers.Function.bindAsEventListener(a,this)),OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(a,this))},panIntoView:function(){var e=this.map.getSize(),t=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),a=t.clone();t.x<this.map.paddingForPopups.left?a.x=this.map.paddingForPopups.left:t.x+this.size.w>e.w-this.map.paddingForPopups.right&&(a.x=e.w-this.map.paddingForPopups.right-this.size.w),t.y<this.map.paddingForPopups.top?a.y=this.map.paddingForPopups.top:t.y+this.size.h>e.h-this.map.paddingForPopups.bottom&&(a.y=e.h-this.map.paddingForPopups.bottom-this.size.h);var i=t.x-a.x,s=t.y-a.y;this.map.pan(i,s)},registerEvents:function(){function e(e){OpenLayers.Event.stop(e,!0)}this.events=new OpenLayers.Events(this,this.div,null,!0),this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:e,scope:this})},onmousedown:function(e){this.mousedown=!0,OpenLayers.Event.stop(e,!0)},onmousemove:function(e){this.mousedown&&OpenLayers.Event.stop(e,!0)},onmouseup:function(e){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(e,!0))},onclick:function(e){OpenLayers.Event.stop(e,!0)},onmouseout:function(e){this.mousedown=!1},ondblclick:function(e){OpenLayers.Event.stop(e,!0)},CLASS_NAME:"OpenLayers.Popup"}),OpenLayers.Popup.WIDTH=200,OpenLayers.Popup.HEIGHT=200,OpenLayers.Popup.COLOR="white",OpenLayers.Popup.OPACITY=1,OpenLayers.Popup.BORDER="0px",/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ScaleLine=OpenLayers.Class(OpenLayers.Control,{maxWidth:100,topOutUnits:"km",topInUnits:"m",bottomOutUnits:"mi",bottomInUnits:"ft",eTop:null,eBottom:null,geodesic:!1,draw:function(){if(OpenLayers.Control.prototype.draw.apply(this,arguments),!this.eTop){this.eTop=document.createElement("div"),this.eTop.className=this.displayClass+"Top";this.topInUnits.length;this.div.appendChild(this.eTop),""==this.topOutUnits||""==this.topInUnits?this.eTop.style.visibility="hidden":this.eTop.style.visibility="visible",this.eBottom=document.createElement("div"),this.eBottom.className=this.displayClass+"Bottom",this.div.appendChild(this.eBottom),""==this.bottomOutUnits||""==this.bottomInUnits?this.eBottom.style.visibility="hidden":this.eBottom.style.visibility="visible"}return this.map.events.register("moveend",this,this.update),this.update(),this.div},getBarLen:function(e){var t,a=parseInt(Math.log(e)/Math.log(10)),i=Math.pow(10,a),s=parseInt(e/i);return t=s>5?5:s>2?2:1,t*i},update:function(){var e=this.map.getResolution();if(e){var t=this.map.getUnits(),a=OpenLayers.INCHES_PER_UNIT,i=this.maxWidth*e*a[t],s=1;if(this.geodesic===!0){var r=(this.map.getGeodesicPixelSize().w||1e-6)*this.maxWidth,o=i/a.km;s=r/o,i*=s}var n,l;i>1e5?(n=this.topOutUnits,l=this.bottomOutUnits):(n=this.topInUnits,l=this.bottomInUnits);var c=i/a[n],d=i/a[l],p=this.getBarLen(c),u=this.getBarLen(d);c=p/a[t]*a[n],d=u/a[t]*a[l];var m=c/e/s,h=d/e/s;"visible"==this.eBottom.style.visibility&&(this.eBottom.style.width=Math.round(h)+"px",this.eBottom.innerHTML=u+" "+l),"visible"==this.eTop.style.visibility&&(this.eTop.style.width=Math.round(m)+"px",this.eTop.innerHTML=p+" "+n)}},CLASS_NAME:"OpenLayers.Control.ScaleLine"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(e,t,a,i){this.url=e,this.size=t||{w:20,h:20},this.offset=a||{x:-(this.size.w/2),y:-(this.size.h/2)},this.calculateOffset=i;var s=OpenLayers.Util.createUniqueID("OL_Icon_");this.imageDiv=OpenLayers.Util.createAlphaImageDiv(s)},destroy:function(){this.erase(),OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild),this.imageDiv.innerHTML="",this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(e){null!=e&&(this.size=e),this.draw()},setUrl:function(e){null!=e&&(this.url=e),this.draw()},draw:function(e){return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute"),this.moveTo(e),this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(e){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,null,null,null,e)},moveTo:function(e){null!=e&&(this.px=e),null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(e){this.imageDiv.style.display=e?"":"none"},isDrawn:function(){var e=this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType;return e},CLASS_NAME:"OpenLayers.Icon"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(e,t){this.lonlat=e;var a=t?t:OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=a:(this.icon.url=a.url,this.icon.size=a.size,this.icon.offset=a.offset,this.icon.calculateOffset=a.calculateOffset),this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase(),this.map=null,this.events.destroy(),this.events=null,null!=this.icon&&(this.icon.destroy(),this.icon=null)},draw:function(e){return this.icon.draw(e)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(e){null!=e&&null!=this.icon&&this.icon.moveTo(e),this.lonlat=this.map.getLonLatFromLayerPx(e)},isDrawn:function(){var e=this.icon&&this.icon.isDrawn();return e},onScreen:function(){var e=!1;if(this.map){var t=this.map.getExtent();e=t.containsLonLat(this.lonlat)}return e},inflate:function(e){this.icon&&this.icon.setSize({w:this.icon.size.w*e,h:this.icon.size.h*e})},setOpacity:function(e){this.icon.setOpacity(e)},setUrl:function(e){this.icon.setUrl(e)},display:function(e){this.icon.display(e)},CLASS_NAME:"OpenLayers.Marker"}),OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.TileCache=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,format:"image/png",serverResolutions:null,initialize:function(e,t,a,i){this.layername=a,OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,{},i]),this.extension=this.format.split("/")[1].toLowerCase(),this.extension="jpg"==this.extension?"jpeg":this.extension},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TileCache(this.name,this.url,this.layername,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var t=this.getServerResolution(),a=this.maxExtent,i=this.tileSize,s=Math.round((e.left-a.left)/(t*i.w)),r=Math.round((e.bottom-a.bottom)/(t*i.h)),o=null!=this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,t):this.map.getZoom(),n=[this.layername,OpenLayers.Number.zeroPad(o,2),OpenLayers.Number.zeroPad(parseInt(s/1e6),3),OpenLayers.Number.zeroPad(parseInt(s/1e3)%1e3,3),OpenLayers.Number.zeroPad(parseInt(s)%1e3,3),OpenLayers.Number.zeroPad(parseInt(r/1e6),3),OpenLayers.Number.zeroPad(parseInt(r/1e3)%1e3,3),OpenLayers.Number.zeroPad(parseInt(r)%1e3,3)+"."+this.extension],l=n.join("/"),c=this.url;return OpenLayers.Util.isArray(c)&&(c=this.selectUrl(l,c)),c="/"==c.charAt(c.length-1)?c:c+"/",c+l},CLASS_NAME:"OpenLayers.Layer.TileCache"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.Paging=OpenLayers.Class(OpenLayers.Strategy,{features:null,length:10,num:null,paging:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,scope:this}),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,scope:this})),e},cacheFeatures:function(e){this.paging||(this.clearCache(),this.features=e.features,this.pageNext(e))},clearCache:function(){if(this.features)for(var e=0;e<this.features.length;++e)this.features[e].destroy();this.features=null,this.num=null},pageCount:function(){var e=this.features?this.features.length:0;return Math.ceil(e/this.length)},pageNum:function(){return this.num},pageLength:function(e){return e&&e>0&&(this.length=e),this.length},pageNext:function(e){var t=!1;if(this.features){null===this.num&&(this.num=-1);var a=(this.num+1)*this.length;t=this.page(a,e)}return t},pagePrevious:function(){var e=!1;if(this.features){null===this.num&&(this.num=this.pageCount());var t=(this.num-1)*this.length;e=this.page(t)}return e},page:function(e,t){var a=!1;if(this.features&&e>=0&&e<this.features.length){var i=Math.floor(e/this.length);if(i!=this.num){this.paging=!0;var s=this.features.slice(e,e+this.length);this.layer.removeFeatures(this.layer.features),this.num=i,t&&t.features?t.features=s:this.layer.addFeatures(s),this.paging=!1,a=!0}}return a},CLASS_NAME:"OpenLayers.Strategy.Paging"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.DragFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,onStart:function(e,t){},onDrag:function(e,t){},onComplete:function(e,t){},onEnter:function(e){},onLeave:function(e){},documentDrag:!1,layer:null,feature:null,dragCallbacks:{},featureCallbacks:{},lastPixel:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.layer=e,this.handlers={drag:new OpenLayers.Handler.Drag(this,OpenLayers.Util.extend({down:this.downFeature,move:this.moveFeature,up:this.upFeature,out:this.cancel,done:this.doneDragging},this.dragCallbacks),{documentDrag:this.documentDrag}),feature:new OpenLayers.Handler.Feature(this,this.layer,OpenLayers.Util.extend({click:this.clickFeature,clickout:this.clickoutFeature,over:this.overFeature,out:this.outFeature},this.featureCallbacks),{geometryTypes:this.geometryTypes})}},clickFeature:function(e){this.handlers.feature.touch&&!this.over&&this.overFeature(e)&&(this.handlers.drag.dragstart(this.handlers.feature.evt),this.handlers.drag.stopDown=!1)},clickoutFeature:function(e){this.handlers.feature.touch&&this.over&&(this.outFeature(e),this.handlers.drag.stopDown=!0)},destroy:function(){this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return this.handlers.feature.activate()&&OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.handlers.drag.deactivate(),this.handlers.feature.deactivate(),this.feature=null,this.dragging=!1,this.lastPixel=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},overFeature:function(e){var t=!1;return this.handlers.drag.dragging?this.feature.id==e.id?this.over=!0:this.over=!1:(this.feature=e,this.handlers.drag.activate(),t=!0,this.over=!0,OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onEnter(e)),t},downFeature:function(e){this.lastPixel=e,this.onStart(this.feature,e)},moveFeature:function(e){var t=this.map.getResolution();this.feature.geometry.move(t*(e.x-this.lastPixel.x),t*(this.lastPixel.y-e.y)),this.layer.drawFeature(this.feature),this.lastPixel=e,this.onDrag(this.feature,e)},upFeature:function(e){this.over||this.handlers.drag.deactivate()},doneDragging:function(e){this.onComplete(this.feature,e)},outFeature:function(e){this.handlers.drag.dragging?this.feature.id==e.id&&(this.over=!1):(this.over=!1,this.handlers.drag.deactivate(),OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass+"Over"),this.onLeave(e),this.feature=null)},cancel:function(){this.handlers.drag.deactivate(),this.over=!1},setMap:function(e){this.handlers.drag.setMap(e),this.handlers.feature.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.DragFeature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.TransformFeature=OpenLayers.Class(OpenLayers.Control,{geometryTypes:null,layer:null,preserveAspectRatio:!1,rotate:!0,feature:null,renderIntent:"temporary",rotationHandleSymbolizer:null,box:null,center:null,scale:1,ratio:1,rotation:0,handles:null,rotationHandles:null,dragControl:null,irregular:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.layer=e,this.rotationHandleSymbolizer||(this.rotationHandleSymbolizer={stroke:!1,pointRadius:10,fillOpacity:0,cursor:"pointer"}),this.createBox(),this.createControl()},activate:function(){var e=!1;return OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragControl.activate(),this.layer.addFeatures([this.box]),this.rotate&&this.layer.addFeatures(this.rotationHandles),this.layer.addFeatures(this.handles),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.layer.removeFeatures(this.handles),this.rotate&&this.layer.removeFeatures(this.rotationHandles),this.layer.removeFeatures([this.box]),this.dragControl.deactivate(),e=!0),e},setMap:function(e){this.dragControl.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setFeature:function(e,t){t=OpenLayers.Util.applyDefaults(t,{rotation:0,scale:1,ratio:1});var a=this.rotation,i=this.center;OpenLayers.Util.extend(this,t);var s=this.events.triggerEvent("beforesetfeature",{feature:e});if(s!==!1){this.feature=e,this.activate(),this._setfeature=!0;var r=this.feature.geometry.getBounds();this.box.move(r.getCenterLonLat()),this.box.geometry.rotate(-a,i),this._angle=0;var o;if(this.rotation){var n=e.geometry.clone();n.rotate(-this.rotation,this.center);var l=new OpenLayers.Feature.Vector(n.getBounds().toGeometry());l.geometry.rotate(this.rotation,this.center),this.box.geometry.rotate(this.rotation,this.center),this.box.move(l.geometry.getBounds().getCenterLonLat());var c=l.geometry.components[0].components[0];o=c.getBounds().getCenterLonLat()}else o=new OpenLayers.LonLat(r.left,r.bottom);this.handles[0].move(o),delete this._setfeature,this.events.triggerEvent("setfeature",{feature:e})}},unsetFeature:function(){this.active?this.deactivate():(this.feature=null,this.rotation=0,this.scale=1,this.ratio=1)},createBox:function(){var e=this;this.center=new OpenLayers.Geometry.Point(0,0),this.box=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([new OpenLayers.Geometry.Point(-1,-1),new OpenLayers.Geometry.Point(0,-1),new OpenLayers.Geometry.Point(1,-1),new OpenLayers.Geometry.Point(1,0),new OpenLayers.Geometry.Point(1,1),new OpenLayers.Geometry.Point(0,1),new OpenLayers.Geometry.Point(-1,1),new OpenLayers.Geometry.Point(-1,0),new OpenLayers.Geometry.Point(-1,-1)]),null,"string"==typeof this.renderIntent?null:this.renderIntent),this.box.geometry.move=function(t,a){e._moving=!0,OpenLayers.Geometry.LineString.prototype.move.apply(this,arguments),e.center.move(t,a),delete e._moving};for(var t,a,i,s=function(e,t){OpenLayers.Geometry.Point.prototype.move.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.move(e,t),this._handle.geometry.move(e,t)},r=function(e,t,a){OpenLayers.Geometry.Point.prototype.resize.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.resize(e,t,a),this._handle.geometry.resize(e,t,a)},o=function(e,t){OpenLayers.Geometry.Point.prototype.rotate.apply(this,arguments),this._rotationHandle&&this._rotationHandle.geometry.rotate(e,t),this._handle.geometry.rotate(e,t)},n=function(t,a){var i=this.x,s=this.y;if(OpenLayers.Geometry.Point.prototype.move.call(this,t,a),!e._moving){var r=e.dragControl.handlers.drag.evt,o=!e._setfeature&&e.preserveAspectRatio,n=!(o||r&&r.shiftKey),l=new OpenLayers.Geometry.Point(i,s),c=e.center;this.rotate(-e.rotation,c),l.rotate(-e.rotation,c);var d=this.x-c.x,p=this.y-c.y,u=d-(this.x-l.x),m=p-(this.y-l.y);e.irregular&&!e._setfeature&&(d-=(this.x-l.x)/2,p-=(this.y-l.y)/2),this.x=i,this.y=s;var h,g=1;if(n)h=Math.abs(m)<1e-5?1:p/m,g=(Math.abs(u)<1e-5?1:d/u)/h;else{var v=Math.sqrt(u*u+m*m),f=Math.sqrt(d*d+p*p);h=f/v}if(e._moving=!0,e.box.geometry.rotate(-e.rotation,c),delete e._moving,e.box.geometry.resize(h,c,g),e.box.geometry.rotate(e.rotation,c),e.transformFeature({scale:h,ratio:g}),e.irregular&&!e._setfeature){var y=c.clone();y.x+=Math.abs(i-c.x)<1e-5?0:this.x-i,y.y+=Math.abs(s-c.y)<1e-5?0:this.y-s,e.box.geometry.move(this.x-i,this.y-s),e.transformFeature({center:y})}}},l=function(t,a){var i=this.x,s=this.y;if(OpenLayers.Geometry.Point.prototype.move.call(this,t,a),!e._moving){var r=e.dragControl.handlers.drag.evt,o=r&&r.shiftKey?45:1,n=e.center,l=this.x-n.x,c=this.y-n.y,d=l-t,p=c-a;this.x=i,this.y=s;var u=Math.atan2(p,d),m=Math.atan2(c,l),h=m-u;h*=180/Math.PI,e._angle=(e._angle+h)%360;var g=e.rotation%o;(Math.abs(e._angle)>=o||0!==g)&&(h=Math.round(e._angle/o)*o-g,e._angle=0,e.box.geometry.rotate(h,n),e.transformFeature({rotation:h}))}},c=new Array(8),d=new Array(4),p=["sw","s","se","e","ne","n","nw","w"],u=0;u<8;++u)t=this.box.geometry.components[u],a=new OpenLayers.Feature.Vector(t.clone(),{role:p[u]+"-resize"},"string"==typeof this.renderIntent?null:this.renderIntent),u%2==0&&(i=new OpenLayers.Feature.Vector(t.clone(),{role:p[u]+"-rotate"},"string"==typeof this.rotationHandleSymbolizer?null:this.rotationHandleSymbolizer),i.geometry.move=l,t._rotationHandle=i,d[u/2]=i),t.move=s,t.resize=r,t.rotate=o,a.geometry.move=n,t._handle=a,c[u]=a;this.rotationHandles=d,this.handles=c},createControl:function(){var e=this;this.dragControl=new OpenLayers.Control.DragFeature(this.layer,{documentDrag:!0,moveFeature:function(t){this.feature===e.feature&&(this.feature=e.box),OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,arguments)},onDrag:function(t,a){t===e.box&&e.transformFeature({center:e.center})},onStart:function(t,a){var i=!e.geometryTypes||OpenLayers.Util.indexOf(e.geometryTypes,t.geometry.CLASS_NAME)!==-1,s=OpenLayers.Util.indexOf(e.handles,t);s+=OpenLayers.Util.indexOf(e.rotationHandles,t),t!==e.feature&&t!==e.box&&s==-2&&i&&e.setFeature(t)},onComplete:function(t,a){e.events.triggerEvent("transformcomplete",{feature:e.feature})}})},drawHandles:function(){for(var e=this.layer,t=0;t<8;++t)this.rotate&&t%2===0&&e.drawFeature(this.rotationHandles[t/2],this.rotationHandleSymbolizer),e.drawFeature(this.handles[t],this.renderIntent)},transformFeature:function(e){if(!this._setfeature){this.scale*=e.scale||1,this.ratio*=e.ratio||1;var t=this.rotation;if(this.rotation=(this.rotation+(e.rotation||0))%360,this.events.triggerEvent("beforetransform",e)!==!1){var a=this.feature,i=a.geometry,s=this.center;i.rotate(-t,s),e.scale||e.ratio?i.resize(e.scale,s,e.ratio):e.center&&a.move(e.center.getBounds().getCenterLonLat()),i.rotate(this.rotation,s),this.layer.drawFeature(a),a.toState(OpenLayers.State.UPDATE),this.events.triggerEvent("transform",e)}}this.layer.drawFeature(this.box,this.renderIntent),this.drawHandles()},destroy:function(){for(var e,t=0;t<8;++t)e=this.box.geometry.components[t],e._handle.destroy(),e._handle=null,e._rotationHandle&&e._rotationHandle.destroy(),e._rotationHandle=null;this.center=null,this.feature=null,this.handles=null,this.rotationHandleSymbolizer=null,this.rotationHandles=null,this.box.destroy(),this.box=null,this.layer=null,this.dragControl.destroy(),this.dragControl=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.TransformFeature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(e,t,a){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(e){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(e)},startBox:function(e){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(e){var t=this.dragHandler.start.x,a=this.dragHandler.start.y,i=Math.abs(t-e.x),s=Math.abs(a-e.y),r=this.getBoxOffsets();this.zoomBox.style.width=i+r.width+1+"px",this.zoomBox.style.height=s+r.height+1+"px",this.zoomBox.style.left=(e.x<t?t-i-r.left:t-r.left)+"px",this.zoomBox.style.top=(e.y<a?a-s-r.top:a-r.top)+"px"},endBox:function(e){var t;if(Math.abs(this.dragHandler.start.x-e.x)>5||Math.abs(this.dragHandler.start.y-e.y)>5){var a=this.dragHandler.start,i=Math.min(a.y,e.y),s=Math.max(a.y,e.y),r=Math.min(a.x,e.x),o=Math.max(a.x,e.x);t=new OpenLayers.Bounds(r,s,o,i)}else t=this.dragHandler.start.clone();this.removeBox(),this.callback("done",[t])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.zoomBox=null,this.boxOffsets=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return!!OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragHandler.activate(),!0)},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0)},getBoxOffsets:function(){if(!this.boxOffsets){var e=document.createElement("div");e.style.position="absolute",e.style.border="1px solid black",e.style.width="3px",document.body.appendChild(e);var t=3==e.clientWidth;document.body.removeChild(e);var a=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),i=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),s=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),r=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:a,right:i,top:s,bottom:r,width:t===!1?a+i:0,height:t===!1?s+r:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,zoomOnClick:!0,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(e){if(e instanceof OpenLayers.Bounds){var t,a=e.getCenterPixel();if(this.out){var i=e.right-e.left,s=e.bottom-e.top,r=Math.min(this.map.size.h/s,this.map.size.w/i),o=this.map.getExtent(),n=this.map.getLonLatFromPixel(a),l=n.lon-o.getWidth()/2*r,c=n.lon+o.getWidth()/2*r,d=n.lat-o.getHeight()/2*r,p=n.lat+o.getHeight()/2*r;t=new OpenLayers.Bounds(l,d,c,p)}else{var u=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),m=this.map.getLonLatFromPixel({x:e.right,y:e.top});t=new OpenLayers.Bounds(u.lon,u.lat,m.lon,m.lat)}var h=this.map.getZoom(),g=this.map.getSize(),v={x:g.w/2,y:g.h/2},f=this.map.getZoomForExtent(t),y=this.map.getResolution(),b=this.map.getResolutionForZoom(f);if(y==b)this.map.setCenter(this.map.getLonLatFromPixel(a));else{var L={x:(y*a.x-b*v.x)/(y-b),y:(y*a.y-b*v.y)/(y-b)};this.map.zoomTo(f,L)}h==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(h+(this.out?-1:1))}else this.zoomOnClick&&(this.out?this.map.zoomTo(this.map.getZoom()-1,e):this.map.zoomTo(this.map.getZoom()+1,e))},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:0,documentDrag:!1,kinetic:null,enableKinetic:!0,kineticInterval:10,draw:function(){if(this.enableKinetic&&OpenLayers.Kinetic){var e={interval:this.kineticInterval};"object"==typeof this.enableKinetic&&(e=OpenLayers.Util.extend(e,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(e)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(e){this.kinetic&&this.kinetic.update(e),this.panned=!0,this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!0,animate:!1})},panMapDone:function(e){if(this.panned){var t=null;if(this.kinetic&&(t=this.kinetic.end(e)),this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!!t,animate:!1}),t){var a=this;this.kinetic.move(t,function(e,t,i){a.map.pan(e,t,{dragging:!i,animate:!1})})}this.panned=!1}},CLASS_NAME:"OpenLayers.Control.DragPan"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False);var e={click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},t={double:!0,stopDouble:!0};this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw();var a=this.map.fractionalZoom?{}:{cumulative:!1,interval:50,maxDelta:6};this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},OpenLayers.Util.extend(a,this.mouseWheelOptions)),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},defaultDblRightClick:function(e){this.map.zoomTo(this.map.zoom-1,e.xy)},wheelChange:function(e,t){this.map.fractionalZoom||(t=Math.round(t));var a=this.map.getZoom(),i=a+t;i=Math.max(i,0),i=Math.min(i,this.map.getNumZoomLevels()),i!==a&&this.map.zoomTo(i,e.xy)},wheelUp:function(e,t){this.wheelChange(e,t||1)},wheelDown:function(e,t){this.wheelChange(e,t||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(e,t,a){OpenLayers.Control.prototype.initialize.apply(this,[a]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(e,t){this.layer.events.triggerEvent("sketchmodified",{vertex:e,feature:t})},create:function(e,t){this.layer.events.triggerEvent("sketchstarted",{vertex:e,feature:t})}},this.callbacks),this.layer=e,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:e.renderers,rendererOptions:e.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi);var i=this.layer.styleMap&&this.layer.styleMap.styles.temporary;i&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({default:i})})),this.handler=new t(this,this.callbacks,this.handlerOptions)},drawFeature:function(e){var t=new OpenLayers.Feature.Vector(e),a=this.layer.events.triggerEvent("sketchcomplete",{feature:t});a!==!1&&(t.state=OpenLayers.State.INSERT,this.layer.addFeatures([t]),this.featureAdded(t),this.events.triggerEvent("featureadded",{feature:t}))},insertXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertXY(e,t)},insertDeltaXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeltaXY(e,t)},insertDirectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDirectionLength(e,t)},insertDeflectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(e,t)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(e){var t=this.layer.getLonLatFromViewPortPx(e),a=new OpenLayers.Geometry.Point(t.lon,t.lat);this.point=new OpenLayers.Feature.Vector(a),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(e){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var t,a,i=this.point.geometry,s=this.control.layer.features,r=s.length-1;r>=0;--r)if(t=s[r].geometry,(t instanceof OpenLayers.Geometry.Polygon||t instanceof OpenLayers.Geometry.MultiPolygon)&&t.intersects(i)){a=s[r],this.control.layer.removeFeatures([a],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),a.geometry.addComponent(this.line.geometry),this.polygon=a,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(e){var t=e.vertex,a=this.line.geometry.components;if(!this.polygon.geometry.intersects(t)){var i=a[a.length-3];t.x=i.x,t.y=i.y}},finishGeometry:function(){var e=this.line.geometry.components.length-2;this.line.geometry.removeComponent(this.line.geometry.components[e]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var e=this.line.geometry,t=0!==e.getArea();if(t){for(var a=this.polygon.geometry.components,i=a.length-2;i>=0;--i)if(e.intersects(a[i])){t=!1;break}if(t){e:for(var i=a.length-2;i>0;--i)for(var s=a[i].components,r=0,o=s.length;r<o;++r)if(e.containsPoint(s[r])){t=!1;break e}}}return t?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(e),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(e){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,e||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(e){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,e),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var e=this.polygon&&this.polygon.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPolygon([e])),e},CLASS_NAME:"OpenLayers.Handler.Polygon"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.EditingToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{citeCompliant:!1,initialize:function(e,t){OpenLayers.Control.Panel.prototype.initialize.apply(this,[t]),this.addControls([new OpenLayers.Control.Navigation]);var a=[new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Point,{displayClass:"olControlDrawFeaturePoint",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Path,{displayClass:"olControlDrawFeaturePath",handlerOptions:{citeCompliant:this.citeCompliant}}),new OpenLayers.Control.DrawFeature(e,OpenLayers.Handler.Polygon,{displayClass:"olControlDrawFeaturePolygon",handlerOptions:{citeCompliant:this.citeCompliant}})];this.addControls(a)},draw:function(){var e=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),e},CLASS_NAME:"OpenLayers.Control.EditingToolbar"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.BBOX=OpenLayers.Class(OpenLayers.Strategy,{bounds:null,resolution:null,ratio:2,resFactor:null,response:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&(this.layer.events.on({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),this.update()),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({moveend:this.update,refresh:this.update,visibilitychanged:this.update,scope:this}),e},update:function(e){var t=this.getMapBounds();null!==t&&(e&&e.force||this.layer.visibility&&this.layer.calculateInRange()&&this.invalidBounds(t))&&(this.calculateBounds(t),this.resolution=this.layer.map.getResolution(),this.triggerRead(e))},getMapBounds:function(){if(null===this.layer.map)return null;var e=this.layer.map.getExtent();return e&&!this.layer.projection.equals(this.layer.map.getProjectionObject())&&(e=e.clone().transform(this.layer.map.getProjectionObject(),this.layer.projection)),e},invalidBounds:function(e){e||(e=this.getMapBounds());var t=!this.bounds||!this.bounds.containsBounds(e);if(!t&&this.resFactor){var a=this.resolution/this.layer.map.getResolution();t=a>=this.resFactor||a<=1/this.resFactor}return t},calculateBounds:function(e){e||(e=this.getMapBounds());var t=e.getCenterLonLat(),a=e.getWidth()*this.ratio,i=e.getHeight()*this.ratio;this.bounds=new OpenLayers.Bounds(t.lon-a/2,t.lat-i/2,t.lon+a/2,t.lat+i/2)},triggerRead:function(e){!this.response||e&&e.noAbort===!0||(this.layer.protocol.abort(this.response),this.layer.events.triggerEvent("loadend"));var t={filter:this.createFilter()};this.layer.events.triggerEvent("loadstart",t),this.response=this.layer.protocol.read(OpenLayers.Util.applyDefaults({filter:t.filter,callback:this.merge,scope:this},e))},createFilter:function(){var e=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,value:this.bounds,projection:this.layer.projection});return this.layer.filter&&(e=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.layer.filter,e]})),e},merge:function(e){if(this.layer.destroyFeatures(),e.success()){var t=e.features;if(t&&t.length>0){var a=this.layer.projection,i=this.layer.map.getProjectionObject();if(!i.equals(a))for(var s,r=0,o=t.length;r<o;++r)s=t[r].geometry,s&&s.transform(a,i);this.layer.addFeatures(t)}}else this.bounds=null;this.response=null,this.layer.events.triggerEvent("loadend",{response:e})},CLASS_NAME:"OpenLayers.Strategy.BBOX"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.WorldWind=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{},isBaseLayer:!0,lzd:null,zoomLevels:null,initialize:function(e,t,a,i,s,r){this.lzd=a,this.zoomLevels=i;var o=[];o.push(e,t,s,r),OpenLayers.Layer.Grid.prototype.initialize.apply(this,o),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS)},getZoom:function(){var e=this.map.getZoom();this.map.getMaxExtent();return e-=Math.log(this.maxResolution/(this.lzd/512))/Math.log(2)},getURL:function(e){e=this.adjustBounds(e);var t=this.getZoom(),a=this.map.getMaxExtent(),i=this.lzd/Math.pow(2,this.getZoom()),s=Math.floor((e.left-a.left)/i),r=Math.floor((e.bottom-a.bottom)/i);return this.map.getResolution()<=this.lzd/512&&this.getZoom()<=this.zoomLevels?this.getFullRequestString({L:t,X:s,Y:r}):OpenLayers.Util.getImageLocation("blank.gif")},CLASS_NAME:"OpenLayers.Layer.WorldWind"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.CSW=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.CSW.DEFAULTS);var t=OpenLayers.Protocol.CSW["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported CSW version: "+e.version;return new t(e)},OpenLayers.Protocol.CSW.DEFAULTS={version:"2.0.2"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMTSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",yx:{"urn:ogc:def:crs:EPSG::4326":!0},createLayer:function(e,t){if(!("layer"in t))throw new Error("Missing property 'layer' in configuration.");for(var a,i=e.contents,s=(i.layers,0),r=i.layers.length;s<r;++s)if(i.layers[s].identifier===t.layer){a=i.layers[s];break}if(!a)throw new Error("Layer not found");var o=t.format;!o&&a.formats&&a.formats.length&&(o=a.formats[0]);var n;if(t.matrixSet?n=i.tileMatrixSets[t.matrixSet]:a.tileMatrixSetLinks.length>=1&&(n=i.tileMatrixSets[a.tileMatrixSetLinks[0].tileMatrixSet]),!n)throw new Error("matrixSet not found");for(var l,s=0,r=a.styles.length;s<r&&(l=a.styles[s],!l.isDefault);++s);var c=t.requestEncoding;if(!c&&(c="KVP",e.operationsMetadata.GetTile.dcp.http)){var d=e.operationsMetadata.GetTile.dcp.http;if(d.get[0].constraints){var p=d.get[0].constraints,u=p.GetEncoding.allowedValues;u.KVP||!u.REST&&!u.RESTful||(c="REST")}}var m=[],h=t.params||{};delete t.params;for(var g=0,v=a.dimensions.length;g<v;g++){var f=a.dimensions[g];m.push(f.identifier),h.hasOwnProperty(f.identifier)||(h[f.identifier]=f.default)}var y=t.projection||n.supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),b=t.units||("EPSG:4326"===y?"degrees":"m"),L=[];for(var w in n.matrixIds)n.matrixIds.hasOwnProperty(w)&&L.push(28e-5*n.matrixIds[w].scaleDenominator/OpenLayers.METERS_PER_INCH/OpenLayers.INCHES_PER_UNIT[b]);var O;if("REST"===c&&a.resourceUrls){O=[];for(var x,S=(a.resourceUrls,0),C=a.resourceUrls.length;S<C;++S)x=a.resourceUrls[S],x.format===o&&"tile"===x.resourceType&&O.push(x.template)}else{var E=e.operationsMetadata.GetTile.dcp.http.get;O=[];for(var k,s=0,r=E.length;s<r;s++)k=E[s].constraints,(!k||k&&k.GetEncoding.allowedValues[c])&&O.push(E[s].url)}return new OpenLayers.Layer.WMTS(OpenLayers.Util.applyDefaults(t,{url:O,requestEncoding:c,name:a.title,style:l.identifier,format:o,matrixIds:n.matrixIds,matrixSet:n.identifier,projection:y,units:b,resolutions:t.isBaseLayer===!1?void 0:L,serverResolutions:L,tileFullExtent:n.bounds,dimensions:m,params:h}))},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Google.v3={DEFAULTS:{sphericalMercator:!0,projection:"EPSG:900913"},animationEnabled:!0,loadMapObject:function(){this.type||(this.type=google.maps.MapTypeId.ROADMAP);var e,t=OpenLayers.Layer.Google.cache[this.map.id];if(t)e=t.mapObject,++t.count;else{var a=this.map.getCenter(),i=document.createElement("div");i.className="olForeignContainer",i.style.width="100%",i.style.height="100%",e=new google.maps.Map(i,{center:a?new google.maps.LatLng(a.lat,a.lon):new google.maps.LatLng(0,0),zoom:this.map.getZoom()||0,mapTypeId:this.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1});var s=document.createElement("div");s.style.width="100%",s.style.height="100%",e.controls[google.maps.ControlPosition.TOP_LEFT].push(s),t={googleControl:s,mapObject:e,count:1},OpenLayers.Layer.Google.cache[this.map.id]=t}this.mapObject=e,this.setGMapVisibility(this.visibility)},onMapResize:function(){this.visibility&&google.maps.event.trigger(this.mapObject,"resize")},setGMapVisibility:function(e){var t=OpenLayers.Layer.Google.cache[this.map.id],a=this.map;if(t){for(var i,s=this.type,r=a.layers,o=r.length-1;o>=0;--o)if(i=r[o],i instanceof OpenLayers.Layer.Google&&i.visibility===!0&&i.inRange===!0){s=i.type,e=!0;break}var n=this.mapObject.getDiv();if(e===!0){if(n.parentNode!==a.div){if(t.rendered)t.googleControl.appendChild(a.viewPortDiv);else{n.style.visibility="hidden";var l=this;google.maps.event.addListenerOnce(this.mapObject,"tilesloaded",function(){t.rendered=!0,n.style.visibility="",+l.setGMapVisibility(!0),l.moveTo(l.map.getCenter()),t.googleControl.appendChild(a.viewPortDiv),+l.setGMapVisibility(l.visible)})}a.div.appendChild(n),+google.maps.event.trigger(this.mapObject,"resize")}this.mapObject.setMapTypeId(s)}else t.googleControl.hasChildNodes()&&(a.div.appendChild(a.viewPortDiv),a.div.removeChild(n))}},getMapContainer:function(){return this.mapObject.getDiv()},getMapObjectBoundsFromOLBounds:function(e){var t=null;if(null!=e){var a=this.sphericalMercator?this.inverseMercator(e.bottom,e.left):new OpenLayers.LonLat(e.bottom,e.left),i=this.sphericalMercator?this.inverseMercator(e.top,e.right):new OpenLayers.LonLat(e.top,e.right);t=new google.maps.LatLngBounds(new google.maps.LatLng(a.lat,a.lon),new google.maps.LatLng(i.lat,i.lon))}return t},getMapObjectLonLatFromMapObjectPixel:function(e){var t=this.map.getSize(),a=this.getLongitudeFromMapObjectLonLat(this.mapObject.center),i=this.getLatitudeFromMapObjectLonLat(this.mapObject.center),s=this.map.getResolution(),r=e.x-t.w/2,o=e.y-t.h/2,n=new OpenLayers.LonLat(a+r*s,i-o*s);return this.wrapDateLine&&(n=n.wrapDateLine(this.maxExtent)),this.getMapObjectLonLatFromLonLat(n.lon,n.lat)},getMapObjectPixelFromMapObjectLonLat:function(e){var t=this.getLongitudeFromMapObjectLonLat(e),a=this.getLatitudeFromMapObjectLonLat(e),i=this.map.getResolution(),s=this.map.getExtent();return this.getMapObjectPixelFromXY(1/i*(t-s.left),1/i*(s.top-a))},setMapObjectCenter:function(e,t){if(this.animationEnabled===!1&&t!=this.mapObject.zoom){var a=this.getMapContainer();google.maps.event.addListenerOnce(this.mapObject,"idle",function(){a.style.visibility=""}),a.style.visibility="hidden"}this.mapObject.setOptions({center:e,zoom:t})},getMapObjectZoomFromMapObjectBounds:function(e){return this.mapObject.getBoundsZoomLevel(e)},getMapObjectLonLatFromLonLat:function(e,t){var a;if(this.sphericalMercator){var i=this.inverseMercator(e,t);a=new google.maps.LatLng(i.lat,i.lon)}else a=new google.maps.LatLng(t,e);return a},getMapObjectPixelFromXY:function(e,t){return new google.maps.Point(e,t)}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WPSDescribeProcess=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{wps:"http://www.opengis.net/wps/1.0.0",ows:"http://www.opengis.net/ows/1.1",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",defaultPrefix:"wps",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wps:{ProcessDescriptions:function(e,t){t.processDescriptions={},this.readChildNodes(e,t.processDescriptions)},ProcessDescription:function(e,t){var a=this.getAttributeNS(e,this.namespaces.wps,"processVersion"),i={processVersion:a,statusSupported:"true"===e.getAttribute("statusSupported"),storeSupported:"true"===e.getAttribute("storeSupported")};this.readChildNodes(e,i),t[i.identifier]=i},DataInputs:function(e,t){t.dataInputs=[],this.readChildNodes(e,t.dataInputs)},ProcessOutputs:function(e,t){t.processOutputs=[],this.readChildNodes(e,t.processOutputs)},Output:function(e,t){var a={};this.readChildNodes(e,a),t.push(a)},ComplexOutput:function(e,t){t.complexOutput={},this.readChildNodes(e,t.complexOutput)},LiteralOutput:function(e,t){t.literalOutput={},this.readChildNodes(e,t.literalOutput)},Input:function(e,t){var a={maxOccurs:parseInt(e.getAttribute("maxOccurs")),minOccurs:parseInt(e.getAttribute("minOccurs"))};this.readChildNodes(e,a),t.push(a)},BoundingBoxData:function(e,t){t.boundingBoxData={},this.readChildNodes(e,t.boundingBoxData)},CRS:function(e,t){t.CRSs||(t.CRSs={}),t.CRSs[this.getChildValue(e)]=!0},LiteralData:function(e,t){t.literalData={},this.readChildNodes(e,t.literalData)},ComplexData:function(e,t){t.complexData={},this.readChildNodes(e,t.complexData)},Default:function(e,t){t.default={},this.readChildNodes(e,t.default)},Supported:function(e,t){t.supported={},this.readChildNodes(e,t.supported)},Format:function(e,t){var a={};this.readChildNodes(e,a),t.formats||(t.formats={}),t.formats[a.mimeType]=!0},MimeType:function(e,t){t.mimeType=this.getChildValue(e)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSDescribeProcess"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(e){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){var t,a,i;e=e.replace(/[\n\r]/g," ");var s=this.regExes.typeStr.exec(e);if(s&&(a=s[1].toLowerCase(),i=s[2],this.parse[a]&&(t=this.parse[a].apply(this,[i])),this.internalProjection&&this.externalProjection))if(t&&"OpenLayers.Feature.Vector"==t.CLASS_NAME)t.geometry.transform(this.externalProjection,this.internalProjection);else if(t&&"geometrycollection"!=a&&"object"==typeof t)for(var r=0,o=t.length;r<o;r++){var n=t[r];n.geometry.transform(this.externalProjection,this.internalProjection)}return t},write:function(e){var t,a,i;e.constructor==Array?(t=e,i=!0):(t=[e],i=!1);var s=[];i&&s.push("GEOMETRYCOLLECTION(");for(var r=0,o=t.length;r<o;++r)i&&r>0&&s.push(","),a=t[r].geometry,s.push(this.extractGeometry(a));return i&&s.push(")"),s.join("")},extractGeometry:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[t])return null;this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var a="collection"==t?"GEOMETRYCOLLECTION":t.toUpperCase(),i=a+"("+this.extract[t].apply(this,[e])+")";return i},extract:{point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push("("+this.extract.point.apply(this,[e.components[a]])+")");return t.join(",")},linestring:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extract.point.apply(this,[e.components[a]]));return t.join(",")},multilinestring:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push("("+this.extract.linestring.apply(this,[e.components[a]])+")");return t.join(",")},polygon:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push("("+this.extract.linestring.apply(this,[e.components[a]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push("("+this.extract.polygon.apply(this,[e.components[a]])+")");return t.join(",")},collection:function(e){for(var t=[],a=0,i=e.components.length;a<i;++a)t.push(this.extractGeometry.apply(this,[e.components[a]]));return t.join(",")}},parse:{point:function(e){var t=OpenLayers.String.trim(e).split(this.regExes.spaces);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t[0],t[1]))},multipoint:function(e){for(var t,a=OpenLayers.String.trim(e).split(","),i=[],s=0,r=a.length;s<r;++s)t=a[s].replace(this.regExes.trimParens,"$1"),i.push(this.parse.point.apply(this,[t]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(i))},linestring:function(e){for(var t=OpenLayers.String.trim(e).split(","),a=[],i=0,s=t.length;i<s;++i)a.push(this.parse.point.apply(this,[t[i]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(a))},multilinestring:function(e){for(var t,a=OpenLayers.String.trim(e).split(this.regExes.parenComma),i=[],s=0,r=a.length;s<r;++s)t=a[s].replace(this.regExes.trimParens,"$1"),i.push(this.parse.linestring.apply(this,[t]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(i))},polygon:function(e){for(var t,a,i,s=OpenLayers.String.trim(e).split(this.regExes.parenComma),r=[],o=0,n=s.length;o<n;++o)t=s[o].replace(this.regExes.trimParens,"$1"),a=this.parse.linestring.apply(this,[t]).geometry,i=new OpenLayers.Geometry.LinearRing(a.components),r.push(i);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(r))},multipolygon:function(e){for(var t,a=OpenLayers.String.trim(e).split(this.regExes.doubleParenComma),i=[],s=0,r=a.length;s<r;++s)t=a[s].replace(this.regExes.trimParens,"$1"),i.push(this.parse.polygon.apply(this,[t]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(i))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=OpenLayers.String.trim(e).split("|"),a=[],i=0,s=t.length;i<s;++i)a.push(OpenLayers.Format.WKT.prototype.read.apply(this,[t[i]]));return a}},CLASS_NAME:"OpenLayers.Format.WKT"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.WPSProcess=OpenLayers.Class({client:null,server:null,identifier:null,description:null,localWPS:"http://geoserver/wps",formats:null,chained:0,executeCallbacks:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.executeCallbacks=[],this.formats={"application/wkt":new OpenLayers.Format.WKT,"application/json":new OpenLayers.Format.GeoJSON}},describe:function(e){if(e=e||{},this.description){if(e.callback){var t=this.description;window.setTimeout(function(){e.callback.call(e.scope,t)},0)}}else this.client.describeProcess(this.server,this.identifier,function(t){this.description||this.parseDescription(t),e.callback&&e.callback.call(e.scope,this.description)},this)},configure:function(e){return this.describe({callback:function(){var t,a,i,s=this.description,r=e.inputs;for(a=0,i=s.dataInputs.length;a<i;++a)t=s.dataInputs[a],this.setInputData(t,r[t.identifier]);e.callback&&e.callback.call(e.scope)},scope:this}),this},execute:function(e){this.configure({inputs:e.inputs,callback:function(){var t=this,a=this.getOutputIndex(t.description.processOutputs,e.output);t.setResponseForm({outputIndex:a}),function i(){return OpenLayers.Util.removeItem(t.executeCallbacks,i),0!==t.chained?void t.executeCallbacks.push(i):void OpenLayers.Request.POST({url:t.client.servers[t.server].url,data:(new OpenLayers.Format.WPSExecute).write(t.description),success:function(i){var s=t.description.processOutputs[a],r=t.findMimeType(s.complexOutput.supported.formats),o=t.formats[r].read(i.responseText);if(o instanceof OpenLayers.Feature.Vector&&(o=[o]),e.success){var n={};n[e.output||"result"]=o,e.success.call(e.scope,n)}},scope:t})}()},scope:this})},output:function(e){return new OpenLayers.WPSProcess.ChainLink({process:this,output:e})},parseDescription:function(e){var t=this.client.servers[this.server];this.description=(new OpenLayers.Format.WPSDescribeProcess).read(t.processDescription[this.identifier]).processDescriptions[this.identifier]},setInputData:function(e,t){if(delete e.data,delete e.reference,t instanceof OpenLayers.WPSProcess.ChainLink)++this.chained,e.reference={method:"POST",href:t.process.server===this.server?this.localWPS:this.client.servers[t.process.server].url},t.process.describe({callback:function(){--this.chained,this.chainProcess(e,t)},scope:this});else{e.data={};var a=e.complexData;if(a){var i=this.findMimeType(a.supported.formats);e.data.complexData={mimeType:i,value:this.formats[i].write(this.toFeatures(t))}}else e.data.literalData={value:t}}},setResponseForm:function(e){e=e||{};var t=this.description.processOutputs[e.outputIndex||0];this.description.responseForm={rawDataOutput:{identifier:t.identifier,mimeType:this.findMimeType(t.complexOutput.supported.formats,e.supportedFormats)}}},getOutputIndex:function(e,t){var a;if(t){for(var i=e.length-1;i>=0;--i)if(e[i].identifier===t){a=i;break}}else a=0;return a},chainProcess:function(e,t){var a=this.getOutputIndex(t.process.description.processOutputs,t.output);e.reference.mimeType=this.findMimeType(e.complexData.supported.formats,t.process.description.processOutputs[a].complexOutput.supported.formats);var i={};for(i[e.reference.mimeType]=!0,t.process.setResponseForm({outputIndex:a,supportedFormats:i}),e.reference.body=t.process.description;this.executeCallbacks.length>0;)this.executeCallbacks[0]()},toFeatures:function(e){var t=OpenLayers.Util.isArray(e);t||(e=[e]);for(var a,i=new Array(e.length),s=0,r=e.length;s<r;++s)a=e[s],i[s]=a instanceof OpenLayers.Feature.Vector?a:new OpenLayers.Feature.Vector(a);return t?i:i[0]},findMimeType:function(e,t){t=t||this.formats;for(var a in e)if(a in t)return a},CLASS_NAME:"OpenLayers.WPSProcess"}),OpenLayers.WPSProcess.ChainLink=OpenLayers.Class({process:null,output:null,initialize:function(e){OpenLayers.Util.extend(this,e)},CLASS_NAME:"OpenLayers.WPSProcess.ChainLink"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.WPSClient=OpenLayers.Class({servers:null,version:"1.0.0",lazy:!1,events:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.servers={};for(var t in e.servers)this.servers[t]="string"==typeof e.servers[t]?{url:e.servers[t],version:this.version,processDescription:{}}:e.servers[t]},execute:function(e){var t=this.getProcess(e.server,e.process);t.execute({inputs:e.inputs,success:e.success,scope:e.scope})},getProcess:function(e,t){var a=new OpenLayers.WPSProcess({client:this,server:e,identifier:t});return this.lazy||a.describe(),a},describeProcess:function(e,t,a,i){var s=this.servers[e];s.processDescription[t]?window.setTimeout(function(){a.call(i,s.processDescription[t])},0):t in s.processDescription?this.events.register("describeprocess",this,function e(s){s.identifier===t&&(this.events.unregister("describeprocess",this,e),a.call(i,s.raw))}):(s.processDescription[t]=null,OpenLayers.Request.GET({url:s.url,params:{SERVICE:"WPS",VERSION:s.version,REQUEST:"DescribeProcess",IDENTIFIER:t},success:function(e){s.processDescription[t]=e.responseText,this.events.triggerEvent("describeprocess",{identifier:t,raw:e.responseText})},scope:this}))},destroy:function(){this.events.destroy(),this.events=null,this.servers=null},CLASS_NAME:"OpenLayers.WPSClient"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.CSWGetRecords.v2_0_2=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{csw:"http://www.opengis.net/cat/csw/2.0.2",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",gmd:"http://www.isotc211.org/2005/gmd",geonet:"http://www.fao.org/geonetwork",ogc:"http://www.opengis.net/ogc",ows:"http://www.opengis.net/ows",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"csw",version:"2.0.2",schemaLocation:"http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",requestId:null,resultType:null,outputFormat:null,outputSchema:null,startPosition:null,maxRecords:null,DistributedSearch:null,ResponseHandler:null,Query:null,regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{csw:{GetRecordsResponse:function(e,t){t.records=[],this.readChildNodes(e,t);var a=this.getAttributeNS(e,"","version");""!=a&&(t.version=a)},RequestId:function(e,t){t.RequestId=this.getChildValue(e)},SearchStatus:function(e,t){t.SearchStatus={};var a=this.getAttributeNS(e,"","timestamp");""!=a&&(t.SearchStatus.timestamp=a)},SearchResults:function(e,t){this.readChildNodes(e,t);for(var a=e.attributes,i={},s=0,r=a.length;s<r;++s)"numberOfRecordsMatched"==a[s].name||"numberOfRecordsReturned"==a[s].name||"nextRecord"==a[s].name?i[a[s].name]=parseInt(a[s].nodeValue):i[a[s].name]=a[s].nodeValue;t.SearchResults=i},SummaryRecord:function(e,t){var a={type:"SummaryRecord"};this.readChildNodes(e,a),t.records.push(a)},BriefRecord:function(e,t){var a={type:"BriefRecord"};this.readChildNodes(e,a),t.records.push(a)},DCMIRecord:function(e,t){var a={type:"DCMIRecord"};this.readChildNodes(e,a),t.records.push(a)},Record:function(e,t){var a={type:"Record"};this.readChildNodes(e,a),t.records.push(a)},"*":function(e,t){var a=e.localName||e.nodeName.split(":").pop();t[a]=this.getChildValue(e)}},geonet:{info:function(e,t){var a={};this.readChildNodes(e,a),t.gninfo=a}},dc:{"*":function(e,t){var a=e.localName||e.nodeName.split(":").pop();OpenLayers.Util.isArray(t[a])||(t[a]=[]);for(var i={},s=e.attributes,r=0,o=s.length;r<o;++r)i[s[r].name]=s[r].nodeValue;i.value=this.getChildValue(e),""!=i.value&&t[a].push(i)}},dct:{"*":function(e,t){var a=e.localName||e.nodeName.split(":").pop();OpenLayers.Util.isArray(t[a])||(t[a]=[]),t[a].push(this.getChildValue(e))}},ows:OpenLayers.Util.applyDefaults({BoundingBox:function(e,t){t.bounds&&(t.BoundingBox=[{crs:t.projection,value:[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top]}],delete t.projection,delete t.bounds),OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this,arguments)}},OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)},write:function(e){var t=this.writeNode("csw:GetRecords",e);return t.setAttribute("xmlns:gmd",this.namespaces.gmd),OpenLayers.Format.XML.prototype.write.apply(this,[t])},writers:{csw:{GetRecords:function(e){e||(e={});var t=this.createElementNSPlus("csw:GetRecords",{attributes:{service:"CSW",version:this.version,requestId:e.requestId||this.requestId,resultType:e.resultType||this.resultType,outputFormat:e.outputFormat||this.outputFormat,outputSchema:e.outputSchema||this.outputSchema,startPosition:e.startPosition||this.startPosition,maxRecords:e.maxRecords||this.maxRecords}});(e.DistributedSearch||this.DistributedSearch)&&this.writeNode("csw:DistributedSearch",e.DistributedSearch||this.DistributedSearch,t);var a=e.ResponseHandler||this.ResponseHandler;if(OpenLayers.Util.isArray(a)&&a.length>0)for(var i=0,s=a.length;i<s;i++)this.writeNode("csw:ResponseHandler",a[i],t);return this.writeNode("Query",e.Query||this.Query,t),t},DistributedSearch:function(e){var t=this.createElementNSPlus("csw:DistributedSearch",{attributes:{hopCount:e.hopCount}});return t},ResponseHandler:function(e){var t=this.createElementNSPlus("csw:ResponseHandler",{value:e.value});return t},Query:function(e){e||(e={});var t=this.createElementNSPlus("csw:Query",{attributes:{typeNames:e.typeNames||"csw:Record"}}),a=e.ElementName;if(OpenLayers.Util.isArray(a)&&a.length>0)for(var i=0,s=a.length;i<s;i++)this.writeNode("csw:ElementName",a[i],t);else this.writeNode("csw:ElementSetName",e.ElementSetName||{value:"summary"},t);return e.Constraint&&this.writeNode("csw:Constraint",e.Constraint,t),e.SortBy&&this.writeNode("ogc:SortBy",e.SortBy,t),t},ElementName:function(e){var t=this.createElementNSPlus("csw:ElementName",{value:e.value});return t},ElementSetName:function(e){var t=this.createElementNSPlus("csw:ElementSetName",{attributes:{typeNames:e.typeNames},value:e.value});return t},Constraint:function(e){var t=this.createElementNSPlus("csw:Constraint",{attributes:{version:e.version}});if(e.Filter){var a=new OpenLayers.Format.Filter({version:e.version});t.appendChild(a.write(e.Filter))}else if(e.CqlText){var i=this.createElementNSPlus("CqlText",{value:e.CqlText.value});t.appendChild(i)}return t}},ogc:OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc},CLASS_NAME:"OpenLayers.Format.CSWGetRecords.v2_0_2"}),/* ======================================================================
    Rico/license.js
   ====================================================================== */
/**
 * @license Apache 2 
 *  
 * Contains portions of Rico <http://openrico.org/>
 * 
 * Copyright 2005 Sabre Airline Solutions  
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you
 * may not use this file except in compliance with the License. You
 * may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0  
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * permissions and limitations under the License. 
 */
/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Marker.Box=OpenLayers.Class(OpenLayers.Marker,{bounds:null,div:null,initialize:function(e,t,a){this.bounds=e,this.div=OpenLayers.Util.createDiv(),this.div.style.overflow="hidden",this.events=new OpenLayers.Events(this,this.div),this.setBorder(t,a)},destroy:function(){this.bounds=null,this.div=null,OpenLayers.Marker.prototype.destroy.apply(this,arguments)},setBorder:function(e,t){e||(e="red"),t||(t=2),this.div.style.border=t+"px solid "+e},draw:function(e,t){return OpenLayers.Util.modifyDOMElement(this.div,null,e,t),this.div},onScreen:function(){var e=!1;if(this.map){var t=this.map.getExtent();e=t.containsBounds(this.bounds,!0,!0)}return e},display:function(e){this.div.style.display=e?"":"none"},CLASS_NAME:"OpenLayers.Marker.Box"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Text=OpenLayers.Class(OpenLayers.Format,{defaultStyle:null,extractStyles:!0,initialize:function(e){e=e||{},e.extractStyles!==!1&&(e.defaultStyle={externalGraphic:OpenLayers.Util.getImageLocation("marker.png"),graphicWidth:21,graphicHeight:25,graphicXOffset:-10.5,graphicYOffset:-12.5}),OpenLayers.Format.prototype.initialize.apply(this,[e])},read:function(e){for(var t,a=e.split("\n"),i=[],s=0;s<a.length-1;s++){var r=a[s].replace(/^\s*/,"").replace(/\s*$/,"");if("#"!=r.charAt(0))if(t){for(var o=r.split("\t"),n=new OpenLayers.Geometry.Point(0,0),l={},c=this.defaultStyle?OpenLayers.Util.applyDefaults({},this.defaultStyle):null,d=!1,p=0;p<o.length;p++)if(o[p])if("point"==t[p]){var u=o[p].split(",");n.y=parseFloat(u[0]),n.x=parseFloat(u[1]),d=!0}else if("lat"==t[p])n.y=parseFloat(o[p]),d=!0;else if("lon"==t[p])n.x=parseFloat(o[p]),d=!0;else if("title"==t[p])l.title=o[p];else if("image"==t[p]||"icon"==t[p]&&c)c.externalGraphic=o[p];else if("iconSize"==t[p]&&c){var m=o[p].split(",");c.graphicWidth=parseFloat(m[0]),c.graphicHeight=parseFloat(m[1])}else if("iconOffset"==t[p]&&c){var h=o[p].split(",");c.graphicXOffset=parseFloat(h[0]),c.graphicYOffset=parseFloat(h[1])}else"description"==t[p]?l.description=o[p]:"overflow"==t[p]?l.overflow=o[p]:l[t[p]]=o[p];if(d){this.internalProjection&&this.externalProjection&&n.transform(this.externalProjection,this.internalProjection);var g=new OpenLayers.Feature.Vector(n,l,c);i.push(g)}}else t=r.split("\t")}return i},CLASS_NAME:"OpenLayers.Format.Text"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Text=OpenLayers.Class(OpenLayers.Layer.Markers,{location:null,features:null,formatOptions:null,selectedFeature:null,initialize:function(e,t){OpenLayers.Layer.Markers.prototype.initialize.apply(this,arguments),this.features=[]},destroy:function(){OpenLayers.Layer.Markers.prototype.destroy.apply(this,arguments),this.clearFeatures(),this.features=null},loadText:function(){if(!this.loaded&&null!=this.location){var e=function(e){this.events.triggerEvent("loadend")};this.events.triggerEvent("loadstart"),OpenLayers.Request.GET({url:this.location,success:this.parseData,failure:e,scope:this}),this.loaded=!0}},moveTo:function(e,t,a){OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments),this.visibility&&!this.loaded&&this.loadText()},parseData:function(e){var t=e.responseText,a={};OpenLayers.Util.extend(a,this.formatOptions),this.map&&!this.projection.equals(this.map.getProjectionObject())&&(a.externalProjection=this.projection,a.internalProjection=this.map.getProjectionObject());for(var i=new OpenLayers.Format.Text(a),s=i.read(t),r=0,o=s.length;r<o;r++){var n,l,c,d={},p=s[r];n=new OpenLayers.LonLat(p.geometry.x,p.geometry.y),p.style.graphicWidth&&p.style.graphicHeight&&(l=new OpenLayers.Size(p.style.graphicWidth,p.style.graphicHeight)),void 0!==p.style.graphicXOffset&&void 0!==p.style.graphicYOffset&&(c=new OpenLayers.Pixel(p.style.graphicXOffset,p.style.graphicYOffset)),null!=p.style.externalGraphic?d.icon=new OpenLayers.Icon(p.style.externalGraphic,l,c):(d.icon=OpenLayers.Marker.defaultIcon(),null!=l&&d.icon.setSize(l)),null!=p.attributes.title&&null!=p.attributes.description&&(d.popupContentHTML="<h2>"+p.attributes.title+"</h2><p>"+p.attributes.description+"</p>"),d.overflow=p.attributes.overflow||"auto";var u=new OpenLayers.Feature(this,n,d);this.features.push(u);var m=u.createMarker();null!=p.attributes.title&&null!=p.attributes.description&&m.events.register("click",u,this.markerClick),this.addMarker(m)}this.events.triggerEvent("loadend")},markerClick:function(e){var t=this==this.layer.selectedFeature;this.layer.selectedFeature=t?null:this;for(var a=0,i=this.layer.map.popups.length;a<i;a++)this.layer.map.removePopup(this.layer.map.popups[a]);t||this.layer.map.addPopup(this.createPopup()),OpenLayers.Event.stop(e)},clearFeatures:function(){if(null!=this.features)for(;this.features.length>0;){var e=this.features[0];OpenLayers.Util.removeItem(this.features,e),e.destroy()}},CLASS_NAME:"OpenLayers.Layer.Text"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(e,t,a){a&&a.layerOptions&&a.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.Drag.prototype.initialize.apply(this,[e,t,a]),this.options=a?a:{}},setOptions:function(e){OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e)},activate:function(){var e=!1;if(OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)){var t=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,t),this.map.addLayer(this.layer),e=!0}return e},deactivate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),this.layer=null,this.feature=null,e=!0),e},down:function(e){this.fixedRadius=!!this.radius;var t=this.layer.getLonLatFromViewPortPx(e.xy);this.origin=new OpenLayers.Geometry.Point(t.lon,t.lat),this.fixedRadius&&!this.irregular||(this.radius=this.map.getResolution()),this.persist&&this.clear(),this.feature=new OpenLayers.Feature.Vector,this.createGeometry(),this.callback("create",[this.origin,this.feature]),this.layer.addFeatures([this.feature],{silent:!0}),this.layer.drawFeature(this.feature,this.style)},move:function(e){var t=this.layer.getLonLatFromViewPortPx(e.xy),a=new OpenLayers.Geometry.Point(t.lon,t.lat);if(this.irregular){var i=Math.sqrt(2)*Math.abs(a.y-this.origin.y)/2;this.radius=Math.max(this.map.getResolution()/2,i)}else this.fixedRadius?this.origin=a:(this.calculateAngle(a,e),this.radius=Math.max(this.map.getResolution()/2,a.distanceTo(this.origin)));if(this.modifyGeometry(),this.irregular){var s,r=a.x-this.origin.x,o=a.y-this.origin.y;s=0==o?r/(this.radius*Math.sqrt(2)):r/o,this.feature.geometry.resize(1,this.origin,s),this.feature.geometry.move(r/2,o/2)}this.layer.drawFeature(this.feature,this.style)},up:function(e){this.finalize(),this.start==this.last&&this.callback("done",[e.xy])},out:function(e){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-.5),this.snapAngle&&(this.angle+=this.snapAngle*(Math.PI/180)),this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,this.sides,this.snapAngle)},modifyGeometry:function(){var e,t,a=this.feature.geometry.components[0];a.components.length!=this.sides+1&&(this.createGeometry(),a=this.feature.geometry.components[0]);for(var i=0;i<this.sides;++i)t=a.components[i],e=this.angle+2*i*Math.PI/this.sides,t.x=this.origin.x+this.radius*Math.cos(e),t.y=this.origin.y+this.radius*Math.sin(e),t.clearBounds()},calculateAngle:function(e,t){var a=Math.atan2(e.y-this.origin.y,e.x-this.origin.x);if(this.snapAngle&&this.snapToggle&&!t[this.snapToggle]){var i=Math.PI/180*this.snapAngle;this.angle=Math.round(a/i)*i}else this.angle=a},cancel:function(){this.callback("cancel",null),this.finalize()},finalize:function(){this.origin=null,this.radius=this.options.radius},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(e,t){this.callbacks[e]&&this.callbacks[e].apply(this.control,[this.feature.geometry.clone()]),this.persist||"done"!=e&&"cancel"!=e||this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.SLDSelect=OpenLayers.Class(OpenLayers.Control,{clearOnDeactivate:!1,layers:null,callbacks:null,selectionSymbolizer:{Polygon:{fillColor:"#FF0000",stroke:!1},Line:{strokeColor:"#FF0000",strokeWidth:2},Point:{graphicName:"square",fillColor:"#FF0000",pointRadius:5}},layerOptions:null,sketchStyle:null,wfsCache:{},layerCache:{},initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.callbacks=OpenLayers.Util.extend({done:this.select,click:this.select},this.callbacks),this.handlerOptions=this.handlerOptions||{},this.layerOptions=OpenLayers.Util.applyDefaults(this.layerOptions,{displayInLayerSwitcher:!1,tileOptions:{maxGetUrlLength:2048}}),this.sketchStyle&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({default:this.sketchStyle})})),this.handler=new e(this,this.callbacks,this.handlerOptions)},destroy:function(){for(var e in this.layerCache)delete this.layerCache[e];for(var e in this.wfsCache)delete this.wfsCache[e];OpenLayers.Control.prototype.destroy.apply(this,arguments)},coupleLayerVisiblity:function(e){this.setVisibility(e.object.getVisibility())},createSelectionLayer:function(e){var t;return this.layerCache[e.id]?t=this.layerCache[e.id]:(t=new OpenLayers.Layer.WMS(e.name,e.url,e.params,OpenLayers.Util.applyDefaults(this.layerOptions,e.getOptions())),this.layerCache[e.id]=t,this.layerOptions.displayInLayerSwitcher===!1&&e.events.on({visibilitychanged:this.coupleLayerVisiblity,scope:t}),this.map.addLayer(t)),t},createSLD:function(e,t,a){for(var i={version:"1.0.0",namedLayers:{}},s=[e.params.LAYERS].join(",").split(","),r=0,o=s.length;r<o;r++){var n=s[r];i.namedLayers[n]={name:n,userStyles:[]};var l=this.selectionSymbolizer,c=a[r];c.type.indexOf("Polygon")>=0?l={Polygon:this.selectionSymbolizer.Polygon}:c.type.indexOf("LineString")>=0?l={Line:this.selectionSymbolizer.Line}:c.type.indexOf("Point")>=0&&(l={Point:this.selectionSymbolizer.Point});var d=t[r];i.namedLayers[n].userStyles.push({name:"default",rules:[new OpenLayers.Rule({symbolizer:l,filter:d,maxScaleDenominator:e.options.minScale})]})}return new OpenLayers.Format.SLD({srsName:this.map.getProjection()}).write(i)},parseDescribeLayer:function(e){var t=new OpenLayers.Format.WMSDescribeLayer,a=e.responseXML;a&&a.documentElement||(a=e.responseText);for(var i=t.read(a),s=[],r=null,o=0,n=i.length;o<n;o++)"WFS"==i[o].owsType&&(s.push(i[o].typeName),r=i[o].owsURL);var l={url:r,params:{SERVICE:"WFS",TYPENAME:s.toString(),REQUEST:"DescribeFeatureType",VERSION:"1.0.0"},callback:function(e){var t=new OpenLayers.Format.WFSDescribeFeatureType,a=e.responseXML;a&&a.documentElement||(a=e.responseText);var i=t.read(a);this.control.wfsCache[this.layer.id]=i,this.control._queue&&this.control.applySelection()},scope:this};OpenLayers.Request.GET(l)},getGeometryAttributes:function(e){for(var t=[],a=this.wfsCache[e.id],i=0,s=a.featureTypes.length;i<s;i++)for(var r=a.featureTypes[i],o=r.properties,n=0,l=o.length;n<l;n++){var c=o[n],d=c.type;(d.indexOf("LineString")>=0||d.indexOf("GeometryAssociationType")>=0||d.indexOf("GeometryPropertyType")>=0||d.indexOf("Point")>=0||d.indexOf("Polygon")>=0)&&t.push(c)}return t},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);if(e)for(var t=0,a=this.layers.length;t<a;t++){var i=this.layers[t];if(i&&!this.wfsCache[i.id]){var s={url:i.url,params:{SERVICE:"WMS",VERSION:i.params.VERSION,LAYERS:i.params.LAYERS,REQUEST:"DescribeLayer"},callback:this.parseDescribeLayer,scope:{layer:i,control:this}};OpenLayers.Request.GET(s)}}return e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);if(e)for(var t=0,a=this.layers.length;t<a;t++){var i=this.layers[t];if(i&&this.clearOnDeactivate===!0){var s=this.layerCache,r=s[i.id];r&&(i.events.un({visibilitychanged:this.coupleLayerVisiblity,scope:r}),r.destroy(),delete s[i.id])}}return e},setLayers:function(e){this.active?(this.deactivate(),this.layers=e,this.activate()):this.layers=e},createFilter:function(e,t){var a=null;return this.handler instanceof OpenLayers.Handler.RegularPolygon?a=this.handler.irregular===!0?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:e.name,value:t.getBounds()}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Polygon?a=new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Path?a=e.type.indexOf("Point")>=0?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:e.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:t}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):this.handler instanceof OpenLayers.Handler.Click&&(a=e.type.indexOf("Polygon")>=0?new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:e.name,value:t}):new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,property:e.name,distance:.01*this.map.getExtent().getWidth(),distanceUnits:this.map.getUnits(),value:t})),a},select:function(e){this._queue=function(){for(var t=0,a=this.layers.length;t<a;t++){for(var i=this.layers[t],s=this.getGeometryAttributes(i),r=[],o=0,n=s.length;o<n;o++){var l=s[o];if(null!==l){if(!(e instanceof OpenLayers.Geometry)){var c=this.map.getLonLatFromPixel(e.xy);e=new OpenLayers.Geometry.Point(c.lon,c.lat)}var d=this.createFilter(l,e);null!==d&&r.push(d)}}var p=this.createSelectionLayer(i);this.events.triggerEvent("selected",{layer:i,filters:r});var u=this.createSLD(i,r,s);p.mergeNewParams({SLD_BODY:u}),delete this._queue}},this.applySelection()},applySelection:function(){for(var e=!0,t=0,a=this.layers.length;t<a;t++)if(!this.wfsCache[this.layers[t].id]){e=!1;break}e&&this._queue.call(this)},CLASS_NAME:"OpenLayers.Control.SLDSelect"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Scale=OpenLayers.Class(OpenLayers.Control,{element:null,geodesic:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),this.element=OpenLayers.Util.getElement(e)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.element=document.createElement("div"),this.div.appendChild(this.element)),this.map.events.register("moveend",this,this.updateScale),this.updateScale(),this.div},updateScale:function(){var e;if(this.geodesic===!0){var t=this.map.getUnits();if(!t)return;var a=OpenLayers.INCHES_PER_UNIT;e=(this.map.getGeodesicPixelSize().w||1e-6)*a.km*OpenLayers.DOTS_PER_INCH}else e=this.map.getScale();e&&(e=e>=9500&&e<=95e4?Math.round(e/1e3)+"K":e>=95e4?Math.round(e/1e6)+"M":Math.round(e),this.element.innerHTML=OpenLayers.i18n("Scale = 1 : ${scaleDenom}",{scaleDenom:e}))},CLASS_NAME:"OpenLayers.Control.Scale"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.MapGuide=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,useHttpTile:!1,singleTile:!1,useOverlay:!1,useAsyncOverlay:!0,TILE_PARAMS:{operation:"GETTILEIMAGE",version:"1.2.0"},SINGLE_TILE_PARAMS:{operation:"GETMAPIMAGE",format:"PNG",locale:"en",clip:"1",version:"1.0.0"},OVERLAY_PARAMS:{operation:"GETDYNAMICMAPOVERLAYIMAGE",format:"PNG",locale:"en",clip:"1",version:"2.0.0"},FOLDER_PARAMS:{tileColumnsPerFolder:30,tileRowsPerFolder:30,format:"png",querystring:null},defaultSize:new OpenLayers.Size(300,300),tileOriginCorner:"tl",initialize:function(e,t,a,i){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),null!=i&&null!=i.isBaseLayer||(this.isBaseLayer="true"!=this.transparent&&1!=this.transparent),i&&null!=i.useOverlay&&(this.useOverlay=i.useOverlay),this.singleTile?this.useOverlay?(OpenLayers.Util.applyDefaults(this.params,this.OVERLAY_PARAMS),this.useAsyncOverlay||(this.params.version="1.0.0")):OpenLayers.Util.applyDefaults(this.params,this.SINGLE_TILE_PARAMS):(this.useHttpTile?OpenLayers.Util.applyDefaults(this.params,this.FOLDER_PARAMS):OpenLayers.Util.applyDefaults(this.params,this.TILE_PARAMS),this.setTileSize(this.defaultSize))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.MapGuide(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){var t,a=e.getCenterLonLat(),i=this.map.getSize();if(this.singleTile){var s={setdisplaydpi:OpenLayers.DOTS_PER_INCH,setdisplayheight:i.h*this.ratio,setdisplaywidth:i.w*this.ratio,setviewcenterx:a.lon,setviewcentery:a.lat,setviewscale:this.map.getScale()};if(this.useOverlay&&!this.useAsyncOverlay){var r={};r=OpenLayers.Util.extend(r,s),r.operation="GETVISIBLEMAPEXTENT",r.version="1.0.0",r.session=this.params.session,r.mapName=this.params.mapName,r.format="text/xml",t=this.getFullRequestString(r),OpenLayers.Request.GET({url:t,async:!1})}t=this.getFullRequestString(s)}else{var o=this.map.getResolution(),n=Math.floor((e.left-this.maxExtent.left)/o);n=Math.round(n/this.tileSize.w);var l=Math.floor((this.maxExtent.top-e.top)/o);l=Math.round(l/this.tileSize.h),t=this.useHttpTile?this.getImageFilePath({tilecol:n,tilerow:l,scaleindex:this.resolutions.length-this.map.zoom-1}):this.getFullRequestString({tilecol:n,tilerow:l,scaleindex:this.resolutions.length-this.map.zoom-1})}return t},getFullRequestString:function(e,t){var a=null==t?this.url:t;"object"==typeof a&&(a=a[Math.floor(Math.random()*a.length)]);var i=a,s=OpenLayers.Util.extend({},this.params);s=OpenLayers.Util.extend(s,e);var r=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(a));for(var o in s)o.toUpperCase()in r&&delete s[o];var n=OpenLayers.Util.getParameterString(s);if(n=n.replace(/,/g,"+"),""!=n){var l=a.charAt(a.length-1);i+="&"==l||"?"==l?n:a.indexOf("?")==-1?"?"+n:"&"+n}return i},getImageFilePath:function(e,t){var a=null==t?this.url:t;"object"==typeof a&&(a=a[Math.floor(Math.random()*a.length)]);var i=a,s="",r="";e.tilerow<0&&(s="-"),s+=0==e.tilerow?"0":Math.floor(Math.abs(e.tilerow/this.params.tileRowsPerFolder))*this.params.tileRowsPerFolder,e.tilecol<0&&(r="-"),r+=0==e.tilecol?"0":Math.floor(Math.abs(e.tilecol/this.params.tileColumnsPerFolder))*this.params.tileColumnsPerFolder;var o="/S"+Math.floor(e.scaleindex)+"/"+this.params.basemaplayergroupname+"/R"+s+"/C"+r+"/"+e.tilerow%this.params.tileRowsPerFolder+"_"+e.tilecol%this.params.tileColumnsPerFolder+"."+this.params.format;return this.params.querystring&&(o+="?"+this.params.querystring),i+=o},CLASS_NAME:"OpenLayers.Layer.MapGuide"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]);var a={done:this.measureComplete,point:this.measurePartial};this.immediate&&(a.modify=this.measureImmediate),this.callbacks=OpenLayers.Util.extend(a,this.callbacks),this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions),this.handler=new e(this,this.callbacks,this.handlerOptions)},deactivate:function(){return this.cancelDelay(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay(),this.handler.cancel()},setImmediate:function(e){this.immediate=e,this.immediate?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(e,t){var a=this.active;a&&this.deactivate(),this.handler=new e(this,this.callbacks,t),a&&this.activate()},measureComplete:function(e){this.cancelDelay(),this.measure(e,"measure")},measurePartial:function(e,t){this.cancelDelay(),t=t.clone(),this.handler.freehandMode(this.handler.evt)?this.measure(t,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null,this.measure(t,"measurepartial")},this),this.partialDelay)},measureImmediate:function(e,t,a){a&&!this.handler.freehandMode(this.handler.evt)&&(this.cancelDelay(),this.measure(t.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(e,t){var a,i;e.CLASS_NAME.indexOf("LineString")>-1?(a=this.getBestLength(e),i=1):(a=this.getBestArea(e),i=2),this.events.triggerEvent(t,{measure:a[0],units:a[1],order:i,geometry:e})},getBestArea:function(e){for(var t,a,i=this.displaySystemUnits[this.displaySystem],s=0,r=i.length;s<r&&(t=i[s],a=this.getArea(e,t),!(a>1));++s);return[a,t]},getArea:function(e,t){var a,i;this.geodesic?(a=e.getGeodesicArea(this.map.getProjectionObject()),i="m"):(a=e.getArea(),i=this.map.getUnits());var s=OpenLayers.INCHES_PER_UNIT[t];if(s){var r=OpenLayers.INCHES_PER_UNIT[i];a*=Math.pow(r/s,2)}return a},getBestLength:function(e){for(var t,a,i=this.displaySystemUnits[this.displaySystem],s=0,r=i.length;s<r&&(t=i[s],a=this.getLength(e,t),!(a>1));++s);return[a,t]},getLength:function(e,t){var a,i;this.geodesic?(a=e.getGeodesicLength(this.map.getProjectionObject()),i="m"):(a=e.getLength(),i=this.map.getUnits());var s=OpenLayers.INCHES_PER_UNIT[t];if(s){var r=OpenLayers.INCHES_PER_UNIT[i];a*=r/s}return a},CLASS_NAME:"OpenLayers.Control.Measure"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMC.v1_0_0=OpenLayers.Class(OpenLayers.Format.WMC.v1,{VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",initialize:function(e){OpenLayers.Format.WMC.v1.prototype.initialize.apply(this,[e])},read_wmc_SRS:function(e,t){var a=this.getChildValue(t);"object"!=typeof e.projections&&(e.projections={});for(var i=a.split(/ +/),s=0,r=i.length;s<r;s++)e.projections[i[s]]=!0},write_wmc_Layer:function(e){var t=OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this,[e]);if(e.srs){var a=[];for(var i in e.srs)a.push(i);t.appendChild(this.createElementDefaultNS("SRS",a.join(" ")))}t.appendChild(this.write_wmc_FormatList(e)),t.appendChild(this.write_wmc_StyleList(e)),e.dimensions&&t.appendChild(this.write_wmc_DimensionList(e)),t.appendChild(this.write_wmc_LayerExtension(e))},CLASS_NAME:"OpenLayers.Format.WMC.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(e,t,a,i,s,r,o){var n=[e,t,a,i,r,o];OpenLayers.Popup.prototype.initialize.apply(this,n),this.anchor=null!=s?s:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.anchor=null,this.relativePosition=null,OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition(),OpenLayers.Popup.prototype.show.apply(this,arguments)},moveTo:function(e){var t=this.relativePosition;this.relativePosition=this.calculateRelativePosition(e),OpenLayers.Popup.prototype.moveTo.call(this,this.calculateNewPx(e)),this.relativePosition!=t&&this.updateRelativePosition()},setSize:function(e){if(OpenLayers.Popup.prototype.setSize.apply(this,arguments),this.lonlat&&this.map){var t=this.map.getLayerPxFromLonLat(this.lonlat);this.moveTo(t)}},calculateRelativePosition:function(e){var t=this.map.getLonLatFromLayerPx(e),a=this.map.getExtent(),i=a.determineQuadrant(t);return OpenLayers.Bounds.oppositeQuadrant(i)},updateRelativePosition:function(){},calculateNewPx:function(e){var t=e.offset(this.anchor.offset),a=this.size||this.contentSize,i="t"==this.relativePosition.charAt(0);t.y+=i?-a.h:this.anchor.size.h;var s="l"==this.relativePosition.charAt(1);return t.x+=s?-a.w:this.anchor.size.w,t},CLASS_NAME:"OpenLayers.Popup.Anchored"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(e,t,a,i,s,r,o){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(e){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,r&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.imageSrc=null,this.imageSize=null,this.isAlphaImage=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var e=0;e<this.blocks.length;e++){var t=this.blocks[e];t.image&&t.div.removeChild(t.image),t.image=null,t.div&&this.groupDiv.removeChild(t.div),t.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(e){},setBorder:function(){},setOpacity:function(e){},setSize:function(e){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){if(this.padding=this.positionBlocks[this.relativePosition].padding,this.closeDiv){var e=this.getContentDivPadding();this.closeDiv.style.right=e.right+this.padding.right+"px",this.closeDiv.style.top=e.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(e){var t=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return t=t.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var e=null;for(var t in this.positionBlocks){e=t;break}for(var a=this.positionBlocks[e],i=0;i<a.blocks.length;i++){var s={};this.blocks.push(s);var r=this.id+"_FrameDecorationDiv_"+i;s.div=OpenLayers.Util.createDiv(r,null,null,null,"absolute",null,"hidden",null);var o=this.id+"_FrameDecorationImg_"+i,n=this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage;s.image=n(o,null,this.imageSize,this.imageSrc,"absolute",null,null,null),s.div.appendChild(s.image),this.groupDiv.appendChild(s.div)}},updateBlocks:function(){if(this.blocks||this.createBlocks(),this.size&&this.relativePosition){for(var e=this.positionBlocks[this.relativePosition],t=0;t<e.blocks.length;t++){var a=e.blocks[t],i=this.blocks[t],s=a.anchor.left,r=a.anchor.bottom,o=a.anchor.right,n=a.anchor.top,l=isNaN(a.size.w)?this.size.w-(o+s):a.size.w,c=isNaN(a.size.h)?this.size.h-(r+n):a.size.h;i.div.style.width=(l<0?0:l)+"px",i.div.style.height=(c<0?0:c)+"px",i.div.style.left=null!=s?s+"px":"",i.div.style.bottom=null!=r?r+"px":"",i.div.style.right=null!=o?o+"px":"",i.div.style.top=null!=n?n+"px":"",i.image.style.left=a.position.x+"px",i.image.style.top=a.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(e,t,a,i,s,r,o){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png"),OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments),this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Tile.Image.IFrame={useIFrame:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",draw:function(){var e=OpenLayers.Tile.Image.prototype.shouldDraw.call(this);if(e){var t=this.layer.getURL(this.bounds),a=this.useIFrame;this.useIFrame=null!==this.maxGetUrlLength&&!this.layer.async&&t.length>this.maxGetUrlLength;var i=a&&!this.useIFrame,s=!a&&this.useIFrame;(i||s)&&(this.imgDiv&&this.imgDiv.parentNode===this.frame&&this.frame.removeChild(this.imgDiv),this.imgDiv=null,i&&this.frame.removeChild(this.frame.firstChild))}return OpenLayers.Tile.Image.prototype.draw.apply(this,arguments)},getImage:function(){if(this.useIFrame===!0){if(!this.frame.childNodes.length){var e=document.createElement("div"),t=e.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex=1,t.backgroundImage="url("+this.blankImageUrl+")",this.frame.appendChild(e)}var a,i=this.id+"_iFrame";return parseFloat(navigator.appVersion.split("MSIE")[1])<9?(a=document.createElement('<iframe name="'+i+'">'),a.style.backgroundColor="#FFFFFF",a.style.filter="chroma(color=#FFFFFF)"):(a=document.createElement("iframe"),a.style.backgroundColor="transparent",a.name=i),a.scrolling="no",a.marginWidth="0px",a.marginHeight="0px",a.frameBorder="0",a.style.position="absolute",a.style.width="100%",a.style.height="100%",this.layer.opacity<1&&OpenLayers.Util.modifyDOMElement(a,null,null,null,null,null,null,this.layer.opacity),this.frame.appendChild(a),this.imgDiv=a,a}return OpenLayers.Tile.Image.prototype.getImage.apply(this,arguments)},createRequestForm:function(){var e=document.createElement("form");e.method="POST";var t=this.layer.params._OLSALT;t=(t?t+"_":"")+this.bounds.toBBOX(),e.action=OpenLayers.Util.urlAppend(this.layer.url,t),e.target=this.id+"_iFrame";var a,i=(this.layer.getImageSize(),OpenLayers.Util.getParameters(this.url));for(var s in i)a=document.createElement("input"),a.type="hidden",a.name=s,a.value=i[s],e.appendChild(a);return e},setImgSrc:function(e){if(this.useIFrame===!0)if(e){var t=this.createRequestForm();this.frame.appendChild(t),t.submit(),this.frame.removeChild(t)}else this.imgDiv.parentNode===this.frame&&(this.frame.removeChild(this.imgDiv),this.imgDiv=null);else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this,arguments)},onImageLoad:function(){OpenLayers.Tile.Image.prototype.onImageLoad.apply(this,arguments),this.useIFrame===!0&&(this.imgDiv.style.opacity=1,this.frame.style.opacity=this.layer.opacity)},createBackBuffer:function(){var e;return this.useIFrame===!1&&(e=OpenLayers.Tile.Image.prototype.createBackBuffer.call(this)),e}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SOSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.SOSCapabilities"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SOSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.SOSCapabilities,{namespaces:{ows:"http://www.opengis.net/ows/1.1",sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.options=e},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{gml:OpenLayers.Util.applyDefaults({name:function(e,t){t.name=this.getChildValue(e)},TimePeriod:function(e,t){t.timePeriod={},this.readChildNodes(e,t.timePeriod)},beginPosition:function(e,t){t.beginPosition=this.getChildValue(e)},endPosition:function(e,t){t.endPosition=this.getChildValue(e)}},OpenLayers.Format.GML.v3.prototype.readers.gml),sos:{Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contents={},this.readChildNodes(e,t.contents)},ObservationOfferingList:function(e,t){t.offeringList={},this.readChildNodes(e,t.offeringList)},ObservationOffering:function(e,t){var a=this.getAttributeNS(e,this.namespaces.gml,"id");t[a]={procedures:[],observedProperties:[],featureOfInterestIds:[],responseFormats:[],resultModels:[],responseModes:[]},this.readChildNodes(e,t[a])},time:function(e,t){t.time={},this.readChildNodes(e,t.time)},procedure:function(e,t){t.procedures.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},observedProperty:function(e,t){t.observedProperties.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},featureOfInterest:function(e,t){t.featureOfInterestIds.push(this.getAttributeNS(e,this.namespaces.xlink,"href"))},responseFormat:function(e,t){t.responseFormats.push(this.getChildValue(e))},resultModel:function(e,t){t.resultModels.push(this.getChildValue(e))},responseMode:function(e,t){t.responseModes.push(this.getChildValue(e))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.SOSCapabilities.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(e){var t=!0;if(this.pinching=!1,OpenLayers.Event.isMultiTouch(e))this.started=!0,this.last=this.start={distance:this.getDistance(e.touches),delta:0,scale:1},this.callback("start",[e,this.start]),t=!this.stopDown;else{if(this.started)return!1;this.started=!1,this.start=null,this.last=null}return OpenLayers.Event.preventDefault(e),t},touchmove:function(e){if(this.started&&OpenLayers.Event.isMultiTouch(e)){this.pinching=!0;var t=this.getPinchData(e);this.callback("move",[e,t]),this.last=t,OpenLayers.Event.stop(e)}else if(this.started)return!1;return!0},touchend:function(e){return!(this.started&&!OpenLayers.Event.isMultiTouch(e))||(this.started=!1,this.pinching=!1,this.callback("done",[e,this.start,this.last]),this.start=null,this.last=null,!1)},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.started=!1,this.pinching=!1,this.start=null,this.last=null,e=!0),e},getDistance:function(e){var t=e[0],a=e[1];return Math.sqrt(Math.pow(t.olClientX-a.olClientX,2)+Math.pow(t.olClientY-a.olClientY,2))},getPinchData:function(e){var t=this.getDistance(e.touches),a=t/this.start.distance;return{distance:t,delta:this.last.distance-t,scale:a}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.NavToolbar=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(e){OpenLayers.Control.Panel.prototype.initialize.apply(this,[e]),this.addControls([new OpenLayers.Control.Navigation,new OpenLayers.Control.ZoomBox])},draw:function(){var e=OpenLayers.Control.Panel.prototype.draw.apply(this,arguments);return null===this.defaultControl&&(this.defaultControl=this.controls[0]),e},CLASS_NAME:"OpenLayers.Control.NavToolbar"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.Refresh=OpenLayers.Class(OpenLayers.Strategy,{force:!1,interval:0,timer:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&(this.layer.visibility===!0&&this.start(),this.layer.events.on({visibilitychanged:this.reset,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.stop(),this.layer.events.un({visibilitychanged:this.reset,scope:this})),e},reset:function(){this.layer.visibility===!0?this.start():this.stop()},start:function(){this.interval&&"number"==typeof this.interval&&this.interval>0&&(this.timer=window.setInterval(OpenLayers.Function.bind(this.refresh,this),this.interval))},refresh:function(){this.layer&&this.layer.refresh&&"function"==typeof this.layer.refresh&&this.layer.refresh({force:this.force})},stop:function(){null!==this.timer&&(window.clearInterval(this.timer),this.timer=null)},CLASS_NAME:"OpenLayers.Strategy.Refresh"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.ArcGIS93Rest=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{format:"png"},isBaseLayer:!0,initialize:function(e,t,a,i){var s=[];a=OpenLayers.Util.upperCaseObject(a),s.push(e,t,a,i),OpenLayers.Layer.Grid.prototype.initialize.apply(this,s),OpenLayers.Util.applyDefaults(this.params,OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)),this.params.TRANSPARENT&&"true"==this.params.TRANSPARENT.toString().toLowerCase()&&(null!=i&&i.isBaseLayer||(this.isBaseLayer=!1),"jpg"==this.params.FORMAT&&(this.params.FORMAT=OpenLayers.Util.alphaHack()?"gif":"png"))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGIS93Rest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.projection.getCode().split(":"),a=t[t.length-1],i=this.getImageSize(),s={BBOX:e.toBBOX(),SIZE:i.w+","+i.h,F:"image",BBOXSR:a,IMAGESR:a};if(this.layerDefs){var r,o=[];for(r in this.layerDefs)this.layerDefs.hasOwnProperty(r)&&this.layerDefs[r]&&(o.push(r),o.push(":"),o.push(this.layerDefs[r]),o.push(";"));o.length>0&&(s.LAYERDEFS=o.join(""))}var n=this.getFullRequestString(s);return n},setLayerFilter:function(e,t){this.layerDefs||(this.layerDefs={}),t?this.layerDefs[e]=t:delete this.layerDefs[e]},clearLayerFilter:function(e){e?delete this.layerDefs[e]:delete this.layerDefs},mergeNewParams:function(e){var t=OpenLayers.Util.upperCaseObject(e),a=[t];return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,a)},CLASS_NAME:"OpenLayers.Layer.ArcGIS93Rest"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Handler.Hover=OpenLayers.Class(OpenLayers.Handler,{delay:500,pixelTolerance:null,stopMove:!1,px:null,timerId:null,mousemove:function(e){return this.passesTolerance(e.xy)&&(this.clearTimer(),this.callback("move",[e]),this.px=e.xy,e=OpenLayers.Util.extend({},e),this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)),!this.stopMove},mouseout:function(e){return OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.clearTimer(),this.callback("move",[e])),!0},passesTolerance:function(e){var t=!0;if(this.pixelTolerance&&this.px){var a=Math.sqrt(Math.pow(this.px.x-e.x,2)+Math.pow(this.px.y-e.y,2));a<this.pixelTolerance&&(t=!1)}return t},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null)},delayedCall:function(e){this.callback("pause",[e])},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),e=!0),e},CLASS_NAME:"OpenLayers.Handler.Hover"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.GetFeature=OpenLayers.Class(OpenLayers.Control,{protocol:null,multipleKey:null,toggleKey:null,modifiers:null,multiple:!1,click:!0,single:!0,clickout:!0,toggle:!1,clickTolerance:5,hover:!1,box:!1,maxFeatures:10,features:null,hoverFeature:null,handlers:null,hoverResponse:null,filterType:OpenLayers.Filter.Spatial.BBOX,initialize:function(e){e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.features={},this.handlers={},this.click&&(this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.selectClick},this.handlerOptions.click||{})),this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},OpenLayers.Util.extend(this.handlerOptions.box,{boxDivClassName:"olHandlerBoxSelectFeature"}))),this.hover&&(this.handlers.hover=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.selectHover},OpenLayers.Util.extend(this.handlerOptions.hover,{delay:250,pixelTolerance:2})))},activate:function(){if(!this.active)for(var e in this.handlers)this.handlers[e].activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active)for(var e in this.handlers)this.handlers[e].deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},selectClick:function(e){var t=this.pixelToBounds(e.xy);this.setModifiers(e),this.request(t,{single:this.single})},selectBox:function(e){var t;if(e instanceof OpenLayers.Bounds){var a=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),i=this.map.getLonLatFromPixel({x:e.right,y:e.top});t=new OpenLayers.Bounds(a.lon,a.lat,i.lon,i.lat)}else{if(this.click)return;t=this.pixelToBounds(e)}this.setModifiers(this.handlers.box.dragHandler.evt),this.request(t)},selectHover:function(e){var t=this.pixelToBounds(e.xy);this.request(t,{single:!0,hover:!0})},cancelHover:function(){this.hoverResponse&&(this.protocol.abort(this.hoverResponse),this.hoverResponse=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"))},request:function(e,t){t=t||{};var a=new OpenLayers.Filter.Spatial({type:this.filterType,value:e});OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait");var i=this.protocol.read({maxFeatures:1==t.single?this.maxFeatures:void 0,filter:a,callback:function(a){a.success()&&(a.features.length?1==t.single?this.selectBestFeature(a.features,e.getCenterLonLat(),t):this.select(a.features):t.hover?this.hoverSelect():(this.events.triggerEvent("clickout"),this.clickout&&this.unselectAll())),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},scope:this});1==t.hover&&(this.hoverResponse=i)},selectBestFeature:function(e,t,a){if(a=a||{},e.length){for(var i,s,r,o=new OpenLayers.Geometry.Point(t.lon,t.lat),n=Number.MAX_VALUE,l=0;l<e.length&&(i=e[l],!(i.geometry&&(r=o.distanceTo(i.geometry,{edge:!1}),r<n&&(n=r,s=i,0==n))));++l);1==a.hover?this.hoverSelect(s):this.select(s||e)}},setModifiers:function(e){this.modifiers={multiple:this.multiple||this.multipleKey&&e[this.multipleKey],toggle:this.toggle||this.toggleKey&&e[this.toggleKey]}},select:function(e){this.modifiers.multiple||this.modifiers.toggle||this.unselectAll(),OpenLayers.Util.isArray(e)||(e=[e]);var t=this.events.triggerEvent("beforefeaturesselected",{features:e});if(t!==!1){for(var a,i=[],s=0,r=e.length;s<r;++s)a=e[s],this.features[a.fid||a.id]?this.modifiers.toggle&&this.unselect(this.features[a.fid||a.id]):(t=this.events.triggerEvent("beforefeatureselected",{feature:a}),t!==!1&&(this.features[a.fid||a.id]=a,i.push(a),this.events.triggerEvent("featureselected",{feature:a})));this.events.triggerEvent("featuresselected",{features:i})}},hoverSelect:function(e){var t=e?e.fid||e.id:null,a=this.hoverFeature?this.hoverFeature.fid||this.hoverFeature.id:null;a&&a!=t&&(this.events.triggerEvent("outfeature",{feature:this.hoverFeature}),this.hoverFeature=null),t&&t!=a&&(this.events.triggerEvent("hoverfeature",{feature:e}),this.hoverFeature=e)},unselect:function(e){delete this.features[e.fid||e.id],this.events.triggerEvent("featureunselected",{feature:e})},unselectAll:function(){for(var e in this.features)this.unselect(this.features[e])},setMap:function(e){for(var t in this.handlers)this.handlers[t].setMap(e);OpenLayers.Control.prototype.setMap.apply(this,arguments)},pixelToBounds:function(e){var t=e.add(-this.clickTolerance/2,this.clickTolerance/2),a=e.add(this.clickTolerance/2,-this.clickTolerance/2),i=this.map.getLonLatFromPixel(t),s=this.map.getLonLatFromPixel(a);return new OpenLayers.Bounds(i.lon,i.lat,s.lon,s.lat)},CLASS_NAME:"OpenLayers.Control.GetFeature"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.QueryStringFilter=function(){function e(e){return e=e.replace(/%/g,"\\%"),e=e.replace(/\\\\\.(\*)?/g,function(e,t){return t?e:"\\\\_"}),e=e.replace(/\\\\\.\*/g,"\\\\%"),e=e.replace(/(\\)?\.(\*)?/g,function(e,t,a){return t||a?e:"_"}),e=e.replace(/(\\)?\.\*/g,function(e,t){return t?e:"%"}),e=e.replace(/\\\./g,"."),e=e.replace(/(\\)?\\\*/g,function(e,t){return t?e:"*"})}var t={};return t[OpenLayers.Filter.Comparison.EQUAL_TO]="eq",t[OpenLayers.Filter.Comparison.NOT_EQUAL_TO]="ne",t[OpenLayers.Filter.Comparison.LESS_THAN]="lt",t[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO]="lte",t[OpenLayers.Filter.Comparison.GREATER_THAN]="gt",t[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO]="gte",t[OpenLayers.Filter.Comparison.LIKE]="ilike",OpenLayers.Class(OpenLayers.Format,{wildcarded:!1,srsInBBOX:!1,write:function(a,i){i=i||{};var s=a.CLASS_NAME,r=s.substring(s.lastIndexOf(".")+1);switch(r){case"Spatial":switch(a.type){case OpenLayers.Filter.Spatial.BBOX:i.bbox=a.value.toArray(),this.srsInBBOX&&a.projection&&i.bbox.push(a.projection.getCode());break;case OpenLayers.Filter.Spatial.DWITHIN:i.tolerance=a.distance;case OpenLayers.Filter.Spatial.WITHIN:i.lon=a.value.x,i.lat=a.value.y;break;default:OpenLayers.Console.warn("Unknown spatial filter type "+a.type)}break;case"Comparison":var o=t[a.type];if(void 0!==o){var n=a.value;a.type==OpenLayers.Filter.Comparison.LIKE&&(n=e(n),this.wildcarded&&(n="%"+n+"%")),i[a.property+"__"+o]=n,i.queryable=i.queryable||[],i.queryable.push(a.property)}else OpenLayers.Console.warn("Unknown comparison filter type "+a.type);break;case"Logical":if(a.type===OpenLayers.Filter.Logical.AND)for(var l=0,c=a.filters.length;l<c;l++)i=this.write(a.filters[l],i);else OpenLayers.Console.warn("Unsupported logical filter type "+a.type);break;default:OpenLayers.Console.warn("Unknown filter type "+r)}return i},CLASS_NAME:"OpenLayers.Format.QueryStringFilter"})}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),this.redraw(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),this.element.innerHTML="",!0)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.div.left="",this.div.top="",this.element=this.div),this.div},redraw:function(e){var t;if(null==e)return void this.reset();if(null==this.lastXy||Math.abs(e.xy.x-this.lastXy.x)>this.granularity||Math.abs(e.xy.y-this.lastXy.y)>this.granularity)return void(this.lastXy=e.xy);if(t=this.map.getLonLatFromPixel(e.xy)){this.displayProjection&&t.transform(this.map.getProjectionObject(),this.displayProjection),this.lastXy=e.xy;var a=this.formatOutput(t);a!=this.element.innerHTML&&(this.element.innerHTML=a)}},reset:function(e){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(e){var t=parseInt(this.numDigits),a=this.prefix+e.lon.toFixed(t)+this.separator+e.lat.toFixed(t)+this.suffix;return a},CLASS_NAME:"OpenLayers.Control.MousePosition"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Geolocate=OpenLayers.Class(OpenLayers.Control,{geolocation:null,available:"geolocation"in navigator,bind:!0,watch:!1,geolocationOptions:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.available&&!this.geolocation&&(this.geolocation=navigator.geolocation),this.geolocation?!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.watch?this.watchId=this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions):this.getCurrentLocation(),!0):(this.events.triggerEvent("locationuncapable"),!1)},deactivate:function(){return this.active&&null!==this.watchId&&this.geolocation.clearWatch(this.watchId),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},geolocate:function(e){var t=new OpenLayers.LonLat(e.coords.longitude,e.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"),this.map.getProjectionObject());this.bind&&this.map.setCenter(t),this.events.triggerEvent("locationupdated",{position:e,point:new OpenLayers.Geometry.Point(t.lon,t.lat)})},getCurrentLocation:function(){return!(!this.active||this.watch)&&(this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate,this),OpenLayers.Function.bind(this.failure,this),this.geolocationOptions),!0)},failure:function(e){this.events.triggerEvent("locationfailed",{error:e})},CLASS_NAME:"OpenLayers.Control.Geolocate"});/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Tile.UTFGrid=OpenLayers.Class(OpenLayers.Tile,{url:null,utfgridResolution:2,json:null,format:null,destroy:function(){this.clear(),OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(e)if(this.isLoading?(this.abortLoading(),this.events.triggerEvent("reload")):(this.isLoading=!0,this.events.triggerEvent("loadstart")),this.url=this.layer.getURL(this.bounds),this.layer.useJSONP){var t=new OpenLayers.Protocol.Script({url:this.url,callback:function(e){this.isLoading=!1,this.events.triggerEvent("loadend"),this.json=e.data},scope:this});t.read(),this.request=t}else this.request=OpenLayers.Request.GET({url:this.url,callback:function(e){this.isLoading=!1,this.events.triggerEvent("loadend"),200===e.status&&this.parseData(e.responseText)},scope:this});else this.unload();return e},abortLoading:function(){this.request&&(this.request.abort(),delete this.request),this.isLoading=!1},getFeatureInfo:function(e,t){var a=null;if(this.json){var i=this.getFeatureId(e,t);null!==i&&(a={id:i,data:this.json.data[i]})}return a},getFeatureId:function(e,t){var a=null;if(this.json){var i=this.utfgridResolution,s=Math.floor(t/i),r=Math.floor(e/i),o=this.json.grid[s].charCodeAt(r),n=this.indexFromCharCode(o),l=this.json.keys;!isNaN(n)&&n in l&&(a=l[n])}return a},indexFromCharCode:function(e){return e>=93&&e--,e>=35&&e--,e-32},parseData:function(e){this.format||(this.format=new OpenLayers.Format.JSON),this.json=this.format.read(e)},clear:function(){this.json=null},CLASS_NAME:"OpenLayers.Tile.UTFGrid"});/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(e){if(e=e||{},this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(e,a){return t.write(e,a)}}},destroy:function(){this.params=null,this.headers=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=e||{},e.params=OpenLayers.Util.applyDefaults(e.params,this.options.params),e=OpenLayers.Util.applyDefaults(e,this.options),e.filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=void 0!==e.readWithPOST?e.readWithPOST:this.readWithPOST,a=new OpenLayers.Protocol.Response({requestType:"read"});if(t){var i=e.headers||{};i["Content-Type"]="application/x-www-form-urlencoded",a.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,a,e),data:OpenLayers.Util.getParameterString(e.params),headers:i})}else a.priv=OpenLayers.Request.GET({url:e.url,callback:this.createCallback(this.handleRead,a,e),params:e.params,headers:e.headers});return a},handleRead:function(e,t){this.handleResponse(e,t)},create:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var a=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"create"});return a.priv=OpenLayers.Request.POST({url:t.url,callback:this.createCallback(this.handleCreate,a,t),headers:t.headers,data:this.format.write(e)}),a},handleCreate:function(e,t){this.handleResponse(e,t)},update:function(e,t){t=t||{};var a=t.url||e.url||this.options.url+"/"+e.fid;t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"update"}),s=this.updateWithPOST?"POST":"PUT";return i.priv=OpenLayers.Request[s]({url:a,callback:this.createCallback(this.handleUpdate,i,t),headers:t.headers,data:this.format.write(e)}),i},handleUpdate:function(e,t){this.handleResponse(e,t)},delete:function(e,t){t=t||{};var a=t.url||e.url||this.options.url+"/"+e.fid;t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"delete"}),s=this.deleteWithPOST?"POST":"DELETE",r={url:a,callback:this.createCallback(this.handleDelete,i,t),headers:t.headers};return this.deleteWithPOST&&(r.data=this.format.write(e)),i.priv=OpenLayers.Request[s](r),i},handleDelete:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){var a=e.priv;t.callback&&(a.status>=200&&a.status<300?("delete"!=e.requestType&&(e.features=this.parseFeatures(a)),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseFeatures:function(e){var t=e.responseXML;return t&&t.documentElement||(t=e.responseText),!t||t.length<=0?null:this.format.read(t)},commit:function(e,t){function a(e){for(var t=e.features?e.features.length:0,a=new Array(t),s=0;s<t;++s)a[s]=e.features[s].fid;h.insertIds=a,i.apply(this,[e])}function i(e){this.callUserCallback(e,t),m=m&&e.success(),r++,r>=u&&t.callback&&(h.code=m?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,t.callback.apply(t.scope,[h]))}t=OpenLayers.Util.applyDefaults(t,this.options);var s=[],r=0,o={};o[OpenLayers.State.INSERT]=[],o[OpenLayers.State.UPDATE]=[],o[OpenLayers.State.DELETE]=[];for(var n,l,c=[],d=0,p=e.length;d<p;++d)n=e[d],l=o[n.state],l&&(l.push(n),c.push(n));var u=(o[OpenLayers.State.INSERT].length>0?1:0)+o[OpenLayers.State.UPDATE].length+o[OpenLayers.State.DELETE].length,m=!0,h=new OpenLayers.Protocol.Response({reqFeatures:c}),g=o[OpenLayers.State.INSERT];g.length>0&&s.push(this.create(g,OpenLayers.Util.applyDefaults({callback:a,scope:this},t.create))),g=o[OpenLayers.State.UPDATE];for(var d=g.length-1;d>=0;--d)s.push(this.update(g[d],OpenLayers.Util.applyDefaults({callback:i,scope:this},t.update)));g=o[OpenLayers.State.DELETE];for(var d=g.length-1;d>=0;--d)s.push(this.delete(g[d],OpenLayers.Util.applyDefaults({callback:i,scope:this},t.delete)));return s},abort:function(e){e&&e.priv.abort()},callUserCallback:function(e,t){var a=t[e.requestType];a&&a.callback&&a.callback.call(a.scope,e)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.Cluster=OpenLayers.Class(OpenLayers.Strategy,{distance:20,threshold:null,features:null,clusters:null,clustering:!1,resolution:null,activate:function(){var e=OpenLayers.Strategy.prototype.activate.call(this);return e&&this.layer.events.on({beforefeaturesadded:this.cacheFeatures,featuresremoved:this.clearCache,moveend:this.cluster,scope:this}),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&(this.clearCache(),this.layer.events.un({beforefeaturesadded:this.cacheFeatures,featuresremoved:this.clearCache,moveend:this.cluster,scope:this})),e},cacheFeatures:function(e){var t=!0;return this.clustering||(this.clearCache(),this.features=e.features,this.cluster(),t=!1),t},clearCache:function(){this.clustering||(this.features=null)},cluster:function(e){if((!e||e.zoomChanged)&&this.features){var t=this.layer.map.getResolution();if(t!=this.resolution||!this.clustersExist()){this.resolution=t;for(var a,i,s,r=[],o=0;o<this.features.length;++o)if(a=this.features[o],a.geometry){i=!1;for(var n=r.length-1;n>=0;--n)if(s=r[n],this.shouldCluster(s,a)){this.addToCluster(s,a),i=!0;break}i||r.push(this.createCluster(this.features[o]))}if(this.clustering=!0,this.layer.removeAllFeatures(),this.clustering=!1,r.length>0){if(this.threshold>1){var l=r.slice();r=[];for(var c,o=0,d=l.length;o<d;++o)c=l[o],c.attributes.count<this.threshold?Array.prototype.push.apply(r,c.cluster):r.push(c)}this.clustering=!0,this.layer.addFeatures(r),this.clustering=!1}this.clusters=r}}},clustersExist:function(){var e=!1;if(this.clusters&&this.clusters.length>0&&this.clusters.length==this.layer.features.length){e=!0;for(var t=0;t<this.clusters.length;++t)if(this.clusters[t]!=this.layer.features[t]){e=!1;break}}return e},shouldCluster:function(e,t){var a=e.geometry.getBounds().getCenterLonLat(),i=t.geometry.getBounds().getCenterLonLat(),s=Math.sqrt(Math.pow(a.lon-i.lon,2)+Math.pow(a.lat-i.lat,2))/this.resolution;return s<=this.distance},addToCluster:function(e,t){e.cluster.push(t),e.attributes.count+=1},createCluster:function(e){var t=e.geometry.getBounds().getCenterLonLat(),a=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon,t.lat),{count:1});return a.cluster=[e],a},CLASS_NAME:"OpenLayers.Strategy.Cluster"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Strategy.Filter=OpenLayers.Class(OpenLayers.Strategy,{filter:null,cache:null,caching:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.cache=[],this.layer.events.on({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this})),e},deactivate:function(){return this.cache=null,this.layer&&this.layer.events&&this.layer.events.un({beforefeaturesadded:this.handleAdd,beforefeaturesremoved:this.handleRemove,scope:this}),OpenLayers.Strategy.prototype.deactivate.apply(this,arguments)},handleAdd:function(e){if(!this.caching&&this.filter){var t=e.features;e.features=[];for(var a,i=0,s=t.length;i<s;++i)a=t[i],this.filter.evaluate(a)?e.features.push(a):this.cache.push(a)}},handleRemove:function(e){this.caching||(this.cache=[])},setFilter:function(e){this.filter=e;var t=this.cache;if(this.cache=[],this.handleAdd({features:this.layer.features}),this.cache.length>0&&(this.caching=!0,this.layer.removeFeatures(this.cache.slice()),this.caching=!1),t.length>0){var a={features:t};this.handleAdd(a),a.features.length>0&&(this.caching=!0,this.layer.addFeatures(a.features),this.caching=!1)}},CLASS_NAME:"OpenLayers.Strategy.Filter"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.SOS=function(e){e=OpenLayers.Util.applyDefaults(e,OpenLayers.Protocol.SOS.DEFAULTS);var t=OpenLayers.Protocol.SOS["v"+e.version.replace(/\./g,"_")];if(!t)throw"Unsupported SOS version: "+e.version;return new t(e)},OpenLayers.Protocol.SOS.DEFAULTS={version:"1.0.0"},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFSDescribeFeatureType=OpenLayers.Class(OpenLayers.Format.XML,{regExes:{trimSpace:/^\s*|\s*$/g},namespaces:{xsd:"http://www.w3.org/2001/XMLSchema"},readers:{xsd:{schema:function(e,t){var a,i,s=[],r={},o={complexTypes:s,customTypes:r};this.readChildNodes(e,o);var n,l,c=e.attributes;for(a=0,i=c.length;a<i;++a)n=c[a],l=n.name,0===l.indexOf("xmlns")?this.setNamespace(l.split(":")[1]||"",n.value):t[l]=n.value;t.featureTypes=s,t.targetPrefix=this.namespaceAlias[t.targetNamespace];var d,p;for(a=0,i=s.length;a<i;++a)d=s[a],p=r[d.typeName],r[d.typeName]&&(d.typeName=p.name)},complexType:function(e,t){var a={typeName:e.getAttribute("name")};this.readChildNodes(e,a),t.complexTypes.push(a)},complexContent:function(e,t){this.readChildNodes(e,t)},extension:function(e,t){this.readChildNodes(e,t)},sequence:function(e,t){var a={elements:[]};this.readChildNodes(e,a),t.properties=a.elements},element:function(e,t){var a;if(t.elements){for(var i,s={},r=e.attributes,o=0,n=r.length;o<n;++o)i=r[o],s[i.name]=i.value;a=s.type,a||(a={},this.readChildNodes(e,a),s.restriction=a,s.type=a.base);var l=a.base||a;s.localType=l.split(":").pop(),t.elements.push(s),this.readChildNodes(e,s)}if(t.complexTypes){a=e.getAttribute("type");var c=a.split(":").pop();t.customTypes[c]={name:e.getAttribute("name"),type:a}}},annotation:function(e,t){t.annotation={},this.readChildNodes(e,t.annotation)},appinfo:function(e,t){t.appinfo||(t.appinfo=[]),t.appinfo.push(this.getChildValue(e))},documentation:function(e,t){t.documentation||(t.documentation=[]);var a=this.getChildValue(e);t.documentation.push({lang:e.getAttribute("xml:lang"),textContent:a.replace(this.regExes.trimSpace,"")})},simpleType:function(e,t){this.readChildNodes(e,t)},restriction:function(e,t){t.base=e.getAttribute("base"),this.readRestriction(e,t)}}},readRestriction:function(e,t){for(var a,i,s,r=e.childNodes,o=0,n=r.length;o<n;++o)a=r[o],1==a.nodeType&&(i=a.nodeName.split(":").pop(),s=a.getAttribute("value"),t[i]?("string"==typeof t[i]&&(t[i]=[t[i]]),t[i].push(s)):t[i]=s)},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};if("ExceptionReport"===e.nodeName.split(":").pop()){var a=new OpenLayers.Format.OGCExceptionReport;t.error=a.read(e)}else this.readNode(e,t);return t},CLASS_NAME:"OpenLayers.Format.WFSDescribeFeatureType"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.GeoRSS=OpenLayers.Class(OpenLayers.Format.XML,{rssns:"http://backend.userland.com/rss2",featureNS:"http://mapserver.gis.umn.edu/mapserver",georssns:"http://www.georss.org/georss",geons:"http://www.w3.org/2003/01/geo/wgs84_pos#",featureTitle:"Untitled",featureDescription:"No Description",gmlParser:null,xy:!1,createGeometryFromItem:function(e){var t=this.getElementsByTagNameNS(e,this.georssns,"point"),a=this.getElementsByTagNameNS(e,this.geons,"lat"),i=this.getElementsByTagNameNS(e,this.geons,"long"),s=this.getElementsByTagNameNS(e,this.georssns,"line"),r=this.getElementsByTagNameNS(e,this.georssns,"polygon"),o=this.getElementsByTagNameNS(e,this.georssns,"where"),n=this.getElementsByTagNameNS(e,this.georssns,"box");if(t.length>0||a.length>0&&i.length>0){var l;t.length>0?(l=OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s+/),2!=l.length&&(l=OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s*,\s*/))):l=[parseFloat(a[0].firstChild.nodeValue),parseFloat(i[0].firstChild.nodeValue)];var c=new OpenLayers.Geometry.Point(l[1],l[0])}else if(s.length>0){for(var t,d=OpenLayers.String.trim(this.getChildValue(s[0])).split(/\s+/),p=[],u=0,m=d.length;u<m;u+=2)t=new OpenLayers.Geometry.Point(d[u+1],d[u]),p.push(t);c=new OpenLayers.Geometry.LineString(p)}else if(r.length>0){for(var t,d=OpenLayers.String.trim(this.getChildValue(r[0])).split(/\s+/),p=[],u=0,m=d.length;u<m;u+=2)t=new OpenLayers.Geometry.Point(d[u+1],d[u]),p.push(t);c=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(p)])}else if(o.length>0){this.gmlParser||(this.gmlParser=new OpenLayers.Format.GML({xy:this.xy}));var h=this.gmlParser.parseFeature(o[0]);c=h.geometry}else if(n.length>0){var t,d=OpenLayers.String.trim(n[0].firstChild.nodeValue).split(/\s+/),p=[];d.length>3&&(t=new OpenLayers.Geometry.Point(d[1],d[0]),p.push(t),t=new OpenLayers.Geometry.Point(d[1],d[2]),p.push(t),t=new OpenLayers.Geometry.Point(d[3],d[2]),p.push(t),t=new OpenLayers.Geometry.Point(d[3],d[0]),p.push(t),t=new OpenLayers.Geometry.Point(d[1],d[0]),p.push(t)),c=new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(p)])}return c&&this.internalProjection&&this.externalProjection&&c.transform(this.externalProjection,this.internalProjection),c},createFeatureFromItem:function(e){var t=this.createGeometryFromItem(e),a=this._getChildValue(e,"*","title",this.featureTitle),i=this._getChildValue(e,"*","description",this._getChildValue(e,"*","content",this._getChildValue(e,"*","summary",this.featureDescription))),s=this._getChildValue(e,"*","link");if(!s)try{s=this.getElementsByTagNameNS(e,"*","link")[0].getAttribute("href")}catch(e){s=null}var r=this._getChildValue(e,"*","id",null),o={title:a,description:i,link:s},n=new OpenLayers.Feature.Vector(t,o);return n.fid=r,n},_getChildValue:function(e,t,a,i){var s,r=this.getElementsByTagNameNS(e,t,a);return s=r&&r[0]&&r[0].firstChild&&r[0].firstChild.nodeValue?this.getChildValue(r[0]):void 0==i?"":i},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var t=null;t=this.getElementsByTagNameNS(e,"*","item"),0==t.length&&(t=this.getElementsByTagNameNS(e,"*","entry"));for(var a=t.length,i=new Array(a),s=0;s<a;s++)i[s]=this.createFeatureFromItem(t[s]);return i},write:function(e){var t;if(OpenLayers.Util.isArray(e)){t=this.createElementNS(this.rssns,"rss");for(var a=0,i=e.length;a<i;a++)t.appendChild(this.createFeatureXML(e[a]))}else t=this.createFeatureXML(e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t=this.buildGeometryNode(e.geometry),a=this.createElementNS(this.rssns,"item"),i=this.createElementNS(this.rssns,"title");i.appendChild(this.createTextNode(e.attributes.title?e.attributes.title:""));var s=this.createElementNS(this.rssns,"description");if(s.appendChild(this.createTextNode(e.attributes.description?e.attributes.description:"")),a.appendChild(i),a.appendChild(s),e.attributes.link){var r=this.createElementNS(this.rssns,"link");r.appendChild(this.createTextNode(e.attributes.link)),a.appendChild(r)}for(var o in e.attributes)if("link"!=o&&"title"!=o&&"description"!=o){var n=this.createTextNode(e.attributes[o]),l=o;o.search(":")!=-1&&(l=o.split(":")[1]);var c=this.createElementNS(this.featureNS,"feature:"+l);c.appendChild(n),a.appendChild(c)}return a.appendChild(t),a},buildGeometryNode:function(e){this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t;if("OpenLayers.Geometry.Polygon"==e.CLASS_NAME)t=this.createElementNS(this.georssns,"georss:polygon"),t.appendChild(this.buildCoordinatesNode(e.components[0]));else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=this.createElementNS(this.georssns,"georss:line"),t.appendChild(this.buildCoordinatesNode(e));else{if("OpenLayers.Geometry.Point"!=e.CLASS_NAME)throw"Couldn't parse "+e.CLASS_NAME;t=this.createElementNS(this.georssns,"georss:point"),t.appendChild(this.buildCoordinatesNode(e))}return t},buildCoordinatesNode:function(e){var t=null;e.components&&(t=e.components);var a;if(t){for(var i=t.length,s=new Array(i),r=0;r<i;r++)s[r]=t[r].y+" "+t[r].x;a=s.join(" ")}else a=e.y+" "+e.x;return this.createTextNode(a)},CLASS_NAME:"OpenLayers.Format.GeoRSS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WPSCapabilities=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.WPSCapabilities"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WPSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows/1.1",wps:"http://www.opengis.net/wps/1.0.0",xlink:"http://www.w3.org/1999/xlink"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t},readers:{wps:{Capabilities:function(e,t){this.readChildNodes(e,t)},ProcessOfferings:function(e,t){t.processOfferings={},this.readChildNodes(e,t.processOfferings)},Process:function(e,t){var a=this.getAttributeNS(e,this.namespaces.wps,"processVersion"),i={processVersion:a};this.readChildNodes(e,i),t[i.identifier]=i},Languages:function(e,t){t.languages=[],this.readChildNodes(e,t.languages)},Default:function(e,t){var a={isDefault:!0};this.readChildNodes(e,a),t.push(a)},Supported:function(e,t){var a={};this.readChildNodes(e,a),t.push(a)}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WPSCapabilities.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,pinchOrigin:null,currentCenter:null,autoActivate:!0,preserveCenter:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},pinchStart:function(e,t){var a=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy;this.pinchOrigin=a,this.currentCenter=a},pinchMove:function(e,t){var a=t.scale,i=this.map.layerContainerOriginPx,s=this.pinchOrigin,r=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy,o=Math.round(i.x+r.x-s.x+(a-1)*(i.x-s.x)),n=Math.round(i.y+r.y-s.y+(a-1)*(i.y-s.y));this.map.applyTransform(o,n,a),this.currentCenter=r},pinchDone:function(e,t,a){this.map.applyTransform();var i=this.map.getZoomForResolution(this.map.getResolution()/a.scale,!0);if(i!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){var s=this.map.getResolutionForZoom(i),r=this.map.getLonLatFromPixel(this.pinchOrigin),o=this.currentCenter,n=this.map.getSize();r.lon+=s*(n.w/2-o.x),r.lat-=s*(n.h/2-o.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(r,i)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0)},draw:function(){var e={click:this.defaultClick,dblclick:this.defaultDblClick},t=OpenLayers.Util.extend({double:!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),/** 
 * @requires Rico/license.js
 * @requires OpenLayers/Console.js
 * @requires OpenLayers/BaseTypes/Class.js
 * @requires OpenLayers/BaseTypes/Element.js
 */
OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Color=OpenLayers.Class({initialize:function(e,t,a){this.rgb={r:e,g:t,b:a}},setRed:function(e){this.rgb.r=e},setGreen:function(e){this.rgb.g=e},setBlue:function(e){this.rgb.b=e},setHue:function(e){var t=this.asHSB();t.h=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setSaturation:function(e){var t=this.asHSB();t.s=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},setBrightness:function(e){var t=this.asHSB();t.b=e,this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,t.b)},darken:function(e){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.max(t.b-e,0))},brighten:function(e){var t=this.asHSB();this.rgb=OpenLayers.Rico.Color.HSBtoRGB(t.h,t.s,Math.min(t.b+e,1))},blend:function(e){this.rgb.r=Math.floor((this.rgb.r+e.rgb.r)/2),this.rgb.g=Math.floor((this.rgb.g+e.rgb.g)/2),this.rgb.b=Math.floor((this.rgb.b+e.rgb.b)/2)},isBright:function(){this.asHSB();return this.asHSB().b>.5},isDark:function(){return!this.isBright()},asRGB:function(){return"rgb("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+")"},asHex:function(){return"#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart()},asHSB:function(){return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b)},toString:function(){return this.asHex()}}),OpenLayers.Rico.Color.createFromHex=function(e){if(4==e.length)for(var t=e,e="#",a=1;a<4;a++)e+=t.charAt(a)+t.charAt(a);0==e.indexOf("#")&&(e=e.substring(1));var i=e.substring(0,2),s=e.substring(2,4),r=e.substring(4,6);return new OpenLayers.Rico.Color(parseInt(i,16),parseInt(s,16),parseInt(r,16))},OpenLayers.Rico.Color.createColorFromBackground=function(e){var t=OpenLayers.Element.getStyle(OpenLayers.Util.getElement(e),"backgroundColor");if("transparent"==t&&e.parentNode)return OpenLayers.Rico.Color.createColorFromBackground(e.parentNode);if(null==t)return new OpenLayers.Rico.Color(255,255,255);if(0==t.indexOf("rgb(")){var a=t.substring(4,t.length-1),i=a.split(",");return new OpenLayers.Rico.Color(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]))}return 0==t.indexOf("#")?OpenLayers.Rico.Color.createFromHex(t):new OpenLayers.Rico.Color(255,255,255)},OpenLayers.Rico.Color.HSBtoRGB=function(e,t,a){var i=0,s=0,r=0;if(0==t)i=parseInt(255*a+.5),s=i,r=i;else{var o=6*(e-Math.floor(e)),n=o-Math.floor(o),l=a*(1-t),c=a*(1-t*n),d=a*(1-t*(1-n));switch(parseInt(o)){case 0:i=255*a+.5,s=255*d+.5,r=255*l+.5;break;case 1:i=255*c+.5,s=255*a+.5,r=255*l+.5;break;case 2:i=255*l+.5,s=255*a+.5,r=255*d+.5;break;case 3:i=255*l+.5,s=255*c+.5,r=255*a+.5;break;case 4:i=255*d+.5,s=255*l+.5,r=255*a+.5;break;case 5:i=255*a+.5,s=255*l+.5,r=255*c+.5}}return{r:parseInt(i),g:parseInt(s),b:parseInt(r)}},OpenLayers.Rico.Color.RGBtoHSB=function(e,t,a){var i,s,r,o=e>t?e:t;a>o&&(o=a);var n=e<t?e:t;if(a<n&&(n=a),r=o/255,s=0!=o?(o-n)/o:0,0==s)i=0;else{var l=(o-e)/(o-n),c=(o-t)/(o-n),d=(o-a)/(o-n);i=e==o?d-c:t==o?2+l-d:4+c-l,i/=6,i<0&&(i+=1)}return{h:i,s:s,b:r}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Style2=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy();delete this.rules},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,a=this.rules.length;t<a;++t)e.rules.push(this.rules[t].clone())}return new OpenLayers.Style2(e)},CLASS_NAME:"OpenLayers.Style2"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFS=OpenLayers.Class(OpenLayers.Format.GML,{layer:null,wfsns:"http://www.opengis.net/wfs",ogcns:"http://www.opengis.net/ogc",initialize:function(e,t){OpenLayers.Format.GML.prototype.initialize.apply(this,[e]),this.layer=t,this.layer.featureNS&&(this.featureNS=this.layer.featureNS),this.layer.options.geometry_column&&(this.geometryName=this.layer.options.geometry_column),this.layer.options.typename&&(this.featureName=this.layer.options.typename)},write:function(e){var t=this.createElementNS(this.wfsns,"wfs:Transaction");t.setAttribute("version","1.0.0"),t.setAttribute("service","WFS");for(var a=0;a<e.length;a++)switch(e[a].state){case OpenLayers.State.INSERT:t.appendChild(this.insert(e[a]));break;case OpenLayers.State.UPDATE:t.appendChild(this.update(e[a]));break;case OpenLayers.State.DELETE:t.appendChild(this.remove(e[a]))}return OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFeatureXML:function(e){var t=this.buildGeometryNode(e.geometry),a=this.createElementNS(this.featureNS,"feature:"+this.geometryName);a.appendChild(t);var i=this.createElementNS(this.featureNS,"feature:"+this.featureName);i.appendChild(a);for(var s in e.attributes){var r=this.createTextNode(e.attributes[s]),o=s;s.search(":")!=-1&&(o=s.split(":")[1]);var n=this.createElementNS(this.featureNS,"feature:"+o);n.appendChild(r),i.appendChild(n)}return i},insert:function(e){var t=this.createElementNS(this.wfsns,"wfs:Insert");return t.appendChild(this.createFeatureXML(e)),t},update:function(e){e.fid||OpenLayers.Console.userError(OpenLayers.i18n("noFID"));var t=this.createElementNS(this.wfsns,"wfs:Update");t.setAttribute("typeName",this.featurePrefix+":"+this.featureName),t.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var a=this.createElementNS(this.wfsns,"wfs:Property"),i=this.createElementNS(this.wfsns,"wfs:Name"),s=this.createTextNode(this.geometryName);i.appendChild(s),a.appendChild(i);var r=this.createElementNS(this.wfsns,"wfs:Value"),o=this.buildGeometryNode(e.geometry);e.layer&&o.setAttribute("srsName",e.layer.projection.getCode()),r.appendChild(o),a.appendChild(r),t.appendChild(a);for(var n in e.attributes)a=this.createElementNS(this.wfsns,"wfs:Property"),i=this.createElementNS(this.wfsns,"wfs:Name"),i.appendChild(this.createTextNode(n)),a.appendChild(i),r=this.createElementNS(this.wfsns,"wfs:Value"),r.appendChild(this.createTextNode(e.attributes[n])),a.appendChild(r),t.appendChild(a);var l=this.createElementNS(this.ogcns,"ogc:Filter"),c=this.createElementNS(this.ogcns,"ogc:FeatureId");return c.setAttribute("fid",e.fid),l.appendChild(c),t.appendChild(l),t},remove:function(e){if(!e.fid)return OpenLayers.Console.userError(OpenLayers.i18n("noFID")),!1;var t=this.createElementNS(this.wfsns,"wfs:Delete");t.setAttribute("typeName",this.featurePrefix+":"+this.featureName),t.setAttribute("xmlns:"+this.featurePrefix,this.featureNS);var a=this.createElementNS(this.ogcns,"ogc:Filter"),i=this.createElementNS(this.ogcns,"ogc:FeatureId");return i.setAttribute("fid",e.fid),a.appendChild(i),t.appendChild(a),t},destroy:function(){this.layer=null},CLASS_NAME:"OpenLayers.Format.WFS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SLD.v1_0_0_GeoServer=OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0,{version:"1.0.0",profile:"GeoServer",readers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(e,t){var a=this.readers.ogc._expression.call(this,e);a&&(t.priority=a)},VendorOption:function(e,t){t.vendorOptions||(t.vendorOptions={}),t.vendorOptions[e.getAttribute("name")]=this.getChildValue(e)},TextSymbolizer:function(e,t){OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this,arguments);var a=this.multipleSymbolizers?t.symbolizers[t.symbolizers.length-1]:t.symbolizer.Text;void 0===a.graphic&&(a.graphic=!1)}},OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.readers),writers:OpenLayers.Util.applyDefaults({sld:OpenLayers.Util.applyDefaults({Priority:function(e){return this.writers.sld._OGCExpression.call(this,"sld:Priority",e)},VendorOption:function(e){return this.createElementNSPlus("sld:VendorOption",{attributes:{name:e.name},value:e.value})},TextSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers,a=t.sld.TextSymbolizer.apply(this,arguments);return e.graphic!==!1&&(e.externalGraphic||e.graphicName)&&this.writeNode("Graphic",e,a),"priority"in e&&this.writeNode("Priority",e.priority,a),this.addVendorOptions(a,e)},PointSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers,a=t.sld.PointSymbolizer.apply(this,arguments);return this.addVendorOptions(a,e)},LineSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers,a=t.sld.LineSymbolizer.apply(this,arguments);return this.addVendorOptions(a,e)},PolygonSymbolizer:function(e){var t=OpenLayers.Format.SLD.v1_0_0.prototype.writers,a=t.sld.PolygonSymbolizer.apply(this,arguments);return this.addVendorOptions(a,e)}},OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)},OpenLayers.Format.SLD.v1_0_0.prototype.writers),addVendorOptions:function(e,t){var a=t.vendorOptions;if(a)for(var i in t.vendorOptions)this.writeNode("VendorOption",{name:i,value:t.vendorOptions[i]},e);return e},CLASS_NAME:"OpenLayers.Format.SLD.v1_0_0_GeoServer"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Boxes=OpenLayers.Class(OpenLayers.Layer.Markers,{drawMarker:function(e){var t=this.map.getLayerPxFromLonLat({lon:e.bounds.left,lat:e.bounds.top}),a=this.map.getLayerPxFromLonLat({lon:e.bounds.right,lat:e.bounds.bottom});if(null==a||null==t)e.display(!1);else{var i=e.draw(t,{w:Math.max(1,a.x-t.x),h:Math.max(1,a.y-t.y)});e.drawn||(this.div.appendChild(i),e.drawn=!0)}},removeMarker:function(e){OpenLayers.Util.removeItem(this.markers,e),null!=e.div&&e.div.parentNode==this.div&&this.div.removeChild(e.div)},CLASS_NAME:"OpenLayers.Layer.Boxes"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WFSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1,{readers:{wfs:OpenLayers.Util.applyDefaults({Service:function(e,t){t.service={},this.readChildNodes(e,t.service)},Fees:function(e,t){var a=this.getChildValue(e);a&&"none"!=a.toLowerCase()&&(t.fees=a)},AccessConstraints:function(e,t){var a=this.getChildValue(e);a&&"none"!=a.toLowerCase()&&(t.accessConstraints=a)},OnlineResource:function(e,t){var a=this.getChildValue(e);a&&"none"!=a.toLowerCase()&&(t.onlineResource=a)},Keywords:function(e,t){var a=this.getChildValue(e);a&&"none"!=a.toLowerCase()&&(t.keywords=a.split(", "))},Capability:function(e,t){t.capability={},this.readChildNodes(e,t.capability)},Request:function(e,t){t.request={},this.readChildNodes(e,t.request)},GetFeature:function(e,t){t.getfeature={href:{},formats:[]},this.readChildNodes(e,t.getfeature)},ResultFormat:function(e,t){for(var a,i=e.childNodes,s=0;s<i.length;s++)a=i[s],1==a.nodeType&&t.formats.push(a.nodeName)},DCPType:function(e,t){this.readChildNodes(e,t)},HTTP:function(e,t){this.readChildNodes(e,t.href)},Get:function(e,t){t.get=e.getAttribute("onlineResource")},Post:function(e,t){t.post=e.getAttribute("onlineResource")},SRS:function(e,t){var a=this.getChildValue(e);a&&(t.srs=a)}},OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)},CLASS_NAME:"OpenLayers.Format.WFSCapabilities.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1_3=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1,{readers:{wms:OpenLayers.Util.applyDefaults({WMS_Capabilities:function(e,t){this.readChildNodes(e,t)},LayerLimit:function(e,t){t.layerLimit=parseInt(this.getChildValue(e))},MaxWidth:function(e,t){t.maxWidth=parseInt(this.getChildValue(e))},MaxHeight:function(e,t){t.maxHeight=parseInt(this.getChildValue(e))},BoundingBox:function(e,t){var a=OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this,[e,t]);a.srs=e.getAttribute("CRS"),t.bbox[a.srs]=a},CRS:function(e,t){this.readers.wms.SRS.apply(this,[e,t])},EX_GeographicBoundingBox:function(e,t){t.llbbox=[],this.readChildNodes(e,t.llbbox)},westBoundLongitude:function(e,t){t[0]=this.getChildValue(e)},eastBoundLongitude:function(e,t){t[2]=this.getChildValue(e)},southBoundLatitude:function(e,t){t[1]=this.getChildValue(e)},northBoundLatitude:function(e,t){t[3]=this.getChildValue(e)},MinScaleDenominator:function(e,t){t.maxScale=parseFloat(this.getChildValue(e)).toPrecision(16)},MaxScaleDenominator:function(e,t){t.minScale=parseFloat(this.getChildValue(e)).toPrecision(16)},Dimension:function(e,t){var a=e.getAttribute("name").toLowerCase(),i={name:a,units:e.getAttribute("units"),unitsymbol:e.getAttribute("unitSymbol"),nearestVal:"1"===e.getAttribute("nearestValue"),multipleVal:"1"===e.getAttribute("multipleValues"),default:e.getAttribute("default")||"",current:"1"===e.getAttribute("current"),values:this.getChildValue(e).split(",")};t.dimensions[i.name]=i},Keyword:function(e,t){var a={value:this.getChildValue(e),vocabulary:e.getAttribute("vocabulary")};t.keywords&&t.keywords.push(a)}},OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),sld:{UserDefinedSymbolization:function(e,t){this.readers.wms.UserDefinedSymbolization.apply(this,[e,t]),t.userSymbols.inlineFeature=1==parseInt(e.getAttribute("InlineFeature")),t.userSymbols.remoteWCS=1==parseInt(e.getAttribute("RemoteWCS"))},DescribeLayer:function(e,t){this.readers.wms.DescribeLayer.apply(this,[e,t])},GetLegendGraphic:function(e,t){this.readers.wms.GetLegendGraphic.apply(this,[e,t])}}},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(e,t,a,i){this.initializeZoomify(a),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,a,{},i])},initializeZoomify:function(e){var t=e.clone();this.size=e.clone();var a=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize));for(this.tierSizeInTiles=[a],this.tierImageSize=[t];t.w>this.standardTileSize||t.h>this.standardTileSize;)t=new OpenLayers.Size(Math.floor(t.w/2),Math.floor(t.h/2)),a=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize)),this.tierSizeInTiles.push(a),this.tierImageSize.push(t);this.tierSizeInTiles.reverse(),this.tierImageSize.reverse(),this.numberOfTiers=this.tierSizeInTiles.length;var i=[1];this.tileCountUpToTier=[0];for(var s=1;s<this.numberOfTiers;s++)i.unshift(Math.pow(2,s)),this.tileCountUpToTier.push(this.tierSizeInTiles[s-1].w*this.tierSizeInTiles[s-1].h+this.tileCountUpToTier[s-1]);this.serverResolutions||(this.serverResolutions=i)},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments),this.tileCountUpToTier.length=0,this.tierSizeInTiles.length=0,this.tierImageSize.length=0},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options)),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),a=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),i=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),s=this.getZoomForResolution(t),r=a+i*this.tierSizeInTiles[s].w+this.tileCountUpToTier[s],o="TileGroup"+Math.floor(r/256)+"/"+s+"-"+a+"-"+i+".jpg",n=this.url;return OpenLayers.Util.isArray(n)&&(n=this.selectUrl(o,n)),n+o},getImageSize:function(){if(arguments.length>0){var e=this.adjustBounds(arguments[0]),t=this.getServerResolution(),a=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),i=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),s=this.getZoomForResolution(t),r=this.standardTileSize,o=this.standardTileSize;if(a==this.tierSizeInTiles[s].w-1)var r=this.tierImageSize[s].w%this.standardTileSize;if(i==this.tierSizeInTiles[s].h-1)var o=this.tierImageSize[s].h%this.standardTileSize;return new OpenLayers.Size(r,o)}return this.tileSize},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},CLASS_NAME:"OpenLayers.Layer.Zoomify"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.MapServer=OpenLayers.Class(OpenLayers.Layer.Grid,{DEFAULT_PARAMS:{mode:"map",map_imagetype:"png"},initialize:function(e,t,a,i){OpenLayers.Layer.Grid.prototype.initialize.apply(this,arguments),this.params=OpenLayers.Util.applyDefaults(this.params,this.DEFAULT_PARAMS),null!=i&&null!=i.isBaseLayer||(this.isBaseLayer="true"!=this.params.transparent&&1!=this.params.transparent)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.MapServer(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=[e.left,e.bottom,e.right,e.top],a=this.getImageSize(),i=this.getFullRequestString({mapext:t,imgext:t,map_size:[a.w,a.h],imgx:a.w/2,imgy:a.h/2,imgxy:[a.w,a.h]});return i},getFullRequestString:function(e,t){var a=null==t?this.url:t,i=OpenLayers.Util.extend({},this.params);i=OpenLayers.Util.extend(i,e);var s=OpenLayers.Util.getParameterString(i);OpenLayers.Util.isArray(a)&&(a=this.selectUrl(s,a));var r=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(a));for(var o in i)o.toUpperCase()in r&&delete i[o];s=OpenLayers.Util.getParameterString(i);var n=a;if(s=s.replace(/,/g,"+"),""!=s){var l=a.charAt(a.length-1);n+="&"==l||"?"==l?s:a.indexOf("?")==-1?"?"+s:"&"+s}return n},CLASS_NAME:"OpenLayers.Layer.MapServer"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Renderer.VML=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"urn:schemas-microsoft-com:vml",symbolCache:{},offset:null,initialize:function(e){if(this.supported()){if(!document.namespaces.olv){document.namespaces.add("olv",this.xmlns);for(var t=document.createStyleSheet(),a=["shape","rect","oval","fill","stroke","imagedata","group","textbox"],i=0,s=a.length;i<s;i++)t.addRule("olv\\:"+a[i],"behavior: url(#default#VML); position: absolute; display: inline-block;")}OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments)}},supported:function(){return!!document.namespaces},setExtent:function(e,t){var a=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),i=this.getResolution(),s=e.left/i|0,r=e.top/i-this.size.h|0;t||!this.offset?(this.offset={x:s,y:r},s=0,r=0):(s-=this.offset.x,r-=this.offset.y);var o=s-this.xOffset+" "+r;this.root.coordorigin=o;for(var n,l=[this.root,this.vectorRoot,this.textRoot],c=0,d=l.length;c<d;++c){n=l[c];var p=this.size.w+" "+this.size.h;n.coordsize=p}return this.root.style.flip="y",a},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments);for(var t,a=[this.rendererRoot,this.root,this.vectorRoot,this.textRoot],i=this.size.w+"px",s=this.size.h+"px",r=0,o=a.length;r<o;++r)t=a[r],t.style.width=i,t.style.height=s},getNodeType:function(e,t){var a=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":a=t.externalGraphic?"olv:rect":this.isComplexSymbol(t.graphicName)?"olv:shape":"olv:oval";break;case"OpenLayers.Geometry.Rectangle":a="olv:rect";break;case"OpenLayers.Geometry.LineString":case"OpenLayers.Geometry.LinearRing":case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":a="olv:shape"}return a},setStyle:function(e,t,a,i){t=t||e._style,a=a||e._options;var s=t.fillColor,r=t.title||t.graphicTitle;if(r&&(e.title=r),"OpenLayers.Geometry.Point"===e._geometryClass)if(t.externalGraphic){a.isFilled=!0;var o=t.graphicWidth||t.graphicHeight,n=t.graphicHeight||t.graphicWidth;o=o?o:2*t.pointRadius,n=n?n:2*t.pointRadius;var l=this.getResolution(),c=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*o),d=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*n);e.style.left=((i.x-this.featureDx)/l-this.offset.x+c|0)+"px",e.style.top=(i.y/l-this.offset.y-(d+n)|0)+"px",e.style.width=o+"px",e.style.height=n+"px",e.style.flip="y",s="none",a.isStroked=!1}else if(this.isComplexSymbol(t.graphicName)){var p=this.importSymbol(t.graphicName);e.path=p.path,e.coordorigin=p.left+","+p.bottom;var u=p.size;e.coordsize=u+","+u,this.drawCircle(e,i,t.pointRadius),e.style.flip="y"}else this.drawCircle(e,i,t.pointRadius);a.isFilled?e.fillcolor=s:e.filled="false";var m=e.getElementsByTagName("fill"),h=0==m.length?null:m[0];a.isFilled?(h||(h=this.createNode("olv:fill",e.id+"_fill")),h.opacity=t.fillOpacity,"OpenLayers.Geometry.Point"===e._geometryClass&&t.externalGraphic&&(t.graphicOpacity&&(h.opacity=t.graphicOpacity),h.src=t.externalGraphic,h.type="frame",t.graphicWidth&&t.graphicHeight||(h.aspect="atmost")),h.parentNode!=e&&e.appendChild(h)):h&&e.removeChild(h);var g=t.rotation;void 0===g&&void 0===e._rotation||(e._rotation=g,t.externalGraphic?(this.graphicRotate(e,c,d,t),h.opacity=0):"OpenLayers.Geometry.Point"===e._geometryClass&&(e.style.rotation=g||0));var v=e.getElementsByTagName("stroke"),f=0==v.length?null:v[0];return a.isStroked?(f||(f=this.createNode("olv:stroke",e.id+"_stroke"),e.appendChild(f)),f.on=!0,f.color=t.strokeColor,f.weight=t.strokeWidth+"px",f.opacity=t.strokeOpacity,f.endcap="butt"==t.strokeLinecap?"flat":t.strokeLinecap||"round",t.strokeDashstyle&&(f.dashstyle=this.dashStyle(t))):(e.stroked=!1,f&&(f.on=!1)),"inherit"!=t.cursor&&null!=t.cursor&&(e.style.cursor=t.cursor),e},graphicRotate:function(e,t,a,i){var s,r,i=i||e._style,o=i.rotation||0;if(!i.graphicWidth||!i.graphicHeight){var n=new Image;return n.onreadystatechange=OpenLayers.Function.bind(function(){"complete"!=n.readyState&&"interactive"!=n.readyState||(s=n.width/n.height,r=Math.max(2*i.pointRadius,i.graphicWidth||0,i.graphicHeight||0),t*=s,i.graphicWidth=r*s,i.graphicHeight=r,this.graphicRotate(e,t,a,i))},this),void(n.src=i.externalGraphic)}r=Math.max(i.graphicWidth,i.graphicHeight),s=i.graphicWidth/i.graphicHeight;var l=Math.round(i.graphicWidth||r*s),c=Math.round(i.graphicHeight||r);e.style.width=l+"px",e.style.height=c+"px";var d=document.getElementById(e.id+"_image");d||(d=this.createNode("olv:imagedata",e.id+"_image"),e.appendChild(d)),d.style.width=l+"px",d.style.height=c+"px",d.src=i.externalGraphic,d.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')";var p=o*Math.PI/180,u=Math.sin(p),m=Math.cos(p),h="progid:DXImageTransform.Microsoft.Matrix(M11="+m+",M12="+-u+",M21="+u+",M22="+m+",SizingMethod='auto expand')\n",g=i.graphicOpacity||i.fillOpacity;g&&1!=g&&(h+="progid:DXImageTransform.Microsoft.BasicImage(opacity="+g+")\n"),e.style.filter=h;var v=new OpenLayers.Geometry.Point(-t,-a),f=new OpenLayers.Bounds(0,0,l,c).toGeometry();f.rotate(i.rotation,v);var y=f.getBounds();e.style.left=Math.round(parseInt(e.style.left)+y.left)+"px",e.style.top=Math.round(parseInt(e.style.top)-y.bottom)+"px"},postDraw:function(e){e.style.visibility="visible";var t=e._style.fillColor,a=e._style.strokeColor;"none"==t&&e.fillcolor!=t&&(e.fillcolor=t),"none"==a&&e.strokecolor!=a&&(e.strokecolor=a)},setNodeDimension:function(e,t){var a=t.getBounds();if(a){var i=this.getResolution(),s=new OpenLayers.Bounds((a.left-this.featureDx)/i-this.offset.x|0,a.bottom/i-this.offset.y|0,(a.right-this.featureDx)/i-this.offset.x|0,a.top/i-this.offset.y|0);e.style.left=s.left+"px",e.style.top=s.top+"px",e.style.width=s.getWidth()+"px",e.style.height=s.getHeight()+"px",e.coordorigin=s.left+" "+s.top,e.coordsize=s.getWidth()+" "+s.getHeight()}},dashStyle:function(e){var t=e.strokeDashstyle;switch(t){case"solid":case"dot":case"dash":case"dashdot":case"longdash":case"longdashdot":return t;default:var a=t.split(/[ ,]/);return 2==a.length?1*a[0]>=2*a[1]?"longdash":1==a[0]||1==a[1]?"dot":"dash":4==a.length?1*a[0]>=2*a[1]?"longdashdot":"dashdot":"solid"}},createNode:function(e,t){var a=document.createElement(e);return t&&(a.id=t),a.unselectable="on",a.onselectstart=OpenLayers.Function.False,a},nodeTypeCompare:function(e,t){var a=t,i=a.indexOf(":");i!=-1&&(a=a.substr(i+1));var s=e.nodeName;return i=s.indexOf(":"),i!=-1&&(s=s.substr(i+1)),a==s},createRenderRoot:function(){return this.nodeFactory(this.container.id+"_vmlRoot","div")},createRoot:function(e){return this.nodeFactory(this.container.id+e,"olv:group")},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,a){if(!isNaN(t.x)&&!isNaN(t.y)){var i=this.getResolution();e.style.left=((t.x-this.featureDx)/i-this.offset.x|0)-a+"px",e.style.top=(t.y/i-this.offset.y|0)-a+"px";var s=2*a;return e.style.width=s+"px",e.style.height=s+"px",e}return!1},drawLineString:function(e,t){return this.drawLine(e,t,!1)},drawLinearRing:function(e,t){return this.drawLine(e,t,!0)},drawLine:function(e,t,a){this.setNodeDimension(e,t);for(var i,s,r,o=this.getResolution(),n=t.components.length,l=new Array(n),c=0;c<n;c++)i=t.components[c],s=(i.x-this.featureDx)/o-this.offset.x|0,r=i.y/o-this.offset.y|0,l[c]=" "+s+","+r+" l ";var d=a?" x e":" e";return e.path="m"+l.join("")+d,e},drawPolygon:function(e,t){this.setNodeDimension(e,t);var a,i,s,r,o,n,l,c,d,p,u,m,h=this.getResolution(),g=[];for(a=0,i=t.components.length;a<i;a++){for(g.push("m"),s=t.components[a].components,r=0===a,o=null,n=null,l=0,c=s.length;l<c;l++)d=s[l],u=(d.x-this.featureDx)/h-this.offset.x|0,m=d.y/h-this.offset.y|0,p=" "+u+","+m,g.push(p),0==l&&g.push(" l"),r||(o?o!=p&&(n?n!=p&&(r=!0):n=p):o=p);g.push(r?" x ":" ")}return g.push("e"),e.path=g.join(""),e},drawRectangle:function(e,t){var a=this.getResolution();return e.style.left=((t.x-this.featureDx)/a-this.offset.x|0)+"px",e.style.top=(t.y/a-this.offset.y|0)+"px",e.style.width=(t.width/a|0)+"px",e.style.height=(t.height/a|0)+"px",e},drawText:function(e,t,a){var i=this.nodeFactory(e+this.LABEL_ID_SUFFIX,"olv:rect"),s=this.nodeFactory(e+this.LABEL_ID_SUFFIX+"_textbox","olv:textbox"),r=this.getResolution();i.style.left=((a.x-this.featureDx)/r-this.offset.x|0)+"px",i.style.top=(a.y/r-this.offset.y|0)+"px",i.style.flip="y",s.innerText=t.label,"inherit"!=t.cursor&&null!=t.cursor&&(s.style.cursor=t.cursor),t.fontColor&&(s.style.color=t.fontColor),t.fontOpacity&&(s.style.filter="alpha(opacity="+100*t.fontOpacity+")"),t.fontFamily&&(s.style.fontFamily=t.fontFamily),t.fontSize&&(s.style.fontSize=t.fontSize),t.fontWeight&&(s.style.fontWeight=t.fontWeight),t.fontStyle&&(s.style.fontStyle=t.fontStyle),t.labelSelect===!0&&(i._featureId=e,s._featureId=e,s._geometry=a,s._geometryClass=a.CLASS_NAME),s.style.whiteSpace="nowrap",s.inset="1px,0px,0px,0px",i.parentNode||(i.appendChild(s),this.textRoot.appendChild(i));var o=t.labelAlign||"cm";1==o.length&&(o+="m");var n=s.clientWidth*OpenLayers.Renderer.VML.LABEL_SHIFT[o.substr(0,1)],l=s.clientHeight*OpenLayers.Renderer.VML.LABEL_SHIFT[o.substr(1,1)];i.style.left=parseInt(i.style.left)-n-1+"px",i.style.top=parseInt(i.style.top)+l+"px"},moveRoot:function(e){var t=this.map.getLayer(e.container.id);t instanceof OpenLayers.Layer.Vector.RootContainer&&(t=this.map.getLayer(this.container.id)),t&&t.renderer.clear(),OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this,arguments),t&&t.redraw()},importSymbol:function(e){var t=this.container.id+"-"+e,a=this.symbolCache[t];if(a)return a;var i=OpenLayers.Renderer.symbol[e];if(!i)throw new Error(e+" is not a valid symbol name");for(var s=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),r=["m"],o=0;o<i.length;o+=2){var n=i[o],l=i[o+1];s.left=Math.min(s.left,n),s.bottom=Math.min(s.bottom,l),s.right=Math.max(s.right,n),s.top=Math.max(s.top,l),r.push(n),r.push(l),0==o&&r.push("l")}r.push("x e");var c=r.join(" "),d=(s.getWidth()-s.getHeight())/2;return d>0?(s.bottom=s.bottom-d,s.top=s.top+d):(s.left=s.left+d,s.right=s.right-d),a={path:c,size:s.getWidth(),left:s.left,bottom:s.bottom},this.symbolCache[t]=a,a},CLASS_NAME:"OpenLayers.Renderer.VML"}),OpenLayers.Renderer.VML.LABEL_SHIFT={l:0,c:.5,r:1,t:0,m:.5,b:1},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.CacheRead=OpenLayers.Class(OpenLayers.Control,{fetchEvent:"tileloadstart",layers:null,autoActivate:!0,setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments);var t,a=this.layers||e.layers;for(t=a.length-1;t>=0;--t)this.addLayer({layer:a[t]});this.layers||e.events.on({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this})},addLayer:function(e){e.layer.events.register(this.fetchEvent,this,this.fetch)},removeLayer:function(e){e.layer.events.unregister(this.fetchEvent,this,this.fetch)},fetch:function(e){if(this.active&&window.localStorage&&e.tile instanceof OpenLayers.Tile.Image){var t=e.tile,a=t.url;!t.layer.crossOriginKeyword&&OpenLayers.ProxyHost&&0===a.indexOf(OpenLayers.ProxyHost)&&(a=OpenLayers.Control.CacheWrite.urlMap[a]);var i=window.localStorage.getItem("olCache_"+a);i&&(t.url=i,"tileerror"===e.type&&t.setImgSrc(i))}},destroy:function(){if(this.layers||this.map){var e,t=this.layers||this.map.layers;for(e=t.length-1;e>=0;--e)this.removeLayer({layer:t[e]})}this.map&&this.map.events.un({addlayer:this.addLayer,removeLayer:this.removeLayer,scope:this}),OpenLayers.Control.prototype.destroy.apply(this,arguments)},CLASS_NAME:"OpenLayers.Control.CacheRead"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.WFS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.0.0",CLASS_NAME:"OpenLayers.Protocol.WFS.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Format.XML,{layerIdentifier:"_layer",featureIdentifier:"_feature",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},gmlFormat:null,read:function(e){var t;"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));var a=e.documentElement;if(a){var i=this["read_"+a.nodeName];t=i?i.call(this,a):new OpenLayers.Format.GML(this.options?this.options:{}).read(e)}else t=e;return t},read_msGMLOutput:function(e){var t=[],a=this.getSiblingNodesByTagCriteria(e,this.layerIdentifier);if(a)for(var i=0,s=a.length;i<s;++i){var r=a[i],o=r.nodeName;r.prefix&&(o=o.split(":")[1]);var o=o.replace(this.layerIdentifier,""),n=this.getSiblingNodesByTagCriteria(r,this.featureIdentifier);if(n)for(var l=0;l<n.length;l++){var c=n[l],d=this.parseGeometry(c),p=this.parseAttributes(c),u=new OpenLayers.Feature.Vector(d.geometry,p,null);u.bounds=d.bounds,u.type=o,t.push(u)}}return t},read_FeatureInfoResponse:function(e){for(var t=[],a=this.getElementsByTagNameNS(e,"*","FIELDS"),i=0,s=a.length;i<s;i++){var r,o=a[i],n=null,l={},c=o.attributes.length;if(c>0)for(r=0;r<c;r++){var d=o.attributes[r];l[d.nodeName]=d.nodeValue}else{var p=o.childNodes;for(r=0,c=p.length;r<c;++r){var u=p[r];3!=u.nodeType&&(l[u.getAttribute("name")]=u.getAttribute("value"))}}t.push(new OpenLayers.Feature.Vector(n,l,null))}return t},getSiblingNodesByTagCriteria:function(e,t){var a,i,s,r,o,n=[];if(e&&e.hasChildNodes()){a=e.childNodes,s=a.length;for(var l=0;l<s;l++){for(o=a[l];o&&1!=o.nodeType;)o=o.nextSibling,l++;i=o?o.nodeName:"",i.length>0&&i.indexOf(t)>-1?n.push(o):(r=this.getSiblingNodesByTagCriteria(o,t),r.length>0&&(0==n.length?n=r:n.push(r)))}}return n},parseAttributes:function(e){var t={};if(1==e.nodeType)for(var a=e.childNodes,i=a.length,s=0;s<i;++s){var r=a[s];if(1==r.nodeType){var o=r.childNodes,n=r.prefix?r.nodeName.split(":")[1]:r.nodeName;if(0==o.length)t[n]=null;else if(1==o.length){var l=o[0];if(3==l.nodeType||4==l.nodeType){var c=l.nodeValue.replace(this.regExes.trimSpace,"");t[n]=c}}}}return t},parseGeometry:function(e){this.gmlFormat||(this.gmlFormat=new OpenLayers.Format.GML);var t,a=this.gmlFormat.parseFeature(e),i=null;return a&&(t=a.geometry&&a.geometry.clone(),i=a.bounds&&a.bounds.clone(),a.destroy()),{geometry:t,bounds:i}},CLASS_NAME:"OpenLayers.Format.WMSGetFeatureInfo"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.WMTSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,requestEncoding:"KVP",drillDown:!1,maxFeatures:10,clickCallback:"click",layers:null,queryVisible:!0,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,pending:0,initialize:function(e){if(e=e||{},e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)),this.drillDown===!0&&(this.hover=!1),this.hover)this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250}));else{var t={};t[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,t,this.handlerOptions.click||{})}},getInfoForClick:function(e){this.request(e.xy,{})},getInfoForHover:function(e){this.request(e.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(--this.pending,this.pending<=0&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var e,t=this.layers||this.map.layers,a=[],i=t.length-1;i>=0&&(e=t[i],!(e instanceof OpenLayers.Layer.WMTS&&e.requestEncoding===this.requestEncoding)||this.queryVisible&&!e.getVisibility()||(a.push(e),this.drillDown&&!this.hover));--i);return a},buildRequestOptions:function(e,t){var a=this.map.getLonLatFromPixel(t),i=e.getURL(new OpenLayers.Bounds(a.lon,a.lat,a.lon,a.lat)),s=OpenLayers.Util.getParameters(i),r=e.getTileInfo(a);return OpenLayers.Util.extend(s,{service:"WMTS",version:e.version,request:"GetFeatureInfo",infoFormat:this.infoFormat,i:r.i,j:r.j}),OpenLayers.Util.applyDefaults(s,this.vendorParams),{url:OpenLayers.Util.isArray(e.url)?e.url[0]:e.url,params:OpenLayers.Util.upperCaseObject(s),callback:function(a){this.handleResponse(t,a,e)},scope:this}},request:function(e,t){t=t||{};var a=this.findLayers();if(a.length>0){for(var i,s,r=0,o=a.length;r<o;r++)if(s=a[r],i=this.events.triggerEvent("beforegetfeatureinfo",{xy:e,layer:s}),i!==!1){++this.pending;var n=this.buildRequestOptions(s,e),l=OpenLayers.Request.GET(n);t.hover===!0&&(this.hoverRequest=l)}this.pending>0&&OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait")}},handleResponse:function(e,t,a){if(--this.pending,this.pending<=0&&(OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait"),this.pending=0),t.status&&(t.status<200||t.status>=300))this.events.triggerEvent("exception",{xy:e,request:t,layer:a});else{var i=t.responseXML;i&&i.documentElement||(i=t.responseText);var s,r;try{s=this.format.read(i)}catch(i){r=!0,this.events.triggerEvent("exception",{xy:e,request:t,error:i,layer:a})}r||this.events.triggerEvent("getfeatureinfo",{text:t.responseText,features:s,request:t,xy:e,layer:a})}},CLASS_NAME:"OpenLayers.Control.WMTSGetFeatureInfo"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.CSW.v2_0_2=OpenLayers.Class(OpenLayers.Protocol,{formatOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({},this.formatOptions)))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),a=this.format.write(e.params||e);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),params:e.params,headers:e.headers,data:a}),t},handleRead:function(e,t){if(t.callback){var a=e.priv;a.status>=200&&a.status<300?(e.data=this.parseData(a),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e)}},parseData:function(e){var t=e.responseXML;return t&&t.documentElement||(t=e.responseText),!t||t.length<=0?null:this.format.read(t)},CLASS_NAME:"OpenLayers.Protocol.CSW.v2_0_2"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WCSCapabilities.v1_1_0=OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1,{namespaces:{wcs:"http://www.opengis.net/wcs/1.1",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",ows:"http://www.opengis.net/ows/1.1"},errorProperty:"operationsMetadata",readers:{wcs:OpenLayers.Util.applyDefaults({Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contentMetadata=[],this.readChildNodes(e,t.contentMetadata)},CoverageSummary:function(e,t){var a={};this.readChildNodes(e,a),t.push(a)},Identifier:function(e,t){t.identifier=this.getChildValue(e)},Title:function(e,t){t.title=this.getChildValue(e)},Abstract:function(e,t){t.abstract=this.getChildValue(e)},SupportedCRS:function(e,t){var a=this.getChildValue(e);a&&(t.supportedCRS||(t.supportedCRS=[]),t.supportedCRS.push(a))},SupportedFormat:function(e,t){var a=this.getChildValue(e);a&&(t.supportedFormat||(t.supportedFormat=[]),t.supportedFormat.push(a))}},OpenLayers.Format.WCSCapabilities.v1.prototype.readers.wcs),ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WCSCapabilities.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Graticule=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,intervals:[45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],displayInLayerSwitcher:!0,visible:!0,numPoints:50,targetSize:200,layerName:null,labelled:!0,labelFormat:"dm",lineSymbolizer:{strokeColor:"#333",strokeWidth:1,strokeOpacity:.5},labelSymbolizer:{},gratLayer:null,initialize:function(e){e=e||{},e.layerName=e.layerName||OpenLayers.i18n("Graticule"),OpenLayers.Control.prototype.initialize.apply(this,[e]),this.labelSymbolizer.stroke=!1,this.labelSymbolizer.fill=!1,this.labelSymbolizer.label="${label}",this.labelSymbolizer.labelAlign="${labelAlign}",this.labelSymbolizer.labelXOffset="${xOffset}",this.labelSymbolizer.labelYOffset="${yOffset}"},destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.gratLayer&&(this.gratLayer.destroy(),this.gratLayer=null)},draw:function(){if(OpenLayers.Control.prototype.draw.apply(this,arguments),!this.gratLayer){var e=new OpenLayers.Style({},{rules:[new OpenLayers.Rule({symbolizer:{Point:this.labelSymbolizer,Line:this.lineSymbolizer}})]});this.gratLayer=new OpenLayers.Layer.Vector(this.layerName,{styleMap:new OpenLayers.StyleMap({default:e}),visibility:this.visible,displayInLayerSwitcher:this.displayInLayerSwitcher})}return this.div},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.map.addLayer(this.gratLayer),this.map.events.register("moveend",this,this.update),this.update(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.map.events.unregister("moveend",this,this.update),this.map.removeLayer(this.gratLayer),!0)},update:function(){var e=this.map.getExtent();if(e){this.gratLayer.destroyFeatures();var t=new OpenLayers.Projection("EPSG:4326"),a=this.map.getProjectionObject(),i=this.map.getResolution();a.proj&&"longlat"==a.proj.projName&&(this.numPoints=1);var s=this.map.getCenter(),r=new OpenLayers.Pixel(s.lon,s.lat);OpenLayers.Projection.transform(r,a,t);var o=this.targetSize*i;o*=o;for(var n,l=0;l<this.intervals.length;++l){n=this.intervals[l];var c=n/2,d=r.offset({x:-c,y:-c}),p=r.offset({x:c,y:c});OpenLayers.Projection.transform(d,t,a),OpenLayers.Projection.transform(p,t,a);var u=(d.x-p.x)*(d.x-p.x)+(d.y-p.y)*(d.y-p.y);if(u<=o)break}r.x=Math.floor(r.x/n)*n,r.y=Math.floor(r.y/n)*n;var m,h=0,g=[r.clone()],v=r.clone();do v=v.offset({x:0,y:n}),m=OpenLayers.Projection.transform(v.clone(),t,a),g.unshift(v);while(e.containsPixel(m)&&++h<1e3);v=r.clone();do v=v.offset({x:0,y:-n}),m=OpenLayers.Projection.transform(v.clone(),t,a),g.push(v);while(e.containsPixel(m)&&++h<1e3);h=0;var f=[r.clone()];v=r.clone();do v=v.offset({x:-n,y:0}),m=OpenLayers.Projection.transform(v.clone(),t,a),f.unshift(v);while(e.containsPixel(m)&&++h<1e3);v=r.clone();do v=v.offset({x:n,y:0}),m=OpenLayers.Projection.transform(v.clone(),t,a),f.push(v);while(e.containsPixel(m)&&++h<1e3);for(var y=[],l=0;l<f.length;++l){for(var b=f[l].x,L=[],w=null,O=Math.min(g[0].y,90),x=Math.max(g[g.length-1].y,-90),S=(O-x)/this.numPoints,C=x,E=0;E<=this.numPoints;++E){var k=new OpenLayers.Geometry.Point(b,C);k.transform(t,a),L.push(k),C+=S,k.y>=e.bottom&&!w&&(w=k)}if(this.labelled){var P=new OpenLayers.Geometry.Point(w.x,e.bottom),T={value:b,label:this.labelled?OpenLayers.Util.getFormattedLonLat(b,"lon",this.labelFormat):"",labelAlign:"cb",xOffset:0,yOffset:2};this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(P,T))}var N=new OpenLayers.Geometry.LineString(L);y.push(new OpenLayers.Feature.Vector(N))}for(var E=0;E<g.length;++E)if(C=g[E].y,!(C<-90||C>90)){for(var L=[],A=f[0].x,M=f[f.length-1].x,F=(M-A)/this.numPoints,b=A,w=null,l=0;l<=this.numPoints;++l){var k=new OpenLayers.Geometry.Point(b,C);k.transform(t,a),L.push(k),b+=F,k.x<e.right&&(w=k)}if(this.labelled){var P=new OpenLayers.Geometry.Point(e.right,w.y),T={value:C,label:this.labelled?OpenLayers.Util.getFormattedLonLat(C,"lat",this.labelFormat):"",labelAlign:"rb",xOffset:-2,yOffset:2};this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(P,T))}var N=new OpenLayers.Geometry.LineString(L);y.push(new OpenLayers.Feature.Vector(N))}this.gratLayer.addFeatures(y)}},CLASS_NAME:"OpenLayers.Control.Graticule"}),/*
 * This file has been edited substantially from the Rico-released
 * version by the OpenLayers development team.
 *  
 *  Copyright 2005 Sabre Airline Solutions  
 *  
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the
 *  License. You may obtain a copy of the License at
 *  
 *         http://www.apache.org/licenses/LICENSE-2.0  
 *  
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the * License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, * either express or
 * implied. See the License for the specific language governing
 * permissions * and limitations under the License.
 *
 */
OpenLayers.Console.warn("OpenLayers.Rico is deprecated"),OpenLayers.Rico=OpenLayers.Rico||{},OpenLayers.Rico.Corner={round:function(e,t){e=OpenLayers.Util.getElement(e),this._setOptions(t);var a=this.options.color;"fromElement"==this.options.color&&(a=this._background(e));var i=this.options.bgColor;"fromParent"==this.options.bgColor&&(i=this._background(e.offsetParent)),this._roundCornersImpl(e,a,i)},changeColor:function(e,t){e.style.backgroundColor=t;for(var a=e.parentNode.getElementsByTagName("span"),i=0;i<a.length;i++)a[i].style.backgroundColor=t},changeOpacity:function(e,t){var a=t,i="alpha(opacity="+100*t+")";e.style.opacity=a,e.style.filter=i;for(var s=e.parentNode.getElementsByTagName("span"),r=0;r<s.length;r++)s[r].style.opacity=a,s[r].style.filter=i},reRound:function(e,t){var a=e.parentNode.childNodes[0],i=e.parentNode.childNodes[2];e.parentNode.removeChild(a),e.parentNode.removeChild(i),this.round(e.parentNode,t)},_roundCornersImpl:function(e,t,a){this.options.border&&this._renderBorder(e,a),this._isTopRounded()&&this._roundTopCorners(e,t,a),this._isBottomRounded()&&this._roundBottomCorners(e,t,a)},_renderBorder:function(e,t){var a="1px solid "+this._borderColor(t),i="border-left: "+a,s="border-right: "+a,r="style='"+i+";"+s+"'";e.innerHTML="<div "+r+">"+e.innerHTML+"</div>"},_roundTopCorners:function(e,t,a){for(var i=this._createCorner(a),s=0;s<this.options.numSlices;s++)i.appendChild(this._createCornerSlice(t,a,s,"top"));e.style.paddingTop=0,e.insertBefore(i,e.firstChild)},_roundBottomCorners:function(e,t,a){for(var i=this._createCorner(a),s=this.options.numSlices-1;s>=0;s--)i.appendChild(this._createCornerSlice(t,a,s,"bottom"));e.style.paddingBottom=0,e.appendChild(i)},_createCorner:function(e){var t=document.createElement("div");return t.style.backgroundColor=this._isTransparent()?"transparent":e,t},_createCornerSlice:function(e,t,a,i){var s=document.createElement("span"),r=s.style;r.backgroundColor=e,r.display="block",r.height="1px",r.overflow="hidden",r.fontSize="1px";var o=this._borderColor(e,t);return this.options.border&&0==a?(r.borderTopStyle="solid",r.borderTopWidth="1px",r.borderLeftWidth="0px",r.borderRightWidth="0px",r.borderBottomWidth="0px",r.height="0px",r.borderColor=o):o&&(r.borderColor=o,r.borderStyle="solid",r.borderWidth="0px 1px"),this.options.compact||a!=this.options.numSlices-1||(r.height="2px"),this._setMargin(s,a,i),this._setBorder(s,a,i),s},_setOptions:function(e){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:!0,border:!1,compact:!1},OpenLayers.Util.extend(this.options,e||{}),this.options.numSlices=this.options.compact?2:4,this._isTransparent()&&(this.options.blend=!1)},_whichSideTop:function(){return this._hasString(this.options.corners,"all","top")?"":this.options.corners.indexOf("tl")>=0&&this.options.corners.indexOf("tr")>=0?"":this.options.corners.indexOf("tl")>=0?"left":this.options.corners.indexOf("tr")>=0?"right":""},_whichSideBottom:function(){return this._hasString(this.options.corners,"all","bottom")?"":this.options.corners.indexOf("bl")>=0&&this.options.corners.indexOf("br")>=0?"":this.options.corners.indexOf("bl")>=0?"left":this.options.corners.indexOf("br")>=0?"right":""},_borderColor:function(e,t){return"transparent"==e?t:this.options.border?this.options.border:this.options.blend?this._blend(t,e):""},_setMargin:function(e,t,a){var i=this._marginSize(t),s="top"==a?this._whichSideTop():this._whichSideBottom();"left"==s?(e.style.marginLeft=i+"px",e.style.marginRight="0px"):"right"==s?(e.style.marginRight=i+"px",e.style.marginLeft="0px"):(e.style.marginLeft=i+"px",e.style.marginRight=i+"px")},_setBorder:function(e,t,a){var i=this._borderSize(t),s="top"==a?this._whichSideTop():this._whichSideBottom();"left"==s?(e.style.borderLeftWidth=i+"px",e.style.borderRightWidth="0px"):"right"==s?(e.style.borderRightWidth=i+"px",e.style.borderLeftWidth="0px"):(e.style.borderLeftWidth=i+"px",e.style.borderRightWidth=i+"px"),0!=this.options.border&&(e.style.borderLeftWidth=i+"px",e.style.borderRightWidth=i+"px")},_marginSize:function(e){if(this._isTransparent())return 0;var t=[5,3,2,1],a=[3,2,1,0],i=[2,1],s=[1,0];return this.options.compact&&this.options.blend?s[e]:this.options.compact?i[e]:this.options.blend?a[e]:t[e]},_borderSize:function(e){var t=[5,3,2,1],a=[2,1,1,1],i=[1,0],s=[0,2,0,0];return this.options.compact&&(this.options.blend||this._isTransparent())?1:this.options.compact?i[e]:this.options.blend?a[e]:this.options.border?s[e]:this._isTransparent()?t[e]:0},_hasString:function(e){for(var t=1;t<arguments.length;t++)if(e.indexOf(arguments[t])>=0)return!0;return!1},_blend:function(e,t){var a=OpenLayers.Rico.Color.createFromHex(e);return a.blend(OpenLayers.Rico.Color.createFromHex(t)),a},_background:function(e){try{return OpenLayers.Rico.Color.createColorFromBackground(e).asHex()}catch(e){return"#ffffff"}},_isTransparent:function(){return"transparent"==this.options.color},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(e){return 1==e.childNodes.length&&3==e.childNodes[0].nodeType}},/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.NavigationHistory=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOGGLE,previous:null,previousOptions:null,next:null,nextOptions:null,limit:50,autoActivate:!0,clearOnDeactivate:!1,registry:null,nextStack:null,previousStack:null,listeners:null,restoring:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.registry=OpenLayers.Util.extend({moveend:this.getState},this.registry);var t={trigger:OpenLayers.Function.bind(this.previousTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Previous"};OpenLayers.Util.extend(t,this.previousOptions),this.previous=new OpenLayers.Control.Button(t);var a={trigger:OpenLayers.Function.bind(this.nextTrigger,this),displayClass:this.displayClass+" "+this.displayClass+"Next"};OpenLayers.Util.extend(a,this.nextOptions),this.next=new OpenLayers.Control.Button(a),this.clear()},onPreviousChange:function(e,t){e&&!this.previous.active?this.previous.activate():!e&&this.previous.active&&this.previous.deactivate()},onNextChange:function(e,t){e&&!this.next.active?this.next.activate():!e&&this.next.active&&this.next.deactivate()},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this),this.previous.destroy(),this.next.destroy(),this.deactivate();for(var e in this)this[e]=null},setMap:function(e){this.map=e,this.next.setMap(e),this.previous.setMap(e)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments),this.next.draw(),this.previous.draw()},previousTrigger:function(){var e=this.previousStack.shift(),t=this.previousStack.shift();return void 0!=t?(this.nextStack.unshift(e),this.previousStack.unshift(t),this.restoring=!0,this.restore(t),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)):this.previousStack.unshift(e),t},nextTrigger:function(){var e=this.nextStack.shift();return void 0!=e&&(this.previousStack.unshift(e),this.restoring=!0,this.restore(e),this.restoring=!1,this.onNextChange(this.nextStack[0],this.nextStack.length),this.onPreviousChange(this.previousStack[1],this.previousStack.length-1)),e},clear:function(){this.previousStack=[],this.previous.deactivate(),this.nextStack=[],this.next.deactivate()},getState:function(){return{center:this.map.getCenter(),resolution:this.map.getResolution(),projection:this.map.getProjectionObject(),units:this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units}},restore:function(e){var t,a;if(this.map.getProjectionObject()==e.projection)a=this.map.getZoomForResolution(e.resolution),t=e.center;else{t=e.center.clone(),t.transform(e.projection,this.map.getProjectionObject());var i=e.units,s=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units,r=i&&s?OpenLayers.INCHES_PER_UNIT[i]/OpenLayers.INCHES_PER_UNIT[s]:1;a=this.map.getZoomForResolution(r*e.resolution)}this.map.setCenter(t,a)},setListeners:function(){this.listeners={};for(var e in this.registry)this.listeners[e]=OpenLayers.Function.bind(function(){if(!this.restoring){var t=this.registry[e].apply(this,arguments);this.previousStack.unshift(t),this.previousStack.length>1&&this.onPreviousChange(this.previousStack[1],this.previousStack.length-1),this.previousStack.length>this.limit+1&&this.previousStack.pop(),this.nextStack.length>0&&(this.nextStack=[],this.onNextChange(null,0))}return!0},this)},activate:function(){var e=!1;if(this.map&&OpenLayers.Control.prototype.activate.apply(this)){null==this.listeners&&this.setListeners();for(var t in this.listeners)this.map.events.register(t,this,this.listeners[t]);e=!0,0==this.previousStack.length&&this.initStack()}return e},initStack:function(){this.map.getCenter()&&this.listeners.moveend()},deactivate:function(){var e=!1;if(this.map&&OpenLayers.Control.prototype.deactivate.apply(this)){for(var t in this.listeners)this.map.events.unregister(t,this,this.listeners[t]);this.clearOnDeactivate&&this.clear(),e=!0}return e},CLASS_NAME:"OpenLayers.Control.NavigationHistory"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.UTFGrid=OpenLayers.Class(OpenLayers.Layer.XYZ,{isBaseLayer:!1,projection:new OpenLayers.Projection("EPSG:900913"),useJSONP:!1,tileClass:OpenLayers.Tile.UTFGrid,initialize:function(e){OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e.name,e.url,{},e]),this.tileOptions=OpenLayers.Util.extend({utfgridResolution:this.utfgridResolution},this.tileOptions)},createBackBuffer:function(){},clone:function(e){return null==e&&(e=new OpenLayers.Layer.UTFGrid(this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getFeatureInfo:function(e){var t=null,a=this.getTileData(e);return a&&a.tile&&(t=a.tile.getFeatureInfo(a.i,a.j)),t},getFeatureId:function(e){var t=null,a=this.getTileData(e);return a.tile&&(t=a.tile.getFeatureId(a.i,a.j)),t},CLASS_NAME:"OpenLayers.Layer.UTFGrid"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.TileManager=OpenLayers.Class({cacheSize:256,tilesPerFrame:2,frameDelay:16,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,tileCacheIndex:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){this.maps.push(e),this.tileQueue[e.id]=[];for(var t=0,a=e.layers.length;t<a;++t)this.addLayer({layer:e.layers[t]});e.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){if(window.clearTimeout(this.tileQueueId[e.id]),e.layers)for(var t=0,a=e.layers.length;t<a;++t)this.removeLayer({layer:e.layers[t]});e.events&&e.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[e.id],delete this.tileQueueId[e.id],OpenLayers.Util.removeItem(this.maps,e)}},move:function(e){this.updateTimeout(e.object,this.moveDelay,!0)},zoomEnd:function(e){this.updateTimeout(e.object,this.zoomDelay)},changeLayer:function(e){"visibility"!==e.property&&"params"!==e.property||this.updateTimeout(e.object,0)},addLayer:function(e){var t=e.layer;if(t instanceof OpenLayers.Layer.Grid){t.events.on({addtile:this.addTile,retile:this.clearTileQueue,scope:this});var a,i,s;for(a=t.grid.length-1;a>=0;--a)for(i=t.grid[a].length-1;i>=0;--i)s=t.grid[a][i],this.addTile({tile:s}),s.url&&!s.imgDiv&&this.manageTileCache({object:s})}},removeLayer:function(e){var t=e.layer;if(t instanceof OpenLayers.Layer.Grid&&(this.clearTileQueue({object:t}),t.events&&t.events.un({addtile:this.addTile,retile:this.clearTileQueue,scope:this}),t.grid)){var a,i,s;for(a=t.grid.length-1;a>=0;--a)for(i=t.grid[a].length-1;i>=0;--i)s=t.grid[a][i],this.unloadTile({object:s})}},updateTimeout:function(e,t,a){window.clearTimeout(this.tileQueueId[e.id]);var i=this.tileQueue[e.id];a&&!i.length||(this.tileQueueId[e.id]=window.setTimeout(OpenLayers.Function.bind(function(){this.drawTilesFromQueue(e),i.length&&this.updateTimeout(e,this.frameDelay)},this),t))},addTile:function(e){e.tile instanceof OpenLayers.Tile.Image?e.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}):this.removeLayer({layer:e.tile.layer})},unloadTile:function(e){var t=e.object;t.events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),OpenLayers.Util.removeItem(this.tileQueue[t.layer.map.id],t)},queueTileDraw:function(e){var t=e.object,a=!1,i=t.layer,s=i.getURL(t.bounds),r=this.tileCache[s];if(r&&"olTileImage"!==r.className&&(delete this.tileCache[s],OpenLayers.Util.removeItem(this.tileCacheIndex,s),r=null),i.url&&(i.async||!r)){var o=this.tileQueue[i.map.id];~OpenLayers.Util.indexOf(o,t)||o.push(t),a=!0}return!a},drawTilesFromQueue:function(e){for(var t=this.tileQueue[e.id],a=this.tilesPerFrame,i=e.zoomTween&&e.zoomTween.playing;!i&&t.length&&a;)t.shift().draw(!0),--a},manageTileCache:function(e){var t=e.object,a=this.tileCache[t.url];a&&(a.parentNode&&OpenLayers.Element.hasClass(a.parentNode,"olBackBuffer")&&(a.parentNode.removeChild(a),a.id=null),a.parentNode||(a.style.visibility="hidden",a.style.opacity=0,t.setImage(a),OpenLayers.Util.removeItem(this.tileCacheIndex,t.url),this.tileCacheIndex.push(t.url)))},addToCache:function(e){var t=e.object;this.tileCache[t.url]||OpenLayers.Element.hasClass(t.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[t.url]=t.imgDiv,this.tileCacheIndex.push(t.url))},clearTileQueue:function(e){for(var t=e.object,a=this.tileQueue[t.map.id],i=a.length-1;i>=0;--i)a[i].layer===t&&a.splice(i,1)},destroy:function(){for(var e=this.maps.length-1;e>=0;--e)this.removeMap(this.maps[e]);this.maps=null,this.tileQueue=null,this.tileQueueId=null,this.tileCache=null,this.tileCacheIndex=null,this._destroyed=!0}}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.ArcGISCache=OpenLayers.Class(OpenLayers.Layer.XYZ,{url:null,tileOrigin:null,tileSize:new OpenLayers.Size(256,256),useArcGISServer:!0,type:"png",useScales:!1,overrideDPI:!1,initialize:function(e,t,a){if(OpenLayers.Layer.XYZ.prototype.initialize.apply(this,arguments),this.resolutions&&(this.serverResolutions=this.resolutions,this.maxExtent=this.getMaxExtentForResolution(this.resolutions[0])),this.layerInfo){var i=this.layerInfo,s=new OpenLayers.Bounds(i.fullExtent.xmin,i.fullExtent.ymin,i.fullExtent.xmax,i.fullExtent.ymax);if(this.projection="EPSG:"+i.spatialReference.wkid,this.sphericalMercator=102100==i.spatialReference.wkid,this.units="esriFeet"==i.units?"ft":"m",i.tileInfo){this.tileSize=new OpenLayers.Size(i.tileInfo.width||i.tileInfo.cols,i.tileInfo.height||i.tileInfo.rows),this.tileOrigin=new OpenLayers.LonLat(i.tileInfo.origin.x,i.tileInfo.origin.y);var r=new OpenLayers.Geometry.Point(s.left,s.top),o=new OpenLayers.Geometry.Point(s.right,s.bottom);this.useScales?this.scales=[]:this.resolutions=[],this.lods=[];for(var n in i.tileInfo.lods)if(i.tileInfo.lods.hasOwnProperty(n)){var l=i.tileInfo.lods[n];this.useScales?this.scales.push(l.scale):this.resolutions.push(l.resolution);var c=this.getContainingTileCoords(r,l.resolution);l.startTileCol=c.x,l.startTileRow=c.y;var d=this.getContainingTileCoords(o,l.resolution);l.endTileCol=d.x,l.endTileRow=d.y,this.lods.push(l)}this.maxExtent=this.calculateMaxExtentWithLOD(this.lods[0]),this.serverResolutions=this.resolutions,this.overrideDPI&&i.tileInfo.dpi&&(OpenLayers.DOTS_PER_INCH=i.tileInfo.dpi)}}},getContainingTileCoords:function(e,t){return new OpenLayers.Pixel(Math.max(Math.floor((e.x-this.tileOrigin.lon)/(this.tileSize.w*t)),0),Math.max(Math.floor((this.tileOrigin.lat-e.y)/(this.tileSize.h*t)),0))},calculateMaxExtentWithLOD:function(e){var t=e.endTileCol-e.startTileCol+1,a=e.endTileRow-e.startTileRow+1,i=this.tileOrigin.lon+e.startTileCol*this.tileSize.w*e.resolution,s=i+t*this.tileSize.w*e.resolution,r=this.tileOrigin.lat-e.startTileRow*this.tileSize.h*e.resolution,o=r-a*this.tileSize.h*e.resolution;return new OpenLayers.Bounds(i,o,s,r)},calculateMaxExtentWithExtent:function(e,t){var a=new OpenLayers.Geometry.Point(e.left,e.top),i=new OpenLayers.Geometry.Point(e.right,e.bottom),s=this.getContainingTileCoords(a,t),r=this.getContainingTileCoords(i,t),o={resolution:t,startTileCol:s.x,startTileRow:s.y,endTileCol:r.x,endTileRow:r.y};return this.calculateMaxExtentWithLOD(o)},getUpperLeftTileCoord:function(e){var t=new OpenLayers.Geometry.Point(this.maxExtent.left,this.maxExtent.top);return this.getContainingTileCoords(t,e)},getLowerRightTileCoord:function(e){var t=new OpenLayers.Geometry.Point(this.maxExtent.right,this.maxExtent.bottom);return this.getContainingTileCoords(t,e)},getMaxExtentForResolution:function(e){var t=this.getUpperLeftTileCoord(e),a=this.getLowerRightTileCoord(e),i=a.x-t.x+1,s=a.y-t.y+1,r=this.tileOrigin.lon+t.x*this.tileSize.w*e,o=r+i*this.tileSize.w*e,n=this.tileOrigin.lat-t.y*this.tileSize.h*e,l=n-s*this.tileSize.h*e;return new OpenLayers.Bounds(r,l,o,n)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.ArcGISCache(this.name,this.url,this.options)),OpenLayers.Layer.XYZ.prototype.clone.apply(this,[e])},initGriddedTiles:function(e){delete this._tileOrigin,OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this,arguments)},getMaxExtent:function(){var e=this.map.getResolution();return this.maxExtent=this.getMaxExtentForResolution(e)},getTileOrigin:function(){if(!this._tileOrigin){var e=this.getMaxExtent();this._tileOrigin=new OpenLayers.LonLat(e.left,e.bottom)}return this._tileOrigin},getURL:function(e){var t=this.getResolution(),a=this.tileOrigin.lon+t*this.tileSize.w/2,i=this.tileOrigin.lat-t*this.tileSize.h/2,s=e.getCenterLonLat(),r=({x:s.lon,y:s.lat},Math.round(Math.abs((s.lon-a)/(t*this.tileSize.w)))),o=Math.round(Math.abs((i-s.lat)/(t*this.tileSize.h))),n=this.map.getZoom();if(this.lods){var l=this.lods[this.map.getZoom()];if(r<l.startTileCol||r>l.endTileCol||o<l.startTileRow||o>l.endTileRow)return null}else{var c=this.getUpperLeftTileCoord(t),d=this.getLowerRightTileCoord(t);if(r<c.x||r>=d.x||o<c.y||o>=d.y)return null}var p=this.url,u=""+r+o+n;return OpenLayers.Util.isArray(p)&&(p=this.selectUrl(u,p)),this.useArcGISServer?p+="/tile/${z}/${y}/${x}":(r="C"+OpenLayers.Number.zeroPad(r,8,16),o="R"+OpenLayers.Number.zeroPad(o,8,16),n="L"+OpenLayers.Number.zeroPad(n,2,10),p=p+"/${z}/${y}/${x}."+this.type),p=OpenLayers.String.format(p,{x:r,y:o,z:n}),OpenLayers.Util.urlAppend(p,OpenLayers.Util.getParameterString(this.params))},CLASS_NAME:"OpenLayers.Layer.ArcGISCache"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.WMSGetFeatureInfo=OpenLayers.Class(OpenLayers.Control,{hover:!1,drillDown:!1,maxFeatures:10,clickCallback:"click",output:"features",layers:null,queryVisible:!1,url:null,layerUrls:null,infoFormat:"text/html",vendorParams:{},format:null,formatOptions:null,handler:null,hoverRequest:null,initialize:function(e){if(e=e||{},e.handlerOptions=e.handlerOptions||{},OpenLayers.Control.prototype.initialize.apply(this,[e]),this.format||(this.format=new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)),this.drillDown===!0&&(this.hover=!1),this.hover)this.handler=new OpenLayers.Handler.Hover(this,{move:this.cancelHover,pause:this.getInfoForHover},OpenLayers.Util.extend(this.handlerOptions.hover||{},{delay:250}));else{var t={};t[this.clickCallback]=this.getInfoForClick,this.handler=new OpenLayers.Handler.Click(this,t,this.handlerOptions.click||{})}},getInfoForClick:function(e){this.events.triggerEvent("beforegetfeatureinfo",{xy:e.xy}),OpenLayers.Element.addClass(this.map.viewPortDiv,"olCursorWait"),this.request(e.xy,{})},getInfoForHover:function(e){this.events.triggerEvent("beforegetfeatureinfo",{xy:e.xy}),this.request(e.xy,{hover:!0})},cancelHover:function(){this.hoverRequest&&(this.hoverRequest.abort(),this.hoverRequest=null)},findLayers:function(){for(var e,t,a=this.layers||this.map.layers,i=[],s=a.length-1;s>=0;--s)e=a[s],e instanceof OpenLayers.Layer.WMS&&(!this.queryVisible||e.getVisibility())&&(t=OpenLayers.Util.isArray(e.url)?e.url[0]:e.url,this.drillDown!==!1||this.url||(this.url=t),(this.drillDown===!0||this.urlMatches(t))&&i.push(e));return i},urlMatches:function(e){var t=OpenLayers.Util.isEquivalentUrl(this.url,e);if(!t&&this.layerUrls)for(var a=0,i=this.layerUrls.length;a<i;++a)if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[a],e)){t=!0;break}return t},buildWMSOptions:function(e,t,a,i){for(var s=[],r=[],o=0,n=t.length;o<n;o++)null!=t[o].params.LAYERS&&(s=s.concat(t[o].params.LAYERS),r=r.concat(this.getStyleNames(t[o])));var l=t[0],c=this.map.getProjection(),d=l.projection;d&&d.equals(this.map.getProjectionObject())&&(c=d.getCode());var p=OpenLayers.Util.extend({service:"WMS",version:l.params.VERSION,request:"GetFeatureInfo",exceptions:l.params.EXCEPTIONS,bbox:this.map.getExtent().toBBOX(null,l.reverseAxisOrder()),feature_count:this.maxFeatures,height:this.map.getSize().h,width:this.map.getSize().w,format:i,info_format:l.params.INFO_FORMAT||this.infoFormat},parseFloat(l.params.VERSION)>=1.3?{crs:c,i:parseInt(a.x),j:parseInt(a.y)}:{srs:c,x:parseInt(a.x),y:parseInt(a.y)});return 0!=s.length&&(p=OpenLayers.Util.extend({layers:s,query_layers:s,styles:r},p)),OpenLayers.Util.applyDefaults(p,this.vendorParams),{url:e,params:OpenLayers.Util.upperCaseObject(p),callback:function(t){this.handleResponse(a,t,e)},scope:this}},getStyleNames:function(e){var t;return t=e.params.STYLES?e.params.STYLES:OpenLayers.Util.isArray(e.params.LAYERS)?new Array(e.params.LAYERS.length):e.params.LAYERS.replace(/[^,]/g,"")},request:function(e,t){var a=this.findLayers();if(0==a.length)return this.events.triggerEvent("nogetfeatureinfo"),void OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait");if(t=t||{},this.drillDown===!1){var i=this.buildWMSOptions(this.url,a,e,a[0].params.FORMAT),s=OpenLayers.Request.GET(i);t.hover===!0&&(this.hoverRequest=s)}else{this._requestCount=0,this._numRequests=0,this.features=[];for(var r,o={},n=0,l=a.length;n<l;n++){var c=a[n];r=OpenLayers.Util.isArray(c.url)?c.url[0]:c.url,r in o?o[r].push(c):(this._numRequests++,o[r]=[c])}var a;for(var r in o){a=o[r];var i=this.buildWMSOptions(r,a,e,a[0].params.FORMAT);OpenLayers.Request.GET(i)}}},triggerGetFeatureInfo:function(e,t,a){this.events.triggerEvent("getfeatureinfo",{text:e.responseText,features:a,request:e,xy:t}),OpenLayers.Element.removeClass(this.map.viewPortDiv,"olCursorWait")},handleResponse:function(e,t,a){var i=t.responseXML;i&&i.documentElement||(i=t.responseText);var s=this.format.read(i);this.drillDown===!1?this.triggerGetFeatureInfo(t,e,s):(this._requestCount++,"object"===this.output?this._features=(this._features||[]).concat({url:a,features:s}):this._features=(this._features||[]).concat(s),this._requestCount===this._numRequests&&(this.triggerGetFeatureInfo(t,e,this._features.concat()),delete this._features,delete this._requestCount,delete this._numRequests))},CLASS_NAME:"OpenLayers.Control.WMSGetFeatureInfo"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1_3_0=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3,{version:"1.3.0",CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_3_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SOSGetFeatureOfInterest=OpenLayers.Class(OpenLayers.Format.XML,{VERSION:"1.0.0",namespaces:{sos:"http://www.opengis.net/sos/1.0",gml:"http://www.opengis.net/gml",sa:"http://www.opengis.net/sampling/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"},schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",defaultPrefix:"sos",regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={features:[]};this.readNode(e,t);for(var a=[],i=0,s=t.features.length;i<s;i++){var r=t.features[i];this.internalProjection&&this.externalProjection&&r.components[0]&&r.components[0].transform(this.externalProjection,this.internalProjection);var o=new OpenLayers.Feature.Vector(r.components[0],r.attributes);a.push(o)}return a},readers:{sa:{SamplingPoint:function(e,t){if(!t.attributes){var a={attributes:{}};t.features.push(a),t=a}t.attributes.id=this.getAttributeNS(e,this.namespaces.gml,"id"),this.readChildNodes(e,t)},position:function(e,t){this.readChildNodes(e,t)}},gml:OpenLayers.Util.applyDefaults({FeatureCollection:function(e,t){this.readChildNodes(e,t)},featureMember:function(e,t){var a={attributes:{}};t.features.push(a),this.readChildNodes(e,a)},name:function(e,t){t.attributes.name=this.getChildValue(e)},pos:function(e,t){this.externalProjection||(this.externalProjection=new OpenLayers.Projection(e.getAttribute("srsName"))),OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this,[e,t])}},OpenLayers.Format.GML.v3.prototype.readers.gml)},writers:{sos:{GetFeatureOfInterest:function(e){for(var t=this.createElementNSPlus("GetFeatureOfInterest",{attributes:{version:this.VERSION,service:"SOS","xsi:schemaLocation":this.schemaLocation}}),a=0,i=e.fois.length;a<i;a++)this.writeNode("FeatureOfInterestId",{foi:e.fois[a]},t);return t},FeatureOfInterestId:function(e){var t=this.createElementNSPlus("FeatureOfInterestId",{value:e.foi});return t}}},CLASS_NAME:"OpenLayers.Format.SOSGetFeatureOfInterest"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.SOSGetObservation=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ows:"http://www.opengis.net/ows",gml:"http://www.opengis.net/gml",sos:"http://www.opengis.net/sos/1.0",ogc:"http://www.opengis.net/ogc",om:"http://www.opengis.net/om/1.0",sa:"http://www.opengis.net/sampling/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},regExes:{trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g},VERSION:"1.0.0",schemaLocation:"http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",defaultPrefix:"sos",read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={measurements:[],observations:[]};return this.readNode(e,t),t},write:function(e){var t=this.writeNode("sos:GetObservation",e);return t.setAttribute("xmlns:om",this.namespaces.om),t.setAttribute("xmlns:ogc",this.namespaces.ogc),this.setAttributeNS(t,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation),OpenLayers.Format.XML.prototype.write.apply(this,[t])},readers:{om:{ObservationCollection:function(e,t){t.id=this.getAttributeNS(e,this.namespaces.gml,"id"),this.readChildNodes(e,t)},member:function(e,t){this.readChildNodes(e,t)},Measurement:function(e,t){var a={};t.measurements.push(a),this.readChildNodes(e,a)},Observation:function(e,t){var a={};t.observations.push(a),this.readChildNodes(e,a)},samplingTime:function(e,t){var a={};t.samplingTime=a,this.readChildNodes(e,a)},observedProperty:function(e,t){t.observedProperty=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)},procedure:function(e,t){t.procedure=this.getAttributeNS(e,this.namespaces.xlink,"href"),this.readChildNodes(e,t)},featureOfInterest:function(e,t){var a={features:[]};t.fois=[],t.fois.push(a),this.readChildNodes(e,a);for(var i=[],s=0,r=a.features.length;s<r;s++){var o=a.features[s];i.push(new OpenLayers.Feature.Vector(o.components[0],o.attributes))}a.features=i},result:function(e,t){var a={};t.result=a,""!==this.getChildValue(e)?(a.value=this.getChildValue(e),a.uom=e.getAttribute("uom")):this.readChildNodes(e,a)}},sa:OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,gml:OpenLayers.Util.applyDefaults({TimeInstant:function(e,t){var a={};t.timeInstant=a,this.readChildNodes(e,a)},timePosition:function(e,t){t.timePosition=this.getChildValue(e)}},OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)},writers:{sos:{GetObservation:function(e){var t=this.createElementNSPlus("GetObservation",{attributes:{version:this.VERSION,service:"SOS"}});this.writeNode("offering",e,t),e.eventTime&&this.writeNode("eventTime",e,t);for(var a in e.procedures)this.writeNode("procedure",e.procedures[a],t);for(var i in e.observedProperties)this.writeNode("observedProperty",e.observedProperties[i],t);return e.foi&&this.writeNode("featureOfInterest",e.foi,t),this.writeNode("responseFormat",e,t),e.resultModel&&this.writeNode("resultModel",e,t),e.responseMode&&this.writeNode("responseMode",e,t),t},featureOfInterest:function(e){var t=this.createElementNSPlus("featureOfInterest");return this.writeNode("ObjectID",e.objectId,t),t},ObjectID:function(e){return this.createElementNSPlus("ObjectID",{value:e})},responseFormat:function(e){return this.createElementNSPlus("responseFormat",{value:e.responseFormat})},procedure:function(e){return this.createElementNSPlus("procedure",{value:e})},offering:function(e){return this.createElementNSPlus("offering",{value:e.offering})},observedProperty:function(e){return this.createElementNSPlus("observedProperty",{value:e})},eventTime:function(e){var t=this.createElementNSPlus("eventTime");return"latest"===e.eventTime&&this.writeNode("ogc:TM_Equals",e,t),t},resultModel:function(e){return this.createElementNSPlus("resultModel",{value:e.resultModel})},responseMode:function(e){return this.createElementNSPlus("responseMode",{value:e.responseMode})}},ogc:{TM_Equals:function(e){var t=this.createElementNSPlus("ogc:TM_Equals");return this.writeNode("ogc:PropertyName",{property:"urn:ogc:data:time:iso8601"},t),"latest"===e.eventTime&&this.writeNode("gml:TimeInstant",{value:"latest"},t),t},PropertyName:function(e){return this.createElementNSPlus("ogc:PropertyName",{value:e.property})}},gml:{TimeInstant:function(e){var t=this.createElementNSPlus("gml:TimeInstant");return this.writeNode("gml:timePosition",e,t),t},timePosition:function(e){var t=this.createElementNSPlus("gml:timePosition",{value:e.value});return t}}},CLASS_NAME:"OpenLayers.Format.SOSGetObservation"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.UTFGrid=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,layers:null,defaultHandlerOptions:{delay:300,pixelTolerance:4,stopMove:!1,single:!0,double:!1,stopSingle:!1,stopDouble:!1},handlerMode:"click",setHandler:function(e){this.handlerMode=e,this.resetHandler()},resetHandler:function(){return this.handler&&(this.handler.deactivate(),this.handler.destroy(),this.handler=null),"hover"==this.handlerMode?this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.reset},this.handlerOptions):"click"==this.handlerMode?this.handler=new OpenLayers.Handler.Click(this,{click:this.handleEvent},this.handlerOptions):"move"==this.handlerMode&&(this.handler=new OpenLayers.Handler.Hover(this,{pause:this.handleEvent,move:this.handleEvent},this.handlerOptions)),!!this.handler},initialize:function(e){e=e||{},e.handlerOptions=e.handlerOptions||this.defaultHandlerOptions,OpenLayers.Control.prototype.initialize.apply(this,[e]),this.resetHandler()},handleEvent:function(e){if(null==e)return void this.reset();var t=this.map.getLonLatFromPixel(e.xy);if(t){var a=this.findLayers();if(a.length>0){for(var i,s,r={},o=0,n=a.length;o<n;o++)i=a[o],s=OpenLayers.Util.indexOf(this.map.layers,i),r[s]=i.getFeatureInfo(t);this.callback(r,t,e.xy)}}},callback:function(e){},reset:function(e){this.callback(null)},findLayers:function(){for(var e,t=this.layers||this.map.layers,a=[],i=t.length-1;i>=0;--i)e=t[i],e instanceof OpenLayers.Layer.UTFGrid&&a.push(e);return a},CLASS_NAME:"OpenLayers.Control.UTFGrid"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.CQL=function(){function e(e,t){return t instanceof RegExp?t.exec(e):t(e)}function t(t,a){var i,s,o=a.length;for(i=0;i<o;i++){s=a[i];var n=r[s],l=e(t,n);if(l){var c=l[0],d=t.substr(c.length).replace(/^\s*/,"");return{type:s,text:c,remainder:d}}}var p="ERROR: In parsing: ["+t+"], expected one of: ";for(i=0;i<o;i++)s=a[i],p+="\n    "+s+": "+r[s];throw new Error(p)}function a(e){var a,i=[],s=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{if(a=t(e,s),e=a.remainder,s=o[a.type],"END"!=a.type&&!s)throw new Error("No follows list for "+a.type);i.push(a)}while("END"!=a.type);return i}function i(e){function t(){var e=i.pop();switch(e.type){case"LOGICAL":var a=t(),s=t();return new OpenLayers.Filter.Logical({filters:[s,a],type:c[e.text.toUpperCase()]});case"NOT":var r=t();return new OpenLayers.Filter.Logical({filters:[r],type:OpenLayers.Filter.Logical.NOT});case"BETWEEN":var o,l,d;return i.pop(),l=t(),o=t(),d=t(),new OpenLayers.Filter.Comparison({property:d,lowerBoundary:o,upperBoundary:l,type:OpenLayers.Filter.Comparison.BETWEEN});case"COMPARISON":var p=t(),d=t();return new OpenLayers.Filter.Comparison({property:d,value:p,type:n[e.text.toUpperCase()]});case"IS_NULL":var d=t();return new OpenLayers.Filter.Comparison({property:d,type:n[e.text.toUpperCase()]});case"VALUE":var u=e.text.match(/^'(.*)'$/);return u?u[1].replace(/''/g,"'"):Number(e.text);case"SPATIAL":switch(e.text.toUpperCase()){case"BBOX":var m=t(),h=t(),g=t(),v=t(),f=t();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.BBOX,property:f,value:OpenLayers.Bounds.fromArray([v,g,h,m])});case"INTERSECTS":var p=t(),d=t();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.INTERSECTS,property:d,value:p});case"WITHIN":var p=t(),d=t();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.WITHIN,property:d,value:p});case"CONTAINS":var p=t(),d=t();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.CONTAINS,property:d,value:p});case"DWITHIN":var y=t(),p=t(),d=t();return new OpenLayers.Filter.Spatial({type:OpenLayers.Filter.Spatial.DWITHIN,value:p,property:d,distance:Number(y)})}case"GEOMETRY":return OpenLayers.Geometry.fromWKT(e.text);default:return e.text}}for(var a=[],i=[];e.length;){var s=e.shift();switch(s.type){case"PROPERTY":case"GEOMETRY":case"VALUE":i.push(s);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var r=p[s.type];a.length>0&&p[a[a.length-1].type]<=r;)i.push(a.pop());a.push(s);break;case"SPATIAL":case"NOT":case"LPAREN":a.push(s);break;case"RPAREN":for(;a.length>0&&"LPAREN"!=a[a.length-1].type;)i.push(a.pop());a.pop(),a.length>0&&"SPATIAL"==a[a.length-1].type&&i.push(a.pop());case"COMMA":case"END":break;default:throw new Error("Unknown token type "+s.type)}}for(;a.length>0;)i.push(a.pop());var o=t();if(i.length>0){for(var l="Remaining tokens after building AST: \n",d=i.length-1;d>=0;d--)l+=i[d].type+": "+i[d].text+"\n";throw new Error(l)}return o}var s,r={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var a=e.length,i=e.indexOf("(",t[0].length);if(i>-1)for(var s=1;i<a&&s>0;)switch(i++,e.charAt(i)){case"(":s++;break;case")":s--}return[e.substr(0,i+1)]}},END:/^$/},o={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},n={"=":OpenLayers.Filter.Comparison.EQUAL_TO,"<>":OpenLayers.Filter.Comparison.NOT_EQUAL_TO,"<":OpenLayers.Filter.Comparison.LESS_THAN,"<=":OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,">":OpenLayers.Filter.Comparison.GREATER_THAN,">=":OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,LIKE:OpenLayers.Filter.Comparison.LIKE,BETWEEN:OpenLayers.Filter.Comparison.BETWEEN,"IS NULL":OpenLayers.Filter.Comparison.IS_NULL},l={},c={AND:OpenLayers.Filter.Logical.AND,OR:OpenLayers.Filter.Logical.OR},d={},p={RPAREN:3,LOGICAL:2,COMPARISON:1};for(s in n)n.hasOwnProperty(s)&&(l[n[s]]=s);for(s in c)c.hasOwnProperty(s)&&(d[c[s]]=s);return OpenLayers.Class(OpenLayers.Format,{read:function(e){var t=i(a(e));return this.keepData&&(this.data=t),t},write:function(e){if(e instanceof OpenLayers.Geometry)return e.toString();switch(e.CLASS_NAME){case"OpenLayers.Filter.Spatial":switch(e.type){case OpenLayers.Filter.Spatial.BBOX:return"BBOX("+e.property+","+e.value.toBBOX()+")";case OpenLayers.Filter.Spatial.DWITHIN:return"DWITHIN("+e.property+", "+this.write(e.value)+", "+e.distance+")";case OpenLayers.Filter.Spatial.WITHIN:return"WITHIN("+e.property+", "+this.write(e.value)+")";case OpenLayers.Filter.Spatial.INTERSECTS:return"INTERSECTS("+e.property+", "+this.write(e.value)+")";case OpenLayers.Filter.Spatial.CONTAINS:return"CONTAINS("+e.property+", "+this.write(e.value)+")";default:throw new Error("Unknown spatial filter type: "+e.type)}case"OpenLayers.Filter.Logical":if(e.type==OpenLayers.Filter.Logical.NOT)return"NOT ("+this.write(e.filters[0])+")";for(var t="(",a=!0,i=0;i<e.filters.length;i++)a?a=!1:t+=") "+d[e.type]+" (",t+=this.write(e.filters[i]);return t+")";case"OpenLayers.Filter.Comparison":return e.type==OpenLayers.Filter.Comparison.BETWEEN?e.property+" BETWEEN "+this.write(e.lowerBoundary)+" AND "+this.write(e.upperBoundary):null!==e.value?e.property+" "+l[e.type]+" "+this.write(e.value):e.property+" "+l[e.type];case void 0:if("string"==typeof e)return"'"+e.replace(/'/g,"''")+"'";if("number"==typeof e)return String(e);default:throw new Error("Can't encode: "+e.CLASS_NAME+" "+e)}},CLASS_NAME:"OpenLayers.Format.CQL"})}(),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.Split=OpenLayers.Class(OpenLayers.Control,{layer:null,source:null,sourceOptions:null,tolerance:null,edge:!0,deferDelete:!1,mutual:!0,targetFilter:null,sourceFilter:null,handler:null,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,[e]),this.options=e||{},this.options.source&&this.setSource(this.options.source)},setSource:function(e){this.active?(this.deactivate(),this.handler&&(this.handler.destroy(),delete this.handler),this.source=e,this.activate()):this.source=e},activate:function(){var e=OpenLayers.Control.prototype.activate.call(this);return e&&(this.source?this.source.events&&this.source.events.on({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}):(this.handler||(this.handler=new OpenLayers.Handler.Path(this,{done:function(e){this.onSketchComplete({feature:new OpenLayers.Feature.Vector(e)})}},{layerOptions:this.sourceOptions})),this.handler.activate())),e},deactivate:function(){var e=OpenLayers.Control.prototype.deactivate.call(this);return e&&this.source&&this.source.events&&this.source.events.un({sketchcomplete:this.onSketchComplete,afterfeaturemodified:this.afterFeatureModified,scope:this}),e},onSketchComplete:function(e){return this.feature=null,!this.considerSplit(e.feature)},afterFeatureModified:function(e){if(e.modified){var t=e.feature;"function"==typeof t.geometry.split&&(this.feature=e.feature,this.considerSplit(e.feature))}},removeByGeometry:function(e,t){for(var a=0,i=e.length;a<i;++a)if(e[a].geometry===t){e.splice(a,1);break}},isEligible:function(e){return!!e.geometry&&(e.state!==OpenLayers.State.DELETE&&"function"==typeof e.geometry.split&&this.feature!==e&&(!this.targetFilter||this.targetFilter.evaluate(e.attributes)))},considerSplit:function(e){var t=!1,a=!1;if(!this.sourceFilter||this.sourceFilter.evaluate(e.attributes)){for(var i,s,r,o,n,l,c,d=this.layer&&this.layer.features||[],p=[],u=[],m=this.layer===this.source&&this.mutual,h={edge:this.edge,tolerance:this.tolerance,mutual:m},g=[e.geometry],v=0,f=d.length;v<f;++v)if(o=d[v],this.isEligible(o)){n=[o.geometry];for(var y=0;y<g.length;++y){l=g[y];for(var b=0;b<n.length;++b)i=n[b],l.getBounds().intersectsBounds(i.getBounds())&&(s=l.split(i,h),s&&(r=this.events.triggerEvent("beforesplit",{source:e,target:o}),r!==!1&&(m&&(c=s[0],c.length>1&&(c.unshift(y,1),Array.prototype.splice.apply(g,c),y+=c.length-3),s=s[1]),s.length>1&&(s.unshift(b,1),Array.prototype.splice.apply(n,s),b+=s.length-3))))}n&&n.length>1&&(this.geomsToFeatures(o,n),this.events.triggerEvent("split",{original:o,features:n}),Array.prototype.push.apply(p,n),u.push(o),a=!0)}if(g&&g.length>1&&(this.geomsToFeatures(e,g),this.events.triggerEvent("split",{original:e,features:g}),Array.prototype.push.apply(p,g),u.push(e),t=!0),t||a){if(this.deferDelete){for(var L,w=[],v=0,f=u.length;v<f;++v)L=u[v],L.state===OpenLayers.State.INSERT?w.push(L):(L.state=OpenLayers.State.DELETE,this.layer.drawFeature(L));this.layer.destroyFeatures(w,{silent:!0});for(var v=0,f=p.length;v<f;++v)p[v].state=OpenLayers.State.INSERT}else this.layer.destroyFeatures(u,{silent:!0});this.layer.addFeatures(p,{silent:!0}),this.events.triggerEvent("aftersplit",{source:e,features:p})}}return t},geomsToFeatures:function(e,t){var a=e.clone();delete a.geometry;for(var i,s=0,r=t.length;s<r;++s)i=a.clone(),i.geometry=t[s],i.state=OpenLayers.State.INSERT,t[s]=i},destroy:function(){this.active&&this.deactivate(),OpenLayers.Control.prototype.destroy.call(this)},CLASS_NAME:"OpenLayers.Control.Split"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.WMTS=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:!0,version:"1.0.0",requestEncoding:"KVP",url:null,layer:null,matrixSet:null,style:null,format:"image/jpeg",tileOrigin:null,tileFullExtent:null,formatSuffix:null,matrixIds:null,dimensions:null,params:null,zoomOffset:0,serverResolutions:null,formatSuffixMap:{"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"},matrix:null,initialize:function(e){var t={url:!0,layer:!0,style:!0,matrixSet:!0};for(var a in t)if(!(a in e))throw new Error("Missing property '"+a+"' in layer configuration.");e.params=OpenLayers.Util.upperCaseObject(e.params);var i=[e.name,e.url,e.params,e];if(OpenLayers.Layer.Grid.prototype.initialize.apply(this,i),this.formatSuffix||(this.formatSuffix=this.formatSuffixMap[this.format]||this.format.split("/").pop()),this.matrixIds){var s=this.matrixIds.length;if(s&&"string"==typeof this.matrixIds[0]){var r=this.matrixIds;this.matrixIds=new Array(s);for(var o=0;o<s;++o)this.matrixIds[o]={identifier:r[o]}}}},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments)},updateMatrixProperties:function(){this.matrix=this.getMatrix(),this.matrix&&(this.matrix.topLeftCorner&&(this.tileOrigin=this.matrix.topLeftCorner),this.matrix.tileWidth&&this.matrix.tileHeight&&(this.tileSize=new OpenLayers.Size(this.matrix.tileWidth,this.matrix.tileHeight)),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.maxExtent.left,this.maxExtent.top)),this.tileFullExtent||(this.tileFullExtent=this.maxExtent))},moveTo:function(e,t,a){return!t&&this.matrix||this.updateMatrixProperties(),OpenLayers.Layer.Grid.prototype.moveTo.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.WMTS(this.options)),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getIdentifier:function(){return this.getServerZoom()},getMatrix:function(){var e;if(this.matrixIds&&0!==this.matrixIds.length)if("scaleDenominator"in this.matrixIds[0])for(var t,a=OpenLayers.METERS_PER_INCH*OpenLayers.INCHES_PER_UNIT[this.units]*this.getServerResolution()/28e-5,i=Number.POSITIVE_INFINITY,s=0,r=this.matrixIds.length;s<r;++s)t=Math.abs(1-this.matrixIds[s].scaleDenominator/a),t<i&&(i=t,e=this.matrixIds[s]);else e=this.matrixIds[this.getIdentifier()];else e={identifier:this.getIdentifier()};return e},getTileInfo:function(e){var t=this.getServerResolution(),a=(e.lon-this.tileOrigin.lon)/(t*this.tileSize.w),i=(this.tileOrigin.lat-e.lat)/(t*this.tileSize.h),s=Math.floor(a),r=Math.floor(i);return{col:s,row:r,i:Math.floor((a-s)*this.tileSize.w),j:Math.floor((i-r)*this.tileSize.h)}},getURL:function(e){e=this.adjustBounds(e);var t="";if(!this.tileFullExtent||this.tileFullExtent.intersectsBounds(e)){var a,i=e.getCenterLonLat(),s=this.getTileInfo(i),r=(this.matrix.identifier,this.dimensions);if(t=OpenLayers.Util.isArray(this.url)?this.selectUrl([this.version,this.style,this.matrixSet,this.matrix.identifier,s.row,s.col].join(","),this.url):this.url,"REST"===this.requestEncoding.toUpperCase())if(a=this.params,t.indexOf("{")!==-1){var o=t.replace(/\{/g,"${"),n={style:this.style,Style:this.style,TileMatrixSet:this.matrixSet,TileMatrix:this.matrix.identifier,TileRow:s.row,TileCol:s.col};if(r){var l,c;for(c=r.length-1;c>=0;--c)l=r[c],n[l]=a[l.toUpperCase()]}t=OpenLayers.String.format(o,n)}else{var d=this.version+"/"+this.layer+"/"+this.style+"/";if(r)for(var c=0;c<r.length;c++)a[r[c]]&&(d=d+a[r[c]]+"/");d=d+this.matrixSet+"/"+this.matrix.identifier+"/"+s.row+"/"+s.col+"."+this.formatSuffix,t.match(/\/$/)||(t+="/"),t+=d}else"KVP"===this.requestEncoding.toUpperCase()&&(a={SERVICE:"WMTS",REQUEST:"GetTile",VERSION:this.version,LAYER:this.layer,STYLE:this.style,TILEMATRIXSET:this.matrixSet,TILEMATRIX:this.matrix.identifier,TILEROW:s.row,TILECOL:s.col,FORMAT:this.format},t=OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,[a]))}return t},mergeNewParams:function(e){if("KVP"===this.requestEncoding.toUpperCase())return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this,[OpenLayers.Util.upperCaseObject(e)])},CLASS_NAME:"OpenLayers.Layer.WMTS"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.SOS.v1_0_0=OpenLayers.Class(OpenLayers.Protocol,{fois:null,formatOptions:null,initialize:function(e){OpenLayers.Protocol.prototype.initialize.apply(this,[e]),e.format||(this.format=new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions))},destroy:function(){this.options&&!this.options.format&&this.format.destroy(),this.format=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){e=OpenLayers.Util.extend({},e),OpenLayers.Util.applyDefaults(e,this.options||{});var t=new OpenLayers.Protocol.Response({requestType:"read"}),a=this.format,i=OpenLayers.Format.XML.prototype.write.apply(a,[a.writeNode("sos:GetFeatureOfInterest",{fois:this.fois})]);return t.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,t,e),data:i}),t},handleRead:function(e,t){if(t.callback){var a=e.priv;a.status>=200&&a.status<300?(e.features=this.parseFeatures(a),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e)}},parseFeatures:function(e){var t=e.responseXML;return t&&t.documentElement||(t=e.responseText),!t||t.length<=0?null:this.format.read(t)},CLASS_NAME:"OpenLayers.Protocol.SOS.v1_0_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Layer.KaMapCache=OpenLayers.Class(OpenLayers.Layer.KaMap,{IMAGE_EXTENSIONS:{jpeg:"jpg",gif:"gif",png:"png",png8:"png",png24:"png",dithered:"png"},DEFAULT_FORMAT:"jpeg",initialize:function(e,t,a,i){OpenLayers.Layer.KaMap.prototype.initialize.apply(this,arguments),this.extension=this.IMAGE_EXTENSIONS[this.params.i.toLowerCase()||this.DEFAULT_FORMAT]},getURL:function(e){e=this.adjustBounds(e);var t=this.map.getResolution(),a=Math.round(1e4*this.map.getScale())/1e4,i=Math.round(e.left/t),s=-Math.round(e.top/t),r=Math.floor(i/this.tileSize.w/this.params.metaTileSize.w)*this.tileSize.w*this.params.metaTileSize.w,o=Math.floor(s/this.tileSize.h/this.params.metaTileSize.h)*this.tileSize.h*this.params.metaTileSize.h,n=["/",this.params.map,"/",a,"/",this.params.g.replace(/\s/g,"_"),"/def/t",o,"/l",r,"/t",s,"l",i,".",this.extension],l=this.url;return OpenLayers.Util.isArray(l)&&(l=this.selectUrl(n.join(""),l)),l+n.join("")},CLASS_NAME:"OpenLayers.Layer.KaMapCache"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Protocol.WFS.v1_1_0=OpenLayers.Class(OpenLayers.Protocol.WFS.v1,{version:"1.1.0",initialize:function(e){OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this,arguments),this.outputFormat&&!this.readFormat&&("gml2"==this.outputFormat.toLowerCase()?this.readFormat=new OpenLayers.Format.GML.v2({featureType:this.featureType,featureNS:this.featureNS,geometryName:this.geometryName}):"json"==this.outputFormat.toLowerCase()&&(this.readFormat=new OpenLayers.Format.GeoJSON))},CLASS_NAME:"OpenLayers.Protocol.WFS.v1_1_0"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1_1_1=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1,{version:"1.1.1",readers:{wms:OpenLayers.Util.applyDefaults({SRS:function(e,t){t.srs[this.getChildValue(e)]=!0}},OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC=OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1,{version:"1.1.1",profile:"WMSC",readers:{wms:OpenLayers.Util.applyDefaults({VendorSpecificCapabilities:function(e,t){t.vendorSpecific={tileSets:[]},this.readChildNodes(e,t.vendorSpecific)},TileSet:function(e,t){var a={srs:{},bbox:{},resolutions:[]};this.readChildNodes(e,a),t.tileSets.push(a)},Resolutions:function(e,t){for(var a=this.getChildValue(e).split(" "),i=0,s=a.length;i<s;i++)""!=a[i]&&t.resolutions.push(parseFloat(a[i]))},Width:function(e,t){t.width=parseInt(this.getChildValue(e))},Height:function(e,t){t.height=parseInt(this.getChildValue(e))},Layers:function(e,t){t.layers=this.getChildValue(e)},Styles:function(e,t){t.styles=this.getChildValue(e)}},OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)},CLASS_NAME:"OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.layerStates=[]},destroy:function(){this.clearLayersArray("base"),this.clearLayersArray("data"),this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this),this.loadContents(),this.outsideViewport||this.minimizeControl(),this.redraw(),this.div},onButtonClick:function(e){var t=e.buttonElement;t===this.minimizeDiv?this.minimizeControl():t===this.maximizeDiv?this.maximizeControl():t._layerSwitcher===this.id&&(t.for&&(t=document.getElementById(t.for)),t.disabled||("radio"==t.type?(t.checked=!0,this.map.setBaseLayer(this.map.getLayer(t._layer))):(t.checked=!t.checked,this.updateMap())))},clearLayersArray:function(e){this[e+"LayersDiv"].innerHTML="",this[e+"Layers"]=[]},checkRedraw:function(){if(!this.layerStates.length||this.map.layers.length!=this.layerStates.length)return!0;for(var e=0,t=this.layerStates.length;e<t;e++){var a=this.layerStates[e],i=this.map.layers[e];if(a.name!=i.name||a.inRange!=i.inRange||a.id!=i.id||a.visibility!=i.visibility)return!0}return!1},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base"),this.clearLayersArray("data");var e=!1,t=!1,a=this.map.layers.length;this.layerStates=new Array(a);for(var i=0;i<a;i++){var s=this.map.layers[i];this.layerStates[i]={name:s.name,visibility:s.visibility,inRange:s.inRange,id:s.id}}var r=this.map.layers.slice();this.ascending||r.reverse();for(var i=0,a=r.length;i<a;i++){var s=r[i],o=s.isBaseLayer;if(s.displayInLayerSwitcher){o?t=!0:e=!0;var n=o?s==this.map.baseLayer:s.getVisibility(),l=document.createElement("input"),c=OpenLayers.Util.createUniqueID(this.id+"_input_");l.id=c,l.name=o?this.id+"_baseLayers":s.name,l.type=o?"radio":"checkbox",l.value=s.name,l.checked=n,l.defaultChecked=n,l.className="olButton",l._layer=s.id,l._layerSwitcher=this.id,o||s.inRange||(l.disabled=!0);var d=document.createElement("label");d.for=l.id,OpenLayers.Element.addClass(d,"labelSpan olButton"),d._layer=s.id,d._layerSwitcher=this.id,o||s.inRange||(d.style.color="gray"),d.innerHTML=s.name,d.style.verticalAlign=o?"bottom":"baseline";var p=document.createElement("br"),u=o?this.baseLayers:this.dataLayers;u.push({layer:s,inputElem:l,labelSpan:d});var m=o?this.baseLayersDiv:this.dataLayersDiv;m.appendChild(l),m.appendChild(d),m.appendChild(p)}}return this.dataLbl.style.display=e?"":"none",this.baseLbl.style.display=t?"":"none",this.div},updateMap:function(){for(var e=0,t=this.baseLayers.length;e<t;e++){var a=this.baseLayers[e];a.inputElem.checked&&this.map.setBaseLayer(a.layer,!1)}for(var e=0,t=this.dataLayers.length;e<t;e++){var a=this.dataLayers[e];a.layer.setVisibility(a.inputElem.checked)}},maximizeControl:function(e){this.div.style.width="",this.div.style.height="",this.showControls(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.div.style.width="0px",this.div.style.height="0px",this.showControls(!0),null!=e&&OpenLayers.Event.stop(e)},showControls:function(e){this.maximizeDiv.style.display=e?"":"none",this.minimizeDiv.style.display=e?"none":"",this.layersDiv.style.display=e?"none":""},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",OpenLayers.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer"),OpenLayers.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=OpenLayers.i18n("Overlays"),OpenLayers.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv);var e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.maximizeDiv,"maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv);var e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.Atom=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{atom:"http://www.w3.org/2005/Atom",georss:"http://www.georss.org/georss"},feedTitle:"untitled",defaultEntryTitle:"untitled",gmlParser:null,xy:!1,read:function(e){return"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),this.parseFeatures(e)},write:function(e){var t;if(OpenLayers.Util.isArray(e)){t=this.createElementNSPlus("atom:feed"),t.appendChild(this.createElementNSPlus("atom:title",{value:this.feedTitle}));for(var a=0,i=e.length;a<i;a++)t.appendChild(this.buildEntryNode(e[a]))}else t=this.buildEntryNode(e);return OpenLayers.Format.XML.prototype.write.apply(this,[t])},buildContentNode:function(e){var t=this.createElementNSPlus("atom:content",{attributes:{type:e.type||null}});if(e.src)t.setAttribute("src",e.src);else if("text"==e.type||null==e.type)t.appendChild(this.createTextNode(e.value));else if("html"==e.type){if("string"!=typeof e.value)throw"HTML content must be in form of an escaped string";t.appendChild(this.createTextNode(e.value))}else"xhtml"==e.type?t.appendChild(e.value):"xhtml"==e.type||e.type.match(/(\+|\/)xml$/)?t.appendChild(e.value):t.appendChild(this.createTextNode(e.value));return t},buildEntryNode:function(e){var t=e.attributes,a=t.atom||{},i=this.createElementNSPlus("atom:entry");if(a.authors)for(var s=OpenLayers.Util.isArray(a.authors)?a.authors:[a.authors],r=0,o=s.length;r<o;r++)i.appendChild(this.buildPersonConstructNode("author",s[r]));if(a.categories)for(var n,l=OpenLayers.Util.isArray(a.categories)?a.categories:[a.categories],r=0,o=l.length;r<o;r++)n=l[r],i.appendChild(this.createElementNSPlus("atom:category",{attributes:{term:n.term,scheme:n.scheme||null,label:n.label||null}}));if(a.content&&i.appendChild(this.buildContentNode(a.content)),a.contributors)for(var c=OpenLayers.Util.isArray(a.contributors)?a.contributors:[a.contributors],r=0,o=c.length;r<o;r++)i.appendChild(this.buildPersonConstructNode("contributor",c[r]));if(e.fid&&i.appendChild(this.createElementNSPlus("atom:id",{value:e.fid})),a.links)for(var d,p=OpenLayers.Util.isArray(a.links)?a.links:[a.links],r=0,o=p.length;r<o;r++)d=p[r],i.appendChild(this.createElementNSPlus("atom:link",{attributes:{href:d.href,rel:d.rel||null,type:d.type||null,hreflang:d.hreflang||null,title:d.title||null,length:d.length||null}}));if(a.published&&i.appendChild(this.createElementNSPlus("atom:published",{value:a.published})),a.rights&&i.appendChild(this.createElementNSPlus("atom:rights",{value:a.rights})),(a.summary||t.description)&&i.appendChild(this.createElementNSPlus("atom:summary",{value:a.summary||t.description})),i.appendChild(this.createElementNSPlus("atom:title",{value:a.title||t.title||this.defaultEntryTitle})),a.updated&&i.appendChild(this.createElementNSPlus("atom:updated",{value:a.updated})),e.geometry){var u=this.createElementNSPlus("georss:where");u.appendChild(this.buildGeometryNode(e.geometry)),i.appendChild(u)}return i},initGmlParser:function(){this.gmlParser=new OpenLayers.Format.GML.v3({xy:this.xy,featureNS:"http://example.com#feature",internalProjection:this.internalProjection,externalProjection:this.externalProjection})},buildGeometryNode:function(e){this.gmlParser||this.initGmlParser();var t=this.gmlParser.writeNode("feature:_geometry",e);return t.firstChild},buildPersonConstructNode:function(e,t){var a=["uri","email"],i=this.createElementNSPlus("atom:"+e);i.appendChild(this.createElementNSPlus("atom:name",{value:t.name}));for(var s=0,r=a.length;s<r;s++)t[a[s]]&&i.appendChild(this.createElementNSPlus("atom:"+a[s],{value:t[a[s]]}));return i},getFirstChildValue:function(e,t,a,i){var s,r=this.getElementsByTagNameNS(e,t,a);return s=r&&r.length>0?this.getChildValue(r[0],i):i},parseFeature:function(e){var t={},a=null,i=null,s=null,r=this.namespaces.atom;this.parsePersonConstructs(e,"author",t),i=this.getElementsByTagNameNS(e,r,"category"),i.length>0&&(t.categories=[]);for(var o=0,n=i.length;o<n;o++)a={},a.term=i[o].getAttribute("term"),s=i[o].getAttribute("scheme"),s&&(a.scheme=s),s=i[o].getAttribute("label"),s&&(a.label=s),t.categories.push(a);i=this.getElementsByTagNameNS(e,r,"content"),i.length>0&&(a={},s=i[0].getAttribute("type"),s&&(a.type=s),s=i[0].getAttribute("src"),s?a.src=s:("text"==a.type||"html"==a.type||null==a.type?a.value=this.getFirstChildValue(e,r,"content",null):"xhtml"==a.type||a.type.match(/(\+|\/)xml$/)?a.value=this.getChildEl(i[0]):a.value=this.getFirstChildValue(e,r,"content",null),t.content=a)),this.parsePersonConstructs(e,"contributor",t),t.id=this.getFirstChildValue(e,r,"id",null),i=this.getElementsByTagNameNS(e,r,"link"),i.length>0&&(t.links=new Array(i.length));for(var l=["rel","type","hreflang","title","length"],o=0,n=i.length;o<n;o++){a={},a.href=i[o].getAttribute("href");for(var c=0,d=l.length;c<d;c++)s=i[o].getAttribute(l[c]),s&&(a[l[c]]=s);t.links[o]=a}a=this.getFirstChildValue(e,r,"published",null),a&&(t.published=a),a=this.getFirstChildValue(e,r,"rights",null),a&&(t.rights=a),a=this.getFirstChildValue(e,r,"summary",null),a&&(t.summary=a),t.title=this.getFirstChildValue(e,r,"title",null),t.updated=this.getFirstChildValue(e,r,"updated",null);var p={title:t.title,description:t.summary,atom:t},u=this.parseLocations(e)[0],m=new OpenLayers.Feature.Vector(u,p);return m.fid=t.id,m},parseFeatures:function(e){var t=[],a=this.getElementsByTagNameNS(e,this.namespaces.atom,"entry");0==a.length&&(a=[e]);for(var i=0,s=a.length;i<s;i++)t.push(this.parseFeature(a[i]));return t},parseLocations:function(e){var t=this.namespaces.georss,a={components:[]},i=this.getElementsByTagNameNS(e,t,"where");if(i&&i.length>0){this.gmlParser||this.initGmlParser();for(var s=0,r=i.length;s<r;s++)this.gmlParser.readChildNodes(i[s],a)}var o=a.components,n=this.getElementsByTagNameNS(e,t,"point");if(n&&n.length>0)for(var s=0,r=n.length;s<r;s++){var l=OpenLayers.String.trim(n[s].firstChild.nodeValue).split(/\s+/);2!=l.length&&(l=OpenLayers.String.trim(n[s].firstChild.nodeValue).split(/\s*,\s*/)),o.push(new OpenLayers.Geometry.Point(l[1],l[0]))}var c=this.getElementsByTagNameNS(e,t,"line");if(c&&c.length>0)for(var d,p,u,s=0,r=c.length;s<r;s++){d=OpenLayers.String.trim(c[s].firstChild.nodeValue).split(/\s+/),u=[];for(var m=0,h=d.length;m<h;m+=2)p=new OpenLayers.Geometry.Point(d[m+1],d[m]),u.push(p);o.push(new OpenLayers.Geometry.LineString(u))}var g=this.getElementsByTagNameNS(e,t,"polygon");if(g&&g.length>0)for(var d,p,u,s=0,r=g.length;s<r;s++){d=OpenLayers.String.trim(g[s].firstChild.nodeValue).split(/\s+/),u=[];for(var m=0,h=d.length;m<h;m+=2)p=new OpenLayers.Geometry.Point(d[m+1],d[m]),u.push(p);o.push(new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(u)]))}if(this.internalProjection&&this.externalProjection)for(var s=0,r=o.length;s<r;s++)o[s]&&o[s].transform(this.externalProjection,this.internalProjection);return o},parsePersonConstructs:function(e,t,a){for(var i=[],s=this.namespaces.atom,r=this.getElementsByTagNameNS(e,s,t),o=["uri","email"],n=0,l=r.length;n<l;n++){var c={};c.name=this.getFirstChildValue(r[n],s,"name",null);for(var d=0,p=o.length;d<p;d++){var u=this.getFirstChildValue(r[n],s,o[d],null);u&&(c[o[d]]=u)}i.push(c)}i.length>0&&(a[t+"s"]=i)},CLASS_NAME:"OpenLayers.Format.Atom"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){var e=this.observeElement||document;this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:e})},defaultKeyPress:function(e){var t,a=!0,i=OpenLayers.Event.element(e);if(!i||"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&"SELECT"!=i.tagName){switch(e.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:t=this.map.getSize(),this.map.pan(0,-.75*t.h);break;case 34:t=this.map.getSize(),this.map.pan(0,.75*t.h);break;case 35:t=this.map.getSize(),this.map.pan(.75*t.w,0);break;case 36:t=this.map.getSize(),this.map.pan(-.75*t.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:a=!1}a&&OpenLayers.Event.stop(e)}},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"}),/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */
OpenLayers.Format.WMTSCapabilities.v1_0_0=OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0,{version:"1.0.0",namespaces:{ows:"http://www.opengis.net/ows/1.1",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink"},yx:null,defaultPrefix:"wmts",initialize:function(e){OpenLayers.Format.XML.prototype.initialize.apply(this,[e]),this.options=e;var t=OpenLayers.Util.extend({},OpenLayers.Format.WMTSCapabilities.prototype.yx);this.yx=OpenLayers.Util.extend(t,this.yx)},read:function(e){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e])),e&&9==e.nodeType&&(e=e.documentElement);var t={};return this.readNode(e,t),t.version=this.version,t},readers:{wmts:{Capabilities:function(e,t){this.readChildNodes(e,t)},Contents:function(e,t){t.contents={},t.contents.layers=[],t.contents.tileMatrixSets={},this.readChildNodes(e,t.contents)},Layer:function(e,t){var a={styles:[],formats:[],dimensions:[],tileMatrixSetLinks:[]};a.layers=[],this.readChildNodes(e,a),t.layers.push(a)},Style:function(e,t){var a={};a.isDefault="true"===e.getAttribute("isDefault"),this.readChildNodes(e,a),t.styles.push(a)},Format:function(e,t){t.formats.push(this.getChildValue(e))},TileMatrixSetLink:function(e,t){var a={};this.readChildNodes(e,a),t.tileMatrixSetLinks.push(a)},TileMatrixSet:function(e,t){if(t.layers){var a={matrixIds:[]};this.readChildNodes(e,a),t.tileMatrixSets[a.identifier]=a}else t.tileMatrixSet=this.getChildValue(e)},TileMatrix:function(e,t){var a={supportedCRS:t.supportedCRS};this.readChildNodes(e,a),t.matrixIds.push(a)},ScaleDenominator:function(e,t){t.scaleDenominator=parseFloat(this.getChildValue(e))},TopLeftCorner:function(e,t){var a,i=this.getChildValue(e),s=i.split(" ");if(t.supportedCRS){var r=t.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/,"urn:ogc:def:crs:$1::$2");a=!!this.yx[r]}a?t.topLeftCorner=new OpenLayers.LonLat(s[1],s[0]):t.topLeftCorner=new OpenLayers.LonLat(s[0],s[1])},TileWidth:function(e,t){t.tileWidth=parseInt(this.getChildValue(e))},TileHeight:function(e,t){t.tileHeight=parseInt(this.getChildValue(e))},MatrixWidth:function(e,t){t.matrixWidth=parseInt(this.getChildValue(e))},MatrixHeight:function(e,t){t.matrixHeight=parseInt(this.getChildValue(e))},ResourceURL:function(e,t){t.resourceUrl=t.resourceUrl||{};var a=e.getAttribute("resourceType");t.resourceUrls||(t.resourceUrls=[]);var i=t.resourceUrl[a]={format:e.getAttribute("format"),template:e.getAttribute("template"),resourceType:a};t.resourceUrls.push(i)},WSDL:function(e,t){t.wsdl={},t.wsdl.href=e.getAttribute("xlink:href")},ServiceMetadataURL:function(e,t){t.serviceMetadataUrl={},t.serviceMetadataUrl.href=e.getAttribute("xlink:href")},LegendURL:function(e,t){t.legend={},t.legend.href=e.getAttribute("xlink:href"),t.legend.format=e.getAttribute("format")},Dimension:function(e,t){var a={values:[]};this.readChildNodes(e,a),t.dimensions.push(a)},Default:function(e,t){t.default=this.getChildValue(e)},Value:function(e,t){t.values.push(this.getChildValue(e))}},ows:OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows},CLASS_NAME:"OpenLayers.Format.WMTSCapabilities.v1_0_0"}),/*
* Copyright (c) 2017 by Qualigy Solutions Innovation <www.qualigy.com> - All Rights Reserved
* @Author: Pablo Dorgambide
* @Date:   2017-07-10 10:14:05
* @Last Modified by:   pdorgambide
* @Last Modified time: 2022-02-14 23:51:04
*/
function(){"use strict";angular.module("Qualigy.components",["ui.router"])}(),function(){"use strict";function e(e,t){e.otherwise(function(e,t){t.path("/dashboard")})}e.$inject=["$urlRouterProvider","baSidebarServiceProvider"],angular.module("Qualigy.pages",["ui.router","Qualigy.theme","Qualigy.components","Qualigy.resources","Qualigy.pages.dashboard","Qualigy.pages.spills","Qualigy.pages.pollutionepisodes","Qualigy.pages.pollutionepisodesmap","Qualigy.pages.pollutionreports","Qualigy.pages.gislayouts","Qualigy.pages.logbookrecords","Qualigy.pages.scatreports","Qualigy.pages.photos","Qualigy.pages.comments","Qualigy.pages.admin","Qualigy.pages.userlogins","Qualigy.pages.pub"]).config(e)}(),function(){"use strict";angular.module("Qualigy.resources",["restangular","Qualigy.config"])}(),function(){"use strict";angular.module("Qualigy.theme",["toastr","chart.js","xeditable","Qualigy.theme.components"])}(),function(){"use strict";function e(e,t){e.state("account",{abstract:!0,templateUrl:"app/pages/account/account.html",url:"/account",resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){t.addPart("account")}]}})}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("Qualigy.pages.account",[]).config(e)}(),function(){"use strict";function e(e){e.state("admin",{url:"/admin",template:'<ui-view  autoscroll="true" autoscroll-body-top></ui-view>',abstract:!0,title:"app.page.admin.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LAYERGROUP","ROLE_PANEL","ROLE_LAYER"],sidebarMeta:{order:100,icon:"ion-gear-b"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("admin"),e.refresh()}]}})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.admin",[]).config(e)}(),function(){"use strict";function e(e){e.state("calendar",{url:"/calendar",templateUrl:"app/pages/calendar/calendar.html",controller:"CalendarCtrl",controllerAs:"vm",title:"Calendario",authenticated:!0,sidebarMeta:{icon:"ion-calendar",order:2}})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.calendar",["ui.calendar"]).config(e)}(),function(){"use strict";function e(e,t,a){}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.comments",[]).config(e)}(),function(){"use strict";function e(e){e.state("dashboard",{url:"/dashboard",templateUrl:"app/pages/dashboard/dashboard.html",title:"app.menu.dashboard",controller:"DashboardCtrl",controllerAs:"vm",authenticated:!0,sidebarMeta:{icon:"ion-home",order:0},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("dashboard"),t.addPart("pollutionreport"),t.addPart("logbookrecord"),t.addPart("scatreport"),t.addPart("pollutionepisode"),t.addPart("userlogin"),t.addPart("global"),t.addPart("app"),e.refresh()}]}})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.dashboard",[]).config(e)}(),function(){"use strict";function e(e,t,a){e.state("gislayouts",{url:"/gislayouts",templateUrl:"app/pages/gislayouts/gislayouts.html",title:"app.page.gislayouts.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_GISLAYOUT","ROLE_POLLUTION_EPISODE"],sidebarMeta:{order:20,icon:"ion-map"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("gisasset"),t.addPart("gislayout"),t.addPart("global"),e.refresh()}]}}).state("gislayouts.create",{url:"/create",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_GISLAYOUT"],views:{"@":{controller:["$scope","$state",function(e,t){e.onCreate=function(e){t.go("gislayouts.detail",{id:e.id})},e.onClose=function(){t.go("gislayouts")}}],controllerAs:"vm",templateUrl:"app/pages/gislayouts/gislayouts-create.html"}},resolve:{gislayout:function(){return{}}}}).state("gislayouts.detail",{url:"/{id:[0-9a-fA-F]{8,32}}",title:"{{gislayout.name}}",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_GISLAYOUT","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:"GisLayoutsDetailCtrl",controllerAs:"vm",templateUrl:"app/pages/gislayouts/gislayouts-detail.html",title:"app.page.gislayouts.title"}},resolve:{gislayout:["$stateParams","GisLayouts",function(e,t){return t.one(e.id).get()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.gislayouts",[]).config(e)}(),/*
* ---------- COP Management Tool --------------
* @Author:  Pablo Dorgambide [@pdorgambide]
* @Emal:    pdorgambide@qualigy.com
* @Date:    2022-03-23 18:22:07
* @Company: Qualigy Solutions Innovation (c) 2022
* @Web:     qualigy.com
* @Last Modified by:   pdorgambide
* @Last Modified time: 2022-08-22 11:02:07
*/
function(){"use strict";function e(e,t,a){e.state("logbookrecords",{url:"/logbookrecords",templateUrl:"app/pages/logbookrecords/logbookrecords.html",title:"app.page.logbookrecords.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LOGBOOKRECORD","ROLE_POLLUTION_EPISODE"],sidebarMeta:{order:10,icon:"ion-android-chat"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("logbookrecord"),t.addPart("pollutionepisode"),t.addPart("pollutionreport"),t.addPart("asset"),t.addPart("global"),e.refresh()}]}}).state("logbookrecords.create",{templateUrl:"app/pages/logbookrecords/logbookrecords-create.html",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LOGBOOKRECORD"],controller:["$scope","$state",function(e,t){e.onCreate=function(e){t.go("logbookrecords")},e.onClose=function(){t.go("logbookrecords")}}],resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("logbookrecord"),t.addPart("global"),e.refresh()}]}}).state("logbookrecords.detail",{url:"/{id:[0-9a-fA-F]{8,32}}",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LOGBOOKRECORD","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:["$scope","$state","$window","$location","modalService","$translate","logbookrecord","LogBookRecords",function(e,t,a,i,s,r,o,n){e.logbookrecord=o,e.goBack=function(){a.history.back()},e.showLayer=function(e){e&&e.id&&t.go("logbookrecords.detail",{id:e.id})},e.searchLogBookRecords=function(e){return n.getList(e)}}],templateUrl:"app/pages/logbookrecords/logbookrecords-detail.html"}},resolve:{logbookrecord:["$stateParams","LogBookRecords",function(e,t){return t.one(e.id).get()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.logbookrecords",[]).config(e)}(),function(){"use strict";function e(e,t,a){}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.photos",[]).config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes",{url:"/pollutionepisodes",templateUrl:"app/pages/pollutionepisodes/pollutionepisodes.html",title:"app.page.pollutionepisodes.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLLUTION_EPISODE"],sidebarMeta:{order:80,icon:"ion-ios-color-filter-outline"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionepisode"),t.addPart("logbookrecord"),t.addPart("pollutionreport"),t.addPart("episodeobserver"),t.addPart("gislayout"),t.addPart("asset"),t.addPart("global"),e.refresh()}]}}).state("pollutionepisodes.create",{templateUrl:"app/pages/pollutionepisodes/pollutionepisodes-create.html",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLLUTION_EPISODE"],controller:["$scope","$state",function(e,t){e.onCreate=function(e){t.go("pollutionepisodes.detail",{id:e.id})},e.onClose=function(){t.go("pollutionepisodes")}}],resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionepisode"),t.addPart("episodeuser"),t.addPart("episodelayer"),t.addPart("global"),e.refresh()}]}}).state("pollutionepisodes.detail",{url:"/{id:[0-9a-fA-F]{8,32}}",title:"{{pollutionepisode.name}}",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:["$scope","$state","$window","$cookies","$location","modalService","$translate","pollutionepisode","PollutionEpisodes",function(e,t,a,i,s,r,o,n,l){e.pollutionepisode=n,e.goBack=function(){a.history.back()},e.showLayer=function(e){e&&e.id&&t.go("pollutionepisodes.detail",{id:e.id})},e.openVisor=function(e,t){e.preventDefault(),e.stopImmediatePropagation();var s=i.get("ng-security-authorization"),r=s.substring("Bearer ".length);a.open(t.visorUrl+"&token="+r,"_blank")},e.publishAndClose=function(){n.status="OPEN",n.save().then(function(){t.go("pollutionepisodes",{})})},e.searchPollutionEpisodes=function(e){return l.getList(e)}}],templateUrl:"app/pages/pollutionepisodes/pollutionepisodes-detail.html"}},resolve:{pollutionepisode:["$stateParams","PollutionEpisodes",function(e,t){return t.one(e.id).get()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes",[]).config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodesmap",{url:"/pollutionepisodesmap",templateUrl:"app/pages/pollutionepisodesmap/pollutionepisodes-map.html",title:"app.page.pollutionepisodesmap.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLLUTION_EPISODE_MAP"],sidebarMeta:{order:5,icon:"ion-ios-location"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionepisode"),t.addPart("pollutionreport"),t.addPart("asset"),t.addPart("global"),e.refresh()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodesmap",[]).config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionreports",{url:"/pollutionreports",controller:"PollutionReportsCtrl",controllerAs:"vm",templateUrl:"app/pages/pollutionreports/pollutionreports.html",title:"app.page.pollutionreports.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLREP","ROLE_POLLUTION_EPISODE"],sidebarMeta:{order:30,icon:"ion-clipboard"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionreport"),t.addPart("spill"),t.addPart("photo"),t.addPart("pollutionsource"),t.addPart("comment"),t.addPart("global"),e.refresh()}]}}).state("pollutionreports.detail",{url:"/{id:[0-9a-fA-F]{8,32}}",title:'{{pollutionreport.reportTime | date: "dd/MM/yy HH:mm"}}',permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLREP","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:"PollutionReportsDetailCtrl",controllerAs:"vm",templateUrl:"app/pages/pollutionreports/pollutionreports-detail.html",title:"app.page.pollutionreports.title"}},resolve:{pollutionreport:["$stateParams","PollutionReports",function(e,t){return t.one(e.id).get()}]}}).state("pollutionreports.detail.print",{url:"/print",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLREP","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:["$scope","pollutionreport",function(e,t){e.pollutionreport=t}],templateUrl:"app/pages/pollutionreports/pollutionreports-print.html",title:"app.page.pollutionreports.title"}},resolve:{pollutionreport:["$stateParams","PollutionReports",function(e,t){return t.one(e.id).get({projection:"print"})}]}}).state("pollutionreports.create",{templateUrl:"app/pages/pollutionreports/pollutionreports-create.html",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLREP"],controller:["$scope","$state",function(e,t){e.onCreate=function(e){t.go("pollutionreports.detail.spills.create",{id:e.id})},e.onClose=function(){t.go("pollutionreports")}}],resolve:{pollutionepisode:function(){return null},translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionreport"),t.addPart("global"),e.refresh()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionreports",[]).config(e)}(),function(){"use strict";function e(e,t,a){e.state("pub",{url:"/pub",templateUrl:"app/pages/pollutionepisodes/pollutionepisodes.html",title:"app.pub.title",permissions:["ROLE_ADMIN"],resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pub"),t.addPart("pollutionepisode"),t.addPart("pollutionreport"),t.addPart("asset"),t.addPart("global"),e.refresh()}]}}).state("pub.pollutionepisode",{url:"/pollutionepisodes/{id:[0-9a-fA-F]{8,32}}",templateUrl:"app/pages/pub/pollutionepisodes/pollutionepisodes-pub-detail.html",title:!1,views:{"@":{controller:["$scope","$state","$window","$location","modalService","$translate","pollutionepisode","PollutionEpisodesPub",function(e,t,a,i,s,r,o,n){e.pollutionepisode=o,e.goBack=function(){a.history.back()}}],templateUrl:"app/pages/pub/pollutionepisodes-detail.html"}},resolve:{pollutionepisode:["$stateParams","PollutionEpisodesPub",function(e,t){return t.one(e.id).get()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pub",[]).config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports",{url:"/scatreports",templateUrl:"app/pages/scatreports/scatreports.html",title:"app.page.scatreports.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_SCAT","ROLE_SCAT_INSPECTOR","ROLE_SCAT_MANAGER","ROLE_POLLUTION_EPISODE"],sidebarMeta:{order:30,icon:"ion-ios-list-outline"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("scatreport"),t.addPart("surfaceoilcondition"),t.addPart("subsurfaceoilcondition"),t.addPart("photo"),t.addPart("comment"),t.addPart("userlogin"),t.addPart("global"),e.refresh()}]}}).state("scatreports.create",{url:"/create",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_SCAT","ROLE_SCAT_INSPECTOR","ROLE_SCAT_MANAGER"],views:{"@":{controller:["$scope","$state",function(e,t){e.onCreate=function(e){t.go("scatreports.detail.shorelinetypes",{id:e.id})},e.onClose=function(){t.go("scatreports")}}],controllerAs:"vm",templateUrl:"app/pages/scatreports/scatreports-create.html"}}}).state("scatreports.detail",{url:"/{id:[0-9a-fA-F]{8,32}}",title:'{{scatreport.reportTime | date:"dd/MM/yyyy HH:mm"}}',permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_SCAT","ROLE_SCAT_INSPECTOR","ROLE_SCAT_MANAGER","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:"ScatReportsDetailCtrl",controllerAs:"vm",templateUrl:"app/pages/scatreports/scatreports-detail.html",title:"app.page.scatreports.title"}},resolve:{scatreport:["$stateParams","ScatReports",function(e,t){return t.one(e.id).get()}]}}).state("scatreports.detail.print",{url:"/print",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_SCAT","ROLE_SCAT_INSPECTOR","ROLE_SCAT_MANAGER","ROLE_POLLUTION_EPISODE"],views:{"@":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],templateUrl:"app/pages/scatreports/scatreports-print.html",title:"app.page.scatreports.title"}},resolve:{scatreport:["$stateParams","ScatReports",function(e,t){return t.one(e.id).get({projection:"print"})}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports",[]).config(e)}(),function(){"use strict";function e(e,t,a){}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.spills",[]).config(e)}(),function(){"use strict";angular.module("Qualigy.pages.templates",[])}(),function(){"use strict";function e(e){e.state("userlogins",{url:"/userlogins",templateUrl:"app/pages/userlogins/userlogins.html",permissions:["ROLE_ADMIN","ROLE_USERLOGIN"],title:"app.menu.userlogins",sidebarMeta:{icon:"ion-ios-person-outline",order:90},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("userlogin"),t.addPart("global"),e.refresh()}]}}).state("userlogins.detail",{url:"/:id",title:"{{userlogin.login}}",views:{"@":{controller:["$scope","$state","userlogin","UserLogins",function(e,t,a,i){e.userlogin=a,e.showSelected=function(){e.selectedUserLogin&&t.go("userlogins.detail",{id:e.selectedUserLogin.id})},e.searchUserLogins=function(e){return i.getList({username:e})}}],templateUrl:"app/pages/userlogins/userlogins-detail.html",resolve:{userlogin:["$stateParams","UserLogins",function(e,t){return t.one(e.id).get()}]}}}})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.userlogins",[]).config(e)}(),function(){"use strict";angular.module("Qualigy.theme.components",["Qualigy.theme","pascalprecht.translate"])}(),function(){"use strict";function e(e){e.state("account.activate",{url:"/activate?key",templateUrl:"app/pages/account/activate/activate.html",controller:"ActivationCtrl",title:"ActivaciÃ³n de cuenta",controllerAs:"vm"})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.account").config(e)}(),function(){"use strict";function e(e){e.state("account.auth",{parent:"account",url:"/auth",templateUrl:"app/pages/account/auth/auth.html",controller:"AuthCtrl",controllerAs:"vm"})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.account").config(e)}(),function(){"use strict";function e(e,t,a){e.state("admin.layergroups",{url:"/layergroups",templateUrl:"app/pages/admin/layergroups/layergroups.html",title:"app.page.layergroups.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LAYERGROUP"],sidebarMeta:{order:10,icon:"ion-grid"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("layergroup"),t.addPart("layer"),t.addPart("global"),e.refresh()}]}}).state("admin.layergroups.detail",{url:"/:id?origin",title:"{{layergroup.name}}",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LAYERGROUP"],views:{"@":{controller:["$scope","$state","$window","$location","layergroup","LayerGroups",function(e,t,a,i,s,r){e.layergroup=s,e.goBack=function(){a.history.back()},e.showLayerGroup=function(e){e&&e.id&&t.go("admin.layergroups.detail",{id:e.id})},e.searchLayerGroups=function(e){return r.getList(e)}}],templateUrl:"app/pages/admin/layergroups/layergroups-detail.html",title:"app.layergroup.plural",resolve:{layergroup:["$stateParams","LayerGroups",function(e,t){return t.one(e.id).get()}]}}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.admin").config(e)}(),function(){"use strict";function e(e,t,a){e.state("admin.layers",{url:"/layers",templateUrl:"app/pages/admin/layers/layers.html",title:"app.page.layers.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LAYER"],sidebarMeta:{order:5,icon:"ion-social-buffer"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("layer"),t.addPart("global"),e.refresh()}]}}).state("admin.layers.detail",{url:"/:id?origin",title:"{{layer.name}}",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LAYER"],views:{"@":{controller:["$scope","$state","$window","$location","layer","Layers",function(e,t,a,i,s,r){e.layer=s,e.goBack=function(){a.history.back()},e.showLayer=function(e){e&&e.id&&t.go("admin.layers.detail",{id:e.id})},e.searchLayers=function(e){return r.getList(e)}}],templateUrl:"app/pages/admin/layers/layers-detail.html",title:"app.page.layers.title",resolve:{layer:["$stateParams","Layers",function(e,t){return t.one(e.id).get()}]}}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.admin").config(e)}(),function(){"use strict";function e(e,t,a){e.state("admin.panels",{url:"/panels",templateUrl:"app/pages/admin/panels/panels.html",title:"app.page.panels.title",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_PANEL"],sidebarMeta:{order:20,icon:"ion-ios-photos-outline"},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("panel"),t.addPart("layergroup"),t.addPart("admin"),t.addPart("global"),e.refresh()}]}}).state("admin.panels.detail",{url:"/:id?origin",title:"{{panel.name}}",permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_LAYERGROUP"],views:{"@":{controller:["$scope","$state","$window","$location","panel","Panels",function(e,t,a,i,s,r){e.panel=s,e.goBack=function(){a.history.back()},e.showPanel=function(e){e&&e.id&&t.go("admin.panels.detail",{id:e.id})},e.searchPanels=function(e){return r.getList(e)}}],templateUrl:"app/pages/admin/panels/panels-detail.html",title:"app.panel.plural",resolve:{panel:["$stateParams","Panels",function(e,t){return t.one(e.id).get()}]}}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.admin").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.episodelayers",{url:"/episodelayers",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:'<a class="btn btn-default btn-sm btn-with-icon" ui-sref="pollutionepisodes.detail.episodelayers.edit"><i class="ion-edit"></i><span data-translate="global.button.edit"></span> </a>'},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","episodelayers",function(e,t,a){e.pollutionepisode=t,e.episodelayers=a}],template:'<episodelayers-tree pollutionepisode="pollutionepisode" episodelayers="episodelayers" ></episode-layers>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodelayer"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}],episodelayers:["$stateParams","pollutionepisode",function(e,t){return t.getEpisodeLayers()}]}}).state("pollutionepisodes.detail.episodelayers.edit",{url:"/edit",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{controller:["$scope","episodelayers",function(e,t){e.episodelayers=t}],template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","$q","$translate","$state","$timeout","$rootScope","EpisodeLayers","pollutionepisode","episodelayers","selectedlayers",function(e,t,a,i,s,r,o,n,l,c){e.episodelayers=l,e.selectedlayers=c,e.onSave=function(){var e=l,d=c.map(function(e){return e.id}),p=e.filter(function(e){return!d.includes(e.layer.id)}),u=e.map(function(e){return e.layer.id}),m=c.filter(function(e){return!u.includes(e.id)}).map(function(e){return{episode:n,layer:e}}),h=p.reduce(function(e,t){return e.then(function(){return t.remove()})},t.resolve());console.log("Removed ",p.length);var g=m.reduce(function(e,t){return e.then(function(){return o.post(t)})},t.resolve()),v=t.defer();return t.all([h,g]).then(function(){toastr.success(a.instant("app.episodelayer.message.link")),i.go("pollutionepisodes.detail.episodelayers").then(function(){s(function(){r.$bus.channel("episodelayers").publish("list.changed",l)},200)}),v.resolve()}),v.promise},e.onCancel=function(){i.go("pollutionepisodes.detail.episodelayers")}}],template:'<episodelayers-edit pollutionepisode="pollutionepisode" episodelayers="episodelayers" on-save="onSave()" on-cancel="onCancel()" selectedlayers="selectedlayers" ></episodelayers-edit>'}},resolve:{episodelayers:["$stateParams","pollutionepisode",function(e,t){return t.getEpisodeLayers()}],selectedlayers:["pollutionepisode",function(e){return e.getEpisodeLayers().then(function(e){return e.map(function(e){return e.layer})})}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.episodeobservers",{url:"/episodeobservers",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","episodeobservers",function(e,t,a){e.pollutionepisode=t,e.episodeobservers=a}],template:'<episodeobservers-table pollutionepisode="pollutionepisode" episodeobservers="episodeobservers" ></episodeobservers-table>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodeobserver"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}],episodeobservers:["$stateParams","pollutionepisode",function(e,t){return t.getEpisodeObservers()}]}}).state("pollutionepisodes.detail.episodeobservers.edit",{url:"/edit/:subid",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{controller:["$scope","episodeobservers",function(e,t){e.episodeobservers=t}],template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","$state","$q","$timeout","episodeobservers","episodeobserver","selectedlayers",function(e,t,a,i,s,r,o){e.episodeobservers=s,e.episodeobserver=r,e.selectedlayers=o,e.onSave=function(){r.layers;console.log("Layers Added: ",o.length);var s=r.setLayers(o),n=a.defer();return a.all([s]).then(function(){t.go("pollutionepisodes.detail.episodeobservers").then(function(){i(function(){e.$bus.channel("episodeobservers").publish("layers.changed",r)},200)}),n.resolve()}),n.promise},e.onCancel=function(){t.go("pollutionepisodes.detail.episodeobservers")}}],template:'<episodeobservers-edit-layers pollutionepisode="pollutionepisode" episodeobserver="episodeobserver" selectedlayers="selectedlayers" on-save="onSave()" on-cancel="onCancel()" ></episodeobservers-edit-layers>'}},resolve:{episodeobserver:["$stateParams","EpisodeObservers",function(e,t){return t.get(e.subid)}],selectedlayers:["episodeobserver",function(e){return e.layers}]},onExit:["$state","pollutionepisode","episodeobserver","selectedlayers","$q","$translate","$rootScope",function(e,t,a,i,s,r,o){}]}).state("pollutionepisodes.detail.episodeobservers.table",{url:"/table",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","episodeobservers",function(e,t,a){e.pollutionepisode=t,e.episodeobservers=a}],template:'<episodeobservers-table pollutionepisode="pollutionepisode" episodeobservers="episodeobservers" ></episodeobservers-table>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodeobserver"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}],episodeobservers:["$stateParams","pollutionepisode",function(e,t){return t.getEpisodeObservers()}]}}).state("pollutionepisodes.detail.episodeobservers.detail",{url:"/:subid",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{controller:["$scope","episodeobserver",function(e,t){e.episodeobserver=t}],template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","episodeobserver","$state",function(e,t,a){e.episodeobserver=t,e.closeDetail=function(){a.go("pollutionepisodes.detail.episodeobservers")}}],template:'<episodeobserver-detail episodeobserver="episodeobserver" on-close="closeDetail()" ></episodeobserver-detail>'}},resolve:{episodeobserver:["$stateParams","EpisodeObservers",function(e,t){return t.get(e.subid)}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.episodeusers",{url:"/episodeusers",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","episodeusers",function(e,t,a){e.pollutionepisode=t,e.episodeusers=a}],template:'<episodeusers-table pollutionepisode="pollutionepisode" episodeusers="episodeusers" ></episodeusers-table>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodeuser"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}],episodeusers:["$stateParams","pollutionepisode",function(e,t){return t.getEpisodeUsers()}]}}).state("pollutionepisodes.detail.episodeusers.edit",{url:"/edit/:subid",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{controller:["$scope","episodeusers",function(e,t){e.episodeusers=t}],template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","$state","$q","$timeout","episodeusers","episodeuser","selectedlayers",function(e,t,a,i,s,r,o){e.episodeusers=s,e.episodeuser=r,e.selectedlayers=o,e.onSave=function(){r.layers;console.log("Layers Added: ",o.length);var s=r.setLayers(o),n=a.defer();return a.all([s]).then(function(){t.go("pollutionepisodes.detail.episodeusers").then(function(){i(function(){e.$bus.channel("episodeusers").publish("layers.changed",r)},200)}),n.resolve()}),n.promise},e.onCancel=function(){t.go("pollutionepisodes.detail.episodeusers")}}],template:'<episodeusers-edit-layers pollutionepisode="pollutionepisode" episodeuser="episodeuser" selectedlayers="selectedlayers" on-save="onSave()" on-cancel="onCancel()" ></episodeusers-edit-layers>'}},resolve:{episodeuser:["$stateParams","EpisodeUsers",function(e,t){return t.get(e.subid)}],selectedlayers:["episodeuser",function(e){return e.layers}]},onExit:["$state","pollutionepisode","episodeuser","selectedlayers","$q","$translate","$rootScope",function(e,t,a,i,s,r,o){}]}).state("pollutionepisodes.detail.episodeusers.table",{url:"/table",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","episodeusers",function(e,t,a){e.pollutionepisode=t,e.episodeusers=a}],template:'<episodeusers-table pollutionepisode="pollutionepisode" episodeusers="episodeusers" ></episodeusers-table>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodeuser"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}],episodeusers:["$stateParams","pollutionepisode",function(e,t){return t.getEpisodeUsers()}]}}).state("pollutionepisodes.detail.episodeusers.detail",{url:"/:subid",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{controller:["$scope","episodeuser",function(e,t){e.episodeuser=t}],template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","episodeuser","$state",function(e,t,a){e.episodeuser=t,e.closeDetail=function(){a.go("pollutionepisodes.detail.episodeusers")}}],template:'<episodeuser-detail episodeuser="episodeuser" on-close="closeDetail()" ></episodeuser-detail>'}},resolve:{episodeuser:["$stateParams","EpisodeUsers",function(e,t){return t.get(e.subid)}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.gislayouts",{url:"/gislayouts",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:'<assign-gislayouts-btn ng-if-role="ROLE_ADMIN,ROLE_SUPERVISOR,ROLE_POLLUTION_EPISODE" episode="pollutionepisode" class="btn-sm pull-right btn btn-default" ></assign-gislayouts-btn>'},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","gislayouts",function(e,t,a){e.pollutionepisode=t,e.gislayouts=a}],template:'<episode-gislayouts episode="pollutionepisode" gislayouts="gislayouts"></episode-gislayouts>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("gislayout"),e.refresh()}],gislayouts:["$stateParams","pollutionepisode",function(e,t){return t.getGisLayouts()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.logbookrecords",{url:"/logbookrecords",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:'<assign-logbookrecords-btn episode="pollutionepisode" class="btn-sm pull-right btn btn-default" ></assign-logbookrecords-btn>'},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","logbookrecords",function(e,t,a){e.episode=t,e.logbookrecords=a}],template:'<episode-logbookrecords episode="episode"  logbookrecords="logbookrecords" ></episode-logbookrecords>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("global"),t.addPart("logbookrecord"),e.refresh()}],logbookrecords:["$stateParams","pollutionepisode",function(e,t){return t.getLogBookRecords()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.map",{url:"/map",title:"app.page.pollutionepisodes.title",views:{"tab-buttons@pollutionepisodes.detail":{template:""},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","assets",function(e,t,a){e.pollutionepisode=t,e.pollutionepisode.assets=a}],template:'<pollutionepisode-map pollutionepisode="pollutionepisode" detail-form="vm.detailForm"></pollutionepisode-map>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("asset"),e.refresh()}],assets:["$stateParams","pollutionepisode",function(e,t){return t.getAssets()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.photos",{url:"/photos",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="pollutionepisodes.detail.photos.create" title="{\'app.photo.home.createLabel\' | translate }}"><i class="ion-plus-circled"></i></a>'},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode",function(e,t){e.pollutionepisode=t}],template:'<episode-photos episode="pollutionepisode" ></episode-photos>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("photo"),e.refresh()}]}}).state("pollutionepisodes.detail.photos.create",{title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:" "},"tab-content@pollutionepisodes.detail":{controller:["$scope","$state","$translate","mapAction",function(e,t,a,i){e.mapAction=i,e.$bus.subscribe({channel:"photos",topic:"item.created",callback:function(e,a){t.go("pollutionepisodes.detail.photos")}}),e.closeCreate=function(){t.go("pollutionepisodes.detail.photos")}}],template:'<photo-create-wizard episode="pollutionepisode" on-close="closeCreate()"></photo-create-wizard>'}},resolve:{mapAction:function(){return"none"}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.pollutionreports",{url:"/pollutionreports",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:'<assign-pollutionreports-btn pollutionepisode="pollutionepisode" ng-if-role="ROLE_ADMIN,ROLE_SUPERVISOR,ROLE_POLLUTION_EPISODE" class="btn-sm pull-right btn btn-default" ></assign-pollutionreports-btn>'},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","pollutionreports",function(e,t,a){e.pollutionepisode=t,e.pollutionreports=a}],template:'<episode-pollutionreports pollutionepisode="pollutionepisode" pollutionreports="pollutionreports" ></episode-pollutionreports>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionreport"),e.refresh()}],pollutionreports:["$stateParams","pollutionepisode",function(e,t){return t.getPollutionReports()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionepisodes.detail.scatreports",{url:"/scatreports",title:!1,views:{"tab-buttons@pollutionepisodes.detail":{template:'<assign-scatreports-btn ng-if-role="ROLE_ADMIN,ROLE_SUPERVISOR,ROLE_POLLUTION_EPISODE" pollutionepisode="pollutionepisode" class="btn-sm pull-right btn btn-default" ></assign-scatreports-btn>'},"tab-content@pollutionepisodes.detail":{controller:["$scope","pollutionepisode","scatreports",function(e,t,a){e.pollutionepisode=t,e.scatreports=a}],template:'<episode-scatreports pollutionepisode="pollutionepisode" scatreports="scatreports" ></episode-scatreports>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("scatreport"),e.refresh()}],scatreports:["$stateParams","pollutionepisode",function(e,t){return t.getScatReports()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],
angular.module("Qualigy.pages.pollutionepisodes").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionreports.detail.comments",{url:"/comments",title:!1,views:{"tab-buttons@pollutionreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="pollutionreports.detail.comments.create" title="{{\'app.comment.home.createLabel\' | translate }}"><i class="ion-plus-circled"></i></a>'},"tab-content@pollutionreports.detail":{controller:["$scope","pollutionreport",function(e,t){e.pollutionreport=t}],template:'<report-comments report="pollutionreport" ></report-comments>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("comment"),e.refresh()}]}}).state("pollutionreports.detail.comments.create",{title:!1,views:{"tab-buttons@pollutionreports.detail":{template:" "},"tab-content@pollutionreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"comments",topic:"item.created",callback:function(e,a){t.go("pollutionreports.detail.comments")}}),e.closeCreate=function(){t.go("pollutionreports.detail.comments")}}],template:'<comment-create-wizard report="pollutionreport" on-close="closeCreate()"></comment-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionreports.detail.photos",{url:"/photos",title:!1,views:{"tab-buttons@pollutionreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="pollutionreports.detail.photos.create" title="{\'app.photo.home.createLabel\' | translate }}"><i class="ion-plus-circled"></i></a>'},"tab-content@pollutionreports.detail":{controller:["$scope","pollutionreport",function(e,t){e.pollutionreport=t}],template:'<report-photos report="pollutionreport" ></report-photos>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("photo"),e.refresh()}]}}).state("pollutionreports.detail.photos.create",{title:!1,views:{"tab-buttons@pollutionreports.detail":{template:" "},"tab-content@pollutionreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"photos",topic:"item.created",callback:function(e,a){t.go("pollutionreports.detail.photos")}}),e.closeCreate=function(){t.go("pollutionreports.detail.photos")}}],template:'<photo-create-wizard report="pollutionreport" on-close="closeCreate()"></photo-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionreports.detail.pollutionsources",{url:"/pollutionsources",title:!1,permissions:["ROLE_ADMIN","ROLE_SUPERVISOR","ROLE_POLREP"],views:{"tab-buttons@pollutionreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="pollutionreports.detail.pollutionsources.create" title="{{\'app.pollutionsource.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@pollutionreports.detail":{controller:["$scope","pollutionreport",function(e,t){e.pollutionreport=t}],template:'<pollutionreport-pollutionsources pollutionreport="pollutionreport" pollutionsources="pollutionsources" ></pollutionreport-pollutionsources>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionsource"),e.refresh()}]}}).state("pollutionreports.detail.pollutionsources.detail",{url:"/:subid",title:!1,views:{"tab-buttons@pollutionreports.detail":{template:" "},"tab-content@pollutionreports.detail":{controller:["$scope","pollutionsource","$state",function(e,t,a){e.pollutionsource=t,e.closeDetail=function(){a.go("pollutionreports.detail.pollutionsources")}}],template:'<pollutionsource-detail pollutionsource="pollutionsource" on-close="closeDetail()" ></pollutionsource-detail>'}},resolve:{pollutionsource:["$stateParams","PollutionSources",function(e,t){return t.get(e.subid)}]}}).state("pollutionreports.detail.pollutionsources.create",{title:!1,views:{"tab-content@pollutionreports.detail":{controller:["$scope","$state","$translate","$stateParams",function(e,t,a,i){e.$bus.subscribe({channel:"pollutionsources",topic:"item.created",callback:function(e,a){t.go("^")}}),e.closeCreate=function(){t.go("^")}}],template:'<pollutionsource-create-wizard pollutionreport="pollutionreport" on-close="closeCreate()"></pollutionsource-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionreports.detail.signeddocument",{url:"/signeddocument",title:!1,views:{"tab-buttons@pollutionreports.detail":{template:""},"tab-content@pollutionreports.detail":{controller:["$scope","pollutionreport",function(e,t){e.pollutionreport=t}],template:'<report-signeddocument report="pollutionreport" ></report-signeddocument>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("pollutionreports.detail.spills",{url:"/spills",title:!1,views:{"tab-buttons@pollutionreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="pollutionreports.detail.spills.create" title="{{\'app.spill.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@pollutionreports.detail":{controller:["$scope","pollutionreport",function(e,t){e.pollutionreport=t}],template:'<pollutionreport-spills pollutionreport="pollutionreport" ></pollutionreport-spills>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("spill"),e.refresh()}]}}).state("pollutionreports.detail.spills.detail",{url:"/:subid",title:!1,views:{"tab-buttons@pollutionreports.detail":{template:" "},"tab-content@pollutionreports.detail":{controller:["$scope","spill","$state",function(e,t,a){e.spill=t,e.closeDetail=function(){a.go("pollutionreports.detail.spills")}}],template:'<spill-detail spill="spill" on-close="closeDetail()" ></spill-detail>'}},resolve:{spill:["$stateParams","Spills",function(e,t){return t.get(e.subid)}]}}).state("pollutionreports.detail.spills.create",{title:!1,views:{"tab-content@pollutionreports.detail":{controller:["$scope","$state","$translate","$stateParams",function(e,t,a,i){e.$bus.subscribe({channel:"spills",topic:"item.created",callback:function(e,a){t.go("^")}}),e.closeCreate=function(){t.go("^")}}],template:'<spill-create-wizard pollutionreport="pollutionreport" on-close="closeCreate()"></spill-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.pollutionreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.comments",{url:"/comments",title:!1,views:{"tab-buttons@scatreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="scatreports.detail.comments.create" title="{{\'app.comment.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<report-comments report="scatreport" ></report-comments>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("comment"),e.refresh()}]}}).state("scatreports.detail.comments.create",{title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"comments",topic:"item.created",callback:function(e,a){t.go("scatreports.detail.comments")}}),e.closeCreate=function(){t.go("scatreports.detail.comments")}}],template:'<comment-create-wizard report="scatreport" on-close="closeCreate()"></comment-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.operationalfeatures",{url:"/operationalfeatures",title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<operationalfeatures-detail scatreport="scatreport" ></operationalfeatures-detail>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("operationalfeature"),e.refresh()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.othersubstances",{url:"/othersubstances",title:!1,views:{"tab-buttons@scatreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="scatreports.detail.othersubstances.create"  title="{{\'app.othersubstance.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<scatreport-othersubstances scatreport="scatreport" othersubstances="othersubstances" ></scatreport-othersubstances>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("othersubstance"),e.refresh()}]}}).state("scatreports.detail.othersubstances.detail",{url:"/:subid",title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","othersubstance","$state",function(e,t,a){e.othersubstance=t,e.closeDetail=function(){a.go("scatreports.detail.othersubstances")}}],template:'<othersubstance-detail othersubstance="othersubstance" on-close="closeDetail()" ></othersubstance-detail>'}},resolve:{othersubstance:["$stateParams","OtherSubstances",function(e,t){return t.get(e.subid)}]}}).state("scatreports.detail.othersubstances.create",{title:!1,views:{"tab-content@scatreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"othersubstances",topic:"item.created",callback:function(e,a){t.go("scatreports.detail.othersubstances")}}),e.closeCreate=function(){t.go("scatreports.detail.othersubstances")}}],template:'<othersubstance-create-wizard scatreport="scatreport" on-close="closeCreate()"></othersubstance-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.photos",{url:"/photos",title:!1,views:{"tab-buttons@scatreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="scatreports.detail.photos.create" title="{{\'app.photo.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<report-photos report="scatreport" ></report-photos>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("photo"),e.refresh()}]}}).state("scatreports.detail.photos.create",{title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"photos",topic:"item.created",callback:function(e,a){t.go("scatreports.detail.photos")}}),e.closeCreate=function(){t.go("scatreports.detail.photos")}}],template:'<photo-create-wizard report="scatreport" on-close="closeCreate()"></photo-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.shorelinetypes",{url:"/shorelinetypes",title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<scatreport-shorelinetype-detail scatreport="scatreport"></scatreport-shorelinetype-detail>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("shorelinetype"),e.refresh()}]}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.subsurfaceoilconditions",{url:"/subsurfaceoilconditions",title:!1,views:{"tab-buttons@scatreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="scatreports.detail.subsurfaceoilconditions.create"  title="{{\'app.subsurfaceoilcondition.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<scatreport-subsurfaceoilconditions scatreport="scatreport" subsurfaceoilconditions="subsurfaceoilconditions" ></scatreport-subsurfaceoilconditions>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("subsurfaceoilcondition"),e.refresh()}]}}).state("scatreports.detail.subsurfaceoilconditions.detail",{url:"/:subid",title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","subsurfaceoilcondition","$state",function(e,t,a){e.subsurfaceoilcondition=t,e.closeDetail=function(){a.go("scatreports.detail.subsurfaceoilconditions")}}],template:'<subsurfaceoilcondition-detail subsurfaceoilcondition="subsurfaceoilcondition" on-close="closeDetail()" ></subsurfaceoilcondition-detail>'}},resolve:{subsurfaceoilcondition:["$stateParams","SubsurfaceOilConditions",function(e,t){return t.get(e.subid)}]}}).state("scatreports.detail.subsurfaceoilconditions.create",{title:!1,views:{"tab-content@scatreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"subsurfaceoilconditions",topic:"item.created",callback:function(e,a){t.go("scatreports.detail.subsurfaceoilconditions")}}),e.closeCreate=function(){t.go("scatreports.detail.subsurfaceoilconditions")}}],template:'<subsurfaceoilcondition-create-wizard scatreport="scatreport" on-close="closeCreate()"></subsurfaceoilcondition-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e,t,a){e.state("scatreports.detail.surfaceoilconditions",{url:"/surfaceoilconditions",title:!1,views:{"tab-buttons@scatreports.detail":{template:'<a class="btn btn-default btn-sm" ui-sref="scatreports.detail.surfaceoilconditions.create"  title="{{\'app.surfaceoilcondition.home.createLabel\' | translate}}"><i class="ion-plus-circled"></i></a>'},"tab-content@scatreports.detail":{controller:["$scope","scatreport",function(e,t){e.scatreport=t}],template:'<scatreport-surfaceoilconditions scatreport="scatreport" surfaceoilconditions="surfaceoilconditions" ></scatreport-surfaceoilconditions>'}},resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("surfaceoilcondition"),e.refresh()}]}}).state("scatreports.detail.surfaceoilconditions.detail",{url:"/:subid",title:!1,views:{"tab-buttons@scatreports.detail":{template:" "},"tab-content@scatreports.detail":{controller:["$scope","surfaceoilcondition","$state",function(e,t,a){e.surfaceoilcondition=t,e.closeDetail=function(){a.go("scatreports.detail.surfaceoilconditions")}}],template:'<surfaceoilcondition-detail surfaceoilcondition="surfaceoilcondition" on-close="closeDetail()" ></surfaceoilcondition-detail>'}},resolve:{surfaceoilcondition:["$stateParams","SurfaceOilConditions",function(e,t){return t.get(e.subid)}]}}).state("scatreports.detail.surfaceoilconditions.create",{title:!1,views:{"tab-content@scatreports.detail":{controller:["$scope","$state","$translate",function(e,t,a){e.$bus.subscribe({channel:"surfaceoilconditions",topic:"item.created",callback:function(e,a){t.go("scatreports.detail.surfaceoilconditions")}}),e.closeCreate=function(){t.go("scatreports.detail.surfaceoilconditions")}}],template:'<surfaceoilcondition-create-wizard scatreport="scatreport" on-close="closeCreate()"></surfaceoilcondition-create-wizard>'}}})}e.$inject=["$stateProvider","baSidebarServiceProvider","searchCenterServiceProvider"],angular.module("Qualigy.pages.scatreports").config(e)}(),function(){"use strict";function e(e){e.state("account.resetFinish",{url:"/reset/finish?key",templateUrl:"app/pages/account/reset/finish/reset.finish.html",controller:"ResetFinishCtrl",controllerAs:"vm"})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.account").config(e)}(),function(){"use strict";function e(e){e.state("account.resetRequest",{url:"/reset/request",templateUrl:"app/pages/account/reset/request/reset.request.html",controller:"RequestResetCtrl",controllerAs:"vm"})}e.$inject=["$stateProvider"],angular.module("Qualigy.pages.account").config(e)}();var app=angular.module("Qualigy",["ngAnimate","ui.bootstrap","ui.bootstrap.tooltip","ui.sortable","ui.router","ngTouch","toastr","smart-table","xeditable","ngSanitize","ui.select","ui.slimscroll","satellizer","restangular","pascalprecht.translate","tmh.dynamicLocale","daterangepicker","angular-loading-bar","ngSecurity","ngTagsInput","matchMedia","ui-leaflet","angularjs-dropdown-multiselect","nzToggle","ngJsTree","Qualigy.config","Qualigy.pages"]);app.config(["uibPaginationConfig",function(e){e.previousText="â¹",e.nextText="âº",e.firstText="Â«",e.lastText="Â»",e.boundaryLinks=!0}]),app.config(["dateRangePickerConfig",function(e){e.applyClass="btn-primary",e.locale={separator:" - ",applyLabel:"Ok",fromLabel:"From",format:"DD/MM/YYYY",toLabel:"To",cancelLabel:"Cancel",customRangeLabel:"Custom date range"},e.ranges={"Last 7 days":[moment().subtract(6,"days").startOf("day"),moment()],"Last 15 days":[moment().subtract(14,"days").startOf("day"),moment()],"Last 30 days":[moment().subtract(29,"days").startOf("day"),moment()],"This year":[moment().startOf("year"),moment().endOf("year")]}}]),app.config(["uibDatepickerConfig",function(e){e.showWeeks=!1}]),app.config(["uibDatepickerPopupConfig",function(e){e.datepickerPopup="dd/MM/yyyy",e.currentText="Hoxe",e.clearText="Borrar",e.closeText="Feito"}]),app.config(function(){$.jstree.defaults.core.themes.url=!0,$.jstree.defaults.core.themes.dir="assets/img/theme/vendor/jstree/dist/themes"}),app.config(["$animateProvider","$httpProvider","RestangularProvider","$uibTooltipProvider",function(e,t,a,i){function s(e){if("object"!=typeof e)return e;for(var t in e)if(e.hasOwnProperty(t)){var a,i=e[t];"string"==typeof i&&(a=i.match(r))?e[t]=moment(a[0]).toDate():"object"==typeof i&&s(i)}}i.options({popoverMode:"single"}),e.classNameFilter(/\banimated\b/),a.setBaseUrl("/api"),a.setParentless(!1),a.addResponseInterceptor(function(e,t,a,i,s,r){var o;if("getList"===t){if(e._embedded){o=[];for(var n in e._embedded)o=o.concat(e._embedded[n]);return o.$page=e.page,o}return 0===Object.keys(e).length&&e.constructor===Object?[]:e.page&&0==e.page.totalElements&&e.constructor===Object?[]:e}return e._links&&e._links.self.templated&&(e._links.self.href=e._links.self.href.replace(/{\?[a-z]+}/,"")),e}),a.addResponseInterceptor(function(e,t,a,i,s,r){return"post"===t?(console.log("item.created",e),postal.channel(a).publish(a+":item.created",e)):"patch"===t||"put"===t?(console.log(a+":item.updated",e),postal.channel(a).publish("item.updated",e)):"remove"===t&&(console.log(a+":item.removed",e),postal.channel(a).publish("item.removed",e)),e}),a.setRestangularFields({selfLink:"_links.self.href"}),delete t.defaults.headers.common["X-Requested-With"];var r=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)(\.\d\d\d([zZ]|[+\-])\d*)?([zZ]|([+\-])(\d\d):?(\d\d)?)?$/;t.defaults.transformResponse.push(function(e){return s(e),e})}]),app.config(["$httpProvider","$securityConfigProvider",function(e,t){e.interceptors.push("$securityInterceptor"),t.configure({strategy:"simple",token:{header:"Authorization",prefix:"Bearer "}})}]),app.config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$bus",{get:function(){var e=this;return{subscribe:function(){var t=postal.subscribe.apply(postal,arguments);e.$on("$destroy",function(){t.unsubscribe()})},channel:function(){return postal.channel.apply(postal,arguments)},publish:function(){postal.publish.apply(postal,arguments)}}},enumerable:!1}),e}])}]),app.run(["$rootScope","$location","$state","AuthService","$window","editableOptions","editableThemes","$translatePartialLoader","$translate",function(e,t,a,i,s,r,o,n,l){r.theme="bs3",o.bs3.submitTpl='<button type="submit" class="btn btn-primary btn-with-icon"><i class="ion-checkmark-round"></i></button>',o.bs3.cancelTpl='<button type="button" ng-click="$form.$cancel()" class="btn btn-default btn-with-icon"><i class="ion-close-round"></i></button>',moment.locale("gl"),Date.prototype.addDays=function(e){return this.setDate(this.getDate()+parseInt(e)),this},Date.prototype.addHours=function(e){return this.setHours(this.getHours()+parseInt(e)),this},e.$on("$stateChangeError",function(e,t,a,i,s,r){console.log(r.data),console.log(t,a,r)}),e.$on("unauthenticated",function(){console.log("UnAuthenticated!! Redirect to login"),s.location.href="/public.html"}),e.$on("permissionDenied",function(){console.log("redirect to permission denied (404)"),s.location.href="/404.html"}),e.$on("authChanged",function(e,t){t||(s.location.href="/public.html")}),e.navigate=function(e,t,i){if(e.ctrlKey){var s=a.href(t,i,{absolute:!0});window.open(s,"_blank")}else a.go(t,i)},n.addPart("global"),n.addPart("app");var c=l.storage().get(l.storageKey())||l.preferredLanguage();l.use(c),l.refresh()}]),function(){"use strict";function e(){var e;angular.injector(["ngCookies"]).invoke(["$cookies",function(t){e=t}]);var t=e.getObject(l);return t?r:r}var t=angular.module("Qualigy.config",["ngCookies"]),a="1.0.0",i="arcopol",s="https://app.arcopol.com",r="/api",o="/report",n="3veD890vCgN7q8dG1dmQxIx605y2qFQnp5GBW3zBLoYl69Eiqj4JUu42l09229iF",l="ng-security-user",c={id:"com.qualigy.arcopol",name:i,version:a};t.constant("config",c),t.constant("APP_ENDPOINT",s),t.constant("REPORT_ENDPOINT",o),t.constant("API_ENDPOINT",e()),t.constant("METEO_API_KEY",n),t.constant("moment",moment),t.constant("d3",d3),t.constant("toastr",toastr);var d="/meteo",n="3veD890vCgN7q8dG1dmQxIx605y2qFQnp5GBW3zBLoYl69Eiqj4JUu42l09229iF",p="71861";t.constant("METEO_API_URL",d),t.constant("METEO_API_KEY",n),t.constant("METEO_LOCATION",p)}(),function(){"use strict";function e(e,t){e.useCookieStorage(),e.registerAvailableLanguageKeys(["gl","es","en"]),e.fallbackLanguage("gl"),e.preferredLanguage("gl"),e.useSanitizeValueStrategy("escaped"),e.addInterpolation("$translateMessageFormatInterpolation"),e.useLoader("$translatePartialLoader",{urlTemplate:"i18n/{lang}/{part}.json"}),t.localeLocationPattern("i18n/angular-locale_{{locale}}.js"),t.defaultLocale("gl"),t.storageKey("NG_TRANSLATE_LANG_KEY")}function t(e,t,a){e.$on("$translatePartialLoaderStructureChanged",function(){t.refresh()}),a.addPart("main"),a.addPart("global")}e.$inject=["$translateProvider","tmhDynamicLocaleProvider"],t.$inject=["$rootScope","$translate","$translatePartialLoader"],angular.module("Qualigy").config(e).run(t)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(a),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("assetitems")}e.$inject=["Restangular","ResourceHelper","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("AssetItems",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("assets")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("Assets",e)}(),/*
* ---------- COP Management Tool --------------
* @Author:  Pablo Dorgambide [@pdorgambide]
* @Emal:    pdorgambide@qualigy.com
* @Date:    2022-02-23 23:33:14
* @Company: Qualigy Solutions Innovation (c) 2022
* @Web:     qualigy.com
* @Last Modified by:   pdorgambide
* @Last Modified time: 2022-02-23 23:35:32
*/
function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("bookmarks")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","$rootScope"];var t=angular.module("Qualigy.resources");t.factory("Bookmarks",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(a),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("comments")}e.$inject=["Restangular","ResourceHelper","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("Comments",e)}(),/*
* ---------- COP Management Tool --------------
* @Author:  Pablo Dorgambide [@pdorgambide]
* @Emal:    pdorgambide@qualigy.com
* @Date:    2022-02-23 23:33:14
* @Company: Qualigy Solutions Innovation (c) 2022
* @Web:     qualigy.com
* @Last Modified by:   pdorgambide
* @Last Modified time: 2022-03-16 11:56:58
*/
function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("configparams")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","$rootScope"];var t=angular.module("Qualigy.resources");t.factory("ConfigParams",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(i),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("episodelayers",function(e){return e.copy=function(){return e.customPOST(e,"copy")},e})}).service("episodelayers")}e.$inject=["Restangular","ResourceHelper","$http","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("EpisodeLayers",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(i),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("episodeobservers",function(e){return e.getLayers=function(t){return e.getList("layers")},e.setLayers=function(t){var a=t.map(function(e){return e._links.self.href.replace(/{\?[a-z]+}/,"")});return e.customPUT(a.join("\n"),"layers",void 0,{"Content-Type":"text/uri-list"})},e.addLayers=function(t){var a=t.map(function(e){return e._links.self.href.replace(/{\?[a-z]+}/,"")});return e.customPUT(a.join("\n"),"layers",void 0,{"Content-Type":"text/uri-list"})},e.removeLayers=function(t){var a=t.map(function(e){return e._links.self.href.replace(/{\?[a-z]+}/,"")});return e.customOperation("remove","layers",void 0,{"Content-Type":"text/uri-list"},a.join("\n"))},e.copy=function(){return e.customPOST(e,"copy")},e})}).service("episodeobservers")}e.$inject=["Restangular","ResourceHelper","$http","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("EpisodeObservers",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("episodes",function(e){return e.getGisLayouts=function(t){var a=angular.extend({episode:e.id,sort:"createdTime,desc"},t);return d.getList(a)},e.addGisLayout=function(t){return t.pollutionEpisode=e,t.save()},e.getEpisodeUsers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"userLogin.username,asc"},t);return EpisodeUsers.getList(a)},e.addEpisodeUser=function(t){return t.episode=e,EpisodeUsers.post(t)},e.addEpisodeUsers=function(t){return EpisodeUsers.post(t.map(function(t){t.episode=e}))},e.getEpisodeObservers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"userLogin.username,asc"},t);return r.getList(a)},e.addEpisodeObserver=function(t){return t.episode=e,r.post(t)},e.addEpisodeObservers=function(t){return r.post(t.map(function(t){t.episode=e}))},e.getEpisodeLayers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"layer.name,asc"},t);return l.getList(a)},e.addEpisodeLayer=function(t){return t.episode=e,l.post(t)},e.addEpisodeLayers=function(t){return l.post(t.map(function(t){t.episode=e}))},e.getAssets=function(t){var a=angular.extend({episode:e.id},t);return o.getList(a)},e.getPhotos=function(t){var a=angular.extend({episode:e.id},t);return n.getList(a)},e.addAsset=function(t){return t.episode=e,o.post(t)},e.getLogBookRecords=function(t){var a=angular.extend({episode:e.id},t);return c.getList(a)},e.addLogBookRecord=function(t){return t.episode=e,t.save()},e.copy=function(){return e.customPOST(e,"copy")},e})}).service("episodes")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","PollutionReports","ScatReports","EpisodeObservers","Assets","Photos","EpisodeLayers","LogBookRecords","GisLayouts"];var t=angular.module("Qualigy.resources");t.factory("Episodes",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(i),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("episodeusers",function(e){return e.getLayers=function(t){return e.getList("layers",t)},e.setLayers=function(t){var a=t.map(function(e){return e._links.self.href.replace(/{\?[a-z]+}/,"")});return e.customPUT(a.join("\n"),"layers",void 0,{"Content-Type":"text/uri-list"})},e.addLayers=function(t){var a=t.map(function(e){return e._links.self.href.replace(/{\?[a-z]+}/,"")});return e.customPUT(a.join("\n"),"layers",void 0,{"Content-Type":"text/uri-list"})},e.removeLayers=function(t){var a=t.map(function(e){return e._links.self.href.replace(/{\?[a-z]+}/,"")});return e.customOperation("remove","layers",void 0,{"Content-Type":"text/uri-list"},a.join("\n"))},e.copy=function(){return e.customPOST(e,"copy")},e})}).service("episodeusers")}e.$inject=["Restangular","ResourceHelper","$http","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("EpisodeUsers",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(a),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("gisassets")}e.$inject=["Restangular","ResourceHelper","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("GisAssets",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(a),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("gislayouts",function(e){return e.getGisAssets=function(t){var a=angular.extend({gisLayout:e.id},t);return i.getList(a)},e})}).service("gislayouts")}e.$inject=["Restangular","ResourceHelper","API_ENDPOINT","GisAssets"];var t=angular.module("Qualigy.resources");t.factory("GisLayouts",e)}(),function(){"use strict";function e(e,t){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"})}).service("globalnotifications")}e.$inject=["Restangular","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("GlobalNotifications",e)}(),function(){"use strict";function e(e,t,a,i,s){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("layergroups",function(e){return e.getLayers=function(){return e.getList("layers")},e.removeLayer=function(e){return s.delete(t+"/layers/"+e.id+"/layerGroup")},e})}).service("layergroups")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","Layers","$http"];var t=angular.module("Qualigy.resources");t.factory("LayerGroups",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("layers")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","$rootScope"];var t=angular.module("Qualigy.resources");t.factory("Layers",e)}(),function(){"use strict";function e(e,t,a,i,s){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("logbookrecords",function(e){return e.deleteFile=function(){return s.delete(t+"/logbookrecords/"+e.id+"/delete")},e.uploadFile=function(a){if(a){var i=new FormData;return i.append("file",a),i.append("fileName",a.name),s.post(t+"/logbookrecords/"+e.id+"/upload",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}},e})}).service("logbookrecords")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","$rootScope","$http"];var t=angular.module("Qualigy.resources");t.factory("LogBookRecords",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.extendModel("notificationevents",function(e){return e}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("notificationevents")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("NotificationEvents",e)}(),function(){"use strict";function e(e,t){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.extendModel("notifications",function(e){return e.publish=function(t){return e.customPOST(t,"publish")},e.lastest=function(){return e.getList("lastest")},e})}).service("notifications")}e.$inject=["Restangular","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("Notifications",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("othersubstances")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("OtherSubstances",e)}(),function(){"use strict";function e(e,t,a,i,s){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("panels",function(e){return e.getLayerGroups=function(t){return s.getList({panel:e.id,size:1e4})},e.removeLayerGroup=function(e){return i.delete(t+"/layergroups/"+e.id+"/panel")},e})}).service("panels")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","$http","LayerGroups"];var t=angular.module("Qualigy.resources");t.factory("Panels",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("journeynotifications")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("JourneyNotifications",e)}(),function(){"use strict";function e(e,t){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.extendModel("persons",function(e){return e.sendDeviceToken=function(t){return e.customPOST(t,"device")},e.getMembers=function(){return e.getList("taskmembers")},e})}).service("persons")}e.$inject=["Restangular","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("Persons",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(i),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("photos",function(e){return e.uploadFile=function(t){var s=new FormData;return s.append("file",t),s.append("fileName",t.name),a.post(i+"/photos/"+e.id+"/upload",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})},e})}).service("photos")}e.$inject=["Restangular","ResourceHelper","$http","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("Photos",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.extendModel("pollutionepisodes",function(e){return e.getPollutionReports=function(t){var i=angular.extend({pollutionEpisode:e.id,sort:"reportTime,desc"},t);return a.getList(i)},e.addPollutionReport=function(t){return t.pollutionEpisode=e,t.save()},e.getScatReports=function(t){var a=angular.extend({pollutionEpisode:e.id,sort:"reportTime,desc"},t);return i.getList(a)},e.getEpisodeUsers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"userLogin.username,asc"},t);return s.getList(a)},e.addEpisodeUser=function(t){return t.episode=e,s.post(t)},e.addEpisodeUsers=function(t){return s.post(t.map(function(t){t.episode=e}))},e.getEpisodeLayers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"layer.name,asc"},t);return n.getList(a)},e.addEpisodeLayer=function(t){return t.episode=e,n.post(t)},e.addEpisodeLayers=function(t){return n.post(t.map(function(t){t.episode=e}))},e.getAssets=function(t){var a=angular.extend({episode:e.id},t);return r.getList(a)},e.getPhotos=function(t){var a=angular.extend({episode:e.id},t);return o.getList(a)},e.addAsset=function(t){return t.episode=e,r.post(t)},e.getLogBookRecords=function(t){var a=angular.extend({episode:e.id},t);return LogBookRecords.getList(a)},e.addLogBookRecord=function(t){return t.episode=e,LogBookRecords.post(t)},e.copy=function(){return e.customPOST(e,"copy")},e})}).service("pub/pollutionepisodes")}e.$inject=["Restangular","API_ENDPOINT","PollutionReports","ScatReports","EpisodeUsers","Assets","EpisodePhotos","EpisodeLayers"];var t=angular.module("Qualigy.resources");t.factory("PollutionEpisodesPub",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d,p){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("pollutionepisodes",function(e){return e.getGisLayouts=function(t){var a=angular.extend({episode:e.id,sort:"createdTime,desc"},t);return p.getList(a)},e.addGisLayout=function(t){return t.pollutionEpisode=e,t.save()},e.getPollutionReports=function(t){var a=angular.extend({pollutionEpisode:e.id,sort:"reportTime,desc"},t);return i.getList(a)},e.addPollutionReport=function(t){return t.pollutionEpisode=e,t.save()},e.getScatReports=function(t){var a=angular.extend({pollutionEpisode:e.id,sort:"reportTime,desc"},t);return s.getList(a)},e.getEpisodeUsers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"userLogin.username,asc"},t);return o.getList(a)},e.addEpisodeUser=function(t){return t.episode=e,o.post(t)},e.addEpisodeUsers=function(t){return o.post(t.map(function(t){t.episode=e}))},e.getEpisodeObservers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"userLogin.username,asc"},t);return r.getList(a)},e.addEpisodeObserver=function(t){return t.episode=e,r.post(t)},e.addEpisodeObservers=function(t){return r.post(t.map(function(t){t.episode=e}))},e.getEpisodeLayers=function(t){var a=angular.extend({size:1e4,episode:e.id,sort:"layer.name,asc"},t);return c.getList(a)},e.addEpisodeLayer=function(t){return t.episode=e,c.post(t)},e.addEpisodeLayers=function(t){return c.post(t.map(function(t){t.episode=e}))},e.getAssets=function(t){var a=angular.extend({episode:e.id},t);return n.getList(a)},e.getPhotos=function(t){var a=angular.extend({episode:e.id},t);return l.getList(a)},e.addAsset=function(t){return t.episode=e,n.post(t)},e.getLogBookRecords=function(t){var a=angular.extend({episode:e.id},t);return d.getList(a)},e.addLogBookRecord=function(t){return t.episode=e,t.save()},e.copy=function(){return e.customPOST(e,"copy")},e})}).service("pollutionepisodes")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","PollutionReports","ScatReports","EpisodeObservers","EpisodeUsers","Assets","Photos","EpisodeLayers","LogBookRecords","GisLayouts"];var t=angular.module("Qualigy.resources");t.factory("PollutionEpisodes",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("pollutionreports",function(e){return e.getReportUsers=function(t){var a=angular.extend({size:1e4,report:e.id,sort:"userLogin.username,asc"},t);return c.getList(a)},e.addReportUser=function(t){return t.report=e,c.post(t)},e.getSpills=function(){return r.getList({report:e.id})},e.getPollutionSources=function(){return o.getList({report:e.id})},e.getPhotos=function(){return n.getList({report:e.id})},e.getComments=function(){return l.getList({report:e.id})},e})}).service("pollutionreports")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","$rootScope","$http","Spills","PollutionSources","Photos","Comments","ReportUsers"];var t=angular.module("Qualigy.resources");t.factory("PollutionReports",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(a),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("pollutionsources")}e.$inject=["Restangular","ResourceHelper","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("PollutionSources",e)}(),function(){"use strict";function e(e,t,a,i){return e.withConfig(function(e){e.setBaseUrl(i),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("reportusers",function(e){return e.copy=function(){return e.customPOST(e,"copy")},e})}).service("reportusers")}e.$inject=["Restangular","ResourceHelper","$http","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("ReportUsers",e)}(),function(){"use strict";function e(){function e(e){if(e){for(var s in e)"_links"!=s&&"_embedded"!=s&&(t(e[s])?i(e,s,e):a(e,s)&&delete e[s]);if(e._embedded)for(var s in e._embedded)"_links"!=s&&(t(e._embedded[s])?i(e,s,e._embedded):a(e,s)&&delete e[s])}}function t(e){try{return!!e._links.self}catch(e){return!1}}function a(e,t){try{return!!e._links[t]}catch(e){return!1}}function i(e,t,a){try{e[t]=a[t]._links.self.href.replace(/{\?[a-z]+}/,"")}catch(a){delete e[t]}}var s={updateReferences:e};return s}var t=angular.module("Qualigy.resources");t.factory("ResourceHelper",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e}),e.extendModel("scatreports",function(e){var t=e.patch,a=e.post;return e.getSurfaceOilConditions=function(){return i.getList({report:e.id})},e.getOtherSubstances=function(){return r.getList({report:e.id})},e.getSubsurfaceOilConditions=function(){return s.getList({report:e.id})},e.getPhotos=function(){return o.getList({report:e.id})},e.getComments=function(){return n.getList({report:e.id})},e.post=function(){return e.segment&&!e.segment.id?l.post(e.segment).then(function(t){return e.segment=t,a.call(e)}):a.call(e)},e.patch=function(a){return a||(a=e),a.segment?a.segment.id?l.one(a.segment.id).patch(a.segment).then(function(e){return a.segment=e,t.call(a)}):l.post(a.segment).then(function(e){return a.segment=e,t.call(a)}):t.call(e,a)},e.getReportUsers=function(t){var a=angular.extend({size:1e4,report:e.id,sort:"userLogin.username,asc"},t);return c.getList(a)},e.addReportUser=function(t){return t.report=e,c.post(t)},e})}).service("scatreports")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper","SurfaceOilConditions","SubsurfaceOilConditions","OtherSubstances","Photos","Comments","Segments","ReportUsers"];var t=angular.module("Qualigy.resources");t.factory("ScatReports",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("segments")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("Segments",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("spills")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("Spills",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("subsurfaceoilconditions")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("SubsurfaceOilConditions",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("surfaceoilconditions")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("SurfaceOilConditions",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(a),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,a,i,s){try{var r=angular.copy(e);return t.updateReferences(r),r}catch(e){console.log(e)}return e})}).service("tags")}e.$inject=["Restangular","ResourceHelper","API_ENDPOINT"];var t=angular.module("Qualigy.resources");t.factory("Tags",e)}(),function(){"use strict";function e(e,t){return e.withConfig(function(e){e.setBaseUrl(t)}).service("userloginepisodes")}e.$inject=["Restangular","API_ENDPOINT"],angular.module("Qualigy.resources").factory("UserLoginEpisodes",e)}(),function(){"use strict";function e(e,t,a){return e.withConfig(function(e){e.setBaseUrl(t),e.setRestangularFields({selfLink:"_links.self.href"}),e.addRequestInterceptor(function(e,t,i,s){try{var r=angular.copy(e);return a.updateReferences(r),r}catch(e){}return r})}).service("userlogins")}e.$inject=["Restangular","API_ENDPOINT","ResourceHelper"];var t=angular.module("Qualigy.resources");t.factory("UserLogins",e)}(),function(){"use strict";function e(e,t){return e.withConfig(function(e){e.setBaseUrl(t)}).service("userroles")}e.$inject=["Restangular","API_ENDPOINT"],angular.module("Qualigy.resources").factory("UserRoles",e)}(),function(){"use strict";function e(e,t){app.constant("OpenLayers",OpenLayers)}e.$inject=["baConfigProvider","colorHelper"],angular.module("Qualigy.theme").config(e)}(),function(){"use strict";function e(e){var r={theme:{blur:!1},colors:{default:t.default,defaultText:t.defaultText,border:t.border,borderDark:t.borderDark,primary:a.primary,secondary:a.secondary,info:a.info,success:a.success,warning:a.warning,danger:a.danger,primaryLight:e.tint(a.primary,30),infoLight:e.tint(a.info,30),successLight:e.tint(a.success,30),warningLight:e.tint(a.warning,30),dangerLight:e.tint(a.danger,30),primaryDark:e.shade(a.primary,15),infoDark:e.shade(a.info,15),successDark:e.shade(a.success,15),warningDark:e.shade(a.warning,15),dangerDark:e.shade(a.danger,15),dashboard:{blueStone:s.blueStone,surfieGreen:s.surfieGreen,silverTree:s.silverTree,gossip:s.gossip,white:s.white},tasks:{extraction:i.extraction,seed:i.seed,guard:i.guard,clean:i.clean,move:i.move,disperse:i.disperse}}};return r.changeTheme=function(e){angular.merge(r.theme,e)},r.changeColors=function(e){angular.merge(r.colors,e)},r.$get=function(){return delete r.$get,r},r}e.$inject=["colorHelper"];var t={default:"#ffffff",defaultText:"#666666",border:"#dddddd",borderDark:"#aaaaaa"},a={primary:"#36578c",secondary:"#3489d7",info:"#2dacd1",success:"#90b900",warning:"#dfb81c",danger:"#e85656"},i={extraction:a.danger,seed:a.success,guard:a.warning,clean:"#56a7ec",move:"#ff7800",disperse:"#6c7f64"},s={blueStone:"#005562",surfieGreen:"#0e8174",silverTree:"#6eba8c",gossip:"#b9f2a1",white:"#10c4b5"};angular.module("Qualigy.theme").provider("baConfig",e)}(),function(){"use strict";function e(e,t,a){function i(e){return e.toString(16)}function s(e){return parseInt(e,16)}for(var r="#",o=1;o<7;o+=2){var n=s(e.substr(o,2)),l=s(t.substr(o,2)),c=i(Math.floor(l+(n-l)*(a/100)));r+=("0"+c).slice(-2)}return r}var t="assets/img/";angular.module("Qualigy.theme").constant("layoutSizes",{resWidthCollapseSidebar:1200,resWidthHideSidebar:500}).constant("layoutPaths",{images:{root:t,profile:t+"app/profile/",amMap:"assets/img/theme/vendor/ammap//dist/ammap/images/",amChart:"assets/img/theme/vendor/amcharts/dist/amcharts/images/"}}).constant("colorHelper",{tint:function(t,a){return e("#ffffff",t,a)},shade:function(t,a){return e("#000000",t,a)}})}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d,p,u,m){p.initialize(),t.$baSidebarService=r,t.$searchCenterService=o,u.addPart("global"),m.refresh()}e.$inject=["$timeout","$rootScope","layoutPaths","preloader","$q","baSidebarService","searchCenterService","themeLayoutSettings","AuthService","$urlRouter","$window","stateHandler","$translatePartialLoader","$translate"],angular.module("Qualigy.theme").run(e)}(),function(){"use strict";function e(e){var t=/android|webos|iphone|ipad|ipod|blackberry|windows phone/.test(navigator.userAgent.toLowerCase()),a=t?"mobile":"",i=e.theme.blur?"blur-theme":"";return angular.element(document.body).addClass(a).addClass(i),{blur:e.theme.blur,mobile:t}}e.$inject=["baConfig"],angular.module("Qualigy.theme").service("themeLayoutSettings",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-01-23
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a){function i(){o.availableColors=["blue","red","darkred","orange","green","darkgreen","cadetblue","purple"],o.selectedColor=a,e.$watch("vm.selectedColor",function(e,t){e!=t&&s()})}function s(){o.newForm.$valid&&t.close(o.selectedColor)}function r(){t.dismiss("cancel")}var o=this;o.ok=s,o.cancel=r,i()}e.$inject=["$scope","$uibModalInstance","selectedColor"],angular.module("Qualigy.components").controller("ColorPickerModalCtrl",e)}(),function(){"use strict";angular.module("Qualigy.components").directive("editableInputGroup",["editableDirectiveFactory",function(e){return e({directiveName:"editableInputGroup",inputTpl:'<div class="form-inline" style="width: 250px"><div class="input-group"><span class="input-group-addon" id="basic-addon1">#</span><input type="text"  class="form-control" placeholder="Name"  ng-model="$data" aria-describedby="basic-addon1" ></div></div>'})}])}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t){function a(){s.newForm.$valid&&e.close(s.feature)}function i(){e.dismiss("cancel")}var s=this;s.ok=a,s.cancel=i,s.feature=t,s.availableIcons=["fa fa-info","fa fa-ambulance","fa fa-bicycle","fa fa-cutlery","fa fa-camera","fa fa-binoculars","fa fa-book","fa fa-bus","fa fa-anchor","fa fa-coffee","fa fa-university","fa fa-plug","fa fa-shopping-cart","fa fa-exclamation-triangle","fa fa-flag","fa fa-flag-checkered"],s.availableColors=["blue","red","darkred","orange","green","darkgreen","cadetblue","purple"]}e.$inject=["$uibModalInstance","feature"],angular.module("Qualigy.components").controller("MapMarkerDetailCtrl",e)}(),/**
 * uiBreadcrumbs automatic breadcrumbs directive for AngularJS & Angular ui-router.
 *
 * https://github.com/michaelbromley/angularUtils/tree/master/src/directives/uiBreadcrumbs
 *
 * Copyright 2014 Michael Bromley <michael@michaelbromley.co.uk>
 */
function(){"use strict";function e(e,t,a,i){return{replace:!0,restrict:"E",templateUrl:function(e,t){return t.templateUrl||"app/components/ng-breadcrumbs/ngBreadCrumbTemplate.html"},scope:{displaynameProperty:"@",abstractProxyProperty:"@?"},link:function(i){function s(){for(var e,a,s=[],n=t.$current;n&&""!==n.name;)e=r(n),e&&(a=o(e),a===!1||l(e,s)||s.push({displayName:a,route:e.name})),n=n.parent;s.reverse(),i.breadcrumbs=s}function r(e){var a,s=e;return e.abstract===!0&&("undefined"!=typeof i.abstractProxyProperty?(a=n(i.abstractProxyProperty,e),s=!!a&&t.get(a)):s=!1),s}function o(t){var a,s,r;return i.displaynameProperty?(s=n(i.displaynameProperty,t),s!==!1&&("undefined"==typeof s?t.name:(a="undefined"!=typeof t.locals?t.locals.globals:t,r=e(s)(a)))):t.name}function n(e,t){var a,i=e.split("."),s=t;for(a=0;a<i.length;a++){if(!angular.isDefined(s[i[a]]))return;s=s[i[a]]}return s}function l(e,t){var a,i=!1;for(a=0;a<t.length;a++)t[a].route===e.name&&(i=!0);return i}i.breadcrumbs=[],""!==t.$current.name&&s(),a.$on("$stateChangeSuccess",function(e,t,a,i,r){s()})}}}e.$inject=["$interpolate","$state","$rootScope","$translate"],angular.module("Qualigy.components").directive("uiBreadcrumbs",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=",reportusers:"=?",selectedusers:"=?",disabled:"=?",onSave:"&?",onCancel:"&?"},controller:"ReportUsersTreeCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/components/reportusers-tree/reportusers-tree.html"}}angular.module("Qualigy.components").directive("reportusersTree",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){d(),!g.selectedusers&&g.report?g.report.getReportUsers().then(function(e){g.selectedusers=e,u()}):u(),e.$watch("vm.disabled",function(e,t){console.log("Set Tree: "+(e?"DISABLED":"ENABLED")),p(e)});e.$bus.subscribe({channel:"reportusers",topic:"item.*",callback:function(e,t){g.report.getReportUsers().then(function(e){g.reportusers=e,u()})}})}function n(){return!g.ignoreChanges}function l(){var e=g.basicTree.jstree(!0);e.deselect_all(!0),g.selectedusers&&g.selectedusers.forEach(function(t){e.select_node(t.id)})}function c(){var e=g.basicTree.jstree(!0);e.deselect_all(!0),g.selectedusers&&g.selectedusers.forEach(function(t){e.select_node(t.id)}),g.basicTree.on("deselect_node.jstree",function(e,t){h()}),g.basicTree.on("select_node.jstree",function(e,t){h()}),r(function(){h(),g.ignoreChanges=!1})}function d(){g.basicConfig={core:{multiple:!0,check_callback:!0,worker:!1},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","checkbox","sort"],version:1}}function p(e){g.treeData&&g.treeData.forEach(function(t){t.state.checkbox_disabled=e})}function u(){if(g.treeData=[],g.ignoreChanges=!0,g.reportusers)m(g.reportusers);else{var e={userauthorities:"ROLE_SCAT_INSPECTOR",size:1e4,sort:"fullName,asc"};a.getList(e).then(function(e){g.reportusers=e.map(function(e){return{report:g.report,userLogin:e}}),m(g.reportusers),l()})}g.basicConfig.version++}function m(e){g.treeData=[],e.forEach(function(e){var t={id:e.id,text:e.userLogin.fullName||e.userLogin.username+" ["+e.userLogin.userRole.role+"]",data:e,type:"user",parent:"#",state:{checkbox_disabled:g.disabled,opened:!1}};g.treeData.push(t)})}function h(){var e=g.basicTree.jstree("get_selected",!0);return g.selectedusers||(g.selectedusers=[]),g.selectedusers.length=0,angular.forEach(e,function(e){"user"==e.type&&g.selectedusers.push(e.data)}),e}var g=this;g.navigate=t.navigate,g.applyModelChanges=n,g.readyCB=c,o()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate","$timeout"],angular.module("Qualigy.components").controller("ReportUsersTreeCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d,p){function u(){S.calendarConfig={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},views:{agendaDay:{buttonText:"Agenda dÃ­a"},agendaWeek:{buttonText:"Agenda semana"},listDay:{buttonText:"Lista dia"},listWeek:{buttonText:"Lista semana"},month:{buttonText:"Mes"}},defaultView:i.search().viewName||"month",defaultDate:i.search().intervalStart?moment(i.search().intervalStart):moment(),monthNames:["Xaneiro","Febreiro","Marzo","April","Maio","XuÃ±o","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthNamesShort:["Xan","Feb","Mar","Abr","Mai","XuÃ±","Xul","Ag","Sep","Out","Nov","Dec"],dayNames:["Domingo","Luns","Martes","MÃ©rcores","Xoves","Venres","SÃ¡bado"],dayNamesShort:["Dom","Lun","Mar","Mer","Xov","Ven","SÃ¡b"],buttonText:{today:"Hoxe",month:"Mes",week:"Semana",day:"DÃ­a",list:"Lista"},dayRender:h,nowIndicator:!0,firstDay:1,allDaySlot:!1,allDayText:"Todo o dÃ­a",timeFormat:"HH:mm",slotLabelFormat:"HH:mm",selectable:!!r.hasAnyPermission(["ROLE_ADMIN","ROLE_SUPERVISOR"]),selectHelper:!0,select:O,eventLimit:!0,eventLimitText:"mÃ¡is",editable:!1,eventClick:f,eventDrop:b,eventResize:L,eventRender:g,eventDragStop:y,dayClick:r.hasAnyPermission(["ROLE_ADMIN","ROLE_SUPERVISOR"])?w:null,viewRender:function(e,t){var a=e.intervalStart;i.search("intervalStart",a.format("YYYY-MM-DD")),i.search("viewName",e.name)}};e.$bus.subscribe({channel:"journeys",topic:"item.*",callback:function(e,t){$("#calendar").fullCalendar("refetchEvents")}});$("#calendar").fullCalendar("refetchEvents")}function m(e,t,a,i){var s={plannedStartTime:[e.toDate(),t.toDate()]};p.one().getCalendarByPlannedTime(s).then(function(e){var t=[];if(e){var a=d3.nest().key(function(e){return e.name+e.plannedStartTime}).rollup(function(e){var t=e[0];if(e.length>1)return{title:t.name,start:t.plannedStartTime,end:t.plannedEndTime,journeys:e};var a=t.name;return{title:a,start:t.plannedStartTime,end:t.plannedEndTime,description:t.description,journey:t}}).object(e);angular.forEach(a,function(e){t.push(e)}),i(t)}})}function h(e,t,a){var i=a.intervalStart,s=a.intervalEnd;(e.isBefore(i)||e.isAfter(s))&&t.attr({style:"background-color: #e4e4e4"})}function g(t,a,i){t.description?(a.find(".fc-title").append("<br/>"+t.description),a.attr({"ui-sref":"journeys.detail({'id':'{{event.journey.id}}'})"})):a.attr({"uib-popover-template":"'app/pages/calendar/calendar-journey-popover.html'","popover-append-to-body":!0,"popover-placement":"bottom","popover-trigger":"outsideClick"});var r=e.$new(!0);r.event=t,s(a)(r)}function v(){$("#calendar").fullCalendar("refetchEvents")}function f(e,t,a){e.journey&&c.go("journeys.detail",{id:e.journey.id,origin:"calendar"},!0)}function y(e,t,a){x(e.start,e.stop)}function b(e,t,a,i,s,r){S.alertMessage="Event Droped to make dayDelta "+t}function L(e,t,a,i,s,r){S.alertMessage="Event Resized to make dayDelta "+t}function w(e,t,a){var i=$(this).addClass("day-selected");e.hour(7),x(e.toDate(),e.add(4,"h").toDate()).then(function(e){i.removeClass("day-selected"),S.refreshCalendar()},function(){i.removeClass("day-selected")})}function O(e,t,a,i){}function x(e,t,i){e=moment(e).startOf("minute").toDate(),t=t||moment(e).add(2,"h").toDate();var s=a.defer(),r=d.open({ariaLabelledBy:"modal-title",backdrop:"static",ariaDescribedBy:"modal-body",templateUrl:"app/pages/journeys/create/journey-create-dlg.html",controller:["PollutionEpisodes","$uibModalInstance","$timeout","newJourney",function(e,t,a,i){function s(){o.newForm.$valid&&e.post(o.newJourney).then(function(e){t.close(e)})}function r(){t.dismiss("cancel")}var o=this;o.ok=s,o.cancel=r,o.newJourney=i,a(function(){angular.element("#inputNombre").focus()})}],controllerAs:"vm",resolve:{newJourney:function(){return{plannedStartTime:e,plannedEndTime:t}}},size:i});return r.result.then(function(e){s.resolve(e),$("#calendar").fullCalendar("refetchEvents")},function(e){s.reject()}),s.promise}var S=(n.colors.dashboard,this),C="user";S.filterBy=C,S.eventSources=[m],S.refreshCalendar=v,u()}e.$inject=["$scope","$timeout","$q","$location","$compile","AuthService","$filter","baConfig","$http","$state","$uibModal","PollutionEpisodes"],angular.module("Qualigy.pages.calendar").controller("CalendarCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){c.startDay=moment(c.dateTime).hour(7).toDate(),c.endDay=moment(c.dateTime).endOf("day").toDate()}function o(){c.dateTime=new Date}function n(){c.dateTime=moment(c.dateTime).add(1,"day").toDate(),r()}function l(){c.dateTime=moment(c.dateTime).subtract(1,"day").toDate(),r()}var c=this;c.nextDay=n,c.previousDay=l,o()}e.$inject=["$location","$http","$uibModal","$window","$state"],angular.module("Qualigy.pages.dashboard").controller("DashboardCtrl",e)}(),function(){"use strict";function e(e,t,a,i){function s(){if(e.gislayout=i,c=e.$bus.channel("map"),e.gislayout.segment&&e.gislayout.segment.geometry){var t=(new OpenLayers.Format.WKT).read(e.gislayout.segment.geometry);t.geometry.transform("EPSG:4326","EPSG:900913"),e.zoomToExtent=t.geometry.getBounds().toString()}}function r(e){c.publish("action.select",e)}function o(e){c.publish("action.select",e)}function n(e){c.publish("action.select",e)}function l(){a.go("gislayouts")}var c=null,d=this;d.selectLayer=r,d.editLayer=n,d.drawLayer=o,d.onClose=l,s()}e.$inject=["$scope","$uibModal","$state","gislayout"],angular.module("Qualigy.pages.gislayouts").controller("GisLayoutsDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){var t=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/pollutionepisodes-create-dlg.html",controller:"LayerCreateCtrl",controllerAs:"vm",size:e});t.result.then(function(e){s.go("pollutionepisodes.detail",{id:e.id})})}var o=this;o.keywords=e.search().keywords,o.openCreateForm=r}e.$inject=["$location","$http","PollutionEpisodes","$uibModal","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodesCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){var t=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/pollutionepisodes-create-dlg.html",controller:"LayerCreateCtrl",controllerAs:"vm",size:e});t.result.then(function(e){s.go("pollutionepisodes.detail",{id:e.id})})}var o=this;o.keywords=e.search().keywords,o.openCreateForm=r}e.$inject=["$location","$http","PollutionEpisodes","$uibModal","$state"],angular.module("Qualigy.pages.pollutionepisodesmap").controller("PollutionEpisodesMapCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){s.go("pollutionreports.detail.spills.create",{id:report.id})}var o=this;o.keywords=e.search().keywords,o.onCreate=r}e.$inject=["$location","$http","PollutionReports","$uibModal","$state"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportsCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){p.isMobile=s.mobile,e.pollutionreport=i,d=e.$bus.channel("map")}function o(e){d.publish("action.select",e)}function n(e){d.publish("action.select",e)}function l(e){d.publish("action.select",e)}function c(e){var i=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionreports/pollutionreports-create-dlg.html",controller:"LayerCreateCtrl",controllerAs:"vm",size:e});i.result.then(function(e){a.go("pollutionreports.detail",{id:e.id})})}var d=null,p=this;p.openCreateForm=c,p.selectLayer=o,p.editLayer=l,p.drawLayer=n,r()}e.$inject=["$scope","$uibModal","$state","pollutionreport","themeLayoutSettings"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportsDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){s.go("scatreports.detail",{id:e.id})}var o=this;o.keywords=e.search().keywords,o.onCreate=r}e.$inject=["$location","$http","ScatReports","$uibModal","$state"],angular.module("Qualigy.pages.scatreports").controller("ScatReportsCtrl",e)}(),function(){"use strict";function e(e,t,a,i){function s(){if(e.scatreport=i,c=e.$bus.channel("map"),e.scatreport.segment&&e.scatreport.segment.geometry){var t=(new OpenLayers.Format.WKT).read(e.scatreport.segment.geometry);t.geometry.transform("EPSG:4326","EPSG:900913"),e.zoomToExtent=t.geometry.getBounds().toString()}}function r(e){c.publish("action.select",e)}function o(e){c.publish("action.select",e)}function n(e){c.publish("action.select",e)}function l(e){var i=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/scatreports/scatreports-create-dlg.html",controller:"LayerCreateCtrl",controllerAs:"vm",size:e});i.result.then(function(e){a.go("scatreports.detail",{id:e.id})})}var c=null,d=this;d.openCreateForm=l,d.selectLayer=r,d.editLayer=n,d.drawLayer=o,s()}e.$inject=["$scope","$uibModal","$state","scatreport"],angular.module("Qualigy.pages.scatreports").controller("ScatReportsDetailCtrl",e)}(),function(){"use strict";function e(e,t,a,i){function s(){v=g,p.model=model,m=e.$bus.channel(p.resource)}function r(){return v==g}function o(){var e=modalService.showConfirmationDeleteMessage();e.result.then(function(e){p.model.remove().then(function(e){modalService.showInformationMessage("Elemento eliminado","O elemento foi eliminado do sistema","ion-trash-b"),m.publish("item.removed",e),p.cancel()})})}function n(){$state.go(p.resource)}function l(){v===h&&(v=g,p.model=u)}function c(){v=h,u=t.copy(p.model)}function d(){p.detailForm.$valid&&p.model.put().then(function(e){p.model=e,u=t.copy(p.model),v=g,m.publish("item.changed",e)})}var p=this;p.model=e.titularbatea;var u,m,h="edit",g="show",v=g;p.resource=e.resource,p.remove=o,p.edit=c,p.save=d,p.cancel=l,p.showMode=r,p.close=n,s()}e.$inject=["$scope","Restangular","batea","titulares"],angular.module("Qualigy.pages.templates").controller("DetailBaseCtrl",e)}(),function(){"use strict";function e(e,t,a,i){var s=this;s.keywords=e.search().keywords;t.all("bateas").getList().then(function(e){s.bateas=e}),s.openCreateForm=function(e){var t=a.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"TeamCreateForm.html",controller:"TeamCreateCtrl",controllerAs:"$ctrl",backdrop:"static",size:e});t.result.then(function(e){i.go("bateas.detail",{id:e.id})})}}e.$inject=["$location","Restangular","$uibModal","$state"],angular.module("Qualigy.pages.userlogins").controller("UserLoginsCtrl",e)}(),function(){"use strict"}(),/**
 * @Author: Pablo Dorgambide <systems>
 * @Date:   2018-03-14
 * @Email:  pvillaverde@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-09-11
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t){return{restrict:"A",link:function(a,i,s){s.$observe("animatedOnChange",function(a,r){a!=r&&(s.animatedOut?e.addClass(i,s.animatedOut).then(function(){e.addClass(i,s.animatedIn).then(function(){t(function(){e.removeClass(i,s.animatedIn)})})}):e.addClass(i,s.animatedIn).then(function(){t(function(){e.removeClass(i,s.animatedIn)})}))})}}}e.$inject=["$animate","$timeout"],angular.module("Qualigy.theme").directive("animatedOnChange",e)}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t){t.bind("keydown",function(e){var t=e.target;$(t).height(0);var a=$(t)[0].scrollHeight;a=a<16?16:a,$(t).height(a)}),setTimeout(function(){var e=t;$(e).height(0);var a=$(e)[0].scrollHeight;a=a<16?16:a,$(e).height(a)},0)}}}angular.module("Qualigy.theme").directive("autoExpand",e)}(),function(){"use strict";function e(e,t){return{link:function(a,i,s){var r=t(s.autoFocus);a.$watch(r,function(t){t===!0&&e(function(){i[0].focus(),i[0].select()})}),i.bind("blur",function(){a.$apply(r.assign(a,!1))})}}}e.$inject=["$timeout","$parse"],angular.module("Qualigy.theme").directive("autoFocus",e)}(),function(){"use strict";function e(e,t){function a(e,t,a){if(angular.isArray(e))for(var i=e.length;i--;)if(a(e[i],t))return!0;return!1}function i(e,t,i){return e=angular.isArray(e)?e:[],a(e,t,i)||e.push(t),e}function s(e,t,a){if(angular.isArray(e))for(var i=e.length;i--;)if(a(e[i],t)){e.splice(i,1);break}return e}function r(r,o,n){function l(e,t){r[n.ngModel]=a(e,m,h)}var c=n.checklistModel;n.$set("checklistModel",null),t(o)(r),n.$set("checklistModel",c);var d=e(c),p=d.assign,u=e(n.checklistChange),m=n.checklistValue?e(n.checklistValue)(r.$parent):n.value,h=angular.equals;if(n.hasOwnProperty("checklistComparator"))if("."==n.checklistComparator[0]){var g=n.checklistComparator.substring(1);h=function(e,t){return e[g]===t[g]}}else h=e(n.checklistComparator)(r.$parent);r.$watch(n.ngModel,function(e,t){if(e!==t){var a=d(r.$parent);angular.isFunction(p)&&(e===!0?p(r.$parent,i(a,m,h)):p(r.$parent,s(a,m,h))),u&&u(r)}}),angular.isFunction(r.$parent.$watchCollection)?r.$parent.$watchCollection(c,l):r.$parent.$watch(c,l,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,t){if(("INPUT"!==e[0].tagName||"checkbox"!==t.type)&&"MD-CHECKBOX"!==e[0].tagName&&!t.btnCheckbox)throw'checklist-model should be applied to `input[type="checkbox"]` or `md-checkbox`.';if(!t.checklistValue&&!t.value)throw"You should provide `value` or `checklist-value`.";return t.ngModel||t.$set("ngModel","checked"),r}}}e.$inject=["$parse","$compile"],angular.module("Qualigy.theme").directive("checklistModel",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{confirmOnExit:"&",confirmMessageWindow:"@",confirmMessageRoute:"@",confirmMessage:"@"},link:function(e,t,a){window.onbeforeunload=function(){if(e.confirmOnExit())return e.confirmMessageWindow||e.confirmMessage};var i=e.$on("$locationChangeStart",function(t,a,i){e.confirmOnExit()&&(confirm(e.confirmMessageRoute||e.confirmMessage)||t.preventDefault())}),s=e.$on("$stateChangeStart",function(t,a,i){e.confirmOnExit()&&(confirm(e.confirmMessageRoute||e.confirmMessage)||t.preventDefault())});e.$on("$destroy",function(){window.onbeforeunload=null,i(),s()})}}}angular.module("Qualigy.theme").directive("confirmOnExit",e)}(),function(){"use strict";function e(e){return{restrict:"EA",scope:{geometry:"=currentPositionBtn",geometryType:"@"},controller:["$scope","geoService",function(e,t){e.addPoint=function(){var a=t.currentLonLat(),i=new OpenLayers.Geometry.Point(a.lon,a.lat);if(e.geometry){var s=new OpenLayers.Geometry.fromWKT(e.geometry);if(s instanceof OpenLayers.Geometry.Collection){for(var r=s.getVertices(),o=0,n=-1,l=0,c=r.length;l<c;l++){var d=i.distanceTo(r[l]);(d<n||n==-1)&&(n=d,o=l)}s instanceof OpenLayers.Geometry.Polygon?s.components[0].addPoint(i,o):s instanceof OpenLayers.Geometry.LineString&&s.addPoint(i,o),e.geometry=s.toString()}else if("Polygon"==e.geometryType||"MultiLineString"==e.geometryType){var r=[s,i],p=new OpenLayers.Geometry.LinearRing(r),u=new OpenLayers.Geometry[e.geometryType]([p]);e.geometry=u.toString()}else if("LineString"==e.geometryType){var r=[s,i],u=new OpenLayers.Geometry[e.geometryType]([r]);e.geometry=u.toString()}else e.geometry=i.toString()}else e.geometry=i.toString()}}],link:function(e,t,a){t.bind("click",e.addPoint)}}}e.$inject=["$rootScope"],angular.module("Qualigy.theme").directive("currentPositionBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-02-23
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-02-23
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";angular.module("Qualigy.theme").directive("httpSrc",["$http",function(e){return{scope:{httpSrc:"@"},link:function(t,a,i){function s(){t.objectURL&&URL.revokeObjectURL(t.objectURL)}t.$watch("objectURL",function(e){a.attr("src",e)}),t.$on("$destroy",function(){s()}),i.$observe("httpSrc",function(a){s(),a&&0===a.indexOf("data:")?t.objectURL=a:a&&e.get(a,{responseType:"arraybuffer",cache:!0,headers:{accept:"image/webp,image/*,*/*;q=0.8"}}).then(function(e){var a=new FileReader,i=new Blob([e.data],{type:e.headers("Content-Type")});a.onloadend=function(){t.objectURL=a.result},a.readAsDataURL(i)})})}}}])}(),function(){"use strict";function e(){return{restrict:"AE",templateUrl:function(e,t){return t.includeWithScope}}}angular.module("Qualigy.theme").directive("includeWithScope",e)}(),function(){"use strict";function e(e){return{restrict:"EA",template:"<div></div>",replace:!0,scope:{min:"=",max:"=",type:"@",prefix:"@",maxPostfix:"@",prettify:"=",prettifySeparator:"@",grid:"=",gridMargin:"@",postfix:"@",step:"@",hideMinMax:"@",hideFromTo:"@",from:"=",to:"=",disable:"=",onChange:"=",onFinish:"=",values:"=",timeout:"@"},link:function(t,a){a.ionRangeSlider({min:t.min,max:t.max,type:t.type,prefix:t.prefix,maxPostfix:t.maxPostfix,prettify_enabled:t.prettify,prettify_separator:t.prettifySeparator,grid:t.grid,gridMargin:t.gridMargin,postfix:t.postfix,step:t.step,hideMinMax:t.hideMinMax,hideFromTo:t.hideFromTo,from:t.from,to:t.to,disable:t.disable,onChange:t.onChange,onFinish:t.onFinish,values:t.values}),t.$watch("min",function(t){e(function(){a.data("ionRangeSlider").update({min:t})})},!0),t.$watch("max",function(t){e(function(){a.data("ionRangeSlider").update({max:t})})}),t.$watch("from",function(t){e(function(){a.data("ionRangeSlider").update({from:t})})}),t.$watch("to",function(t){console.log("to range changed ",t),e(function(){a.data("ionRangeSlider").update({to:t})})}),t.$watch("disable",function(t){e(function(){a.data("ionRangeSlider").update({disable:t})})})}}}e.$inject=["$timeout"],angular.module("Qualigy.theme").directive("ionSlider",e)}(),function(){"use strict";function e(){return{restrict:"A",require:"?form",link:function(e,t,a,i){if(i){var s={};angular.copy(i,s);var r=t.parent().controller("form");r.$removeControl(i);var o={$setValidity:function(e,t,a){s.$setValidity(e,t,a),r.$setValidity(e,!0,i)},$setDirty:function(){t.removeClass("ng-pristine").addClass("ng-dirty"),i.$dirty=!0,i.$pristine=!1}};angular.extend(i,o)}}}}angular.module("Qualigy.theme").directive("isolateForm",e)}(),function(){"use strict";function e(){return{require:"ngModel",link:function(e,t,a,i){function s(e,t){var a=t?["N","S"]:["E","W"];a=e>0?a[0]:a[1];var i="",s=0,r=0;return e=Math.abs(e),s=Math.floor(e),e=60*(e-Math.floor(e)),r=Math.floor(1e3*e)/1e3,i+=s+" "+r+"' "+a}function r(e){var t=e.substr(e.length-1,1);t="N"==t||"E"==t?1:-1,e=e.substr(0,e.length-1);for(var a,i,s=0,r=".0123456789",o="",n=1;n<=2;n++){i=1,a=!1;for(var l=0;l<e.length;l++)if(r.indexOf(e.charAt(l))!=-1){a=!0;break}if(!a)return s;for(e=e.substring(l,e.length),l=0;l<e.length;l++)if(r.indexOf(e.charAt(l))==-1){switch(e.charAt(l)){case"'":i=60;break;case'"':i=3600}break}o=e.substring(0,l),e=e.substring(l,e.length),1==i&&(2==n&&(i=60),3==n&&(i=3600)),""==o?s=0:s+=parseFloat(o)/i}return s*t}var o=a.lonlatDms;i.$formatters.unshift(function(e){if(e){var t=s(e,"lat"==o);return t}return null}),i.$parsers.push(function(e){return e?r(e,"lat"==o):null})}}}angular.module("Qualigy.theme").directive("lonlatDms",e)}(),function(){"use strict";function e(e){return{restrict:"AC",link:function(t,a,i){t.$watch(function(){return a[0].children.length},function(t){e(function(){a.masonry("reloadItems"),a.masonry()},200)}),a.masonry({itemSelector:".item",gutter:".gutter-sizer",percentPosition:!0}),t.masonry=a.data("masonry")}}}e.$inject=["$timeout"],angular.module("Qualigy.theme").directive("masonry",e)}(),function(){"use strict";function e(){return{link:function(e,t){t.bind("change",function(t){e.file=(t.srcElement||t.target).files[0],e.getFile()})}}}angular.module("Qualigy.theme").directive("ngFileSelect",e)}(),/**
 * @Author: pdorgambide
 * @Date:   2018-04-11
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-07-10
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a){return{multiElement:!0,transclude:"element",priority:650,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,s,r,o,n){function l(e){var t=e[0],a=e[e.length-1],i=[t];do{if(t=t.nextSibling,!t)break;i.push(t)}while(t!==a);return angular.element(i)}var c,d,p,u,m,h;u=r.ngPermissionType,m=r.ngIfRole.split(","),h=r.ngIfNotRole?r.ngIfNotRole.split(","):[],i.$watch(function(){return e.getPermissions()},function(){e.getPermissionValidation(u)(m)&&!e.hasAnyPermission(h)?d||n(function(e,i){d=i,e[e.length++]=t.$$createComment("end ngIfRole",r.ngIfRole),c={clone:e},a.enter(e,s.parent(),s)}):(p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),c&&(p=l(c.clone),a.leave(p).done(function(e){e!==!1&&(p=null)}),c=null))},!0)}}}e.$inject=["$security","$compile","$animate"],angular.module("Qualigy.theme").directive("ngIfRole",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:!0,template:'<a href="http://www.qualigy.com" style="font-size:0.7em; font:Calibri; color:#2c518c"> Powered by <span style="font-size:1.4em; font-weight:bold;  font-style: italic;"><i style="font-size:1.4em; color:#ff860e;">Q</i><span style="font-size:1em; margin: 0px 0px 0px -4px">ualigy Solutions</span> {{currentYear}}</script></span></a>',link:function(e,t){e.currentYear=(new Date).getFullYear()}}}angular.module("Qualigy.theme").directive("poweredByQualigy",e)}(),function(){"use strict";function e(){return{require:"stTable",restrict:"A",link:function(e,t,a,i){e.$on("refreshTable",function(){i.pipe(i.tableState())})}}}angular.module("Qualigy.theme").directive("refreshTable",e)}(),function(){"use strict";function e(){return{scope:{scrollPosition:"=",maxHeight:"="},link:function(e){$(window).on("scroll",function(){var t=$(window).scrollTop()>e.maxHeight;t!==e.prevScrollTop&&e.$apply(function(){e.scrollPosition=t}),e.prevScrollTop=t})}}}angular.module("Qualigy.theme").directive("scrollPosition",e)}(),function(){"use strict";function e(){return{scope:{trackWidth:"=",minWidth:"="},link:function(e,t){e.trackWidth=$(t).width()<e.minWidth,e.prevTrackWidth=e.trackWidth,$(window).resize(function(){var a=$(t).width()<e.minWidth;a!==e.prevTrackWidth&&e.$apply(function(){e.trackWidth=a}),e.prevTrackWidth=a})}}}angular.module("Qualigy.theme").directive("trackWidth",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(a,i){var s=1e3;t.$pageFinishedLoading&&(s=100),e(function(){i.removeClass("full-invisible"),i.addClass("animated fadeIn")},s)}}}e.$inject=["$timeout","$rootScope"],angular.module("Qualigy.theme").directive("zoomIn",e)}(),function(){"use strict";function e(e,t,a,i){function s(){e.close({searchTerms:n.searchTerms,size:n.size})}function r(){e.dismiss("cancel")}function o(e,t,a){return i.doSearch(e,t).then(function(t){return t.data._embedded[e]})}var n=this;n.searchTerms=t,n.size=a,n.searchResource=o,n.ok=s,n.cancel=r}e.$inject=["$uibModalInstance","searchTerms","size","searchService"],angular.module("Qualigy.theme").controller("AdvancedSearchCtrl",e)}(),function(){"use strict";function e(e,t,a,i){function s(){t.createForm.$valid&&e.post(t.model).then(function(e){a&&a.close(e)},function(e){a&&a.dismiss("cancel"),i.error(e.message||e.data.message)})}function r(){a&&a.dismiss("cancel")}t.create=s,t.cancel=r}e.$inject=["Resource","vm","$uibModalInstance","toastr"],angular.module("Qualigy.theme").controller("BaseCreateCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(){o&&(m=e.$bus.channel(o))}function l(){m.publish("item.cancel",null),r.detailForm.$cancel()}function c(){var e=s.showConfirmationDeleteMessage();e.result.then(function(e){r.model.remove().then(function(e){toastr.success(i.instant("app."+o.substring(0,o.length-1)+".deleted",e)),m.publish("item.removed",e),r.close()})})}function d(){if(r.detailForm.$valid)r.model.patch().then(function(e){r.model=e,toastr.success(i.instant("app."+o.substring(0,o.length-1)+".updated",e)),m.publish("item.changed",e)});else{if(console.log(r.detailForm.$error),r.detailForm.$error.required){var e=t("joinBy")(r.detailForm.$error.required.map(function(e){return e.$name}),"-");toastr.error("Debe espeficar datos para os campos requeridos: "+e,"Â¡Non se puido completar Ã¡ operaciÃ³n!")}if(r.detailForm.$error.pattern){var a=t("joinBy")(r.detailForm.$error.pattern.map(function(e){return e.$name}),"-");toastr.error("Introduza valores segundo o formato no campos: "+a,"Â¡AtoparonsÃ© errores de formato!")}}}function p(){m.publish("item.edit",r.model),r.detailForm.$show()}function u(){a.history.back()}var m;r.remove=c,r.edit=p,r.cancel=l,r.save=d,r.close=u,n()}e.$inject=["$scope","$filter","$window","$translate","modalService","vm","topic"],angular.module("Qualigy.theme").controller("BaseEditableDetailCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-01-16
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-25
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){L.AwesomeMarkers.Icon.prototype.options.prefix="ion",s.lineColor="#ff0000",s.center={lat:42.5314586689492,lng:-8.88349365234375,zoom:12},s.defaults={minZoom:10,zoomControl:!1,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},a.getMap().then(function(e){s.map=e,c(),m(),u(s.dateTime),s.layerControl=L.control.layers(s.baseLayers,s.overlayLayers).addTo(s.map)}),b()}function c(){var e=L.latLng(42.67647986813099,-9.02874755520299),a=L.latLng(42.395167962515366,-8.709594283718616);L.latLngBounds(e,a);s.map.eachLayer(function(e){e instanceof L.TileLayer&&(s.baseLayers[t("translate")("PAGE_MAP.DEFAULT")]=e)}),s.baseLayers[t("translate")("PAGE_MAP.SATELLITE")]=L.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{subdomains:["mt0","mt1","mt2","mt3"],attribution:'&copy; <a href="https://www.google.com/intl/es_es/help/terms_maps.html">Google Maps</a>',continuousWorld:!0})}function d(){angular.forEach(s.overlayLayers,function(e,t){s.layerControl.removeLayer(e),s.map.removeLayer(e)}),s.overlayLayers={}}function p(e){}function u(e){s.map&&n&&(e=e||s.dateTime,d(),p(e).then(function(e){e&&(s.overlayLayers=e,angular.forEach(s.overlayLayers,function(e,t){e.addTo(s.map)})),s.layerControl?angular.forEach(s.overlayLayers,function(e,t){s.layerControl.addOverlay(e,t)}):s.layerControl=L.control.layers(s.baseLayers,s.overlayLayers).addTo(s.map)}))}function m(){if(s.model){w=s.model.geoJSON?JSON.parse(s.model.geoJSON):[],s.overlayLayers[s.model.name]=new L.FeatureGroup;var e=w.map(function(e){return e.geoJSON.properties.id=e.id,e.geoJSON.properties.icon||(e.geoJSON.properties.icon="fa fa-info",e.geoJSON.properties.markerColor="blue"),e});e.forEach(function(e){L.geoJson(e.geoJSON,{pointToLayer:function(e,t){return new L.marker(t,{icon:L.AwesomeMarkers.icon({icon:e.properties.icon.substring(6),prefix:"fa",markerColor:e.properties.markerColor})})},style:function(e){return"Point"==e.geometry.type?{color:e.properties.markerColor}:"LineString"==e.geometry.type?{weight:2,opacity:1,color:e.properties.lineColor||"red",dashArray:"3"}:void 0},onEachFeature:function(e,t){t._leaflet_id=e.properties.id,s.overlayLayers[e.properties.layerName]||(s.overlayLayers[e.properties.layerName]=new L.FeatureGroup),s.overlayLayers[e.properties.layerName].addLayer(t),"Point"==e.geometry.type&&t.on("click",g)}})}),angular.forEach(s.overlayLayers,function(e,t){e.addTo(s.map)}),h(s.model),f()}}function h(a){if(o){var i={size:1e4},r=new L.FeatureGroup;return a.getMembers(i).then(function(i){function o(e){switch(e){case"individual":return"red";case"couple":return"purple";case"group":return"orange";case"largegroup":return"green";default:return"cadetblue"}}e.$bus.channel("journeyMembers").publish("item.refresh",i);var n=i.map(function(e){if(e.geoJSON){var t=JSON.parse(e.geoJSON);return t.geoJSON.properties.id=t.id,t.geoJSON.properties.phone=e.phone,t.geoJSON.properties.journeyMember=e.id,t.geoJSON.properties.memberCategory=e.category,t.geoJSON.properties.warning=e.warning,t.geoJSON.properties.status=e.journeyMemberStatus,t.geoJSON.properties.accuracy=300,t}return e});n.forEach(function(e){e.geoJSON&&e.geoJSON.properties.accuracy<1e4&&"FINISHED"!=e.geoJSON.properties.status&&(L.geoJson(e.geoJSON,{pointToLayer:function(e,t){return new L.Circle(t,e.properties.accuracy,{color:o(e.properties.memberCategory),fillOpacity:.2})},style:function(e){return{color:o(e.properties.memberCategory)}},onEachFeature:function(e,t){t._leaflet_id=e.properties.id+"circle",r.addLayer(t)}}),L.geoJson(e.geoJSON,{pointToLayer:function(e,t){return new L.marker(t,{icon:new L.AwesomeMarkers.icon({icon:"user",prefix:"fa",markerColor:o(e.properties.memberCategory)})})},style:function(e){return{color:o(e.properties.memberCategory)}},onEachFeature:function(e,a){a._leaflet_id=e.properties.id+"marker",r.addLayer(a);var i="<h1>"+e.properties.phone+"</h1><dl><dt>Ãltima actualizaciÃ³n:</dt><dd>"+moment(e.properties.timestamp).fromNow()+"</dd><dt>Velocidade Media</dt><dd>"+e.properties.speed+"</dd></dl>";e.properties.warning&&(i=i.concat('<div class="alert alert-danger text-center">'+t("translate")("entities.journeyMember.warning."+e.properties.warning)+"</i>"),a._icon&&a.bounce()),a.bindPopup(i),a.bindPopup(i,{closeButton:!1,offset:L.point(0,-20)}),a.on("mouseover",function(){a.openPopup()}),a.on("mouseout",function(){a.closePopup()}),a.on("add",function(){e.properties.warning&&a.bounce()})}}))}),O[a.name]&&O[a.name].clearLayers(),O[a.name]=r,O[a.name].addTo(s.map)}),r}}function g(e){if(r&&!s.map.deleting){var t=this,a=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/components/map-marker-detail/map-marker-detail.html",controller:"MapMarkerDetailCtrl",controllerAs:"vm",resolve:{feature:function(){return t.toGeoJSON()}}});a.result.then(function(e){t.setIcon(L.AwesomeMarkers.icon({icon:e.properties.icon.substring(6),prefix:"fa",markerColor:e.properties.markerColor})),t.feature=e;for(var a=0;a<w.length;a++)w[a].id==t._leaflet_id&&(w[a].geoJSON=e);y()})}}function v(){var e=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/components/color-picker-modal/color-picker-modal.html",controller:"ColorPickerModalCtrl",controllerAs:"vm",size:"sm",resolve:{selectedColor:function(){return s.lineColor}}});e.result.then(function(e){s.lineColor=e,s.drawControl.setDrawingOptions({polyline:{shapeOptions:{color:s.lineColor}}})})}function f(){if(r){s.map.on("draw:drawstart",function(e){"polyline"==e.layerType&&v()}),s.map.on("draw:created",function(e){var t=e.layerType,a=e.layer,i=a.feature=a.feature||{};i.type=i.type||"Feature",i.properties=i.properties||{},i.properties.layerName=s.model.name,"polyline"==t&&(i.properties.lineColor=s.lineColor),"polygon"==t&&(s.map.eachLayer(function(e){for(var t=0;t<w.length;t++)w[t].id==e._leaflet_id&&w[t].geoJSON.properties.boundLimits&&(w.splice(t,1),s.map.removeLayer(e))}),i.properties.boundLimits=!0),s.overlayLayers[s.model.name].addLayer(a),w.push({id:a._leaflet_id,geoJSON:a.toGeoJSON()}),y(),"marker"==t&&a.on("click",g).fireEvent("click")}),s.map.on("draw:edited",function(e){var t=e.layers;t.eachLayer(function(e){for(var t=0;t<w.length;t++)w[t].id==e._leaflet_id&&(w[t].geoJSON=e.toGeoJSON())}),y()}),s.map.on("draw:deletestart",function(e){s.map.deleting=!0}),s.map.on("draw:deletestop",function(e){s.map.deleting=!1}),s.map.on("draw:deleted",function(e){var t=e.layers;t.eachLayer(function(e){for(var t=0;t<w.length;t++)w[t].id==e._leaflet_id&&w.splice(t,1)}),y()});var e={position:"topleft",draw:{polyline:{shapeOptions:{color:s.lineColor,weight:10}},polygon:{showArea:!0,allowIntersection:!1,drawError:{message:"<strong>Error:</strong> Los lÃ­mites no se deben cruzar."},shapeOptions:{color:"#3350f1"}},circle:!1,rectangle:!1,circlemarker:!1,marker:{icon:L.AwesomeMarkers.icon({icon:"info",prefix:"fa",markerColor:"blue"})}},edit:{featureGroup:s.overlayLayers[s.model.name]}};s.drawControl=new L.Control.Draw(e),s.map.addControl(s.drawControl)}}function y(){r&&(s.model.geoJSON=JSON.stringify(w),s.model.patch())}function b(){L.drawLocal={format:{numeric:{delimiters:{thousands:".",decimal:","}}},draw:{toolbar:{actions:{title:"Cancelar ediciÃ³n",text:"Cancelar"},finish:{title:"Terminar ediciÃ³n",text:"Terminar"},undo:{title:"Borrar Ãºltimo elemento",text:"Borrar Ãºltimo elemento "},buttons:{polyline:"Trazar ruta",polygon:"Establecer lÃ­mites",rectangle:"Dibujar rectÃ¡ngulo",circle:"Dibujar cÃ­rculo",circlemarker:"Dibujar marcador circular",marker:"AÃ±adir marcador"}},handlers:{circle:{tooltip:{start:"Haz click y arrastra para dibujar un cÃ­rculo."},radius:"Radio"},circlemarker:{tooltip:{start:"Haz click para emplazar un marcador circular."}},marker:{tooltip:{start:"Haz click para emplazar un marcador."}},polygon:{error:"<strong>Error:</strong> Los lÃ­mites no se deben cruzar.",tooltip:{start:"Haz click para empezar a dibujar los lÃ­mites.",cont:"Haz click para continuar marcando los lÃ­mites.",end:"Haz click en el primer punto para cerrar los lÃ­mites."}},polyline:{tooltip:{start:"Haz click para empezar a marcar al ruta.",cont:"Haz click para continuar marcando la ruta.",end:"Haz click en el Ãºltimo punto para terminar la ruta."}},rectangle:{tooltip:{start:"Haz click y arrastra para dibujar un rectÃ¡ngulo."}},simpleshape:{tooltip:{end:"Suelta el ratÃ³n para terminar de dibujar."}}}},edit:{toolbar:{actions:{save:{title:"Guardar los cambios",text:"Guardar"},cancel:{title:"Cancelar ediciÃ³n. Descartar cambios",text:"Cancelar"},clearAll:{title:"Borrar todos los elementos",text:"Borra todo"}},buttons:{edit:"Editar elementos",editDisabled:"No hay nada que editar",remove:"Eliminar elementos",removeDisabled:"No gat nada que eliminar"}},handlers:{edit:{tooltip:{text:"Haz click o arrastra los elementos para editar sus caracterÃ­sticas.",subtext:"Haz click en cancelar para deshacer los cambios."}},remove:{tooltip:{text:"Haz click en un elemento para eliminarlo."}}}}}}var w,O=[];s.baseLayers=[],s.overlayLayers={},s.loadJourneyMembers=h,s.refreshDailyMap=u,l()}e.$inject=["$scope","$filter","leafletData","$uibModal","vm","editable","loadMembers","dailyMap"],angular.module("Qualigy.theme").controller("BaseMapCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(){f=v,m=s.copy(r.model),h=e.$bus.channel(o)}function l(){return f==v}function c(){var e=modalService.showConfirmationDeleteMessage();e.result.then(function(e){r.model.remove().then(function(e){modalService.showInformationMessage("Elemento eliminado","O elemento foi eliminado do sistema","ion-trash-b"),h.publish("item.removed",e),r.cancel()})})}function d(){f===g&&(f=v,r.model=m)}function p(){f=g,m=s.copy(r.model)}function u(){if(r.detailForm.$valid)r.model.patch().then(function(e){r.model=e,m=s.copy(r.model),f=v,h.publish("item.changed",e)});else{if(r.detailForm.$error.required){var e=a("joinBy")(r.detailForm.$error.required.map(function(e){return e.$name}),"-");toastr.error("Debe espeficar datos para os campos requeridos: "+e,"Â¡Non se puido completar Ã¡ operaciÃ³n!")}if(r.detailForm.$error.pattern){var t=a("joinBy")(r.detailForm.$error.pattern.map(function(e){return e.$name}),"-");toastr.error("Introduza valores segundo o formato no campos: "+t,"Â¡AtoparonsÃ© errores de formato!")}}}var m,h,g="edit",v="show",o=o,f=v;r.remove=c,r.edit=p,r.save=u,r.cancel=d,r.showMode=l,n()}e.$inject=["$scope","$state","$filter","p","Restangular","vm","resource"],angular.module("Qualigy.theme").controller("DetailCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){a.items||(a.items=[]),a.sort={field:"",reverse:!1}}function c(t,i,s){t.transient?a.parent[o](t).then(function(a){angular.extend(t,a),n&&e.$bus.channel(n).publish("item.created",t)},function(e){toastr.error(e,"Non se puido gardar o rexistro"),d(i,s)}):t.save().then(function(a){delete t.transient,n&&e.$bus.channel(n).publish("item.changed",t)},function(e){toastr.error(e,"Non se puido gardar o rexistro"),d(i,s)})}function d(e,t){var i=a.items[t];i.transient&&a.items.splice(t,1),e.$cancel()}function p(i){if(i.remove){var s=t.showConfirmationDeleteMessage();s.result.then(function(t){i.remove().then(function(){n&&e.$bus.channel(n).publish("item.removed",i);var t=a.items.indexOf(i);t>-1&&a.items.splice(t,1)})})}else{var r=a.items.indexOf(i);r>-1&&a.items.splice(r,1)}}function u(){a.transientRow=i.one().newInstance(),a.items.splice(a.size,0,a.transientRow),a.size+=1}function m(e){return!!e||"Completa este campo"}function h(e,t){e!=a.sort.field?(a.sort.field=e,a.sort.reverse=t||!1):a.sort.reverse=!a.sort.reverse}a.parent=s,a.items=r,a.size=5,a.saveRow=c,a.removeRow=p,a.cancelEdit=d,a.toggleSort=h,a.insertRow=u,a.checkRequired=m,l()}e.$inject=["$scope","modalService","vm","Resource","parent","items","addMethod","channel"],angular.module("Qualigy.theme").controller("EditableRowCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(){a.items||(a.items=[]),a.sort={field:"",reverse:!1}}function l(e){e.transient?a.parent[o](e).then(function(t){angular.extend(e,t)}):e.save().then(function(t){delete e.transient})}function c(e,t){var i=a.items[t];i.transient&&a.items.splice(t,1),e.$cancel()}function d(e){if(e.remove){var i=t.showConfirmationDeleteMessage();i.result.then(function(t){e.remove().then(function(){var t=a.items.indexOf(e);t>-1&&a.items.splice(t,1)})})}else{var s=a.items.indexOf(e);s>-1&&a.items.splice(s,1)}}function p(){a.transientRow=i.one().newInstance(),a.items.push(a.transientRow)}function u(e,t){e!=a.sort.field?(a.sort.field=e,a.sort.reverse=t||!1):a.sort.reverse=!a.sort.reverse}a.parent=s,a.items=r,a.saveRow=l,a.removeRow=d,a.cancelEdit=c,a.toggleSort=u,a.insertRow=p,n()}e.$inject=["$scope","modalService","vm","Resource","parent","items","addMethod"],angular.module("Qualigy.theme").controller("EditableTableCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d){function p(){a.origin=s.url(),a.page={size:d.size||20},a.noResults=!1,E(),0==!Object.keys(a.searchTerms).length&&a.doSearch()}function u(){a.searchTerms=a.defaultSearchTerms||{},a.noResults=!1,a.searchResults=a.sort=null,a.page={},w()}function m(){a.doSearch()}function h(e){for(var t in e)e[t]&&"object"==typeof e[t]&&0===Object.keys(e[t]).length&&delete e[t]}function g(e){var t={};return Object.keys(e).map(function(a){var i=e[a];if(i&&Object.keys(i).length)if(i.startDate)i.startDate instanceof Date?(t[a]=[],t[a].push(i.startDate),i.endDate instanceof Date?t[a].push(i.endDate):t[a].push(new Date)):i.startDate._isAMomentObject&&(t[a]=[],t[a].push(i.startDate.toDate()),i.endDate?t[a].push(i.endDate.toDate()):t[a].push(new Date));else if(i instanceof Date){var s=a;a.endsWith("Start")&&(s=a.substring(0,a.length-"Start".length),t[s]=[i,new Date]),a.endsWith("End")&&(s=a.substring(0,a.length-"End".length),t[s]=[t[s][0],i])}else t[a]=e[a].id||i;else t[a]=i}),t}function v(e,t,i,s,o){t=t||a.searchTerms,i=i||a.page,s=s||a.sort||d.sort,o=o||d.size;var n=g(t);i&&i.number&&(n.page=i.number-1),n.size=o,s&&s.prop?n.sort=s.prop+(s.dir?","+s.dir:""):s&&(n.sort=s);var l=r.getList;return h(n),l(n).then(function(t){e&&a.searchResults?a.searchResults=a.searchResults.concat(t):a.searchResults=t,a.page=t.$page,a.sort=s,a.page&&(a.page.number=a.page.number+1),w(),a.noResults=!(a.searchResults.length>0)})}function f(){a.page.number=a.page.number+1,this.doSearch(!0,a.searchTerms,a.page,a.sort)}function y(){a.page.number=1,this.doSearch(!1,a.searchTerms,a.page,a.sort,a.page.totalElements)}function b(){for(var e in a.searchTerms)if(null!=a.searchTerms[e]||void 0!=a.searchTerms[e]||Object.keys(a.searchTerms[e]).length)return!1;return!0}function L(){return!a.searchTermsEmpty()||a.searchResults&&a.searchResults.length}function w(){n.current.reloadOnSearch=!1;var e=angular.copy(a.searchTerms,{});for(var t in e)null===e[t]||void 0===e[t]||angular.equals({},e[t])?delete e[t]:e[t]=e[t].id||e[t];Object.keys(e).map(function(t){e[t].startDate?e[t]=[e[t].startDate.toISOString(),e[t].endDate.toISOString()]:e[t].toISOString&&(e[t]=e[t].toISOString())}),s.search(e),a.page.number>1&&s.search("page",a.page.number-1),a.sort&&a.sort.prop&&s.search("sort",a.sort.prop+(a.sort.dir?","+a.sort.dir:"")),a.origin=s.url(),c(function(){n.current.reloadOnSearch=void 0})}function O(){a.sort&&(a.sort.dir="asc"==a.sort.dir?"desc":"asc")}function x(e){a.sort&&a.sort.prop===e?this.toggleSortDir():(a.sort={},a.sort.prop=e,a.sort.dir="asc")}function S(e){e.sort.predicate&&(a.sort={prop:e.sort.predicate,dir:e.sort.reverse?"desc":"asc"}),e.pagination&&(a.page={number:e.pagination.start}),a.doSearch()}function C(e,t){a.sort.prop==e&&"asc"==a.sort.dir?(a.sortClass="st-sort-descent",a.sort={prop:e,dir:"desc"}):a.sort.prop==e&&"desc"==a.sort.dir?(a.sortClass="asc"==d.sort.dir?"st-sort-ascent":"st-sort-descent",a.sort=d.sort):(a.sortClass="st-sort-ascent",a.sort={prop:e,dir:"asc"})}function E(){if(angular.equals({},s.search()))a.searchTerms={};else if(a.searchTerms=angular.copy(s.search()),Object.keys(a.searchTerms).map(function(e){var t=new RegExp("Date|Time|fecha|hora","g");if(t.test(e)&&a.searchTerms[e].constructor===Array){var i=a.searchTerms[e][0],s=a.searchTerms[e][1];a.searchTerms[e]={startDate:moment(i),endDate:moment(s)}}}),a.searchTerms.page&&(a.page={number:parseInt(a.searchTerms.page)+1},delete a.searchTerms.page),a.searchTerms.sort){var e=a.searchTerms.sort.split(",");a.sort={prop:e[0],dir:e[1]},delete a.searchTerms.sort}}function k(e){var t=o.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:d.advancedSearch.templateUrl,controller:d.advancedSearch.ctrl,controllerAs:"vm",size:"lg",resolve:{searchTerms:function(){return angular.copy(a.searchTerms,{})},size:function(){return""+a.page.size}}});t.result.then(function(e){a.page=a.page||{},a.page.size=e.size,a.searchTerms=e.searchTerms,a.doSearch(!1,e.searchTerms)})}a.$stateParams=l,a.doSearch=v,a.viewMore=f,a.viewAll=y,a.toggleSort=x,a.toggleSortDir=O,a.sortBy=C,a.openAdvancedSearch=k,a.clearSearch=u,a.onPageChange=m,a.searchTermsEmpty=b,a.enableClearSearch=L,a.updateQueryParams=w,a.parseQueryParams=E,a.stSearch=S,p()}e.$inject=["$scope","$q","vm","$filter","$location","resource","$uibModal","$state","$stateParams","$timeout","config"],angular.module("Qualigy.theme").controller("SearchCtrl",e)}(),function(){"use strict";function e(){function e(e,t){var a=t?["N","S"]:["E","W"];a=e>0?a[0]:a[1];var i="",s=0,r=0;return e=Math.abs(e),s=Math.floor(e),e=60*(e-Math.floor(e)),r=Math.floor(1e3*e)/1e3,i+=s+" "+r+"' "+a}return function(t,a){if(!t)return null;if(t.y&&t.x)return e(t.y,!0)+" , "+e(t.x,!1);if("lat"==a||"lon"==a)return e(t,"lon"!=a);if("point"==a){var i=new OpenLayers.Geometry.fromWKT(t),a=new OpenLayers.LonLat(i.x,i.y);return"Lon: "+e(a.lon,!1)+"  Lat: "+e(a.lat,!0)}}}angular.module("Qualigy.theme").filter("lonlat",e)}(),function(){"use strict";function e(){return function(e,t){if(e)return e.filter(function(e,t,a){return a.indexOf(e)==t})}}angular.module("Qualigy.theme").filter("noDuplicates",e)}(),function(){"use strict";function e(){return function(e,t){return t=+t,e.slice(t)}}angular.module("Qualigy.theme").filter("startFrom",e)}(),function(){"use strict";function e(e){var t=e("date");return function(e,a){var i=moment(e,"YYYY-MM-ddTHH:mm:ss").toDate();return t(i.getTime(),a)}}e.$inject=["$filter"],angular.module("Qualigy.theme").filter("stringAsDate",e)}(),function(){"use strict";function e(e,t,a,i){function s(t,a,i){if(t.$valid)return e.all(a).post(vm.model)}function r(e,t){var a=(t||vm.resource,i.showConfirmationMessage("Confirme eliminar","Esta operaciÃ³n eliminarÃ¡ el elemento seleccionado y no podrÃ¡ deshacerse. <br/><strong>Â¿Desea continuar?</strong>","ion-trash-b ion-lg"));a.result.then(function(t){Restanglar.all(e).remove().then(function(e){i.showInformationMessage("Elemento eliminado","El elemento ha sido eliminado del sistema","ion-trash-b"),vm.cancel()})})}this.remove=r,this.create=s}e.$inject=["Restangular","$state","$location","modalService"],angular.module("Qualigy.theme").service("apiService",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e,a){a||angular.noop;return t.get("auth/activate",{params:{key:e}})}function o(e,a){a||angular.noop;return t.post("auth/account/change_password",e)}function n(e,a){a||angular.noop;return t.post("/auth/register",e)}function l(e,r){var o=r||angular.noop;return t.post("/auth/login",e).then(function(e){var t=e.data;return toastr.success("!Benvido de novo!"),i.debug("Login user: ",t.user),i.debug("User permissions: ",t.permissions),a.login(t.token,t.user,t.permissions),s.location.href="/",o()},function(e){return toastr.error(e.data.message,e.status),d(),o(e)})}function c(e){var s=e||angular.noop;return t.get("auth/token").then(function(e){var t=e.data,r=a.getUser(),o=a.getPermissions();return i.debug("Token refresh to user",r),a.login(t,r,o),s(e)},function(e){return s(e)})}function d(){return a.logout()}function p(e,a){var i=a||angular.noop;return t.post("/auth/account/reset_password/finish",e).then(function(){return i()},function(e){return i(e)})}function u(e,a){a||angular.noop;return t.post("/auth/account/reset_password/init",e)}function m(e,a){var i=a||angular.noop;return t.post("/auth/account",e).then(function(){return i(e)},function(e){return i(e)})}function h(){var e=$sessionStorage.previousState;return e}function g(){delete $sessionStorage.previousState}function v(e,t){var a={name:e,params:t};$sessionStorage.previousState=a}var f={activateAccount:r,changePassword:o,createAccount:n,getPreviousState:h,login:l,logout:d,refreshToken:c,resetPasswordFinish:p,resetPasswordInit:u,resetPreviousState:g,storePreviousState:v,updateAccount:m,hasAnyPermission:a.hasAnyPermission,getUser:function(){return a.getUser()},getPermissions:function(){return a.getPermissions()},isAuthenticated:function(){return a.isAuthenticated()}};return f}e.$inject=["$q","$http","$security","$log","$window"],angular.module("Qualigy.theme").service("AuthService",e)}(),function(){"use strict";function e(){this.isDescendant=function(e,t){for(var a=t.parentNode;null!=a;){if(a==e)return!0;a=a.parentNode}return!1},this.hexToRGB=function(e,t){var a=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return"rgba("+a+", "+i+", "+s+", "+t+")"}}angular.module("Qualigy.theme").service("baUtil",e)}(),function(){"use strict";function e(e,t,a){function i(e,t){return e.reduce(function(e,a){return a.bundle&&(e[a.name]=a.bundle[t]),e},{})}return function(a){var s=e.defer();return t.getList().then(function(e){var t=i(e,a.key);return s.resolve(t)},function(e){return s.reject(a.key)}),s.promise}}e.$inject=["$q","ConfigParams","$translatePartialLoader"],angular.module("Qualigy.theme").factory("configParamsLoader",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){var t={topic:e};return i.getList(t).then(function(e){return e})}function o(e,a){if(e&&a){var s={topic:e,value:a};return i.getList(s).then(function(e){return e[0].bundle[t.use()]})}}var n={getConfigParamsByTopic:r,translateConfig:o};return n}e.$inject=["$http","$translate","$timeout","ConfigParams","$translatePartialLoader"],angular.module("Qualigy.theme").service("configParamsService",e)}(),function(){"use strict";function e(e){var t=function(e,t,a){return function(){a.$apply(function(){t.resolve(e.result)})}},a=function(e,t,a){return function(){a.$apply(function(){t.reject(e.result)})}},i=function(e,t){return function(e){t.$broadcast("fileProgress",{total:e.total,loaded:e.loaded})}},s=function(e,s){var r=new FileReader;return r.onload=t(r,e,s),r.onerror=a(r,e,s),r.onprogress=i(r,s),r},r=function(t,a){var i=e.defer(),r=s(i,a);return r.readAsDataURL(t),i.promise};return{readAsDataUrl:r}}e.$inject=["$q"],angular.module("Qualigy.theme").service("fileReader",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(e,t){var a=e;if(Array.isArray(e)&&(a=e[0]),a){var i=a.size/1024/1204;i>=p?s.showErrorMessage("Fichero superior a "+p+" MB","El tamaÃ±o del fichero ("+Math.round(100*i)/100+" MB) excede el lÃ­mite de <strong> "+p+" MB </strong> permitido"):t.file=a}}function n(t,a,i){var s=new FormData;return s.append("file",t),s.append("fileName",t.name),e.post(r+"/"+i+"/"+a.id+"/upload",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}function l(e,t){n(e.file,e,t).success(function(t){e.fileName=t.fileName}).error(function(e){toastr.error(a.instant("global.messages.file.upload.error"))})}function c(t,i){var o=s.showConfirmationMessage(a.instant("global.messages.file.delete.confirm.title"),a.instant("global.messages.file.delete.confirm.message"),"ion-trash-b ion-lg");o.result.then(function(s){return e.delete(r+"/"+i+"/"+t.id+"/delete").success(function(e){t.fileName=null,t.filePath=null}).error(function(e){toastr.error(a.instant("global.messages.file.delete.error"))})})}function d(a,i,s){a.preventDefault(),a.stopImmediatePropagation(),e({method:"GET",url:r+"/"+s+"/"+i.id+"/download",responseType:"arraybuffer"}).then(function(e){var a=i.fileName;t.saveFile(e.data,a)})}var p=10,u={selectFile:o,upload:l,download:d,deleteFile:c};return u}e.$inject=["$http","$navigator","$translate","$timeout","modalService","API_ENDPOINT"],angular.module("Qualigy.theme").service("fileService",e)}(),function(){"use strict";function e(e,t){function a(t){switch(t.code){case t.PERMISSION_DENIED:e.debug("User denied the request for Geolocation.");break;case t.POSITION_UNAVAILABLE:e.debug("Location information is unavailable.");break;case t.TIMEOUT:e.debug("The request to get user location timed out.");break;case t.UNKNOWN_ERROR:e.debug("An unknown error occurred.")}}function i(e){t.$apply(function(){o=new OpenLayers.LonLat(e.coords.longitude,e.coords.latitude)})}function s(e){a(s)}function r(){navigator.geolocation.getCurrentPosition(i,s,l),d()}var o,n,l={enableHighAccuracy:!0,maximumAge:3e3,timeout:1e4},c=function(){navigator.geolocation.clearWatch(watchPositionId)},d=function(){n=navigator.geolocation.watchPosition(i,s,l)},p=function(){return"geolocation"in navigator||(e.debug("Geolocation is not available "),!1)};return r(),{geolocationAvailable:p,currentPosition:function(e){if(!o)return null;var t=this.currentLonLat(e);return t.lon+","+t.lat},currentLonLat:function(e){return o?e?o.clone().transform("EPSG:4326",e):o:null},enableWatchPosition:d,disableWatchPosition:c}}e.$inject=["$log","$rootScope"],angular.module("Qualigy.theme").service("geoService",e)}(),function(){"use strict";function e(e,t){return{mapCapture:null}}e.$inject=["$log","$rootScope"],angular.module("Qualigy.theme").service("mapCaptureService",e)}(),function(){"use strict";function e(){function e(t){if(!e)return null;if(t){var a=e.clone();return a.transform("EPSG:4326",t)}return e}function t(){e=null}function a(t){if(t&&t.length>0)for(var a=null,i=0,s=t.length;i<s;i++){if(angular.isString(t[i])){var r=(new OpenLayers.Format.WKT).read(t[i]);a=r.geometry}else if(angular.isString(t[i].geometry)){var r=(new OpenLayers.Format.WKT).read(t[i].geometry);a=r.geometry}else a=t[i].geometry;a&&(null===e&&(e=new OpenLayers.Bounds),e.extend(a.getBounds()))}return e}return{maxExtent:e,addToExtent:a,clearExtent:t};var e}angular.module("Qualigy.theme").factory("mapExtentService",e)}(),function(){"use strict";function e(e,t,a,i){function s(t,a,i,s){var r=e.open({templateUrl:t,resolve:{title:function(){return a},message:function(){return i},icon:function(){return s}},controller:["$scope","$uibModalInstance","title","message","icon",function(e,t,a,i,s){e.title=a,e.message=i,e.icon=s,e.ok=function(){t.close(null)},e.cancel=function(){t.dismiss("cancel")}}]});return r}function r(e,t,a){return s("dialog/ConfirmationMessage.html",e,t,a||"fa fa-info-circlequestion-circle fa-lg")}function o(e,t,a){var s=e||i.instant("global.messages.confirmdelete.title"),o=t||i.instant("global.messages.confirmdelete.message"),n=a||"ion-trash-b ion-lg";return r(s,o,n)}function n(e,t,a){var s=e||i.instant("global.modal.wait.title"),r=t||i.instant("global.modal.wait.message"),o=a||"ion-clock ion-lg";return l(s,r,o)}function l(e,t,a){return s("dialog/InformationMessage.html",e,t,a||"fa fa-info-circle fa-lg")}function c(e,t,a){return s("dialog/ErrorMessage.html",e,t,a||"fa fa-exclamation-circle fa-lg")}function d(t,a,i,s,r){var o=e.open({templateUrl:"dialog/InputMessage.html",resolve:{title:function(){return t},placeholder:function(){return a},inputField:function(){return i},icon:function(){return s||"fa fa-pencil-square-o fa-lg"},required:function(){return r||!1}},controller:["$scope","$uibModalInstance","title","placeholder","inputField","icon","required",function(e,t,a,i,s,r,o){e.title=a,e.placeholder=i,e.inputField=s,e.icon=r,e.required=o,e.ok=function(){t.close(e.inputField)},e.cancel=function(){t.dismiss("cancel")}}]});return o}var p={showConfirmationMessage:r,showErrorMessage:c,showInformationMessage:l,showInputMessage:d,showMessage:s,showWaitMessage:n,showConfirmationDeleteMessage:o};return t.put("dialog/ConfirmationMessage.html","<div class='modal-header'><h3 class='modal-title'><i class='{{icon}}'></i> {{title}}</h3></div>\n<div class='modal-body' ng-bind-html='message | unsafe'></div>\n<div class='modal-footer'><button class='btn btn-primary' ng-click='ok()'>SI</button><button class='btn btn-warning' ng-click='cancel()'>NO</button></div>"),t.put("dialog/ErrorMessage.html","<div class='modal-header bg-danger'><h3 class='modal-title'><i class='{{icon}}'><!--RR--></i> {{title}}</h3></div>\n<div class='modal-body' ng-bind-html='message | unsafe'></div>\n<div class='modal-footer'><button class='btn btn-primary' ng-click='ok()'>Cerrar</button></div>"),t.put("dialog/InformationMessage.html","<div class='modal-header bg-info'><h3 class='modal-title'><i class='{{icon}}'></i> {{title}}</h3></div>\n<div class='modal-body' ng-bind-html='message | unsafe'></div>\n<div class='modal-footer'><button class='btn btn-primary' ng-click='ok()'>Cerrar</button></div>"),t.put("dialog/InputMessage.html","<div class='modal-header'><h3 class='modal-title'><i class='{{icon}}'></i> {{title}}</h3></div>\n<div class='modal-body'><div class='form-group'><form name='vm.modalForm'>\n<input type='text' ng-model='inputField' class='form-control' placeholder='{{placeholder}}' ng-required='required'>\n<input type='submit' style='display:none' type='submit' ng-click='ok()'/></form></div></div>\n<div class='modal-footer'><button class='btn btn-primary' ng-click='ok()' ng-disabled='vm.modalForm.$invalid'>Aceptar</button></div>"),p}e.$inject=["$uibModal","$templateCache","$sce","$translate"],angular.module("Qualigy.theme").factory("modalService",e)}(),/**
 * @Author: Pablo Villaverde Castro <systems>
 * @Date:   2018-02-22
 * @Email:  pvillaverde@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-09-11
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i){function s(a,s,r){var o=navigator.userAgent,n=o.match(/iPad/g),l=(o.match(/Safari/g),o.match(/iPhone/g)),c=o.match(/CriOS/g),d=(o.match(/Chrome/g),{filename:s,type:r}),p={"text/csv":".csv","application/pdf":".pdf","application/vnd.oasis.opendocument.text":".odt","application/vnd.oasis.opendocument.spreadsheet":".ods","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx"};p[r]&&(s+=s.endsWith(p[r])?"":p[r]);var u,m;if(e.navigator.msSaveBlob)u=new e.Blob([a],d),e.navigator.msSaveBlob(u,s);else if(c)u=new e.Blob([a],d),i.readAsDataURL(u).then(function(t){e.open(t)});else if(n||l)u=new Blob([a],d),m=e.URL.createObjectURL(u),e.location.href=m;else{u=new Blob([a],d),m=e.URL.createObjectURL(u);var h=document.createElement("a");h.href=m,h.target="_blank",h.download=s,document.body.appendChild(h),h.click(),t(function(){document.body.removeChild(h),e.URL.revokeObjectURL(m)},1e3)}}var r={isEdge:function(){return navigator.userAgent.match(/Edge/g)},isIE:function(){return navigator.userAgent.match(/Edge/g)},isOldIE:function(){return navigator.userAgent.match(/Edge/g)},isiPad:function(){return navigator.userAgent.match(/iPad/g)},isSafari:function(){return navigator.userAgent.match(/Safari/g)},isiPhone:function(){return navigator.userAgent.match(/iPhone/g)},isChromeiOS:function(){return navigator.userAgent.match(/CriOS/g)},saveFile:s};return r}e.$inject=["$window","$timeout","modalService","fileReader"],angular.module("Qualigy.theme").factory("$navigator",e)}(),function(){"use strict";function e(e){return{loadImg:function(t){var a=e.defer(),i=new Image;return i.src=t,i.onload=function(){a.resolve()},a.promise},loadAmCharts:function(){var t=e.defer();return AmCharts.ready(function(){t.resolve()}),t.promise}}}e.$inject=["$q"],angular.module("Qualigy.theme").service("preloader",e)}(),function(){"use strict";function e(e,t,a,i){function s(t,a,i,s){if(a){var o=angular.copy(a,{});return i&&(o.page=i.number-1,o.size=i.size),o.sort=s,r(a,i,s),e.get("api/"+t,{params:o}).then(function(e){return e})}}function r(e,s,r){t.current.reloadOnSearch=!1,a.search(e),s&&(a.search("page",s.number>1?s.number-1:null),a.search("size",s.size)),a.search("sort",r),i(function(){t.current.reloadOnSearch=void 0})}var o={doSearch:s};return o}e.$inject=["$http","$state","$location","$timeout"],angular.module("Qualigy.theme").service("searchService",e)}(),function(){"use strict";function e(e,t,a){function i(){var i=e.$on("$stateChangeStart",function(i,s,r,o){!angular.isDefined(s.permissions)&&!angular.isDefined(s.authenticated)||a.isAuthenticated()?angular.isDefined(s.permissions)&&!a.hasAnyPermission(s.permissions)?(toastr.error("Non tes permisos para acceder a esta informaciÃ³n","OperaciÃ³n non vÃ¡lida"),i.preventDefault()):e.$pageFinishedLoading=!0:(console.log("User not authenticated."),t.location.href="/public.html")});e.$on("$destroy",function(){angular.isDefined(i)&&null!==i&&i()})}return{initialize:i}}e.$inject=["$rootScope","$window","AuthService"],angular.module("Qualigy.theme").factory("stateHandler",e)}(),function(){"use strict";function e(e){return{start:function(t,a,i){function s(){return t(a,i)}var r=s();angular.element(e).bind("focus",function(){r&&t.cancel(r),r=s()}),angular.element(e).bind("blur",function(){r&&t.cancel(r)})}}}e.$inject=["$window"],angular.module("Qualigy.theme").service("stopableInterval",e)}(),function(){"use strict";function e(e,t,a){var i,s,r;i="Are you sure you don't want to save changes?",r={},s=null,this.fnAttachListener=function(o,n,l){if((!a.current.scope||o.$id===a.current.scope.$id)&&(r[n]={},r[n].oPristine=angular.copy(l),r[n].oCurrent=l,null==s))return s=e.$on("$locationChangeStart",function(e){return function(t){var a;for(n in r)if(a=r[n],e.fnHasChanges(n)===!0){if(confirm(i))break;return t.preventDefault()}return e.fnDetachListeners()}}(this)),t.onbeforeunload=function(e){return function(a){var s;for(n in r)if(s=r[n],e.fnHasChanges(n)===!0)return"undefined"==typeof a&&(a=t.event),null!=a&&(a.returnValue=i),i}}(this),o.$on("$destroy",function(e){return function(){return e.fnDetachListeners()}}(this))},this.fnDetachListener=function(e){if(angular.isString(e))return r.hasOwnProperty(e)?delete r[e]:void 0},this.fnDetachListeners=function(){return r={},null!=s&&s(),s=null,t.onbeforeunload=null},this.fnReAttachListener=function(e){return r[e].oPristine=angular.copy(r[e].oCurrent)},this.fnTrigger=function(){var e,t,a,s,r;for(e=1<=arguments.length?__slice.call(arguments,0):[],t=!1,s=0,r=e.length;s<r;s++)a=e[s],t=t||this.fnHasChanges(a);return t&&!confirm(i)},this.fnHasChanges=function(e){return!(!angular.isString(e)||!r.hasOwnProperty(e))&&!angular.equals(r[e].oPristine,r[e].oCurrent)}}e.$inject=["$rootScope","$window","$state"],angular.module("Qualigy.theme").service("unsavedChanges",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){t.activateAccount(e.key).then(function(){o.error=null,o.success="OK",i(function(){s.location.href="/public.html"},1e4)}).catch(function(){o.success=null,o.error="ERROR"})}var o=this;r()}e.$inject=["$stateParams","AuthService","LoginDlg","$timeout","$window"],angular.module("Qualigy.pages.account").controller("ActivationCtrl",e)}(),function(){"use strict";function e(e,t){function a(){}function i(){t.login({login:s.userlogin,password:s.password,rememberMe:s.rememberMe})}var s=this;s.login=i,a()}e.$inject=["$scope","AuthService"],angular.module("Qualigy.pages.account").controller("AuthCtrl",e)}(),function(){"use strict";function e(){return{template:'<div class="pass-meter {{masterClass}}"><div class="{{colClass}} pass-meter-col {{first}}"><div class="indicator"></div></div><div class="{{colClass}} pass-meter-col {{second}}"><div class="indicator"></div></div><div class="{{colClass}} pass-meter-col {{third}}"><div class="indicator"></div></div><div class="{{colClass}} pass-meter-col {{fourth}}"><div class="indicator"></div></div><div class="pass-meter-message">Seguridade do contrasinal: {{message}}</div></div>',restrict:"E",scope:{password:"=",strength:"=?"},link:function(e){var t=function(e){var t,a,i,s,r=function(e){for(var t=e.length-1,a="";t>=0;a+=e[t--]);return a},o={pos:{},neg:{}},n={pos:{},neg:{seqLetter:0,seqNumber:0,seqSymbol:0}},l=0,c="abcdefghijklmnopqrstuvwxyz",d="01234567890",p="\\!@#$%&/()=?Â¿";if(e){for(o.pos.lower=e.match(/[a-z]/g),o.pos.upper=e.match(/[A-Z]/g),o.pos.numbers=e.match(/\d/g),o.pos.symbols=e.match(/[$-\/:-?{-~!^_`\[\]]/g),o.pos.middleNumber=e.slice(1,-1).match(/\d/g),o.pos.middleSymbol=e.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),n.pos.lower=o.pos.lower?o.pos.lower.length:0,n.pos.upper=o.pos.upper?o.pos.upper.length:0,n.pos.numbers=o.pos.numbers?o.pos.numbers.length:0,n.pos.symbols=o.pos.symbols?o.pos.symbols.length:0,t=Object.keys(n.pos).reduce(function(e,t){return e+Math.min(1,n.pos[t])},0),n.pos.numChars=e.length,t+=n.pos.numChars>=8?1:0,n.pos.requirements=t>=3?t:0,n.pos.middleNumber=o.pos.middleNumber?o.pos.middleNumber.length:0,n.pos.middleSymbol=o.pos.middleSymbol?o.pos.middleSymbol.length:0,o.neg.consecLower=e.match(/(?=([a-z]{2}))/g),o.neg.consecUpper=e.match(/(?=([A-Z]{2}))/g),o.neg.consecNumbers=e.match(/(?=(\d{2}))/g),o.neg.onlyNumbers=e.match(/^[0-9]*$/g),o.neg.onlyLetters=e.match(/^([a-z]|[A-Z])*$/g),n.neg.consecLower=o.neg.consecLower?o.neg.consecLower.length:0,n.neg.consecUpper=o.neg.consecUpper?o.neg.consecUpper.length:0,n.neg.consecNumbers=o.neg.consecNumbers?o.neg.consecNumbers.length:0,s=0;s<c.length-2;s++){var u=e.toLowerCase();i=c.substring(s,parseInt(s+3)),a=r(i),u.indexOf(i)===-1&&u.indexOf(a)===-1||n.neg.seqLetter++}for(s=0;s<d.length-2;s++)i=d.substring(s,parseInt(s+3)),a=r(i),e.indexOf(i)===-1&&e.toLowerCase().indexOf(a)===-1||n.neg.seqNumber++;for(s=0;s<p.length-2;s++)i=p.substring(s,parseInt(s+3)),a=r(i),e.indexOf(i)===-1&&e.toLowerCase().indexOf(a)===-1||n.neg.seqSymbol++;var m={},h=e.toLowerCase(),g=h.split("");for(n.neg.repeated=0,s=0;s<g.length;s++){for(var v=0,f=0;;){var f=h.indexOf(g[s],f);if(f==-1)break;f++,v++}v>1&&!m[h[s]]&&(m[h[s]]=v,n.neg.repeated+=v)}l+=4*n.pos.numChars,n.pos.upper&&(l+=2*(n.pos.numChars-n.pos.upper)),n.pos.lower&&(l+=2*(n.pos.numChars-n.pos.lower)),(n.pos.upper||n.pos.lower)&&(l+=4*n.pos.numbers),l+=6*n.pos.symbols,l+=2*(n.pos.middleSymbol+n.pos.middleNumber),l+=2*n.pos.requirements,l-=2*n.neg.consecLower,l-=2*n.neg.consecUpper,l-=2*n.neg.consecNumbers,l-=3*n.neg.seqNumber,l-=3*n.neg.seqLetter,l-=3*n.neg.seqSymbol,o.neg.onlyNumbers&&(l-=n.pos.numChars),o.neg.onlyLetters&&(l-=n.pos.numChars),n.neg.repeated&&(l-=n.neg.repeated/n.pos.numChars*10)}return Math.max(0,Math.min(100,Math.round(l)))};e.colClass="",e.masterClass="",e.$watch("password",function(){return e.first="",e.second="",e.third="",e.fourth="",e.message="",e.password?(e.strength=t(e.password),e.masterClass="",void(e.strength<25?(e.first="poor",e.message="Pobre"):e.strength<50?(e.first="weak",e.second="weak",e.message="Feble"):e.strength<75?(e.first="good",e.second="good",e.third="good",e.message="Boa"):e.strength<=100&&(e.first="strong",e.second="strong",e.third="strong",e.fourth="strong",e.message="Forte"))):void(e.masterClass="hidden")})}}}angular.module("Qualigy.pages.account").directive("ngPasswordMeter",e)}(),function(){"use strict";function e(){function e(e,t){var a={colors:["#F00","#F90","#FF0","#9F0","#0F0"],mesureStrength:function(e){var t=0,a=/[$-\/:-?{-~!"^_`\[\]]/g,i=/[a-z]+/.test(e),s=/[A-Z]+/.test(e),r=/[0-9]+/.test(e),o=a.test(e),n=[i,s,r,o],l=$.grep(n,function(e){return e===!0}).length;return t+=2*e.length+(e.length>=10?1:0),t+=10*l,t=e.length<=6?Math.min(t,10):t,t=1===l?Math.min(t,10):t,t=2===l?Math.min(t,20):t,t=3===l?Math.min(t,40):t},getColor:function(e){var t;return t=e<=10?0:e<=20?1:e<=30?2:e<=40?3:4,{idx:t+1,col:this.colors[t]}}};e.$watch("passwordToCheck",function(e){if(e){var i=a.getColor(a.mesureStrength(e));t.removeClass("ng-hide"),t.find("ul").children("li").css({"background-color":"#DDD"}).slice(0,i.idx).css({"background-color":i.col})}})}var t={replace:!0,restrict:"E",template:'<div id="strength"><small data-translate="global.messages.validate.newpassword.strength">Password strength:</small><ul id="strengthBar"><li class="point"></li><li class="point"></li><li class="point"></li><li class="point"></li><li class="point"></li></ul></div>',scope:{passwordToCheck:"="},link:e};return t}angular.module("Qualigy.pages.account").directive("passwordStrengthBar",e)}(),function(){"use strict";function e(e,t,a,i){function s(){n.user=i}function r(){n.newForm.$valid&&n.password==n.confirmPassword&&(n.isSubmit=!0,n.error=null,a.changePassword(n.password).then(function(e){n.isSubmit=!1,toastr.success("O contrasinal foi mudado con Ã©xito.","Contrasinal mudado"),t.close(e)},function(e){n.isSubmit=!1,n.error=e.data}))}function o(){t.dismiss("cancel")}var n=this;n.save=r,n.cancel=o,s()}e.$inject=["$scope","$uibModalInstance","AuthService","user"],angular.module("Qualigy.pages.account").controller("PasswordChangeCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{user:"="},controller:["$scope","$uibModal",function(e,t){e.openCreateDialog=function(a){t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/account/password/password-change-dlg.html",controller:"PasswordChangeCtrl",controllerAs:"vm",backdrop:"static",resolve:{user:function(){return e.user}},size:a})}}],replace:!0,template:'<button type="submit" ng-click="openCreateDialog()" class="btn btn-default form-control">Actualizar contrasinal</button>'}}angular.module("Qualigy.pages.account").directive("passwordChangeDlg",e)}(),function(){"use strict";function e(e){function t(){a.password!==a.confirmPassword?(a.error=null,a.success=null,a.doNotMatch="ERROR"):(a.doNotMatch=null,Auth.changePassword(a.password).then(function(){a.error=null,a.success="OK"}).catch(function(){a.success=null,a.error="ERROR"}))}var a=this;a.changePassword=t,a.doNotMatch=null,a.error=null,a.success=null,Principal.identity().then(function(e){a.account=e})}e.$inject=["AuthService"],angular.module("Qualigy.pages.account").controller("PasswordCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){var t=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/admin/layergroups/layergroups-create-dlg.html",controller:"LayerGroupCreateCtrl",controllerAs:"vm",size:e,backdrop:"static"});t.result.then(function(e){s.go("admin.layergroups.detail",{id:e.id})})}var o=this;o.keywords=e.search().keywords,o.openCreateForm=r}e.$inject=["$location","$http","LayerGroups","$uibModal","$state"],angular.module("Qualigy.pages.admin").controller("LayerGroupsCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){var t=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/admin/layers/layers-create-dlg.html",controller:"LayerCreateCtrl",controllerAs:"vm",size:e});t.result.then(function(e){s.go("admin.layers.detail",{id:e.id})})}var o=this;o.keywords=e.search().keywords,o.openCreateForm=r}e.$inject=["$location","$http","Layers","$uibModal","$state"],angular.module("Qualigy.pages.admin").controller("LayersCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(e){var t=i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/admin/panels/panels-create-dlg.html",controller:"PanelCreateCtrl",controllerAs:"vm",size:e});t.result.then(function(e){s.go("admin.panels.detail",{id:e.id})})}var o=this;o.keywords=e.search().keywords,o.openCreateForm=r}e.$inject=["$location","$http","Panels","$uibModal","$state"],angular.module("Qualigy.pages.admin").controller("PanelsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=",onClose:"&"},transclude:!0,controller:"CommentCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/comments/create-wizard/comment-create-wizard.html"}}angular.module("Qualigy.pages.comments").directive("commentCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){var e=6e4;u.mapAction="none";var t=new Date(Math.round((new Date).getTime()/e)*e);u.model={report:u.report,observedTime:t}}function n(){u.model&&t.post(u.model).then(function(t){toastr.success(s.instant("app.comment.created",t)),e.$bus.channel("comments").publish("item.created",t)},function(e){toastr.error(s.instant("app.comment.detail.validate.maxfilesize"))})}function l(){e.$bus.channel("map").publish("action.draw",u.model)}function c(){e.$bus.channel("map").publish("action.none")}function d(t){u.mapAction==t?u.mapAction="none":u.mapAction=t,"none"==u.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==u.mapAction?e.$bus.channel("map").publish("action.draw",u.model):"deletePoints"==u.mapAction&&e.$bus.channel("map").publish("action.deletePoints",u.model)}function p(){var e=r.currentLonLat();e&&(u.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}var u=this;u.ok=n,u.cancel=u.onClose,u.drawComment=l,u.disableDrawComment=c,u.toggleMapAction=d,u.currentPosition=p,o()}e.$inject=["$scope","Comments","API_ENDPOINT","$http","$translate","geoService"],angular.module("Qualigy.pages.comments").controller("CommentCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=?",episode:"=?",action:"@",readonly:"@?",selectedLayer:"@",zoomToExtent:"@",hideLayersPanel:"=?",detailForm:"="},controller:"CommentMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/comments/map/comment-map.html",link:function(e,t,a){e.$watch("attrs.action",function(t){e.action=t})}}}angular.module("Qualigy.pages.comments").directive("commentMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){P.map={action:"none"},P.features={},h(),P.readonly=e.$eval(P.readonly),P.readonly||(u(),m()),d(),c(r.current),s.$on("$stateChangeSuccess",function(e,t,a,i,s){c(t)}),e.$watch("vm.olmap",function(e){e&&E()})}function c(e){P.worklayer=null,P.map.action="none",P.model=null,P.commentlayers.forEach(function(t){e.name.includes(t.name)?t.commentlayers=!0:t.active=!1})}function d(){var e=a.defer();return a.all([p()]).then(function(){P.olmap&&E(),e.resolve()}),e.promise}function p(){return P.report?P.report.getPhotos().then(function(e){P.features.comments=e}):P.episode?P.episode.getPhotos().then(function(e){P.features.comments=e}):void 0}function u(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a,e),/edit/.test(a)||/draw/.test(a)||/select/.test(a)?(P.map.action=a,P.model=e,P.worklayer=P.commentlayers.filter(function(e){return e.commentlayers})[0],console.log("Map worklayer:"+P.worklayer?P.worklayer.tagName:"undefined")):"deletePoints"==a?(P.map.action=a,P.model=e,P.worklayer=null,e.geometry&&(P.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):"show"!=a&&(P.map.action="none",P.model=null,P.worklayer=null)}})}function m(){P.commentlayers.forEach(function(t){e.$bus.subscribe({channel:t.name,topic:"item.*",callback:function(e,t){d()}})})}function h(){var e={name:"comments",label:n.instant("app.comment.title"),options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326'}",handler:"OpenLayers.Handler.Point",visibility:!0,items:"comments",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"};P.commentlayers=[e],P.layers=P.commentlayers.reduce(function(e,t){return e[t.name]=t,e},{})}function g(e){try{return"none"==P.map.action||e.id!=P.selectedFeature.id}catch(e){return!0}}function v(e){if(P.map.action&&P.map.action.indexOf("draw")>=0){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}}function f(e){if(P.model){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");if(T.publish("feature.added",e.feature),P.model.geometry=t.toString(),"draw"==P.map.action||"edit"==P.map.action){var a=t.getBounds().getCenterLonLat();if(P.model.longitude=a.lon,P.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));P.model.area=i}}}}function y(e){if(console.log("Feature modified",e.feature),T.publish("feature.modified",e.feature),"draw"==P.map.action||"edit"==P.map.action){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326"),a=t.getBounds().getCenterLonLat();if(P.model.longitude=a.lon,P.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));P.model.area=i}P.model.geometry=t.toString()}else P.model.geometry=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()}function b(e){console.log("Feature selected",e.feature),T.publish("feature.selected",e.feature),P.selectedFeature=e.feature,"detail.show.subdetail.show"==r.current.name&&1==e.feature.layer.selectedFeatures.length&&r.go("detail.show.subdetail.show",{subdetail:e.feature.layer.name,subid:e.feature.attributes.id})}function L(){P.olmap&&t.currentLonLat()&&P.olmap.olmap.setCenter(t.currentLonLat(P.olmap.olmap.getProjection()),P.olmap.olmap.getNumZoomLevels()-2)}function w(e){T.publish("feature.unselected",e.feature),console.log("Feature unselected",e.feature),P.selectedFeature=null,e.feature.layer.selectedFeatures=[]}function O(e){P.meausre=e;var t=e.measure.toFixed(1);if("km"==e.units&&(t*=1e3),P.map.action.indexOf("measureLength")!=-1){var a=P.map.action.substring("measureLength".length);P.model[a]=parseFloat(t)}if(P.map.action.indexOf("measureArea")!=-1){var a=P.map.action.substring("measureArea".length);P.model[a]=parseFloat(t)}refreshMapAction(P.$state.current.name,P.$stateParams)}function x(){if(P.feature.geometry.components[0].removePoint(P.selectedPoint),P.feature.geometry.getVertices().length>2&&P.model){var e=P.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");P.model.geometry=e.toString(),o()}P.selectedPoint=null}function S(e){P.selectedPoint=e.feature.geometry}function C(){P.selectedPoint=null}function E(){if(i.clearExtent(),i.addToExtent(P.features.comments),P.olmap&&P.olmap.olmap)if(i.maxExtent()){var e=P.olmap.olmap.getProjection();P.olmap.olmap.zoomToExtent(i.maxExtent(e))}else k()}function k(){P.olmap&&t.currentLonLat()&&P.olmap.olmap.setCenter(t.currentLonLat(P.olmap.olmap.getProjection()),P.olmap.olmap.getNumZoomLevels()-1)}var P=this,T=e.$bus.channel("map");P.mapExtentService=i,P.geoService=t,P.filterFeature=g,P.beforeFeatureAdded=v,P.featureAdded=f,P.featureModified=y,P.featureSelected=b,P.featureUnselected=w,P.measureAction=O,P.centerOnCurrentPosition=L,P.confirmRemoveSelectedPoint=S,P.cancelRemoveSelectedPoint=C,P.removeSelectedPoint=x,l()}e.$inject=["$scope","geoService","$q","mapExtentService","$rootScope","$state","$timeout","$translate"],angular.module("Qualigy.pages.comments").controller("CommentMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=",comments:"=?"},controller:"ReportCommentsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/comments/table/report-comments-table.html"}}angular.module("Qualigy.pages.comments").directive("reportComments",e)}(),function(){"use strict";function e(e,t,a){function i(){o.comments||o.report.getComments().then(function(e){o.comments=o.items=e}),s(),e.$bus.subscribe({channel:"comment",topic:"item.removed",callback:function(e,t){o.comments=o.comments.filter(function(t){return t.id!=e.id})}})}function s(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){o.comments.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){o.comments.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function r(e){var a=t.showConfirmationDeleteMessage();a.result.then(function(t){e.remove().then(function(){o.comments=o.comments.filter(function(t){return t.id!=e.id})})})}var o=this;o.remove=r,i()}e.$inject=["$scope","modalService","$state"],angular.module("Qualigy.pages.comments").controller("ReportCommentsCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",controller:"DashboardBookmarksCtrl",controllerAs:"vm",bindToController:!0,scope:!0,templateUrl:"app/pages/dashboard/bookmarks/bookmarks.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardBookmarks",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){m.page={number:0},d()}function o(){l()&&(m.page.number++,d())}function n(){c&&(m.page.number--,d())}function l(){return m.page&&m.page.number<m.page.totalPages-1}function c(){return m.page&&m.page.number>0}function d(){m.searchTerms={size:5,page:m.page.number||0,sort:["createdTime,desc"]},a.getList(m.searchTerms).then(function(e){m.bookmarks=e,m.page=e.$page})}function p(e,a){e.preventDefault(),e.stopImmediatePropagation(),t.open(a.pageUrl,"_blank")}function u(e){var t=s.showConfirmationMessage(i.instant("global.messages.confirmdelete.title"),i.instant("global.messages.confirmdelete.message"),"ion-trash-b ion-lg");t.result.then(function(t){e.remove().then(function(t){m.bookmarks=m.bookmarks.filter(function(t){return e.id!=t.id}),toastr.info(i.instant("global.theme.component.bookmark.removed",e))})})}var m=this;m.openPage=p,m.remove=u,m.hasNext=l,m.hasPrevious=c,m.nextPage=o,m.previousPage=n,r()}e.$inject=["$scope","$window","Bookmarks","$translate","modalService"],angular.module("Qualigy.pages.dashboard").controller("DashboardBookmarksCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",scope:{dateTime:"="},controller:"DashboardCalendarCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/dashboard/calendar/calendar.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardCalendar",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d,p){function u(){S.calendarConfig={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},views:{agendaDay:{buttonText:"Agenda dÃ­a"},agendaWeek:{buttonText:"Agenda semana"},listDay:{buttonText:"Lista dia"},listWeek:{buttonText:"Lista semana"},month:{buttonText:"Mes"}},defaultView:i.search().viewName||"month",defaultDate:i.search().intervalStart?moment(i.search().intervalStart):moment(),monthNames:["Xaneiro","Febreiro","Marzo","April","Maio","XuÃ±o","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthNamesShort:["Xan","Feb","Mar","Abr","Mai","XuÃ±","Xul","Ag","Sep","Out","Nov","Dec"],dayNames:["Domingo","Luns","Martes","MÃ©rcores","Xoves","Venres","SÃ¡bado"],dayNamesShort:["Dom","Lun","Mar","Mer","Xov","Ven","SÃ¡b"],buttonText:{today:"Hoxe",month:"Mes",week:"Semana",day:"DÃ­a",list:"Lista"},dayRender:h,nowIndicator:!0,firstDay:1,allDaySlot:!1,allDayText:"Todo o dÃ­a",timeFormat:"HH:mm",slotLabelFormat:"HH:mm",selectable:!!r.hasAnyPermission(["ROLE_ADMIN","ROLE_SUPERVISOR"]),selectHelper:!0,select:O,eventLimit:!0,eventLimitText:"mÃ¡is",editable:!1,eventClick:f,eventDrop:b,eventResize:L,eventRender:g,eventDragStop:y,dayClick:r.hasAnyPermission(["ROLE_ADMIN","ROLE_SUPERVISOR"])?w:null,viewRender:function(e,t){var a=e.intervalStart;i.search("intervalStart",a.format("YYYY-MM-DD")),i.search("viewName",e.name)}}}function m(e,t,a,i){var s={beginTime:[e.toDate(),t.toDate()],sort:"beginTime,desc"};p.getList(s).then(function(e){var t=[];if(e){var a=d3.nest().key(function(e){return e.name+e.beginTime}).rollup(function(e){var t=e[0];if(e.length>1)return{title:t.name,start:t.beginTime,end:t.endTime,pollutionepisodes:e};var a=t.name;return{title:a,start:t.beginTime,end:t.endTime,description:t.description,pollutionepisode:t}}).object(e);angular.forEach(a,function(e){t.push(e)}),i(t)}})}function h(e,t,a){var i=a.intervalStart,s=a.intervalEnd;(e.isBefore(i)||e.isAfter(s))&&t.attr({style:"background-color: #e4e4e4"})}function g(t,a,i){t.description?(a.find(".fc-title").append("<br/>"+t.description),a.attr({"ui-sref":"pollutionepisodes.detail({'id':'{{event.pollutionepisode.id}}'})"})):a.attr({"uib-popover-template":"'app/pages/calendar/calendar-pollutionepisode-popover.html'","popover-append-to-body":!0,"popover-placement":"bottom","popover-trigger":"outsideClick"});var r=e.$new(!0);r.event=t,s(a)(r)}function v(){$("#calendar").fullCalendar("refetchEvents")}function f(e,t,a){e.pollutionepisode&&c.go("pollutionepisodes.detail",{id:e.pollutionepisode.id,origin:"calendar"},!0)}function y(e,t,a){x(e.start,e.stop)}function b(e,t,a,i,s,r){S.alertMessage="Event Droped to make dayDelta "+t}function L(e,t,a,i,s,r){S.alertMessage="Event Resized to make dayDelta "+t}function w(e,t,a){var i=$(this).addClass("day-selected");e.hour(7),x(e.toDate(),e.add(4,"h").toDate()).then(function(e){i.removeClass("day-selected"),S.refreshCalendar()},function(){i.removeClass("day-selected")})}function O(e,t,a,i){}function x(e,t,i){e=moment(e).startOf("minute").toDate(),t=t||moment(e).add(2,"h").toDate();var s=a.defer(),r=d.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/create/pollutionepisode-create-dlg.html",controller:["PollutionEpisodes","$uibModalInstance","$timeout","newJourney",function(e,t,a,i){function s(){o.newForm.$valid&&e.post(o.newJourney).then(function(e){t.close(e)})}function r(){t.dismiss("cancel")}var o=this;o.ok=s,o.cancel=r,o.newJourney=i,a(function(){angular.element("#inputNombre").focus()})}],controllerAs:"vm",resolve:{newJourney:function(){return{beginTime:e,endTime:t}}},size:i});return r.result.then(function(e){s.resolve(e),$("#calendar").fullCalendar("refetchEvents")},function(e){s.reject()}),s.promise}var S=(n.colors.dashboard,this),C="user";S.filterBy=C,S.eventSources=[m],S.refreshCalendar=v,u()}e.$inject=["$scope","$timeout","$q","$location","$compile","AuthService","$filter","baConfig","$http","$state","$uibModal","PollutionEpisodes"],angular.module("Qualigy.pages.dashboard").controller("DashboardCalendarCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",controller:"DashboardEpisodesCtrl",controllerAs:"vm",bindToController:!0,scope:!0,templateUrl:"app/pages/dashboard/episodes/episodes.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardEpisodes",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){l.searchTerms={size:5,status:["NEW","OPEN"],sort:["beginTime,desc","status,asc"]},i.getList(l.searchTerms).then(function(e){l.results=e}),n()}function o(e,i){e.preventDefault(),e.stopImmediatePropagation();var s=a.get("ng-security-authorization"),r=s.substring("Bearer ".length);t.open(i.visorUrl+"&token="+r,"_blank")}function n(){l.episodeStatus=["NEW","OPEN","CLOSE"],l.extraSettings={template:'{{"app.entity.episode.episodeStatus." + option | translate}}',smartButtonMaxItems:3,buttonClasses:"form-control",smartButtonTextConverter:function(e,t){return s.instant("app.entity.episode.episodeStatus."+t)}},e.stringModel=[],e.stringData=["David","Jhon","Danny"],l.multiSelectEpisodeStatusTranslations={checkAll:"Seleccionar todos",selectGroup:"Seleccionar todos da categorÃ­a:",uncheckAll:"Desmarcar todos",dynamicButtonTextSuffix:"estados seleccionados",buttonDefaultText:"Seleccione estados"}}var l=this;l.openVisor=o,r()}e.$inject=["$scope","$window","$cookies","PollutionEpisodes","$translate"],angular.module("Qualigy.pages.dashboard").controller("DashboardEpisodesCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",controller:"DashboardEpisodesMapCtrl",controllerAs:"vm",bindToController:!0,scope:!0,templateUrl:"app/pages/dashboard/episodesmap/episodes-map.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardEpisodesMap",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){n.searchTerms={size:5,status:["NEW","OPEN"],sort:["beginTime,desc","status,asc"]},i.getList(n.searchTerms).then(function(e){n.results=e})}function o(e,i){e.preventDefault(),e.stopImmediatePropagation();var s=a.get("ng-security-authorization"),r=s.substring("Bearer ".length);t.open(i.visorUrl+"&token="+r,"_blank")}var n=this;n.openVisor=o,r()}e.$inject=["$scope","$window","$cookies","PollutionEpisodes","$translate"],angular.module("Qualigy.pages.dashboard").controller("DashboardEpisodesMapCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",scope:{},controller:"DashboardLogBookRecordsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/dashboard/logbookrecords/logbookrecords.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardLogbookrecords",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){o.searchTerms={size:5,sort:["createdTime,desc"]},i.getList(o.searchTerms).then(function(e){o.searchResults=e})}var o=this;o.navigate=t.navigate,r()}e.$inject=["$scope","$rootScope","$window","LogBookRecords","$translate"],angular.module("Qualigy.pages.dashboard").controller("DashboardLogBookRecordsCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",scope:{dateTime:"="},controller:"DashboardMapCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/dashboard/map/map.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardMap",e)}(),function(){"use strict";function e(e,t,a){function i(){s.refreshTimer=a(function(){s.refreshDailyMap(s.dateTime)},1e4),e.$watch(function(){return s.dateTime},function(e){e&&s.refreshDailyMap(e)}),e.$on("$destroy",function(){angular.isDefined(s.refreshTimer)&&a.cancel(s.refreshTimer)})}var s=this;t("BaseMapCtrl",{$scope:e,vm:s,editable:!1,loadMembers:!0,dailyMap:!0}),i()}e.$inject=["$scope","$controller","$interval"],angular.module("Qualigy.pages.calendar").controller("DashboardMapCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",scope:{},controller:"DashboardPollutionReportsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/dashboard/pollutionreports/pollutionreports.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardPollutionreports",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){c.searchTerms={size:5,sort:["reportTime,desc"]},i.getList(c.searchTerms).then(function(e){c.searchResults=e}),l()}function n(e,t){e.preventDefault(),e.stopImmediatePropagation();var i=r.get("ng-security-authorization"),s=i.substring("Bearer ".length);a.open(t.visorUrl+"&token="+s,"_blank")}function l(){c.episodeStatus=["NEW","OPEN","CLOSE"],c.extraSettings={template:'{{"app.entity.episode.episodeStatus." + option | translate}}',smartButtonMaxItems:3,buttonClasses:"form-control",smartButtonTextConverter:function(e,t){return s.instant("app.entity.episode.episodeStatus."+t)}},e.stringModel=[],e.stringData=["David","Jhon","Danny"],c.multiSelectEpisodeStatusTranslations={checkAll:"Seleccionar todos",selectGroup:"Seleccionar todos da categorÃ­a:",uncheckAll:"Desmarcar todos",dynamicButtonTextSuffix:"estados seleccionados",buttonDefaultText:"Seleccione estados"}}var c=this;c.openVisor=n,c.navigate=t.navigate,o()}e.$inject=["$scope","$rootScope","$window","PollutionReports","$translate","$cookies"],angular.module("Qualigy.pages.dashboard").controller("DashboardPollutionReportsCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-04
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",scope:{},controller:"DashboardScatReportsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/dashboard/scatreports/scatreports.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardScatreports",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){c.searchTerms={size:5,sort:["reportTime,desc"]},i.getList(c.searchTerms).then(function(e){c.searchResults=e}),l()}function n(e,t){e.preventDefault(),e.stopImmediatePropagation();var i=r.get("ng-security-authorization"),s=i.substring("Bearer ".length);a.open(t.visorUrl+"&token="+s,"_blank")}function l(){c.episodeStatus=["NEW","OPEN","CLOSE"],c.extraSettings={template:'{{"app.entity.episode.episodeStatus." + option | translate}}',smartButtonMaxItems:3,buttonClasses:"form-control",smartButtonTextConverter:function(e,t){return s.instant("app.entity.episode.episodeStatus."+t)}},e.stringModel=[],e.stringData=["David","Jhon","Danny"],c.multiSelectEpisodeStatusTranslations={checkAll:"Seleccionar todos",selectGroup:"Seleccionar todos da categorÃ­a:",uncheckAll:"Desmarcar todos",dynamicButtonTextSuffix:"estados seleccionados",buttonDefaultText:"Seleccione estados"}}var c=this;c.openVisor=n,c.navigate=t.navigate,o()}e.$inject=["$scope","$rootScope","$window","ScatReports","$translate","$cookies"],angular.module("Qualigy.pages.dashboard").controller("DashboardScatReportsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"EA",scope:{dateTime:"="},controller:"DashboardSummaryCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/dashboard/summary/summary.html"}}angular.module("Qualigy.pages.dashboard").directive("dashboardSummary",e)}(),function(){"use strict";function e(e,t){function a(){i(s.dateTime),e.$watch(function(){return s.dateTime},function(e){e&&i(e)})}function i(e){if(e){var t=moment(e).startOf("day"),a=moment(e).endOf("day");({plannedStartTime:[t.toDate(),a.toDate()]})}}var s=this;a()}e.$inject=["$scope","$controller"],angular.module("Qualigy.pages.calendar").controller("DashboardSummaryCtrl",e)}(),function(){"use strict";function e(){return{restrict:"EA",controller:"WeatherCtrl",templateUrl:"app/pages/dashboard/weather/weather.html"}}angular.module("Qualigy.pages.dashboard").directive("weather",e)}(),function(){"use strict";function e(e,t,a,i){function s(){t.jsonp("http://www.geoplugin.net/json.gp?jsoncallback=JSON_CALLBACK").then(function(t){e.geoData=t.data,e.updateWeather()},function(){console.log("GEO FAILED")})}function r(e){AmCharts.makeChart("tempChart",{type:"serial",theme:"blur",handDrawn:!0,categoryField:"time",dataProvider:e,valueAxes:[{axisAlpha:.3,gridAlpha:0}],graphs:[{bullet:"square",fillAlphas:.3,fillColorsField:"lineColor",legendValueText:"[[value]]",lineColorField:"lineColor",title:"Temp",valueField:"temp"}],categoryAxis:{gridAlpha:0,axisAlpha:.3}}).write("tempChart")}function o(t){var a=t.list[0],s={days:[{date:new Date,timeTemp:[],main:a.weather[0].main,description:a.weather[0].description,icon:a.weather[0].icon,temp:a.main.temp}],current:0};t.list.forEach(function(e,a){var i=new Date(e.dt_txt);i.getDate()!==s.days[s.days.length-1].date.getDate()&&s.days.push({date:i,timeTemp:[]});var r=s.days[s.days.length-1];r.timeTemp.push({time:i.getHours(),temp:e.main.temp}),(s.days.length>1&&i.getHours()==d||a==t.list.length-1)&&(r.main=e.weather[0].main,r.description=e.weather[0].description,r.icon=e.weather[0].icon,r.temp=e.main.temp,r.date.setHours(a==t.list.length-1?0:d),r.date.setMinutes(0))}),console.log(s.days[s.current].date),s.days=s.days.slice(0,i.attr("forecast")||5),e.weather=s}var n="https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/forecast",l="GET",c="08e9825781d75708bb0ecebbc02b3daa",d=15;e.units="metric",e.weatherIcons={"01d":"ion-ios-sunny-outline","02d":"ion-ios-partlysunny-outline","03d":"ion-ios-cloud-outline","04d":"ion-ios-cloud","09d":"ion-ios-rainy","10d":"ion-ios-rainy-outline","11d":"ion-ios-thunderstorm-outline","13d":"ion-ios-snowy","50d":"ion-ios-cloudy-outline","01n":"ion-ios-cloudy-night-outline","02n":"ion-ios-cloudy-night","03n":"ion-ios-cloud-outline","04n":"ion-ios-cloud","09n":"ion-ios-rainy","10n":"ion-ios-rainy-outline","11n":"ion-ios-thunderstorm","13n":"ion-ios-snowy","50n":"ion-ios-cloudy-outline"},e.weather={},e.switchUnits=function(t){e.units=t,e.updateWeather()},e.switchDay=function(t){e.weather.current=t,r(e.weather.days[e.weather.current].timeTemp)},e.updateWeather=function(){t({method:l,url:n,params:{appid:c,lat:e.geoData.geoplugin_latitude,lon:e.geoData.geoplugin_longitude,units:e.units}}).then(function(t){o(t.data),r(e.weather.days[e.weather.current].timeTemp)},function(){console.log("WEATHER FAILED")})},s()}e.$inject=["$scope","$http","$timeout","$element"],angular.module("Qualigy.pages.dashboard").controller("WeatherCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episode:"=?",onCreate:"&",onClose:"&"},transclude:!0,controller:"GisLayoutCreateCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/gislayouts/create/gislayout-create.html"}}angular.module("Qualigy.pages.gislayouts").directive("gislayoutCreate",e)}(),function(){"use strict";function e(e,t){function a(){r.newForm.$valid&&t.post(r.model).then(function(e){r.onCreate&&r.onCreate({gislayout:e})})}function i(){r.onClose&&r.onClose()}function s(){r.model={episode:r.episode}}var r=this;r.ok=a,r.cancel=i,s()}e.$inject=["$scope","GisLayouts"],angular.module("Qualigy.pages.gislayouts").controller("GisLayoutCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{gislayout:"=",detailForm:"=",onClose:"&"},controller:"GisLayoutDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/gislayouts/detail/gislayout-detail.html"}}angular.module("Qualigy.pages.gislayouts").directive("gislayoutDetail",e)}(),function(){"use strict";function e(e,t,a,i){function s(){r.model=r.gislayout}var r=this;i("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:r,topic:"gislayouts"}),s()}e.$inject=["$scope","$state","modalService","$controller"],angular.module("Qualigy.pages.gislayouts").controller("GisLayoutDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{gislayout:"=",zoomToExtent:"@",detailForm:"="},controller:"GisLayoutMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/gislayouts/map/gislayout-map.html"}}angular.module("Qualigy.pages.gislayouts").directive("gislayoutMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c){function d(){D.model=D.gislayout,D.measureEnabled=!1,D.handler="OpenLayers.Handler.Path",D.features={},D.map={action:"none"},D.assetPointStyle={selectStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'externalGraphic': '${marker}-${color}.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",defaultStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'externalGraphic': '${marker}-${color}.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},D.assetLineStyle={selectStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",defaultStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},u().then(function(e){m(),g(),T()})}function p(e){var t=(new OpenLayers.Format.WKT).read(e.geometry);return t.geometry instanceof OpenLayers.Geometry.Point?D.assetPointStyle:D.assetLineStyle}function u(){return D.model.getGisAssets().then(function(e){D.gisAssets=e})}function m(){if(D.gisAssets&&(i.clearExtent(),i.addToExtent(D.gisAssets),D.olmap&&D.olmap.olmap))if(i.maxExtent()){var e=D.olmap.olmap.getProjection();D.olmap.olmap.zoomToExtent(i.maxExtent(e))}else h()}function h(){D.olmap&&l.currentLonLat()&&D.olmap.olmap.setCenter(l.currentLonLat(D.olmap.olmap.getProjection()),D.olmap.olmap.getNumZoomLevels()-1)}function g(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a),D.model=e,/edit/.test(a)||/draw/.test(a)?D.map.action=a:"deletePoints"==a?(D.map.action=a,e.geometry&&(D.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):D.map.action="none"}});e.$bus.subscribe({channel:"assets",topic:"item.*",callback:function(e,t){T()}})}function v(){D.measureEnabled=!0,D.handler="OpenLayers.Handler.Path"}function f(){D.measureEnabled=!0,D.handler="OpenLayers.Handler.Polygon"}function y(){return D.measureEnabled&&"OpenLayers.Handler.Polygon"==D.handler}function b(){return D.measureEnabled&&"OpenLayers.Handler.Path"==D.handler}function L(){D.measureEnabled=!D.measureEnabled}function w(e){D.olmap&&D.olmap.olmap.updateSize()}function O(){D.olmap&&l.currentLonLat()&&D.olmap.olmap.setCenter(l.currentLonLat(D.olmap.olmap.getProjection()),D.olmap.olmap.getNumZoomLevels()-1)}function x(e,t){D.map.action===e&&D.handler==="OpenLayers.Handler."+t?k():(D.map.action=e,D.handler="OpenLayers.Handler."+t)}function S(){x("drawAsset","Point")}function C(){x("drawAsset","Path")}function E(){x("drawAsset","Polygon")}function k(){D.map.action="none",D.handler=null}function P(e){var t=e.feature.layer.features.filter(function(t){return!t.data.id&&t!=e.feature});t.length&&e.feature.layer.removeFeatures(t)}function T(){D.model.getGisAssets().then(function(e){D.gisAssets=e})}function N(e){var t={gisLayout:D.model,geometry:e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()};P(e),console.log("Asset added"),_(t)}function A(){return"drawAsset"==D.map.action}function M(){return A()&&"OpenLayers.Handler.Point"===D.handler}function F(){return A()&&"OpenLayers.Handler.Path"===D.handler}function R(){return A()&&"OpenLayers.Handler.Polygon"===D.handler}function _(e){r.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/gislayouts/map/assets/gisasset-create-dlg.html",controller:"GisAssetCreateCtrl",controllerAs:"vm",backdrop:"static",resolve:{asset:function(){return e}}})}function $(e){I(e.feature.data)}function I(e){var t=r.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/gislayouts/map/assets/gisasset-edit-dlg.html",controller:"GisAssetEditCtrl",controllerAs:"vm",backdrop:"static",resolve:{asset:function(){return e}}});t.result.then(function(){T()})}var D=this;D.updateSize=w,D.centerOnCurrentPosition=O,D.toggleMeasure=L,D.setLengthMeasure=v,D.setAreaMeasure=f,D.isLengthMeasureEnabled=b,D.isAreaMeasureEnabled=y,D.drawPointAsset=S,D.drawPolygonAsset=E,D.drawLineAsset=C,D.isDrawAssetEnabled=A,D.assetAdded=N,D.cancelDrawAsset=k,D.isDrawPointAssetEnabled=M,D.isDrawPathAssetEnabled=F,D.isDrawPolygonAssetEnabled=R,D.assetSelected=$,D.getStyleForAsset=p,D.isMeasureEnabled=function(){return D.measureEnabled},d()}e.$inject=["$scope","$rootScope","$interval","mapExtentService","$filter","$uibModal","$q","$translate","geoService","$timeout"],angular.module("Qualigy.pages.gislayouts").controller("GisLayoutMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"GisLayoutsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/gislayouts/search/gislayouts-search.html"}}angular.module("Qualigy.pages.gislayouts").directive("gislayoutSearch",e)}(),function(){"use strict";function e(e,t,a,i){function s(){r.searchTerms={reportTime:{startDate:moment().add(-1,"year").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)}}}var r=this;t("SearchCtrl",{$scope:e,vm:r,resource:i,config:{sort:"createdTime,desc"}}),s()}e.$inject=["$scope","$controller","$state","GisLayouts"],angular.module("Qualigy.pages.gislayouts").controller("GisLayoutsSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episode:"=?",onCreate:"&",onClose:"&"},transclude:!0,controller:"LogBookRecordCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/logbookrecords/create-wizard/logbookrecord-create-wizard.html"}}angular.module("Qualigy.pages.logbookrecords").directive("logbookrecordCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d,p){function u(){if(x.mapAction="none",o.hasAnyPermission(["ROLE_ADMIN","ROLE_SUPERVISOR"])){var t={sort:"beginTime,desc",size:10};d.getList(t).then(function(e){x.episodes=e,x.episode||(x.episode=x.episodes[0])})}else{var t={sort:"episode.beginTime,desc",size:5};c.getList(t).then(function(e){x.episodes=e.filter(function(e){return!!moment().isAfter(e.startTime)&&(!e.endTime||moment().isBefore(e.endTime))}).map(function(e){return e.episode}),!x.episode&&x.episodes.length>0&&(x.episode=x.episodes[0],x.model.episode=x.episode)})}var a=6e4;new Date(Math.round((new Date).getTime()/a)*a);x.model={episode:x.episode,tags:[]},x.allowedFileTypes=["image/png","image/gif","image/jpeg","application/pdf",".csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"],e.$on("files_selected",function(e,t){t[0]&&v(t[0])}),x.dropdownSettings={template:"{{option}}",smartButtonTextConverter:function(e,t){return t},smartButtonMaxItems:2,showCheckAll:!1,showUncheckAll:!1,selectionLimit:1},n.getConfigParamsByTopic("app.logbookrecord.tag").then(function(e){x["app.logbookrecord.tag"]=e,x.logBookRecordTags=e.map(function(e){return e.value}).sort(),x.model.type=x.logBookRecordTags[0]}),n.getConfigParamsByTopic("app.logbookrecord.style").then(function(e){x.logBookRecordTagStyle=e})}function m(){if(x.model&&(x.model.file||toastr.warning(s.instant("app.logbookrecord.createform.validate.fileEmpty")),x.model.geometry||toastr.warning(s.instant("app.logbookrecord.createform.validate.geometryEmpty")),x.model.message)){var a=angular.copy(x.model);delete a.file,delete a.thumbnail,x.modalInstance=p.showWaitMessage(),t.post(a).then(function(t){x.model.file?t.uploadFile(x.model.file).success(function(){x.modalInstance.dismiss("cancel"),toastr.success(s.instant("app.logbookrecord.createform.success"),t),e.$bus.channel("logbookrecords").publish("item.created",t),x.onCreate&&x.onCreate({logbookrecords:t})}).error(function(e){x.modalInstance.dismiss("cancel"),toastr.error("Non se poden subir ficheiros de mais de 10MB","Problemas o subir o ficheiro")}):(toastr.success(s.instant("app.logbookrecord.createform.success",t)),e.$bus.channel("logbookrecords").publish("item.created",t),x.onCreate&&x.onCreate({logbookrecords:t}))})}}function h(){setTimeout(function(){document.getElementById("fileInput").click()},0)}function g(){if(x.logBookRecordTagStyle){var e=x.logBookRecordTagStyle.filter(function(e){return e.name===x.model.type}).map(function(e){return e.value});return x.model.style=e[0]||null,x.model.style}}function v(t){if(t.length){var a=t[0].size/1024/1204;a>=S?p.showErrorMessage("Fichero superior a "+S+" MB","El tamaÃ±o del fichero ("+Math.round(100*a)/100+" MB) excede el lÃ­mite de <strong> "+S+" MB </strong> permitido"):x.model.file=t[0]}else x.model.file=t;var i=new FileReader;i.onload=function(){var e=new Image;e.onload=function(){y(e)},e.src=i.result},i.readAsDataURL(x.model.file),e.$apply()}function f(e,t,a,i){var s=[a/e,i/t];return s=Math.min(s[0],s[1]),s<1?{width:e*s,height:t*s}:{width:e,height:t}}function y(e){var t=document.createElement("canvas"),a=f(e.width,e.height,768,1024);t.width=a.width,t.height=a.height;var i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height),x.model.thumbnail=t.toDataURL("image/jpeg")}function b(t){x.mapAction==t?x.mapAction="none":x.mapAction=t,"none"==x.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==x.mapAction?e.$bus.channel("map").publish("action.draw",x.model):"deletePoints"==x.mapAction&&e.$bus.channel("map").publish("action.deletePoints",x.model)}function L(){var e=l.currentLonLat();e&&(x.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function w(e){return e.sort="beginTime,desc",d.getList(e)}function O(e,t){if(e&&t&&x[e]){var a=x[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[s.use()]}}var x=this,S=10;x.ok=m,x.cancel=x.onClose,x.selectFile=v,x.resizeImage=y,x.choosePicture=h,x.navigate=r.navigate,x.toggleMapAction=b,x.currentPosition=L,x.searchEpisodes=w,x.getStyle=g,x.translateConfig=O,u()}e.$inject=["$scope","LogBookRecords","API_ENDPOINT","$http","$translate","$rootScope","AuthService","configParamsService","geoService","EpisodeObservers","Episodes","modalService"],angular.module("Qualigy.pages.logbookrecords").controller("LogBookRecordCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{logbookrecord:"=",onClose:"&"},controller:"LogBookRecordDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/logbookrecords/detail/logbookrecord-detail.html"}}angular.module("Qualigy.pages.logbookrecords").directive("logbookrecordDetail",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d){function p(){x.allowedFileTypes=["image/png","image/gif","image/jpeg","application/pdf",".csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"],x.model=x.logbookrecord,e.$bus.channel("map").publish("action.select",x.logbookrecord),e.$on("files_selected",function(e,t){t[0]&&(h(t[0]),g())}),x.dropdownSettings={template:"{{option}}",smartButtonTextConverter:function(e,t){return t},smartButtonMaxItems:5,showCheckAll:!1,showUncheckAll:!1,selectionLimit:1},l.getConfigParamsByTopic("app.logbookrecord.tag").then(function(e){x["app.logbookrecord.tag"]=e,x.logBookRecordTags=e.map(function(e){return e.value}).sort()}),l.getConfigParamsByTopic("app.logbookrecord.style").then(function(e){x.logBookRecordTagStyle=e}),e.$watch("vm.detailForm.$visible",function(t){t?e.$bus.channel("map").publish("action.edit",x.logbookrecord):e.$bus.channel("map").publish("action.show",x.logbookrecord)})}function u(e){if(x.logBookRecordTagStyle){e=e||x.model.type;var t=x.logBookRecordTagStyle.filter(function(t){return t.name===e}).map(function(e){return e.value});return x.model.style=t[0]||null,x.model.style}}function m(e){return u(e),!0}function h(t){if(t.length){var i=t[0].size/1024/1204;i>=S?a.showErrorMessage("Fichero superior a "+S+" MB","El tamaÃ±o del fichero ("+Math.round(100*i)/100+" MB) excede el lÃ­mite de <strong> "+S+" MB </strong> permitido"):x.model.file=t[0]}else x.model.file=t;e.$apply()}function g(){x.model.uploadFile(x.model.file).success(function(e){x.model.fileName=e.fileName}).error(function(e){toastr.error(s.instant("global.messages.file.upload.error"))})}function v(){var e=a.showConfirmationMessage(s.instant("global.messages.file.delete.confirm.title"),s.instant("global.messages.file.delete.confirm.message"),"ion-trash-b ion-lg");e.result.then(function(e){x.model.deleteFile(x.model.file).success(function(e){x.model.fileName=null,x.model.filePath=null}).error(function(e){toastr.error(s.instant("global.messages.file.delete.error"))})})}function f(){setTimeout(function(){document.getElementById("fileInput").click()},0)}function h(e){if(e.length){var t=e[0].size/1024/1204;t>=S?a.showErrorMessage("Fichero superior a "+S+" MB","El tamaÃ±o del fichero ("+Math.round(100*t)/100+" MB) excede el lÃ­mite de <strong> "+S+" MB </strong> permitido"):x.model.file=e[0]}else x.model.file=e}function y(t){x.mapAction==t?x.mapAction="none":x.mapAction=t,"none"==x.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==x.mapAction?e.$bus.channel("map").publish("action.draw",x.model):"deletePoints"==x.mapAction&&e.$bus.channel("map").publish("action.deletePoints",x.model)}function b(){var e=d.currentLonLat();e&&(x.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function L(e,t){e.preventDefault(),e.stopImmediatePropagation(),o({method:"GET",url:n+"/logbookrecords/"+t.id+"/download",responseType:"arraybuffer"}).then(function(e){var a=t.fileName;i.saveFile(e.data,a)})}function w(e){return e.sort="beginTime,desc",c.getList(e)}function O(e,t){if(e&&t&&x[e]){var a=x[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[s.use()]}}var x=this,S=10;x.selectFile=h,x.choosePicture=f,x.deleteFile=v,x.download=L,x.upload=g,x.searchEpisodes=w,x.toggleMapAction=y,x.currentPosition=b,x.getStyle=u,x.onbeforesave=m,x.translateConfig=O,r("BaseEditableDetailCtrl",{$scope:e,vm:x,topic:"logbookrecords"}),p()}e.$inject=["$scope","$state","modalService","$navigator","$translate","$controller","$http","API_ENDPOINT","configParamsService","Episodes","geoService"],angular.module("Qualigy.pages.logbookrecords").controller("LogBookRecordDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{logbookrecord:"=?",action:"@",readonly:"@?",selectedLayer:"@",zoomToExtent:"@",detailForm:"="},controller:"LogBookRecordMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/logbookrecords/map/logbookrecord-map.html",link:function(e,t,a){e.$watch("attrs.action",function(t){e.action=t})}}}angular.module("Qualigy.pages.logbookrecords").directive("logbookrecordMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){E.map={action:"none"},E.features={},C=E.model,p(),d(),c(r.current),s.$on("$stateChangeSuccess",function(e,t,a,i,s){c(t)}),e.$watch("vm.olmap",function(e){e&&x()})}function c(e){E.worklayer=null,E.map.action="none",E.logbookrecordlayers.forEach(function(t){e.name.includes(t.name)?(t.logbookrecordlayers=!0,E.worklayer=t):t.active=!1})}function d(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a,e),/edit/.test(a)||/draw/.test(a)||/select/.test(a)?(E.map.action=a,E.model=e,E.worklayer=E.logbookrecordlayers.filter(function(e){return e.logbookrecordlayers})[0],console.log("Map worklayer:"+E.worklayer?E.worklayer.tagName:"undefined")):"deletePoints"==a?(E.map.action=a,E.model=e,E.worklayer=null,e.geometry&&(E.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):"show"!=a?(E.map.action="none",E.model=e,E.worklayer=E.logbookrecordlayers.filter(function(e){return e.logbookrecordlayers})[0]):(E.map.action=a,E.model=e,E.worklayer=E.logbookrecordlayers.filter(function(e){return e.logbookrecordlayers})[0])}})}function p(){var e={name:"logbookrecords",label:n.instant("app.comment.title"),options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326'}",handler:"OpenLayers.Handler.Point",visibility:!0,items:"logbookrecords",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${title}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8, label:'-'}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${title}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"};E.logbookrecordlayers=[e],E.layers=E.logbookrecordlayers.reduce(function(e,t){return e[t.name]=t,e},{})}function u(e){try{return"none"==E.map.action||e.id!=E.selectedFeature.id}catch(e){return!0}}function m(e){if(E.map.action&&E.map.action.indexOf("draw")>=0){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}}function h(e){if(E.model){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");if(k.publish("feature.added",e.feature),E.model.geometry=t.toString(),"draw"==E.map.action||"edit"==E.map.action){var a=t.getBounds().getCenterLonLat();if(E.model.longitude=a.lon,E.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));E.model.area=i}}}}function g(e){if(console.log("Feature modified",e.feature),k.publish("feature.modified",e.feature),"draw"==E.map.action||"edit"==E.map.action){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326"),a=t.getBounds().getCenterLonLat();if(E.model.longitude=a.lon,E.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));E.model.area=i}E.model.geometry=t.toString()}else E.model.geometry=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()}function v(e){console.log("Feature selected",e.feature),k.publish("feature.selected",e.feature),E.selectedFeature=e.feature,"detail.show.subdetail.show"==r.current.name&&1==e.feature.layer.selectedFeatures.length&&r.go("detail.show.subdetail.show",{subdetail:e.feature.layer.name,subid:e.feature.attributes.id})}function f(){E.olmap&&t.currentLonLat()&&E.olmap.olmap.setCenter(t.currentLonLat(E.olmap.olmap.getProjection()),E.olmap.olmap.getNumZoomLevels()-2)}function y(e){k.publish("feature.unselected",e.feature),console.log("Feature unselected",e.feature),E.selectedFeature=null,e.feature.layer.selectedFeatures=[]}function b(e){E.meausre=e;var t=e.measure.toFixed(1);if("km"==e.units&&(t*=1e3),E.map.action.indexOf("measureLength")!=-1){var a=E.map.action.substring("measureLength".length);E.model[a]=parseFloat(t)}if(E.map.action.indexOf("measureArea")!=-1){var a=E.map.action.substring("measureArea".length);E.model[a]=parseFloat(t)}refreshMapAction(E.$state.current.name,E.$stateParams)}function L(){if(E.feature.geometry.components[0].removePoint(E.selectedPoint),E.feature.geometry.getVertices().length>2&&E.model){var e=E.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");E.model.geometry=e.toString(),o()}E.selectedPoint=null}function w(e){E.selectedPoint=e.feature.geometry}function O(){E.selectedPoint=null}function x(){if(i.clearExtent(),i.addToExtent(E.features.photos),E.olmap&&E.olmap.olmap)if(i.maxExtent()){var e=E.olmap.olmap.getProjection();E.olmap.olmap.zoomToExtent(i.maxExtent(e))}else S()}function S(){E.olmap&&t.currentLonLat()&&E.olmap.olmap.setCenter(t.currentLonLat(E.olmap.olmap.getProjection()),E.olmap.olmap.getNumZoomLevels()-1)}var C,E=this,k=e.$bus.channel("map");E.mapExtentService=i,E.geoService=t,E.filterFeature=u,E.beforeFeatureAdded=m,E.featureAdded=h,E.featureModified=g,E.featureSelected=v,E.featureUnselected=y,E.measureAction=b,E.centerOnCurrentPosition=f,E.confirmRemoveSelectedPoint=w,E.cancelRemoveSelectedPoint=O,E.removeSelectedPoint=L,l()}e.$inject=["$scope","geoService","$q","mapExtentService","$rootScope","$state","$timeout","$translate"],angular.module("Qualigy.pages.logbookrecords").controller("LogBookRecordMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=",logbookrecords:"=?"},controller:"LogBookRecordsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/logbookrecords/search/logbookrecords-search.html"}}angular.module("Qualigy.pages.logbookrecords").directive("logbookrecordsSearch",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c,d){function p(){n.getList({resource:"logbookrecords"}).then(function(e){g.tags=e}),g.doSearch().then(function(e){g.logbookrecords=e})}function u(e,t){e.preventDefault(),e.stopImmediatePropagation(),d({method:"GET",url:c+"/logbookrecords/"+t.id+"/download",responseType:"arraybuffer"}).then(function(e){var a=t.fileName;l.saveFile(e.data,a)})}function m(e){if(e.remove){var t=s.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){var t=g.searchResults.indexOf(e);t>-1&&g.searchResults.splice(t,1)})})}}function h(e){e&&(g.searchTerms.tags||(g.searchTerms.tags=[]),g.searchTerms.tags.indexOf(e.tag)<0?g.searchTerms.tags.push(e.tag):g.searchTerms.tags=g.searchTerms.tags.filter(function(t){return t!==e.tag}),g.doSearch())}var g=this;a("SearchCtrl",{$scope:e,vm:g,resource:o,config:{sort:"createdTime,desc"}}),g.navigate=t.navigate,g.deleteRow=m,g.toggleTag=h,g.download=u,g.navigate=t.navigate,p()}e.$inject=["$scope","$rootScope","$controller","$state","modalService","$uibModal","LogBookRecords","Tags","$navigator","API_ENDPOINT","$http"],angular.module("Qualigy.pages.logbookrecords").controller("LogBookRecordsSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{logbookrecords:"="},controller:"LogbookrecordsTableCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/logbookrecords/table/logbookrecords-table.html"}}angular.module("Qualigy.pages.logbookrecords").directive("logbookrecordsTable",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){}function c(e,t){e.preventDefault(),e.stopImmediatePropagation(),n({method:"GET",url:r+"/logbookrecords/"+t.id+"/download",responseType:"arraybuffer"}).then(function(e){var a=t.fileName;s.saveFile(e.data,a)})}function d(e){if(e.remove){var t=a.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){var t=p.logbookrecords.indexOf(e);t>-1&&p.logbookrecords.splice(t,1)})})}else{var i=p.logbookrecords.indexOf(linea);i>-1&&p.logbookrecords.splice(i,1)}}var p=this;p.deleteRow=d,p.navigate=t.navigate,p.download=c,l()}e.$inject=["$scope","$rootScope","modalService","$uibModal","$navigator","API_ENDPOINT","$state","$http"],angular.module("Qualigy.pages.pollutionepisodes").controller("LogbookrecordsTableCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episode:"=?",report:"=?",mapAction:"=?",onClose:"&"},transclude:!0,controller:"PhotoCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/photos/create-wizard/photo-create-wizard.html"}}angular.module("Qualigy.pages.photos").directive("photoCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l){function c(){var t=6e4;b.mapAction="none";var a=new Date(Math.round((new Date).getTime()/t)*t);b.model={episode:b.episode,report:b.report,observedTime:a},b.allowedFileTypes=["image/png","image/gif","image/jpeg"],e.$on("files_selected",function(e,t){t[0]&&u(t[0])})}function d(){if(b.model)if(b.model.file){var a=angular.copy(b.model);delete a.file,delete a.thumbnail,b.modalInstance=l.showWaitMessage(),t.post(a).then(function(t){t.uploadFile(b.model.file).success(function(){b.modalInstance.dismiss("cancel"),toastr.success("Foto creada correctamente"),e.$bus.channel("photos").publish("item.created",t)}).error(function(e){b.modalInstance.dismiss("cancel"),toastr.error("Non se poden subir ficheiros de mais de 2MB","Problemas o subir o ficheiro")})})}else toastr.warning(s.instant("app.photo.detail.validate.selectfile"))}function p(){setTimeout(function(){document.getElementById("fileInput").click()},0)}function u(t){if(t.length){var a=t[0].size/1024/1204;a>=L?l.showErrorMessage("Fichero superior a "+L+" MB","El tamaÃ±o del fichero ("+Math.round(100*a)/100+" MB) excede el lÃ­mite de <strong> "+L+" MB </strong> permitido"):b.model.file=t[0]}else b.model.file=t;var i=o.defer(),s=new FileReader;s.onload=function(){var e=new Image;e.onload=function(){h(e),i.resolve()},e.src=s.result},s.readAsDataURL(b.model.file),i.promise.then(function(){n(function(){e.$apply()},200)})}function m(e,t,a,i){var s=[a/e,i/t];return s=Math.min(s[0],s[1]),s<1?{width:e*s,height:t*s}:{width:e,height:t
}}function h(e){var t=document.createElement("canvas"),a=m(e.width,e.height,768,1024);t.width=a.width,t.height=a.height;var i=t.getContext("2d");i.drawImage(e,0,0,t.width,t.height),b.model.thumbnail=t.toDataURL("image/jpeg")}function g(){e.$bus.channel("map").publish("action.draw",b.model)}function v(){e.$bus.channel("map").publish("action.none")}function f(t){b.mapAction==t?b.mapAction="none":b.mapAction=t,"none"==b.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==b.mapAction?e.$bus.channel("map").publish("action.draw",b.model):"deletePoints"==b.mapAction&&e.$bus.channel("map").publish("action.deletePoints",b.model)}function y(){var e=r.currentLonLat();e&&(b.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}var b=this,L=10;b.ok=d,b.cancel=b.onClose,b.drawPhoto=g,b.disableDrawPhoto=v,b.selectFile=u,b.resizeImage=h,b.choosePicture=p,b.toggleMapAction=f,b.currentPosition=y,c()}e.$inject=["$scope","Photos","API_ENDPOINT","$http","$translate","geoService","$q","$timeout","modalService"],angular.module("Qualigy.pages.photos").controller("PhotoCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{photo:"=",onClose:"&"},controller:"PhotoDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/photos/photos/detail/photo-detail.html"}}angular.module("Qualigy.pages.photos").directive("photoDetail",e)}(),function(){"use strict";function e(e,t,a,i){function s(){r.model=r.photo,e.$bus.channel("map").publish("action.select",r.photo)}var r=this;s()}e.$inject=["$scope","$state","modalService","$controller"],angular.module("Qualigy.pages.photos").controller("PhotoDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=?",episode:"=?",action:"@",readonly:"@?",selectedLayer:"@",zoomToExtent:"@",hideLayersPanel:"=?",detailForm:"="},controller:"PhotoMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/photos/map/photo-map.html",link:function(e,t,a){e.$watch("attrs.action",function(t){e.action=t})}}}angular.module("Qualigy.pages.photos").directive("photoMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){P.map={action:"none"},P.features={},h(),P.readonly=e.$eval(P.readonly),P.readonly||(u(),m()),d(),c(r.current),s.$on("$stateChangeSuccess",function(e,t,a,i,s){c(t)}),e.$watch("vm.olmap",function(e){e&&E()})}function c(e){P.worklayer=null,P.map.action="none",P.model=null,P.photolayers.forEach(function(t){e.name.includes(t.name)?t.photolayers=!0:t.active=!1})}function d(){var e=a.defer();return a.all([p()]).then(function(){P.olmap&&E(),e.resolve()}),e.promise}function p(){return P.report?P.report.getPhotos().then(function(e){P.features.photos=e}):P.episode?P.episode.getPhotos().then(function(e){P.features.photos=e}):void 0}function u(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a,e),/edit/.test(a)||/draw/.test(a)||/select/.test(a)?(P.map.action=a,P.model=e,P.worklayer=P.photolayers.filter(function(e){return e.photolayers})[0],console.log("Map worklayer:"+P.worklayer?P.worklayer.tagName:"undefined")):"deletePoints"==a?(P.map.action=a,P.model=e,P.worklayer=null,e.geometry&&(P.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):"show"!=a&&(P.map.action="none",P.model=null,P.worklayer=null)}})}function m(){P.photolayers.forEach(function(t){e.$bus.subscribe({channel:t.name,topic:"item.*",callback:function(e,t){d()}})})}function h(){var e={name:"photos",label:n.instant("app.photo.title"),handler:"OpenLayers.Handler.Point",visibility:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:[ 'SVG','Canvas', 'VML']}",items:"photos",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/image1.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"};P.photolayers=[e],P.layers=P.photolayers.reduce(function(e,t){return e[t.name]=t,e},{})}function g(e){try{return"none"==P.map.action||e.id!=P.selectedFeature.id}catch(e){return!0}}function v(e){if(P.map.action&&P.map.action.indexOf("draw")>=0){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}}function f(e){if(P.model){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");if(T.publish("feature.added",e.feature),P.model.geometry=t.toString(),"draw"==P.map.action||"edit"==P.map.action){var a=t.getBounds().getCenterLonLat();if(P.model.longitude=a.lon,P.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));P.model.area=i}}}}function y(e){if(console.log("Feature modified",e.feature),T.publish("feature.modified",e.feature),"draw"==P.map.action||"edit"==P.map.action){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326"),a=t.getBounds().getCenterLonLat();if(P.model.longitude=a.lon,P.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));P.model.area=i}P.model.geometry=t.toString()}else P.model.geometry=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()}function b(e){console.log("Feature selected",e.feature),T.publish("feature.selected",e.feature),P.selectedFeature=e.feature,"detail.show.subdetail.show"==r.current.name&&1==e.feature.layer.selectedFeatures.length&&r.go("detail.show.subdetail.show",{subdetail:e.feature.layer.name,subid:e.feature.attributes.id})}function L(){P.olmap&&t.currentLonLat()&&P.olmap.olmap.setCenter(t.currentLonLat(P.olmap.olmap.getProjection()),P.olmap.olmap.getNumZoomLevels()-2)}function w(e){T.publish("feature.unselected",e.feature),console.log("Feature unselected",e.feature),P.selectedFeature=null,e.feature.layer.selectedFeatures=[]}function O(e){P.meausre=e;var t=e.measure.toFixed(1);if("km"==e.units&&(t*=1e3),P.map.action.indexOf("measureLength")!=-1){var a=P.map.action.substring("measureLength".length);P.model[a]=parseFloat(t)}if(P.map.action.indexOf("measureArea")!=-1){var a=P.map.action.substring("measureArea".length);P.model[a]=parseFloat(t)}refreshMapAction(P.$state.current.name,P.$stateParams)}function x(){if(P.feature.geometry.components[0].removePoint(P.selectedPoint),P.feature.geometry.getVertices().length>2&&P.model){var e=P.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");P.model.geometry=e.toString(),o()}P.selectedPoint=null}function S(e){P.selectedPoint=e.feature.geometry}function C(){P.selectedPoint=null}function E(){if(i.clearExtent(),i.addToExtent(P.features.photos),P.olmap&&P.olmap.olmap)if(i.maxExtent()){var e=P.olmap.olmap.getProjection();P.olmap.olmap.zoomToExtent(i.maxExtent(e))}else k()}function k(){P.olmap&&t.currentLonLat()&&P.olmap.olmap.setCenter(t.currentLonLat(P.olmap.olmap.getProjection()),P.olmap.olmap.getNumZoomLevels()-1)}var P=this,T=e.$bus.channel("map");P.mapExtentService=i,P.geoService=t,P.filterFeature=g,P.beforeFeatureAdded=v,P.featureAdded=f,P.featureModified=y,P.featureSelected=b,P.featureUnselected=w,P.measureAction=O,P.centerOnCurrentPosition=L,P.confirmRemoveSelectedPoint=S,P.cancelRemoveSelectedPoint=C,P.removeSelectedPoint=x,l()}e.$inject=["$scope","geoService","$q","mapExtentService","$rootScope","$state","$timeout","$translate"],angular.module("Qualigy.pages.photos").controller("PhotoMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=",photos:"=?"},controller:"ReportPhotosCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/photos/table/report-photos-table.html"}}angular.module("Qualigy.pages.photos").directive("reportPhotos",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){d.photos||d.report.getPhotos().then(function(e){d.photos=d.items=e}),l(),e.$bus.subscribe({channel:"photos",topic:"item.removed",callback:function(e,t){d.photos=d.photos.filter(function(t){return t.id!=e.id})}})}function o(e){a.open({templateUrl:"photoImageModal.html",controller:["$scope","API_ENDPOINT","photo","$uibModalInstance",function(e,t,a,i){e.photo=a,e.photoFileUrl=function(e){return t+"/photos/"+e.id+"/download"},e.close=function(){i.close()}}],size:"lg",resolve:{photo:function(){return e}}})}function n(e){return i+"/photos/"+e.id+"/download"}function l(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){d.photos.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){d.photos.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function c(e){var a=t.showConfirmationDeleteMessage();a.result.then(function(t){e.remove().then(function(){d.photos=d.photos.filter(function(t){return t.id!=e.id})})})}var d=this;d.remove=c,d.photoFileUrl=n,d.openModal=o,r()}e.$inject=["$scope","modalService","$uibModal","API_ENDPOINT","$state"],angular.module("Qualigy.pages.photos").controller("ReportPhotosCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"="},controller:["$scope","modalService","$translate","$state",function(e,t,a,i){e.openConfirmCopy=function(){var s=t.showConfirmationMessage(a.instant("app.pollutionepisode.copydialog.title"),a.instant("app.pollutionepisode.copydialog.message"),"ion-ios-copy-outline ion-lg");s.result.then(function(t){e.pollutionepisode.copy().then(function(e){toastr.success(a.instant("app.pollutionepisode.copydialog.success"),a.instant("app.pollutionepisode.copydialog.title")),i.go("pollutionepisodes.detail",{id:e.id})})})}}],replace:!0,template:'<button type="button" class="btn btn-with-icon btn-primary" ng-click="openConfirmCopy()"><i class="ion-ios-copy-outline"></i> <span data-translate="app.pollutionepisode.home.copyLabel"> Episodio </span></button>'}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodeCopyBtn",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(e){var i=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/create/pollutionepisode-create-dlg.html",controller:"PollutionEpisodeCreateCtrl",controllerAs:"vm",backdrop:"static",resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodeuser"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}]},size:"lg"});i.result.then(function(e){a.go("pollutionepisodes.detail",{id:e.id})})}}],replace:!0,template:'<button type="button" class="btn btn-primary" title="{{\'app.pollutionepisode.home.createLabel\' | translate}}" ng-click="openCreateDialog()"> <i class="ion-plus-round"></i></button>'}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodeCreateBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a){function i(){c.duplicate=!1,c.createForm.inputEmail.$valid&&e.getList({name:c.model.name}).then(function(e){c.duplicate=e.length>0})}function s(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);c.model={beginTime:t,status:"NEW"}}function r(){c.newForm.$valid&&e.post(c.model).then(function(e){t.close(e),toastr.success($translate.instant("app.pollutionepisode.created",e))})}function o(){t.dismiss("cancel")}function n(e){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}function l(e){c.model.affectedArea=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString(),channel.publish("feature.added",e.feature)}var c=this;c.ok=r,c.cancel=o,c.beforeFeatureAdded=n,c.featureAdded=l,c.checkUnique=i,s()}e.$inject=["PollutionEpisodes","$uibModalInstance","translatePartialLoader"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodeCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",onCreate:"&",onClose:"&"},transclude:!0,controller:"PollutionEpisodeCreateWizardCtrl",controllerAs:"vm",bindToController:!0,resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("episodeuser"),t.addPart("userlogin"),t.addPart("layer"),e.refresh()}]},templateUrl:"app/pages/pollutionepisodes/create-wizard/pollutionepisode-create-wizard.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodeCreateWizard",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);m.model={beginTime:t,status:"NEW"},m.episodelayers=[],m.episodeusers=[],m.selectedlayers=[],m.selectedusers=[]}function c(){!m.inProgress&&m.form1.$valid&&m.form2.$valid&&(m.inProgress=!0,m.modalInstance=n.showInformationMessage(s.instant("global.modal.wait.title"),s.instant("global.modal.wait.message"),"ion-clock"),t.post(m.model).then(function(e){m.model=angular.extend(m.model,e);var t,n,l=r.defer();return m.selectedlayers&&(t=m.selectedlayers.map(function(t){return{episode:e,layer:t}}).reduce(function(e,t){return e.then(function(){return a.post(t)})},r.resolve())),r.all([t]).then(function(){o(function(){a.getList({episode:m.model.id}).then(function(t){m.selectedusers&&(n=m.selectedusers.map(function(t){return t.episode=e,t}).reduce(function(e,t){return e.then(function(){return i.post(t)})},r.resolve())),r.all([n]).then(function(){m.modalInstance.dismiss("cancel"),m.inProgress=!1,toastr.success(s.instant("app.pollutionepisode.created",e)),m.onCreate&&m.onCreate({pollutionepisode:e}),l.resolve()},function(e){m.modalInstance.dismiss("cancel"),m.inProgress=!1})},300)})},function(e){m.modalInstance.dismiss("cancel"),m.inProgress=!1}),l.promise},function(e){m.modalInstance.dismiss("cancel"),m.inProgress=!1}))}function d(){m.onClose&&m.onClose()}function p(e){m.model.affectedArea=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString();var t=e.feature.layer.features.filter(function(t){return t!=e.feature});t.length&&e.feature.layer.removeFeatures(t)}function u(){m.model.affectedArea=null,m.olmap.olmap.layers.forEach(function(e){e.features&&e.removeFeatures(e.features)})}var m=this;m.ok=c,m.cancel=d,m.featureAdded=p,m.removeAffectedArea=u,l()}e.$inject=["$scope","PollutionEpisodes","EpisodeLayers","EpisodeUsers","$translate","$q","$timeout","modalService"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodeCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",detailForm:"="},controller:"PollutionEpisodeDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/detail/pollutionepisode-detail.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodeDetail",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){h.model=h.pollutionepisode,h.status=["NEW","OPEN","CLOSE","ARCHIVED"],m=e.$bus.channel("map"),m.publish("action.select",h.model),h.map={action:"none"},h.$state=t,u()}function c(){h.model.getEpisodeUsers().then(function(e){h.episodeUsers=e})}function d(){h.model.status="OPEN",h.model.save().then(function(){t.go("pollutionepisodes",{})})}function p(){var e=h.model._links.self.href,t=e.split("api/"),a=t[0]+"#/pub/"+t[1];r.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/detail/pub-link-dlg.html",controller:["$scope","$uibModalInstance","$translate","translatePartialLoader","publicLink",function(e,t,a,i,s){e.publicLink=s,e.close=function(){t.dismiss()},e.copyLink=function(){var e=document.getElementById("inputLink");e.focus(),e.select(),document.execCommand("copy"),toastr.success(a.instant("app.pollutionepisode.detail.pub.linkCopied"))}}],resolve:{publicLink:function(){return a},translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("pollutionepisode"),t.addPart("global"),e.refresh()}]}})}function u(){e.$bus.subscribe({channel:"pollutionepisodes",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("pollutionepisodes: "+t.topic),"edit"==a?(h.model.affectedArea?h.map.action="edit":h.map.action="draw",m.publish("action."+h.map.action,h.model)):"show"==a&&(m.publish("action.select",h.model),h.map.action="select")}})}var m,h=this;h.shareLink=p,h.publishAndClose=d,h.onShow=c,i("BaseEditableDetailCtrl",{$scope:e,vm:h,topic:"pollutionepisodes"}),l()}e.$inject=["$scope","$state","modalService","$controller","Layers","$uibModal","AuthService","UserLoginEpisodes"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodeDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",zoomToExtent:"@",detailForm:"="},controller:"PollutionEpisodeMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/pollutionepisodes/map/pollutionepisode-map.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodeMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l){function c(){G.model=G.pollutionepisode,G.measureEnabled=!1,G.handler="OpenLayers.Handler.Path",G.features={},G.map={action:"none"},U(),h(),e.$watch("vm.olmap",function(e){e&&m()}),C(),G.assetPointStyle={selectStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'externalGraphic': '${marker}-${color}.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': '${marker}-${color}.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'externalGraphic': '${marker}-${color}.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},G.assetLineStyle={selectStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",defaultStyle:"{'fillColor':'${color}','strokeColor': '${color}', 'fillOpacity': 1, label:'${name}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},M()}function d(e){var t=(new OpenLayers.Format.WKT).read(e.geometry);return t.geometry instanceof OpenLayers.Geometry.Point?G.assetPointStyle:G.assetLineStyle}function p(){return G.pollutionepisode.getPhotos().then(function(e){G.features.photos=e})}function u(){return G.pollutionepisode.getLogBookRecords().then(function(e){G.features.logbookrecords=e})}function m(){if(G.model&&G.model.affectedArea){var e=(new OpenLayers.Format.WKT).read(G.model.affectedArea);e.geometry.transform("EPSG:4326","EPSG:900913"),a.clearExtent(),a.addToExtent([e]),a.addToExtent(G.features.photos),G.olmap&&G.olmap.olmap&&(a.maxExtent()?G.olmap.olmap.zoomToExtent(a.maxExtent()):_centerOnCurrentPosition())}}function h(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a),G.model=e,/edit/.test(a)||/draw/.test(a)?G.map.action=a:"deletePoints"==a?(G.map.action=a,e.geometry&&(G.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):G.map.action="none"}});e.$bus.subscribe({channel:"assets",topic:"item.*",callback:function(e,t){M()}})}function g(){G.measureEnabled=!0,G.handler="OpenLayers.Handler.Path"}function v(){G.measureEnabled=!0,G.handler="OpenLayers.Handler.Polygon"}function f(){return G.measureEnabled&&"OpenLayers.Handler.Polygon"==G.handler}function y(){return G.measureEnabled&&"OpenLayers.Handler.Path"==G.handler}function b(){G.measureEnabled=!G.measureEnabled}function L(e){G.olmap&&G.olmap.olmap.updateSize()}function w(){G.olmap&&n.currentLonLat()&&G.olmap.olmap.setCenter(n.currentLonLat(G.olmap.olmap.getProjection()),G.olmap.olmap.getNumZoomLevels()-1)}function O(e){G.model.affectedArea=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString(),A(e)}function x(){G.model.affectedArea=null}function S(e){G.model.affectedArea=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()}function C(){var e=r.defer();return r.all([p(),u()]).then(function(){G.olmap&&m(),e.resolve()}),e.promise}function E(){G.map.action="drawAsset",G.handler="OpenLayers.Handler.Point"}function k(){G.map.action="drawAsset",G.handler="OpenLayers.Handler.Path"}function P(){G.map.action="drawAsset",G.handler="OpenLayers.Handler.Polygon"}function T(){G.map.action=R()?"none":"drawAsset"}function N(){G.map.action="none",G.handler=null}function A(e){var t=e.feature.layer.features.filter(function(t){return!t.data.id&&t!=e.feature});t.length&&e.feature.layer.removeFeatures(t)}function M(){G.model.getAssets().then(function(e){G.assets=e})}function F(e){var t={episode:G.model,visibility:!0,geometry:e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()};A(e),console.log("Asset added"),D(t)}function R(){return"drawAsset"==G.map.action}function _(){return R()&&"OpenLayers.Handler.Point"==G.handler}function $(){return R()&&"OpenLayers.Handler.Path"==G.handler}function I(){return R()&&"OpenLayers.Handler.Polygon"==G.handler}function D(e){s.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/map/assets/asset-create-dlg.html",controller:"AssetCreateCtrl",controllerAs:"vm",resolve:{asset:function(){return e}}})}function z(e){B(e.feature.data)}function U(){var e={name:"photos",label:o.instant("app.photo.title"),handler:"OpenLayers.Handler.Point",visibility:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:[ 'SVG','Canvas', 'VML']}",items:"photos",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/image1.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},t={name:"logbookrecords",label:o.instant("app.comment.title"),options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326'}",handler:"OpenLayers.Handler.Point",visibility:!0,items:"logbookrecords",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${title}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${title}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"};G.episodelayers=[e,t],G.layers=G.episodelayers.reduce(function(e,t){return e[t.name]=t,e},{})}function B(e){var t=s.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionepisodes/map/assets/asset-edit-dlg.html",controller:"AssetEditCtrl",controllerAs:"vm",resolve:{asset:function(){return e}}});t.result.then(function(){M()})}var G=this;G.updateSize=L,G.centerOnCurrentPosition=w,G.featureAdded=O,G.featureModified=S,G.toggleMeasure=b,G.setLengthMeasure=g,G.setAreaMeasure=v,G.isLengthMeasureEnabled=y,G.isAreaMeasureEnabled=f,G.removeAffectedArea=x,G.drawPointAsset=E,G.drawPolygonAsset=P,G.drawLineAsset=k,G.isDrawAssetEnabled=R,G.toggleDrawAsset=T,G.assetAdded=F,G.cancelDrawAsset=N,G.isDrawPointAssetEnabled=_,G.isDrawPathAssetEnabled=$,G.isDrawPolygonAssetEnabled=I,G.assetSelected=z,G.getStyleForAsset=d,G.isMeasureEnabled=function(){return G.measureEnabled},c()}e.$inject=["$scope","$interval","mapExtentService","$filter","$uibModal","$q","$translate","geoService","$timeout"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodeMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episode:"=",photos:"=?"},controller:"EpisodePhotosCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/photos/episode-photos-table.html"}}angular.module("Qualigy.pages.photos").directive("episodePhotos",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){d.photos||d.episode.getPhotos().then(function(e){d.photos=d.items=e}),l(),e.$bus.subscribe({channel:"photos",topic:"item.removed",callback:function(e,t){d.photos=d.photos.filter(function(t){return t.id!=e.id})}})}function o(e){a.open({templateUrl:"photoImageModal.html",controller:["$scope","API_ENDPOINT","photo","$uibModalInstance",function(e,t,a,i){e.photo=a,e.photoFileUrl=function(e){return t+"/photos/"+e.id+"/download"},e.close=function(){i.close()}}],size:"lg",resolve:{photo:function(){return e}}})}function n(e){return i+"/photos/"+e.id+"/download"}function l(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){d.photos.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){d.photos.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function c(e){var a=t.showConfirmationDeleteMessage();a.result.then(function(t){e.remove().then(function(){d.photos=d.photos.filter(function(t){return t.id!=e.id})})})}var d=this;d.remove=c,d.photoFileUrl=n,d.openModal=o,r()}e.$inject=["$scope","modalService","$uibModal","API_ENDPOINT","$state"],angular.module("Qualigy.pages.photos").controller("EpisodePhotosCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"PollutionEpisodesSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/search/pollutionepisodes-search-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodeSearch",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){p.status=["NEW","OPEN","CLOSE","ARCHIVED"],o.getList({resource:"pollutionepisodes"}).then(function(e){p.tags=e})}function c(t){var a=n.showConfirmationDeleteMessage();a.result.then(function(a){t.remove().then(function(){p.searchResults=p.searchResults.filter(function(e){return e.id!=t.id}),e.$bus.channel("episodes").publish("item.removed",t)})})}function d(e){e&&(p.searchTerms.tags||(p.searchTerms.tags=[]),p.searchTerms.tags.indexOf(e.tag)<0?p.searchTerms.tags.push(e.tag):p.searchTerms.tags=p.searchTerms.tags.filter(function(t){return t!==e.tag}),p.doSearch())}var p=this;a("SearchCtrl",{$scope:e,vm:p,resource:r,config:{sort:"beginTime,desc"}}),p.navigate=t.navigate,p.toggleTag=d,p.removeEpisode=c,l()}e.$inject=["$scope","$rootScope","$controller","$state","$timeout","PollutionEpisodes","Tags","modalService"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodesSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"PollutionEpisodesMapSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodesmap/search/pollutionepisodes-map-search-table.html"}}angular.module("Qualigy.pages.pollutionepisodesmap").directive("pollutionepisodeMapSearch",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(e,t){e.preventDefault(),e.stopImmediatePropagation();var i=s.get("ng-security-authorization"),r=i.substring("Bearer ".length);a.open(t.visorUrl+"&token="+r,"_blank")}var l=this;i("SearchCtrl",{$scope:e,vm:l,resource:o,config:{sort:"beginTime,desc"}}),l.navigate=t.navigate,l.openVisor=n}e.$inject=["$scope","$rootScope","$window","$controller","$cookies","$state","PollutionEpisodes"],angular.module("Qualigy.pages.pollutionepisodesmap").controller("PollutionEpisodesMapSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(e){var i=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionreports/create/pollutionreport-create-dlg.html",controller:"PollutionReportCreateCtrl",controllerAs:"vm",backdrop:"static",size:e});i.result.then(function(e){a.go("pollutionreports.detail",{id:e.id})})}}],replace:!0,template:'<button type="button" class="btn btn-primary" ng-click="openCreateDialog()" title="{{\'app.pollutionreport.home.createLabel\' | translate}}"><i class="ion-plus-round"></i></button>'}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportCreateBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t){function a(){r.categories=["JOURNEYS","POIS"],r.newPollutionReport={avgDuration:"02:00"}}function i(){r.newForm.$valid&&e.post(r.newPollutionReport).then(function(e){t.close(e)})}function s(){t.dismiss("cancel")}var r=this;r.ok=i,r.cancel=s,a()}e.$inject=["PollutionReports","$uibModalInstance"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=?",onCreate:"&",onClose:"&"},transclude:!0,controller:"PollutionReportCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/pollutionreports/create-wizard/pollutionreport-create-wizard.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){d.currentLang=a.use();var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);d.model={observerName:s.getUser().fullName||s.getUser().name,pollutionEpisode:d.pollutionepisode,reportTime:t,windSpeedUnit:"m/s"},"callertransporttype,visibilitystatus,windspeedunit,observationsystem,cloudheight".split(",").forEach(function(e){i.getConfigParamsByTopic("app.pollutionreport."+e).then(function(t){d[e]=t})})}function n(){d.onClose&&d.onClose()}function l(e,t){r.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:t?t:"lg"})}function c(){d.form1.$valid&&d.form3.$valid&&t.post(d.model).then(function(t){toastr.success(a.instant("app.pollutionreport.created",t)),toastr.warning(a.instant("app.pollutionreport.continue"),null,4e3),e.$bus.channel("pollutionreports").publish("item.created",t),d.onCreate&&d.onCreate({pollutionreport:t})})}var d=this;d.ok=c,d.cancel=n,d.openModal=l,o()}e.$inject=["$scope","PollutionReports","$translate","configParamsService","AuthService","$uibModal"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportCreateWizardCtrl",e)}();!function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{pollutionepisode:"=?",onCreate:"&"},transclude:!0,controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(i){t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/pollutionreports/create-wizard-btn/pollutionreport-create-wizard.html",controller:"PollutionReportCreateWizardBtnCtrl",controllerAs:"vm",bindToController:!0,backdrop:"static",size:"lg",resolve:{pollutionepisode:function(){return e.pollutionepisode}}}).result.then(function(t){t&&(e.onCreate?e.onCreate({pollutionreport:t}):a.go("pollutionreports.detail",{id:t.id}))})}}],template:'<button type="button" class="{{class}}" ng-click="openCreateDialog()"><span data-translate="app.pollutionreport.home.createLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportCreateWizardBtn",e)}();!function(){"use strict";function e(e,t,a,i,s,r,o){function n(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);p.model={pollutionEpisode:s,reportTime:t,windSpeedUnit:"m/s"},"callertransporttype,observationsystem".split(",").forEach(function(e){o.getConfigParamsByTopic("app.pollutionreport."+e).then(function(t){p[e]=t})})}function l(){p.onClose?p.onClose():i&&i.dismiss()}function c(e,t){r.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:t?t:"lg"})}function d(){p.form1.$valid&&p.form3.$valid&&t.post(p.model).then(function(t){toastr.success(a.instant("app.pollutionreport.created",t)),e.$bus.channel("pollutionreports").publish("item.created",t),i&&i.close(t)})}var p=this;p.ok=d,p.cancel=l,p.openModal=c,n()}e.$inject=["$scope","PollutionReports","$translate","$uibModalInstance","pollutionepisode","$uibModal","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportCreateWizardBtnCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",detailForm:"=",onClose:"&"},controller:"PollutionReportDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/detail/pollutionreport-detail.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportDetail",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l){function c(){g.fileService=l,g.currentLang=o.use(),g.model=g.pollutionreport,g.status=["NEW","OPEN","CLOSE"],"callertransporttype,visibilitystatus,windspeedunit,observationsystem,cloudheight".split(",").forEach(function(e){n.getConfigParamsByTopic("app.pollutionreport."+e).then(function(t){g[e]=t})})}function d(e,t){if(e&&t&&g[e]){var a=g[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[o.use()]}}function p(e,t){r.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:t?t:"lg"})}function u(){return l.upload(g.model,"pollutionreports")}function m(e){return l.download(e,g.model,"pollutionreports")}function h(){return l.deleteFile(g.model)}var g=this;g.openModal=p,g.translateConfig=d,g.deleteFile=h,g.download=m,g.upload=u,i("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:g,topic:"pollutionreports"}),c()}e.$inject=["$scope","$state","modalService","$controller","Layers","$uibModal","$translate","configParamsService","fileService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",detailForm:"=",onClose:"&"},controller:"PollutionReportDetailMobileCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/detail-mobile/pollutionreport-detail-mobile.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportDetailMobile",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){p.model=p.pollutionreport,p.status=["NEW","OPEN","CLOSE"],p.currentLang=o.use(),"callertransporttype,visibilitystatus,windspeedunit,observationsystem,cloudheight,seastatus".split(",").forEach(function(e){n.getConfigParamsByTopic("app.pollutionreport."+e).then(function(t){p[e]=t})})}function c(e,t){if(e&&t&&p[e]){var a=p[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[o.use()]}}function d(e,t){r.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:t?t:"lg"})}var p=this;p.openModal=d,p.translateConfig=c,i("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:p,topic:"pollutionreports"}),l()}e.$inject=["$scope","$state","modalService","$controller","Layers","$uibModal","$translate","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportDetailMobileCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",action:"@",readonly:"@?",selectedLayer:"@",zoomToExtent:"@",hideLayersPanel:"=?",detailForm:"="},controller:"PollutionReportMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/pollutionreports/map/pollutionreport-map.html",link:function(e,t,a){e.$watch("attrs.action",function(t){e.action=t})}}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){A.map={action:"none"},A.features={},f(),A.readonly=e.$eval(A.readonly),A.readonly||(g(),v()),d(),c(r.current),s.$on("$stateChangeSuccess",function(e,t,a,i,s){c(t)}),e.$watch("vm.olmap",function(e){e&&T()})}function c(e){A.worklayer=null,A.map.action="none",A.model=null,A.reportlayers.forEach(function(t){e.name.includes(t.name)?t.active=!0:t.active=!1})}function d(){var e=a.defer();return a.all([p(),u(),m(),h()]).then(function(){A.olmap&&T(),e.resolve()}),e.promise}function p(){return A.pollutionreport.getSpills().then(function(e){A.features.spills=e})}function u(){return A.pollutionreport.getPollutionSources().then(function(e){A.features.pollutionSources=e})}function m(){return A.pollutionreport.getPhotos().then(function(e){A.features.photos=e})}function h(){return A.pollutionreport.getComments().then(function(e){A.features.comments=e})}function g(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a,e),/edit/.test(a)||/draw/.test(a)||/select/.test(a)?(A.map.action=a,A.model=e,A.worklayer=A.reportlayers.filter(function(e){return e.active})[0],console.log("Map worklayer:"+A.worklayer?A.worklayer.tagName:"undefined")):"deletePoints"==a?(A.map.action=a,A.model=e,A.worklayer=null,e.geometry&&(A.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):"show"!=a&&(A.map.action="none",A.model=null,A.worklayer=null)}})}function v(){A.reportlayers.forEach(function(t){e.$bus.subscribe({channel:t.name,topic:"item.*",callback:function(e,t){d()}})})}function f(){var e={name:"spills",label:n.instant("app.spill.title"),handler:"OpenLayers.Handler.Point",visibility:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326'}",items:"spills",selectStyle:"{label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 4}",temporaryStyle:"{'strokeWidth':2, 'strokeColor': '#000', 'fillColor': '#D94801','label':''}",defaultStyle:"{'strokeWidth':1, 'strokeColor': '#000', 'fillColor': '#D94801', label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",virtualStyle:"{'fillColor': '#FF0500','fillOpacity': 0.4,'strokeColor': '#FF0500', 'strokeOpacity': 1, 'strokeWidth': 1,'pointRadius': 6,'graphicName': 'cross' }",vertexStyle:"{'strokeColor': '#ff0000', 'fillColor': '#ff0000', 'strokeOpacity': 1, 'strokeWidth': 2,'pointRadius': 6, 'graphicName': 'cross'}"},t={name:"pollutionsources",label:n.instant("app.pollutionsource.title"),handler:"OpenLayers.Handler.Point",visibility:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:[ 'SVG','Canvas', 'VML']}",items:"pollutionSources",selectStyle:"{'externalGraphic': 'assets/img/ion-paintbucket-32-red.png','graphicWidth': 40, 'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/ion-paintbucket-32.png','graphicWidth': 32, 'graphicHeight': 32,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#FFFF00','strokeColor': '#FFFF00', 'externalGraphic': 'assets/img/ion-paintbucket-32.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},a={name:"photos",label:n.instant("app.photo.title"),handler:"OpenLayers.Handler.Point",visibility:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:[ 'SVG','Canvas', 'VML']}",items:"photos",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/image1.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},i={name:"comments",label:n.instant("app.comment.title"),options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326'}",handler:"OpenLayers.Handler.Point",visibility:!0,items:"comments",selectStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'fillColor':'#005A32','strokeColor': '#005A32', 'externalGraphic': 'assets/img/comment14.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"};A.reportlayers=[e,t,a,i],A.layers=A.reportlayers.reduce(function(e,t){return e[t.name]=t,e},{})}function y(e){try{return"none"==A.map.action||e.id!=A.selectedFeature.id}catch(e){return!0}}function b(e){if(A.map.action&&A.map.action.indexOf("draw")>=0){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}}function L(e){if(A.model){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");if(M.publish("feature.added",e.feature),A.model.geometry=t.toString(),"draw"==A.map.action||"edit"==A.map.action){var a=t.getBounds().getCenterLonLat();if(A.model.longitude=a.lon,A.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));A.model.area=i}}}}function w(e){if(console.log("Feature modified",e.feature),M.publish("feature.modified",e.feature),"draw"==A.map.action||"edit"==A.map.action){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326"),a=t.getBounds().getCenterLonLat();if(A.model.longitude=a.lon,A.model.latitude=a.lat,t.getGeodesicArea){var i=Number(t.getGeodesicArea().toFixed(1));A.model.area=i}A.model.geometry=t.toString()}else A.model.geometry=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()}function O(e){console.log("Feature selected",e.feature),M.publish("feature.selected",e.feature),A.selectedFeature=e.feature,"detail.show.subdetail.show"==r.current.name&&1==e.feature.layer.selectedFeatures.length&&r.go("detail.show.subdetail.show",{subdetail:e.feature.layer.name,subid:e.feature.attributes.id})}function x(){A.olmap&&t.currentLonLat()&&A.olmap.olmap.setCenter(t.currentLonLat(A.olmap.olmap.getProjection()),A.olmap.olmap.getNumZoomLevels()-2)}function S(e){M.publish("feature.unselected",e.feature),console.log("Feature unselected",e.feature),A.selectedFeature=null,e.feature.layer.selectedFeatures=[]}function C(e){A.meausre=e;var t=e.measure.toFixed(1);if("km"==e.units&&(t*=1e3),A.map.action.indexOf("measureLength")!=-1){var a=A.map.action.substring("measureLength".length);A.model[a]=parseFloat(t)}if(A.map.action.indexOf("measureArea")!=-1){var a=A.map.action.substring("measureArea".length);A.model[a]=parseFloat(t)}refreshMapAction(A.$state.current.name,A.$stateParams)}function E(){if(A.feature.geometry.components[0].removePoint(A.selectedPoint),A.feature.geometry.getVertices().length>2&&A.model){var e=A.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");A.model.geometry=e.toString(),o()}A.selectedPoint=null}function k(e){A.selectedPoint=e.feature.geometry}function P(){A.selectedPoint=null}function T(){if(i.clearExtent(),i.addToExtent(A.features.spills),i.addToExtent(A.features.pollutionSources),i.addToExtent(A.features.photos),i.addToExtent(A.features.comments),A.olmap&&A.olmap.olmap)if(i.maxExtent()){var e=A.olmap.olmap.getProjection();A.olmap.olmap.zoomToExtent(i.maxExtent(e))}else N()}function N(){A.olmap&&t.currentLonLat()&&A.olmap.olmap.setCenter(t.currentLonLat(A.olmap.olmap.getProjection()),A.olmap.olmap.getNumZoomLevels()-1)}var A=this,M=e.$bus.channel("map");A.mapExtentService=i,A.geoService=t,A.filterFeature=y,A.beforeFeatureAdded=b,A.featureAdded=L,A.featureModified=w,A.featureSelected=O,A.featureUnselected=S,A.measureAction=C,A.centerOnCurrentPosition=x,A.confirmRemoveSelectedPoint=k,A.cancelRemoveSelectedPoint=P,A.removeSelectedPoint=E,l()}e.$inject=["$scope","geoService","$q","mapExtentService","$rootScope","$state","$timeout","$translate"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"PollutionReportsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/search/pollutionreports-search.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportSearch",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){n.searchTerms={reportTime:{startDate:moment().add(-1,"year").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)}}}function o(t){var i=a.showConfirmationDeleteMessage();i.result.then(function(a){t.remove().then(function(){n.searchResults=n.searchResults.filter(function(e){return e.id!=t.id}),e.$bus.channel("reports").publish("item.removed",t)})})}var n=this;t("SearchCtrl",{$scope:e,vm:n,resource:s,config:{sort:"reportTime,desc"}}),n.removeReport=o,r()}e.$inject=["$scope","$controller","modalService","$state","PollutionReports"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportsSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"="},controller:"PollutionReportPrintCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/print/pollutionreport-print.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportPrint",e)}(),function(){"use strict";function e(e,t,a){function i(){r.model=r.pollutionreport,r.currentLang=t.use(),"spillaparience,spillaspect,pollutantorigin".split(",").forEach(function(e){a.getConfigParamsByTopic("app.spill."+e).then(function(t){r[e]=t})}),"callertransporttype,visibilitystatus,windspeedunit,observationsystem,cloudheight".split(",").forEach(function(e){a.getConfigParamsByTopic("app.pollutionreport."+e).then(function(t){r[e]=t})}),"sourcetype,pollutioncause".split(",").forEach(function(e){a.getConfigParamsByTopic("app.pollutionsource."+e).then(function(t){r[e]=t})})}function s(e,a){if(e&&a&&r[e]){var i=r[e].filter(function(e){return e.value==a});if(i&&i[0])return i[0].bundle[t.use()]}}var r=this;r.translateConfig=s,i()}e.$inject=["$scope","$translate","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionReportPrintCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"="},controller:"ReportSignedDocumentCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/signeddocument/report-signeddocument.html"}}angular.module("Qualigy.pages.pollutionreports").directive("reportSigneddocument",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(){d.model=d.report,d.fileService=s,d.allowedFileTypes=["image/png","image/gif","image/jpeg","application/pdf",".csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"],i.$on("files_selected",function(e,t){t[0]&&(s.selectFile(t[0],d.model),s.upload(d.model,"pollutionreports"))})}function l(e){return s.download(e,d.model,"pollutionreports")}function c(){return s.deleteFile(d.model)}var d=this;d.deleteFile=c,d.download=l,n()}e.$inject=["$http","$navigator","$translate","$scope","fileService","$timeout","modalService"],angular.module("Qualigy.pages.pollutionreports").controller("ReportSignedDocumentCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",detailForm:"="},controller:"PollutionEpisodeDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/pub-detail/pollutionepisode-pub-detail.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("pollutionepisodePubDetail",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){l.model=l.pollutionepisode,l.status=["NEW","OPEN","CLOSE"],n=e.$bus.channel("map"),n.publish("action.select",l.model),l.map={action:"none"},l.$state=t,o()}function o(){e.$bus.subscribe({channel:"pollutionepisodes",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("pollutionepisodes: "+t.topic),"edit"==a?(l.model.affectedArea?l.map.action="edit":l.map.action="draw",n.publish("action."+l.map.action,l.model)):"show"==a&&(n.publish("action.select",l.model),l.map.action="select")}})}var n,l=this;r()}e.$inject=["$scope","$state","modalService","$controller","Layers"],angular.module("Qualigy.pages.pollutionepisodes").controller("PollutionEpisodePubDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(e){var i=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/scatreports/create/scatreport-create-dlg.html",controller:"ScatReportCreateCtrl",controllerAs:"vm",backdrop:"static",size:e});i.result.then(function(e){a.go("scatreports.detail",{id:e.id})})}}],replace:!0,template:'<button type="button" class="btn btn-primary btn-with-icon" ng-title="{{\'app.scatreport.home.createLabel\' | translate}}" ng-click="openCreateDialog()"><i class="ion-plus-circled"></i></button>'}}angular.module("Qualigy.pages.scatreports").directive("scatreportCreateBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t){function a(){r.categories=["JOURNEYS","POIS"],r.newScatReport={avgDuration:"02:00"}}function i(){r.newForm.$valid&&e.post(r.newScatReport).then(function(e){t.close(e)})}function s(){t.dismiss("cancel")}var r=this;r.ok=i,r.cancel=s,a()}e.$inject=["ScatReports","$uibModalInstance"],angular.module("Qualigy.pages.scatreports").controller("ScatReportCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=?",onCreate:"&",onClose:"&"},transclude:!0,controller:"ScatReportCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/create-wizard/scatreport-create-wizard.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);m.model={reportTime:t,windSpeedUnit:"m/s",segment:{}},m.newInstance={},m.map={action:"edit"}}function l(){m.onClose&&m.onClose()}function c(t){t&&m.map.action!==t||(t="none"),m.map.action=t,e.$bus.channel("map").publish("action."+t,m.model)}function d(){if(m.form1.$valid&&m.form3.$valid)return o.post(m.model.segment).then(function(s){return m.model.segment=s,a.post(m.model).then(function(a){toastr.success(i.instant("app.scatreport.created",a)),e.$bus.channel("scatreports").publish("item.created",a),m.onCreate?m.onCreate({scatreport:a}):t.go("scatreports.detail.shorelinetypes",{id:a.id})})})}function p(){m.newInstance&&(m.model.contacts||(m.model.contacts=[]),m.model.contacts.push(m.newInstance),angular.element("#icontactName").focus()),m.newInstance={}}function u(e){var t=s.showConfirmationDeleteMessage();t.result.then(function(t){m.model.contacts.remove(e,function(t){return t==e})})}function c(e){e?m.map.action=e:m.map.action=m.map.action&&"deletePoints"!=m.map.action?null:"drawsegments"}var m=this;m.ok=d,m.cancel=l,m.addContact=p,m.removeContact=u,m.toggleMapAction=c,n()}e.$inject=["$scope","$state","ScatReports","$translate","modalService","geoService","Segments"],angular.module("Qualigy.pages.scatreports").controller("ScatReportCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{pollutionepisode:"=?",onCreate:"&"},transclude:!0,controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(e){t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/scatreports/create-wizard-btn/scatreport-create-wizard-dlg.html",controller:"ScatReportCreateWizardBtnCtrl",controllerAs:"vm",backdrop:"static",bindToController:!0,size:"lg"}).result.then(function(e){e&&a.go("scatreports.detail",{id:e.id})})}}],template:'<button type="button" class="{{class}}" ng-click="openCreateDialog()"><span data-translate="app.scatreport.home.createLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.scatreports").directive("scatreportCreateWizardBtn",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o){function n(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);u.model={reportTime:t,windSpeedUnit:"m/s",segment:{}},u.newInstance={},u.map={action:"edit"}}function l(){u.onClose&&u.onClose()}function c(){if(u.form1.$valid&&u.form3.$valid)return o.post(u.model.segment).then(function(s){return u.model.segment=s,a.post(u.model).then(function(a){toastr.success(i.instant("app.scatreport.created",a)),e.$bus.channel("scatreports").publish("item.created",a),u.onCreate?u.onCreate({scatreport:a}):t.go("scatreports.detail",{id:a.id})})})}function d(){u.newInstance&&(u.model.contacts||(u.model.contacts=[]),u.model.contacts.push(u.newInstance),angular.element("#icontactName").focus()),u.newInstance={}}function p(e){var t=s.showConfirmationDeleteMessage();t.result.then(function(t){u.model.contacts.remove(e,function(t){return t==e})})}var u=this;u.ok=c,u.cancel=l,u.addContact=d,u.removeContact=p,n()}e.$inject=["$scope","$state","ScatReports","$translate","modalService","geoService","Segments"],angular.module("Qualigy.pages.scatreports").controller("ScatReportCreateWizardBtnCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",detailForm:"=",onClose:"&"},controller:"ScatReportDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/detail/scatreport-detail.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportDetail",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){d.model=d.scatreport,c()}function o(e){var t=[],a=[],i=e.find("svg");i.each(function(e,i){var s=i.parentNode,r=s.innerHTML,o=document.createElement("canvas");canvg(o,r),t.push({parent:s,child:i}),s.removeChild(i),a.push({parent:s,child:o}),s.appendChild(o)})}function n(){if(OpenLayers.CANVAS_SUPPORTED){var e=document.createElement("canvas"),a=e.getContext("2d");a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1;var i=d.olmap.olmap,r=angular.element(".gm-style");r[0]?(o(r),html2canvas(r[0],{useCORS:!0,allowTaint:!0,onrendered:function(i){e.width=i.width,e.height=i.height,a.drawImage(i,0,0),s.mapCapture=i,t.go("detail.show.print")}})):(o(angular.element(i.viewPortDiv)),html2canvas(i.viewPortDiv,{logging:!1,useCORS:!0,onrendered:function(i){e.width=i.width,e.height=i.height,a.drawImage(i,0,0),MapCaptureService.mapCapture=i,t.go("detail.show.print")}}))}else{OpenLayers.Util.getElement("unsupported");$window.alert("Your browser does not support canvas, map cannot be printed!")}}function l(t){t&&d.map.action!==t||(t="none"),e.$bus.channel("map").publish("action."+t,d.model)}function c(){d.map={action:"none"};e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){d.map.action=t.topic.split(".")[1]||null}})}var d=this;d.exportMap=n,d.toggleMapAction=l,i("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:d,topic:"scatreports"}),r()}e.$inject=["$scope","$state","modalService","$controller","mapCaptureService"],angular.module("Qualigy.pages.scatreports").controller("ScatReportDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",detailForm:"=",onClose:"&"},controller:"ScatReportLocalFeaturesCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/localfeatures/scatreport-localfeatures.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportLocalfeatures",e)}(),function(){"use strict";function e(e){function t(){r.model=r.scatreport,r.localFeatures={},e.$watch("vm.model.localFeatures",function(e){s(e)},!0)}function a(e){e&&(e.oiled=!e.oiled)}function i(e){if(r.model.localFeatures||(r.model.localFeatures=[]),r.localFeatures[e])r.model.localFeatures=r.model.localFeatures.filter(function(t){return t.localFeature!=e});else{var t={localFeature:e};r.model.localFeatures.push(t)}}function s(e){e&&(r.localFeatures=e.reduce(function(e,t){r[t.localFeature]=!0;var a=t.localFeature;return e[a]=t,e},{}))}var r=this;r.toggleOiled=a,r.toggleSelect=i,t()}e.$inject=["$scope"],angular.module("Qualigy.pages.scatreports").controller("ScatReportLocalFeaturesCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",action:"@",selectedLayer:"@",zoomToExtent:"@",hideLayersPanel:"=?",detailForm:"="},controller:"ScatReportMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/map/scatreport-map.html",link:function(e,t,a){e.$watch("attrs.action",function(t){e.action=t})}}}angular.module("Qualigy.pages.scatreports").directive("scatreportMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){R.map={action:"none"},R.features={},b(),f(),y(),u(),p(r.current),s.$on("$stateChangeSuccess",function(e,t,a,i,s){p(t)}),e.$watch("vm.olmap",function(e){e&&A()}),R.scatreport.segment||(R.scatreport.segment={}),e.$watch("vm.scatreport.segment",function(e){c(e),F()})}function c(e){if(e&&e.geometry){var t=(new OpenLayers.Format.WKT).read(e.geometry);if(t){var a=t.geometry.getVertices(!0);e.startPosition=a[0],e.endPosition=a[1];var i=e.startPosition.clone().transform("EPSG:900913","EPSG:4326"),s=i.getBounds().getCenterLonLat();e.startLon=s.lon,e.startLat=s.lat;var r=e.endPosition.clone().transform("EPSG:900913","EPSG:4326"),o=r.getBounds().getCenterLonLat();e.startLon=o.lon,e.startLat=o.lat}}}function d(){R.worklayer=null,R.map.action="none",R.model=null}function p(e){d(),R.reportlayers.forEach(function(t){e.name.includes("."+t.name)?t.active=!0:t.active=!1})}function u(){var e=a.defer();return a.all([m(),h(),g(),v()]).then(function(){R.features.segments=[R.scatreport.segment],R.olmap&&A(),e.resolve()}),e.promise}function m(){if(R.scatreport.getSurfaceOilConditions)return R.scatreport.getSurfaceOilConditions().then(function(e){R.features.surfaceOilConditions=e})}function h(){if(R.scatreport.getSubsurfaceOilConditions)return R.scatreport.getSubsurfaceOilConditions().then(function(e){R.features.subsurfaceOilConditions=e})}function g(){if(R.scatreport.getPhotos)return R.scatreport.getPhotos().then(function(e){R.features.photos=e})}function v(){if(R.scatreport.getComments)return R.scatreport.getComments().then(function(e){R.features.comments=e})}function f(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("map.action: "+a,e),/edit/.test(a)||/draw/.test(a)||/select/.test(a)?(R.map.action=a,R.model=e,R.worklayer=R.reportlayers.filter(function(e){return e.active})[0]):/measure/.test(a)?(R.map.action=a,R.worklayer=null):"deletePoints"==a?(R.map.action=a,R.model=e,R.worklayer=null,e.geometry&&(R.feature=(new OpenLayers.Format.WKT).read(e.geometry.toString()))):(R.map.action="none",R.model=null,R.worklayer=null)}})}function y(){R.reportlayers.forEach(function(t){e.$bus.subscribe({channel:t.name,topic:"item.*",callback:function(e,t){u()}})}),e.$bus.subscribe({channel:"scatreports",topic:"item.*",callback:function(e,t){"item.edit"==t.topic?(R.map.action=e.segment&&!e.segment.geometry?"draw":"edit",R.model=e.segment||{},R.worklayer=R.layers.segment):d()}})}function b(){var e={name:"surfaceoilconditions",label:n.instant("app.surfaceoilcondition.title"),handler:"OpenLayers.Handler.Polygon",visibility:!0,legend:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326', renderers:['Canvas', 'SVG', 'VML']}",items:"surfaceOilConditions",selectStyle:"{'label' :'${zoneId}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",defaultStyle:"{'strokeWidth':2, 'strokeColor': '#FE9929', 'fillColor': '#FE9929', 'label' :'${zoneId}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",virtualStyle:"{'fillColor': '#FF0500','fillOpacity': 0.4,'strokeColor': '#FF0500', 'strokeOpacity': 1, 'strokeWidth': 1,'pointRadius': 6,'graphicName': 'cross' }",vertexStyle:"{'strokeColor': '#ff0000', 'fillColor': '#ff0000', 'strokeOpacity': 1, 'strokeWidth': 2,'pointRadius': 6, 'graphicName': 'cross'}"},t={name:"othersubstances",label:n.instant("app.othersubstance.title"),handler:"OpenLayers.Handler.Polygon",visibility:!0,legend:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326', renderers:['Canvas', 'SVG', 'VML']}",items:"otherSubstances",selectStyle:"{'label' :'${zoneId}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",defaultStyle:"{'strokeWidth':2, 'strokeColor': '#FE8909', 'fillColor': '#FE8909', 'label' :'${zoneId}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",virtualStyle:"{'fillColor': '#FF8500','fillOpacity': 0.4,'strokeColor': '#FF8520', 'strokeOpacity': 1, 'strokeWidth': 1,'pointRadius': 6,'graphicName': 'cross' }",vertexStyle:"{'strokeColor': '#ff0000', 'fillColor': '#ff0000', 'strokeOpacity': 1, 'strokeWidth': 2,'pointRadius': 6, 'graphicName': 'cross'}"},a={name:"subsurfaceoilconditions",label:n.instant("app.subsurfaceoilcondition.title"),handler:"OpenLayers.Handler.Point",visibility:!0,legend:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:['Canvas', 'SVG', 'VML']}",items:"subsurfaceOilConditions",selectStyle:"{label:'${pitId}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'strokeWidth':2, 'strokeColor': '#0FA000', 'fillColor': '#FE9929', 'pointRadius': 6 }",defaultStyle:"{'strokeWidth':2, 'strokeColor': '#000', 'fillColor': '#FE9929', 'pointRadius': 6 ,label:'${pitId}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 4}"},i={name:"photos",label:n.instant("app.photo.title"),handler:"OpenLayers.Handler.Point",legend:!0,visibility:!0,options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:['SVG','Canvas', 'VML']}",items:"photos",selectStyle:"{'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/image1.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity':0.8}",defaultStyle:"{'externalGraphic': 'assets/img/image1.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},s={name:"comments",label:n.instant("app.comment.title"),options:"{ transparent:'true', opacity: '0.90', projection:'EPSG:4326',renderers:[ 'SVG','Canvas', 'VML']}",handler:"OpenLayers.Handler.Point",legend:!0,visibility:!0,items:"comments",selectStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",temporaryStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 40,'graphicHeight': 40,'fillOpacity': 0.8}",defaultStyle:"{'externalGraphic': 'assets/img/comment14.png','graphicWidth': 32,'graphicHeight': 32,'fillOpacity': 1, label:'${code}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '18','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}"},r={name:"segment",label:"Segment",handler:"OpenLayers.Handler.Path",visibility:!0,legend:!1,options:"{transparent:'true', opacity: '0.80' , visibility:'true', strategy: BBOX , isBaseLayer:false }",items:"segment",selectStyle:"{'label' :'${zoneId}', 'fontColor': 'blue','fontSize': '16px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",defaultStyle:"{'strokeWidth':2, 'strokeColor':'#00F', 'fillColor': '#FE9929', 'label' :'${zoneId}', 'fontColor': 'blue','fontSize': '12px','fontWeight': 'bold','labelAlign': 'lc', 'labelXOffset': '14','labelYOffset': '0','labelOutlineColor': 'white', 'labelOutlineWidth': 3}",virtualStyle:"{'fillColor': '#FF0500','fillOpacity': 0.4,'strokeColor': '#FF0500', 'strokeOpacity': 1, 'strokeWidth': 1,'pointRadius': 6,'graphicName': 'cross' }",vertexStyle:"{'strokeColor': '#ff0000', 'fillColor': '#ff0000', 'strokeOpacity': 1, 'strokeWidth': 2,'pointRadius': 6, 'graphicName': 'cross'}"};R.reportlayers=[e,a,t,i,s,r],R.layers=R.reportlayers.reduce(function(e,t){return e[t.name]=t,e},{})}function L(e){try{return"none"==R.map.action||e.id!=R.selectedFeature.id}catch(e){return!0}}function w(e){if(R.map.action&&R.map.action.indexOf("draw")>=0){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}}function O(e){if(R.model){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");if(_.publish("feature.added",e.feature),R.model.geometry=t.toString(),"draw"==R.map.action||"edit"==R.map.action){var a=t.getBounds().getCenterLonLat();R.model.longitude=a.lon,R.model.latitude=a.lat;try{var i=Number(t.getGeodesicArea().toFixed(1));R.model.area=i}catch(e){R.model.area=null}}}}function x(e){if(console.log("Feature modified",e.feature),_.publish("feature.modified",e.feature),"draw"==R.map.action||"edit"==R.map.action){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326"),a=t.getBounds().getCenterLonLat();R.model.longitude=a.lon,R.model.latitude=a.lat;try{var i=Number(t.getGeodesicArea().toFixed(1));R.model.area=i}catch(e){R.model.area=null}R.model.geometry=t.toString()}else R.model.geometry=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326").toString()}function S(e){console.log("Feature selected",e.feature),_.publish("feature.selected",e.feature),R.selectedFeature=e.feature,"detail.show.subdetail.show"==r.current.name&&1==e.feature.layer.selectedFeatures.length&&r.go("detail.show.subdetail.show",{subdetail:e.feature.layer.name,subid:e.feature.attributes.id})}function C(){R.olmap&&t.currentLonLat()&&R.olmap.olmap.setCenter(t.currentLonLat(R.olmap.olmap.getProjection()),R.olmap.olmap.getNumZoomLevels()-1)}function E(e){_.publish("feature.unselected",e.feature),console.log("Feature unselected",e.feature),R.selectedFeature=null,e.feature.layer.selectedFeatures=[]}function k(e){R.meausre=e;var t=e.measure.toFixed(1);if("km"==e.units&&(t*=1e3),R.map.action.indexOf("measure")!=-1){var a=R.map.action.substring("measure".length);R.scatreport.segment[a]=parseFloat(t)}_.publish("action.none")}function P(){if(R.feature.geometry.components[0].removePoint(R.selectedPoint),R.feature.geometry.getVertices().length>2&&R.model){var e=R.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");R.model.geometry=e.toString(),o()}R.selectedPoint=null}function T(e){R.selectedPoint=e.feature.geometry}function N(){R.selectedPoint=null}function A(){if(i.clearExtent(),i.addToExtent(R.features.surfaceOilConditions),i.addToExtent(R.features.subsurfaceOilConditions),i.addToExtent(R.features.photos),i.addToExtent(R.features.comments),R.scatreport.segment.geometry&&i.addToExtent([R.scatreport.segment]),R.olmap&&R.olmap.olmap)if(i.maxExtent()){var e=R.olmap.olmap.getProjection();R.olmap.olmap.zoomToExtent(i.maxExtent(e))}else M()}function M(){R.olmap&&t.currentLonLat()&&R.olmap.olmap.setCenter(t.currentLonLat(R.olmap.olmap.getProjection()),R.olmap.olmap.getNumZoomLevels()-1)}function F(){if(R.scatreport.segment&&R.scatreport.segment.geometry){var e=(new OpenLayers.Format.WKT).read(R.scatreport.segment.geometry);if(e){var t=e.geometry.components;R.scatreport.segment.startPosition=t[0].toString(),R.scatreport.segment.endPosition=t[t.length-1].toString()}}}var R=this,_=e.$bus.channel("map");R.mapExtentService=i,R.geoService=t,R.filterFeature=L,R.beforeFeatureAdded=w,R.featureAdded=O,R.featureModified=x,R.featureSelected=S,R.featureUnselected=E,R.measureAction=k,R.centerOnCurrentPosition=C,R.confirmRemoveSelectedPoint=T,R.cancelRemoveSelectedPoint=N,R.removeSelectedPoint=P,l()}e.$inject=["$scope","geoService","$q","mapExtentService","$rootScope","$state","$timeout","$translate"],angular.module("Qualigy.pages.scatreports").controller("ScatReportMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"="},controller:"ScatReportPrintCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/print/scatreport-print.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportPrint",e)}(),function(){"use strict";function e(e,t,a,i){function s(){l.model=l.scatreport,l.model.segment&&l.model.segment.geometry&&(l.segment=(new OpenLayers.Format.WKT).read(l.model.segment.geometry),l.segment.geometry.transform("EPSG:4326","EPSG:900913")),l.model.startPosition&&(l.startPosition=(new OpenLayers.Format.WKT).read(l.model.segment.startPosition),l.startPosition.geometry.transform("EPSG:4326","EPSG:900913")),l.model.endPosition&&(l.endPosition=(new OpenLayers.Format.WKT).read(l.model.segment.endPosition),l.endPosition.geometry.transform("EPSG:4326","EPSG:900913")),l.localFeatures=n(l.model.localFeatures),l.shorelineTypes=o(l.model.shorelineTypes),a.addPart("scatreport"),t.refresh(),e.$watch(function(){return i.mapCapture},function(e){angular.element("#mapCanvas").append(e)})}function r(){var e=t.use()||t.storage().get(t.storageKey())||t.preferredLanguage();return e}function o(e){return e&&e.length?e.reduce(function(e,t){l[t.shorelineType]=!0;var a=t.shorelineType;return e[a]=t,e},{}):{}}function n(e){return e&&e.length?e.reduce(function(e,t){l[t.localFeature]=!0;var a=t.localFeature;return e[a]=t,e},{}):{}}var l=this;l.activeLanguage=r,s()}e.$inject=["$scope","$translate","$translatePartialLoader","mapCaptureService"],angular.module("Qualigy.pages.scatreports").controller("ScatReportPrintCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"ScatReportsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/search/scatreports-search.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportSearch",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){n.searchTerms={reportTime:{startDate:moment().add(-1,"year").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)}}}function o(t){var a=s.showConfirmationDeleteMessage();a.result.then(function(a){t.remove().then(function(){n.searchResults=n.searchResults.filter(function(e){return e.id!=t.id}),e.$bus.channel("reports").publish("item.removed",t)})})}var n=this;t("SearchCtrl",{$scope:e,vm:n,resource:i,config:{sort:"reportTime,desc"}}),n.removeReport=o,r()}e.$inject=["$scope","$controller","$state","ScatReports","modalService"],angular.module("Qualigy.pages.scatreports").controller("ScatReportsSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{clinte:"=?",onCreate:"&",userAuthorities:"@?",userRoles:"@?",cssClass:"@"},link:function(e,t,a){a.cssClass||(e.cssClass="btn btn-primary")},controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(i){var s=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/userlogins/create/userlogin-create-dlg.html",controller:"UserLoginCreateCtrl",controllerAs:"vm",size:i,backdrop:"static",resolve:{model:function(){return{cliente:e.cliente}},userAuthorities:function(){return e.userAuthorities?e.userAuthorities.split(","):null},userRoles:function(){return e.userRoles?e.userRoles.split(","):null}}});s.result.then(function(t){e.onCreate?e.onCreate({userlogin:t}):a.go("userlogins.detail",{id:t.id})})}}],replace:!0,template:'<button type="button" class="{{cssClass}}" title="{{\'app.userlogin.cmd.create\' | translate}}" ng-click="openCreateDialog()"><i class="ion-plus-round"></i></button>'}}angular.module("Qualigy.pages.userlogins").directive("userloginCreateBtn",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l){function c(e){g.userAuthoritiesSettings={displayProp:"label",idProperty:"name",smartButtonTextConverter:function(e,t){return t.label},smartButtonMaxItems:6,showCheckAll:!1,showUncheckAll:!1},g.userAuthoritiesOptions=[{name:"ROLE_POLREP",label:i.instant("app.userlogin.userAuthority.ROLE_POLREP")},{name:"ROLE_POLLUTION_EPISODE",label:i.instant("app.userlogin.userAuthority.ROLE_POLLUTION_EPISODE")},{name:"ROLE_PANEL",label:i.instant("app.userlogin.userAuthority.ROLE_PANEL")},{name:"ROLE_LAYERGROUP",label:i.instant("app.userlogin.userAuthority.ROLE_LAYERGROUP")},{name:"ROLE_GISLAYOUT",label:i.instant("app.userlogin.userAuthority.ROLE_GISLAYOUT")},{name:"ROLE_LAYER",label:i.instant("app.userlogin.userAuthority.ROLE_LAYER")},{name:"ROLE_USERLOGIN",label:i.instant("app.userlogin.userAuthority.ROLE_USERLOGIN")},{name:"ROLE_POLLUTION_EPISODE_MAP",label:i.instant("app.userlogin.userAuthority.ROLE_POLLUTION_EPISODE_MAP")},{name:"ROLE_LOGBOOKRECORD",label:i.instant("app.userlogin.userAuthority.ROLE_LOGBOOKRECORD")},{name:"ROLE_BITACORE",label:i.instant("app.userlogin.userAuthority.ROLE_BITACORE")},{name:"ROLE_SCAT_MANAGER",label:i.instant("app.userlogin.userAuthority.ROLE_SCAT_MANAGER")},{name:"ROLE_SCAT_INSPECTOR",label:i.instant("app.userlogin.userAuthority.ROLE_SCAT_INSPECTOR")},{name:"",label:""}].sort(function(e,t){return e.label>t.label?1:-1}),e&&(g.userAuthoritiesOptions=g.userAuthoritiesOptions.filter(function(t){return e.indexOf(t.name)!=-1}),g.model.userAuthorities=g.userAuthoritiesOptions)}function d(e){return l.getList().then(function(t){g.userRoles=t,e&&(g.userRoles=g.userRoles.filter(function(t){return e.indexOf(t.id)!=-1}),g.model.userRole=g.userRoles[0])})}function p(){g.model||(g.model={}),c(n),d(o),g.model.enabled=!0}function u(){g.duplicateEmail=!1,g.createForm.inputEmail.$valid&&e.getList({userEmail:g.model.userEmail}).then(function(e){g.duplicateEmail=e.length>0})}function m(){g.duplicateUser=!1,e.getList({usernameorfullname:g.model.username}).then(function(e){g.duplicateUser=e.length>0})}function h(e){}var g=this;g.model=r,g.buscarClientes=h,g.checkUniqueEmail=u,g.checkUniqueUser=m,t("BaseCreateCtrl",{vm:this,$state:a,Resource:e,$uibModalInstance:s}),p()}e.$inject=["UserLogins","$controller","$state","$translate","$uibModalInstance","model","userRoles","userAuthorities","UserRoles"],angular.module("Qualigy.pages.userlogins").controller("UserLoginCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{userlogin:"="},controller:"UserLoginDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/userlogins/detail/userlogin-detail.html"}}angular.module("Qualigy.pages.userlogins").directive("userloginDetail",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){n.model=n.userlogin,n.userAuthoritiesSettings={displayProp:"label",idProperty:"name",smartButtonTextConverter:function(e,t){return t.label},smartButtonMaxItems:6,showCheckAll:!1,showUncheckAll:!1},n.userAuthoritiesOptions=[{name:"ROLE_POLREP",label:a.instant("app.userlogin.userAuthority.ROLE_POLREP")},{name:"ROLE_POLLUTION_EPISODE",label:a.instant("app.userlogin.userAuthority.ROLE_POLLUTION_EPISODE")},{name:"ROLE_GISLAYOUT",label:a.instant("app.userlogin.userAuthority.ROLE_GISLAYOUT")},{name:"ROLE_POLLUTION_EPISODE_MAP",label:a.instant("app.userlogin.userAuthority.ROLE_POLLUTION_EPISODE_MAP")},{name:"ROLE_LOGBOOKRECORD",label:a.instant("app.userlogin.userAuthority.ROLE_LOGBOOKRECORD")},{name:"ROLE_BITACORE",label:a.instant("app.userlogin.userAuthority.ROLE_BITACORE")},{name:"ROLE_SCAT_MANAGER",label:a.instant("app.userlogin.userAuthority.ROLE_SCAT_MANAGER")},{name:"ROLE_SCAT_INSPECTOR",label:a.instant("app.userlogin.userAuthority.ROLE_SCAT_INSPECTOR")},{name:"",label:""}].sort(function(e,t){return e.label>t.label?1:-1}),n.userAuthorities=n.model.userAuthorities.map(function(e){return a.instant("app.userlogin.userAuthority."+e.name)}),e.$watch("vm.model.userAuthorities",function(){n.userAuthorities=n.model.userAuthorities.map(function(e){return a.instant("app.userlogin.userAuthority."+e.name)})}),s.getList({sort:"role,asc"}).then(function(e){n.userRoles=e})}function o(e){}var n=this;n.buscarClientes=o,t("BaseEditableDetailCtrl",{$scope:e,modalService:i,vm:n,topic:"userlogins"}),r()}e.$inject=["$scope","$controller","$translate","modalService","UserRoles"],angular.module("Qualigy.pages.userlogins").controller("UserLoginDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{searchTerms:"=?",searchResults:"=?"},controller:"UserLoginsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/userlogins/search/userlogins-search.html"}}angular.module("Qualigy.pages.userlogins").directive("userloginsSearch",e)}(),function(){"use strict";function e(e,t,a,i){function s(){r.searchTerms.enabled=!0,r.doSearch(),e.$watch("vm.searchTerms.enabled",function(e,t){e?r.searchTerms.enabled=!0:delete r.searchTerms.enabled,r.doSearch()})}var r=this;t("SearchCtrl",{$scope:e,vm:r,resource:a,config:{sort:"username,asc"}}),s()}e.$inject=["$scope","$controller","UserLogins","$state"],angular.module("Qualigy.pages.userlogins").controller("UserLoginsSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{user:"="},controller:["$scope","$uibModal",function(e,t){e.openCreateDialog=function(a){t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/theme/components/accountSettings/account-settings.html",controller:"AccountSettingsCtrl",controllerAs:"vm",backdrop:"static",resolve:{user:function(){return e.user}},size:a})}}],replace:!0,template:'<a href="" ng-click="openCreateDialog()" ><i class="fa fa-cog"></i>Conta</a>'}}angular.module("Qualigy.theme.components").directive("accountSettings",e)}(),function(){"use strict";function e(e,t,a,i){function s(){n.user=i}function r(){n.newForm.$valid&&n.password==n.confirmPassword&&(n.isSubmit=!0,n.error=null,a.changePassword(n.password).then(function(e){n.isSubmit=!1,toastr.success("O contrasinal foi mudado con Ã©xito.","Contrasinal mudado"),t.close(e)},function(e){n.isSubmit=!1,n.error=e.data}))}function o(){t.dismiss("cancel")}var n=this;n.save=r,n.cancel=o,s()}e.$inject=["$scope","$uibModalInstance","AuthService","user"],angular.module("Qualigy.theme.components").controller("AccountSettingsCtrl",e)}(),function(){"use strict";function e(e){function t(){a.password!==a.confirmPassword?(a.error=null,a.success=null,a.doNotMatch="ERROR"):(a.doNotMatch=null,Auth.changePassword(a.password).then(function(){a.error=null,a.success="OK"}).catch(function(){a.success=null,a.error="ERROR"}))}var a=this;a.changePassword=t,a.doNotMatch=null,a.error=null,a.success=null,Principal.identity().then(function(e){a.account=e})}e.$inject=["AuthService"],angular.module("Qualigy.pages.account").controller("PasswordCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/theme/components/backTop/backTop.html",controller:function(){$("#backTop").backTop({position:200,speed:100})}}}angular.module("Qualigy.theme.components").directive("backTop",e)}(),function(){"use strict";function e(e,t){return angular.extend({},e,{template:function(a,i){var s='<div  class="panel '+(t.theme.blur?"panel-blur ":"")+(i.baPanelClass||"");return s+="false"===i.baPanelAnimate?'" ':' full-invisible" zoom-in ',s+=(t.theme.blur?"ba-panel-blur":"")+">",s+=e.template(a,i),s+="</div>"}})}e.$inject=["baPanel","baConfig"],angular.module("Qualigy.theme").directive("baPanel",e)}(),function(){"use strict";function e(){return{restrict:"A",transclude:!0,template:function(e,t){if(t.baPanelTitle){var a='<div class="panel-heading clearfix"><h3 class="panel-title">'+t.baPanelTitle+"</h3></div>";return a+'<div class="panel-body" ng-transclude> </div>'}return'<div class="panel-body" ng-transclude></div>'}}}angular.module("Qualigy.theme").factory("baPanel",e)}(),function(){"use strict";function e(e,t,a){var i;return e.bodyBgLoad().then(function(){i=e.getBodyBgImageSizes()}),t.addEventListener("resize",function(){i=e.getBodyBgImageSizes()}),{restrict:"A",link:function(s,r){function o(){i&&r.css({backgroundSize:Math.round(i.width)+"px "+Math.round(i.height)+"px",backgroundPosition:Math.floor(i.positionX)+"px "+Math.floor(i.positionY)+"px"})}a.$isMobile||(e.bodyBgLoad().then(function(){
setTimeout(o)}),t.addEventListener("resize",o),s.$on("$destroy",function(){t.removeEventListener("resize",o)}))}}}e.$inject=["baPanelBlurHelper","$window","$rootScope"],angular.module("Qualigy.theme").directive("baPanelBlur",e)}(),function(){"use strict";function e(e){var t=e.defer(),a=getComputedStyle(document.body,":before"),i=new Image;i.src=a.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2"),i.onerror=function(){t.reject()},i.onload=function(){t.resolve()},this.bodyBgLoad=function(){return t.promise},this.getBodyBgImageSizes=function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;if(!(e<=640)){var a,s,r=i.height/i.width,o=t/e;return o>r?(a=t,s=t/r):(s=e,a=e*r),{width:s,height:a,positionX:(e-s)/2,positionY:(t-a)/2}}}}e.$inject=["$q"],angular.module("Qualigy.theme").service("baPanelBlurHelper",e)}(),function(){"use strict";function e(e){return angular.extend({},e,{link:function(e,t,a){t.addClass("panel panel-white"),a.baPanelClass&&t.addClass(a.baPanelClass)}})}e.$inject=["baPanel"],angular.module("Qualigy.theme").directive("baPanelSelf",e)}(),function(){"use strict";function e(e,t,a,i){var s=$(window),r=120;return{restrict:"E",templateUrl:"app/theme/components/baSidebar/ba-sidebar.html",controller:"BaSidebarCtrl",link:function(i,o){function n(i){a.isDescendant(o[0],i.target)||i.originalEvent.$sidebarEventProcessed||t.isMenuCollapsed()||!t.canSidebarBeHidden()||(i.originalEvent.$sidebarEventProcessed=!0,e(function(){t.setMenuCollapsed(!0)},10))}function l(){var e=t.shouldMenuBeCollapsed(),a=c();e==t.isMenuCollapsed()&&i.menuHeight==a||i.$apply(function(){i.menuHeight=a,t.setMenuCollapsed(e)})}function c(){return o[0].childNodes[0].clientHeight-r}i.menuHeight=o[0].childNodes[0].clientHeight-r,s.on("click",n),s.on("resize",l),i.$on("$destroy",function(){s.off("click",n),s.off("resize",l)})}}}e.$inject=["$timeout","baSidebarService","baUtil","layoutSizes"],angular.module("Qualigy.theme.components").directive("baSidebar",e)}(),function(){"use strict";function e(){var e=[];this.addStaticItem=function(){e.push.apply(e,arguments)},this.$get=["$state","layoutSizes","$security",function(t,a,i){function s(){function s(){return t.get().filter(function(e){return!e.permissions||i.hasAnyPermission(e.permissions)}).filter(function(e){return e.sidebarMeta}).map(function(e){var t=e.sidebarMeta;return{name:e.name,title:e.title,level:(e.name.match(/\./g)||[]).length,order:t.order,icon:t.icon,stateRef:e.name,stateParams:t.params}}).sort(function(e,t){return 100*(e.level-t.level)+e.order-t.order})}function r(){return window.innerWidth<=a.resWidthCollapseSidebar}function o(){return window.innerWidth<=a.resWidthHideSidebar}var n=r();this.getMenuItems=function(){var t=s(),a=t.map(function(e){return e.level}).filter(function(e,t,a){return t===a.indexOf(e)});return a.forEach(function(e){var a=t.filter(function(t){return t.level===e});a.forEach(function(a){var i=t.filter(function(t){return t.level-e===1&&0===t.name.indexOf(a.name)});a.subMenu=i.length?i:null})}),t.filter(function(e){return 0===e.level}).concat(e)},this.shouldMenuBeCollapsed=r,this.canSidebarBeHidden=o,this.setMenuCollapsed=function(e){n=e},this.isMenuCollapsed=function(){return n},this.toggleMenuCollapsed=function(){n=!n},this.getAllStateRefsRecursive=function(e){function t(e){e.subMenu&&e.subMenu.forEach(function(e){e.stateRef&&a.push(e.stateRef),t(e)})}var a=[];return t(e),a}}return new s}],this.$get.$inject=["$state","layoutSizes","$security"]}angular.module("Qualigy.theme.components").provider("baSidebarService",e)}(),function(){"use strict";function e(e,t){e.menuItems=t.getMenuItems(),e.menuItems&&e.menuItems.length&&(e.defaultSidebarState=e.menuItems[0].stateRef,e.hoverItem=function(t){e.showHoverElem=!0,e.hoverElemHeight=t.currentTarget.clientHeight;var a=66;e.hoverElemTop=t.currentTarget.getBoundingClientRect().top-a},e.$on("$stateChangeSuccess",function(){t.canSidebarBeHidden()&&t.setMenuCollapsed(!0)}))}e.$inject=["$scope","baSidebarService"],angular.module("Qualigy.theme.components").controller("BaSidebarCtrl",e)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,a){a.on("click",function(a){a.originalEvent.$sidebarEventProcessed=!0,t.$apply(function(){e.toggleMenuCollapsed()})})}}}function t(e){return{restrict:"A",link:function(t,a){a.on("click",function(a){a.originalEvent.$sidebarEventProcessed=!0,e.isMenuCollapsed()||t.$apply(function(){e.setMenuCollapsed(!0)})})}}}function a(){return{restrict:"A",controller:"BaSidebarTogglingItemCtrl"}}function i(e,t,a,i,s){function r(e){return e&&l.some(function(t){return 0==e.name.indexOf(t)})}var o=this,n=o.$$menuItem=e.$eval(a.baSidebarTogglingItem);if(n&&n.subMenu&&n.subMenu.length){o.$$expandSubmenu=function(){console.warn("$$expandMenu should be overwritten by baUiSrefTogglingSubmenu")},o.$$collapseSubmenu=function(){console.warn("$$collapseSubmenu should be overwritten by baUiSrefTogglingSubmenu")};var l=s.getAllStateRefsRecursive(n);o.$expand=function(){o.$$expandSubmenu(),t.addClass("ba-sidebar-item-expanded")},o.$collapse=function(){o.$$collapseSubmenu(),t.removeClass("ba-sidebar-item-expanded")},o.$toggle=function(){t.hasClass("ba-sidebar-item-expanded")?o.$collapse():o.$expand()},r(i.current)&&t.addClass("ba-sidebar-item-expanded"),e.$on("$stateChangeStart",function(e,a){!r(a)&&t.hasClass("ba-sidebar-item-expanded")&&(o.$collapse(),t.removeClass("ba-sidebar-item-expanded"))}),e.$on("$stateChangeSuccess",function(e,a){r(a)&&!t.hasClass("ba-sidebar-item-expanded")&&(o.$expand(),t.addClass("ba-sidebar-item-expanded"))})}}function s(e){return{restrict:"A",require:"^baSidebarTogglingItem",link:function(e,t,a,i){i.$$expandSubmenu=function(){t.slideDown()},i.$$collapseSubmenu=function(){t.slideUp()}}}}function r(e){return{restrict:"A",require:"^baSidebarTogglingItem",link:function(t,a,i,s){a.on("click",function(){e.isMenuCollapsed()?(t.$apply(function(){e.setMenuCollapsed(!1)}),s.$expand()):s.$toggle()})}}}e.$inject=["baSidebarService"],t.$inject=["baSidebarService"],i.$inject=["$scope","$element","$attrs","$state","baSidebarService"],s.$inject=["$state"],r.$inject=["baSidebarService"],angular.module("Qualigy.theme.components").directive("baSidebarToggleMenu",e).directive("baSidebarCollapseMenu",t).directive("baSidebarTogglingItem",a).controller("BaSidebarTogglingItemCtrl",i).directive("baUiSrefTogglingSubmenu",s).directive("baUiSrefToggler",r)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-09-14
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-03-06
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",scope:{currentStep:"=?",onFinish:"&",finishLabel:"@?"},transclude:!0,templateUrl:"app/theme/components/baWizard/baWizard.html",controller:"baWizardCtrl",controllerAs:"vm",bindToController:!0}}angular.module("Qualigy.theme.components").directive("baWizard",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-09-14
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-03-06
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e){function t(e){e.setPrev(d.tabs[d.tabs.length-1]),d.tabs.push(e),a(0),c()}function a(e){void 0!==e&&0!=d.tabs.length&&(d.tabs[d.tabNum].submit(),d.tabs[e].isAvailiable()&&(d.tabNum=d.currentStep=e,d.tabs.forEach(function(e,t){t==d.tabNum?e.select(!0):e.select(!1)})))}function i(){return 0==d.tabNum}function s(){return d.tabNum==d.tabs.length-1}function r(){return!d.tabs[d.tabNum-1]||d.tabs[d.tabNum-1].isComplete()}function o(){return!d.tabs[d.tabNum]||d.tabs[d.tabNum].isComplete()}function n(){a(d.tabNum+1)}function l(){a(d.tabNum-1)}function c(){d.progress=(d.tabNum+1)/d.tabs.length*100}var d=this;d.tabs=[],d.tabNum=d.currentStep=0,d.progress=0,d.addTab=t,d.selectTab=a,d.isFirstTab=i,d.isLastTab=s,d.canGoBack=r,d.isComplete=o,d.nextTab=n,d.previousTab=l,e.$watch(angular.bind(d,function(){return d.tabNum}),c),e.$watch(angular.bind(d,function(){return d.currentStep}),d.selectTab)}e.$inject=["$scope"],angular.module("Qualigy.theme.components").controller("baWizardCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-09-14
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-02-15
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",transclude:!0,require:"^baWizard",scope:{stepTitle:"@",form:"=",onActivate:"&",onExit:"&"},templateUrl:"app/theme/components/baWizard/baWizardStep.html",link:function(e,t,a,i){function s(t){t?(e.onActivate(),e.selected=!0):e.selected=!1}function r(){e.form&&e.form.$setSubmitted(!0)}function o(){return!e.form||e.form.$valid}function n(){return!c.prevTab||c.prevTab.isComplete()}function l(e){c.prevTab=e}e.selected=!0;var c={title:e.stepTitle,select:s,submit:r,isComplete:o,isAvailiable:n,prevTab:void 0,setPrev:l};e.$on("$destroy",function(){console.log("destroy"),e.onExit&&e.onExit()}),i.addTab(c)}}}angular.module("Qualigy.theme.components").directive("baWizardStep",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-07-17
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   pdorgambide
 * @Last modified time: 2018-07-18
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s){function r(){p.config=p.config||{iconOn:"ion-android-bookmark",iconOff:"ion-android-bookmark",iconOnColor:"#269",iconOffColor:"#bbb",disabled:!1},p.iconOn=p.iconOn||p.config.iconOn,p.iconOff=p.iconOff||p.config.iconOff,p.iconOnColor=p.iconOnColor||p.config.iconOnColor,p.iconOffColor=p.iconOffColor||p.config.iconOffColor,p.disabled=p.disabled||p.config.disabled,s.addPart("global"),a.refresh(),t.getList({resource:p.resource,resourceId:p.resourceId}).then(function(e){p.bookmark=e.length>0?e[0]:null,p.marked=!!p.bookmark})}function o(){if(!p.disabled){var e={title:p.title,description:p.description,resource:p.resource,resourceId:p.resourceId,pageUrl:p.pageUrl||i.absUrl()};t.post(e).then(function(e){p.bookmark=e,p.marked=!0,toastr.info(a.instant("global.theme.component.bookmark.created",e))})}}function n(){p.disabled||p.bookmark.remove().then(function(e){toastr.info(a.instant("global.theme.component.bookmark.removed",p.bookmark)),p.bookmark=null,p.marked=!1})}function l(){p.bookmark?n():o()}function c(){return p.bookmark?p.iconOn:p.iconOff}function d(){return{"font-size":"x-large",color:p.bookmark?p.iconOnColor:p.iconOffColor}}var p=this;p.$onInit=r,p.getStyle=d,p.getClass=c,p.mark=o,p.unmark=n,p.toggleMark=l}e.$inject=["$scope","Bookmarks","$translate","$location","$translatePartialLoader"],angular.module("Qualigy.theme.components").component("bookmark",{bindings:{marked:"=?",resource:"@",resourceId:"@",title:"@",description:"@?",pageUrl:"@?",config:"=?",iconOn:"@",iconOff:"@",iconOnColor:"@",iconOffColor:"@",disabled:"=?"},replace:!0,controller:e,controllerAs:"vm",templateUrl:"app/theme/components/bookmark/bookmark.html"})}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-01-24
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{availableColors:"=",ngModel:"="},templateUrl:"app/theme/components/colorPicker/color-picker.html",controller:"ColorPickerCtrl",controllerAs:"vm",bindToController:!0}}angular.module("Qualigy.theme.components").directive("colorPicker",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-01-24
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e){function t(){a.ngModel||(a.ngModel=a.availableColors[0])}var a=this;t()}e.$inject=["$scope"],angular.module("Qualigy.theme.components").controller("ColorPickerCtrl",e)}(),function(){"use strict";function e(e,t,a){return{restrict:"E",templateUrl:"app/theme/components/contentTop/contentTop.html",link:function(e){function i(){for(var t=a.$current;t&&t.parent&&""!==t.parent.name;)t=t.parent;e.activePageTitle=t?t.title:""}i(),t.$on("$stateChangeSuccess",function(e,t,a,s,r){i()})}}}e.$inject=["$location","$rootScope","$state"],angular.module("Qualigy.theme.components").directive("contentTop",e)}(),/*
 * Copyright (c) 2017 by Qualigy Solutions Innovation <www.qualigy.com> - All Rights Reserved
 * @Author: pdorgambide
 * @Date:   2017-08-12 11:33:51
 * @Last Modified by:   Pablo Dorgambide
 * @Last Modified time: 2017-08-12 13:13:47
 */
function(){"use strict";function e(e){return{restrict:"E",replace:!0,scope:{seconds:"@",finishCallback:"&"},template:" <span> {{seconds}} segundos</span>",link:function(t,a){var i=e(function(){t.seconds>=0?t.seconds--:(e.cancel(i),t.finishCallback.call&&t.finishCallback())},1e3)}}}e.$inject=["$interval"],angular.module("Qualigy.theme.components").directive("countdown",e)}(),function(){"use strict";function e(){return{scope:{locationId:"@",lon:"@",lat:"@",day:"="},restrict:"E",templateUrl:function(e,t){return t.customTemplate?t.customTemplate:"app/theme/components/dayTide/dayTide.html"},controller:"DayTideCtrl",compile:function(e,t){}}}angular.module("Qualigy.theme.components").directive("dayTide",e),angular.module("Qualigy.theme.components").config(["$translateProvider",function(e){e.translations("gl",{"High tides":"Pleamar","Low tides":"Baixamar",locality:"Localidade",municipality:"Municipio",province:"Provincia"}),e.preferredLanguage("gl")}])}(),function(){"use strict";function e(e,t,a,i){function s(){e.$watch("locationId",function(e){o(e)}),e.start=angular.copy(e.day),e.day||(e.start=angular.copy(new Date));var t=i(e.start).startOf("day").toDate(),a=i(t).endOf("day").toDate();o(e.locationId,t,a)}function r(t){e.start=i(e.start).add(t,"days").toDate();var a=i(e.start).startOf("day").toDate(),s=i(a).endOf("day").toDate();o(e.locationId,a,s)}function o(i,s,r){if(i&&s&&r){var o=a("date")(s,"yyyy-MM-ddTHH:mm:ss"),c=a("date")(r,"yyyy-MM-ddTHH:mm:ss"),d={format:"application/json",API_KEY:l,locationIds:i,startTime:o,endTime:c};return t.get(n+"/getTidesInfo",{params:d}).success(function(t){t.exception?(console.log("TideInfo: "+t.exception.message),e.tideInfo=[]):t.features&&(e.tideInfo=t.features.map(function(e){return e.properties})[0])})}}var n="/meteo",l="3veD890vCgN7q8dG1dmQxIx605y2qFQnp5GBW3zBLoYl69Eiqj4JUu42l09229iF";e.getTideInfo=o,e.addDays=r,s();i(e.start).day(1).toDate(),i(e.end).day(1).toDate()}e.$inject=["$scope","$http","$filter","moment"],angular.module("Qualigy.theme.components").controller("DayTideCtrl",e)}(),function(){"use strict";function e(e,t,a){return{restrict:"E",templateUrl:"app/theme/components/detailForm/detail-form.html",transclude:!0,scope:{model:"=ngModel",resourcePath:"@",footerTemplateUrl:"@",detailMode:"="},controller:"DetailFormCtrl",link:function(e,a,i,s){e.footerTemplateUrl=e.footerTemplateUrl||"app/theme/components/detailForm/detail-form-footer-template.html",t.$on("$stateChangeStart",function(e,t,a,i,s){})}}}e.$inject=["$location","$rootScope","$state"],angular.module("Qualigy.theme.components").directive("detailForm",e)}(),function(){"use strict";function e(e,t,a,i){function s(){e.detailMode=m,d=i.copy(e.model),p=e.$bus.channel(e.resourcePath),e.$watch("detailMode",function(t,a){t==m?e.formDisabled=!0:e.formDisabled=!1})}function r(){return e.detailMode==m}function o(){var t=a.showConfirmationMessage("Confirme eliminar","Esta operaciÃ³n eliminarÃ¡ el elemento seleccionado y no podrÃ¡ deshacerse. <br/><strong>Â¿Desea continuar?</strong>","ion-trash-b ion-lg");t.result.then(function(t){e.model.remove().then(function(t){a.showInformationMessage("Elemento eliminado","EL elemento a sido eliminado del sistema","ion-trash-b"),p.publish("item.removed",t),e.cancel()})})}function n(){e.detailMode===u&&(e.detailMode=m,e.model=d)}function l(){e.detailMode=u,d=i.copy(e.model)}function c(){e.detailForm.$valid&&e.model.put().then(function(t){e.model=t,d=i.copy(e.model),mode=m,p.publish("item.changed",t)})}var d,p,u="edit",m="show";e.remove=o,e.edit=l,e.save=c,e.cancel=n,e.showMode=r,e.close=close,s()}e.$inject=["$scope","$state","modalService","Restangular"],angular.module("Qualigy.theme.components").controller("DetailFormCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",transclude:!0,replace:!0,controller:"EditableFormCtrl",controllerAs:"vm",scope:{resource:"@",topic:"@",model:"=",formName:"@?",onClose:"&",formStatus:"="},bindToController:!0,template:function(e,t){var a="vm."+t.formName||"vm.detailForm",i='<form class="editable-form '+t.class+'" style="'+t.style+'" id="'+t.id+'" editable-form name="'+a+'" onaftersave="vm.save()" novalidate autocomplete="off">';return t.customHeading||(i+='<div class="editable-form-heading"><h3 class="panel-heading">',t.title&&(i+=t.title,t.title=null),i=i+'<div class="pull-right"><div ng-show="'+a+'.$visible" class="btn-panel"><button class="btn btn-primary btn-xs" type="submit" ng-disabled="'+a+'.$waiting" data-translate="global.button.accept">Aceptar</button><button type="button" class="btn btn-default btn-xs" ng-click="vm.cancel()" ng-disabled="'+a+'.$waiting" data-translate="global.button.cancel">Cancelar</button></div><div ng-hide="'+a+'.$visible" class="btn-panel" ><button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b" ></i> <span data-translate="global.button.remove">Eliminar</span></button><button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.edit()"><i class="ion-edit"></i> <span data-translate="global.button.edit">Editar</span></button>',t.onClose&&(i+='<button type="button" style="padding-left: 30px;" class="close" ng-click="vm.onClose()" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),i+="</div></div></h3></div>"),i+'<div class="editable-form-body" ng-transclude> </div></form>'}}}angular.module("Qualigy.theme").directive("editableForm",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){u.topic&&(p=e.$bus.channel(u.topic)),u.formStatus="show"}function o(){var e=s.showConfirmationDeleteMessage();e.result.then(function(e){u.model.remove().then(function(e){toastr.success(i.instant("app."+u.topic.substring(0,u.topic.length-1)+".deleted",e)),p.publish("item.removed",e),u.close()})})}function n(){if(u[u.formName].$valid)u.model.patch().then(function(e){u.model=e,toastr.success(i.instant("app."+u.topic.substring(0,u.topic.length-1)+".updated",e)),p.publish("item.changed",e),u.formStatus="show",p.publish("form.show",u.model)});else{if(console.log(u[u.formName].$error),u[u.formName].$error.required){var e=t("joinBy")(u[u.formName].$error.required.map(function(e){return"- "+i.instant(e.$name)}),"<br>");toastr.error(i.instant("global.messages.save.error.required.message")+"<br>"+e,i.instant("global.messages.save.error.required.title"))}if(u[u.formName].$error.pattern){t("joinBy")(u[u.formName].$error.pattern.map(function(e){return"- "+i.instant(e.$name)}),"<br>");toastr.error(i.instant("global.messages.save.error.pattern.message")+"<br>"+e,i.instant("global.messages.save.error.pattern.title"))}}}function l(){u[u.formName].$show(),u.formStatus="edit",p.publish("form.edit",u.model)}function c(){u[u.formName].$cancel(),u.formStatus="show",p.publish("form.show",u.model)}function d(){u.onClose&&u.onClose()}var p,u=this;u.remove=o,u.edit=l,u.save=n,u.close=d,u.cancel=c,r()}e.$inject=["$scope","$filter","$window","$translate","modalService"],angular.module("Qualigy.theme").controller("EditableFormCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",transclude:!0,replace:!0,controller:"EditableFormCtrl",controllerAs:"vm",scope:{resource:"@",topic:"@",model:"=",formName:"@?",onClose:"&",formStatus:"="},bindToController:!0,template:function(e,t){var a="vm."+t.formName||"vm.detailForm",i='<ng-form class="editable-form '+t.class+'" style="'+t.style+'" id="'+t.id+'" editable-form name="'+a+'" onaftersave="vm.save()" novalidate>';return t.customHeading||(i+='<div class="editable-form-heading"><h3 class="panel-heading">',t.title&&(i+=t.title),i=i+'<div class="pull-right"><div ng-show="'+a+'.$visible" class="btn-panel"><button class="btn btn-primary btn-xs" type="submit" ng-disabled="'+a+'.$waiting" data-translate="global.button.accept">Aceptar</button><button type="button" class="btn btn-default btn-xs" ng-click="vm.cancel()" ng-disabled="'+a+'.$waiting" data-translate="global.button.cancel">Cancelar</button></div><div ng-hide="'+a+'.$visible" class="btn-panel" ><button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b" ></i> <span data-translate="global.button.remove">Eliminar</span></button><button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.edit()"><i class="ion-edit"></i> <span data-translate="global.button.edit">Editar</span></button>',t.onClose&&(i+='<button type="button" style="padding-left: 30px;" class="close" ng-click="vm.onClose()" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),i+="</div></div></h3></div>"),i+'<div class="editable-form-body" ng-transclude> </div></ng-form>'}}}angular.module("Qualigy.theme").directive("editableNgForm",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-01-24
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{availableIcons:"=",ngModel:"="},templateUrl:"app/theme/components/iconPicker/icon-picker.html",controller:"IconPickerCtrl",controllerAs:"vm",bindToController:!0}}angular.module("Qualigy.theme.components").directive("iconPicker",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-01-24
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-24
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e){function t(){a.ngModel||(a.ngModel=a.availableIcons[0])}var a=this;t()}e.$inject=["$scope"],angular.module("Qualigy.theme.components").controller("IconPickerCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2018-07-17
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   pdorgambide
 * @Last modified time: 2018-07-18
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e){function t(){r.config=r.config||{iconOn:"ion-android-star",iconOff:"ion-android-star-outline",iconOnColor:"#EC5",iconOffColor:"#CCC",rating:0,minRating:1,maxRating:5,disabled:!1},r.iconOn=r.iconOn||r.config.iconOn,r.iconOff=r.iconOff||r.config.iconOff,r.iconOnColor=r.iconOnColor||r.config.iconOnColor,r.iconOffColor=r.iconOffColor||r.config.iconOffColor,r.rating=r.rating||r.config.rating,r.minRating=r.minRating||r.config.minRating,r.maxRating=r.maxRating||r.config.maxRating,r.disabled=r.disabled||r.config.disabled,r.icons=Array.from({length:r.maxRating},function(e,t){return t+1})}function a(e){r.disabled||(r.rating==e?r.rating=r.minRating:r.rating=e)}function i(e){return e<=r.rating?r.iconOn:r.iconOff}function s(e){return{color:e<=r.rating?r.iconOnColor:r.iconOffColor}}var r=this;r.$onInit=t,r.getStyle=s,r.getClass=i,r.setValue=a}e.$inject=["$scope"],angular.module("Qualigy.theme.components").component("iconRating",{bindings:{config:"=?",iconOn:"@",iconOff:"@",iconOnColor:"@",iconOffColor:"@",rating:"=?",minRating:"@",maxRating:"@",disabled:"=?"},replace:!0,controller:e,controllerAs:"vm",templateUrl:"app/theme/components/iconRating/iconRating.html"})}(),function(){"use strict";function e(){return{scope:{ngModelHref:"=",ngModel:"=",resourcePath:"@",collectionResourceRel:"@",searchProp:"@",displayFnc:"&",displayProp:"@",readOnly:"=",ngDisabled:"="},restrict:"E",templateUrl:"app/theme/components/inputRef/inputRef.html",controller:"InputRefCtrl",controllerAs:"vm",bindToController:!0}}angular.module("Qualigy.theme.components.deprecated",[]).directive("inputRef",e)}(),function(){"use strict";function e(e,t){function a(){var a=this;e.$watch(angular.bind(this,function(){return this.ngModelHref}),function(e){e&&t.get(e).success(function(e){a.ngEntityModel=e})})}function i(e,t,a,i){this.ngEntityModel=e,this.ngModel=e._links.self.href}function s(e){return this.displayProp&&e?e[this.displayProp]:e}function r(e,a){var i=this.collectionResourceRel,s={};return s[e]=a,t.get(this.resourcePath,{params:s}).then(function(e){return e.data._embedded[i]})}var o=this;o.searchResources=r,o.onSelect=i,o.displayFnc=s,o.activate=a,o.activate()}e.$inject=["$scope","$http"],angular.module("Qualigy.theme.components").controller("InputRefCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:["$scope","$translate","$filter",function(e,t,a){e.setLanguage=function(e){e&&t.use(e)},e.activeLanguage=function(){var e=t.use()||t.storage().get(t.storageKey())||t.preferredLanguage();return e},e.langs=t.getAvailableLanguageKeys(),t.use(e.activeLanguage())}],replace:!0,templateUrl:"app/theme/components/langBtn/langBtn.html"}}angular.module("Qualigy.theme.components").directive("langBtn",e)}(),function(){"use strict";function e(e){function t(){null===i&&(i=e.open({animation:!0,templateUrl:"app/theme/components/loginDlg/login.html",controller:"LoginDlgCtrl",controllerAs:"vm",resolve:{translatePartialLoader:["$translate","$translatePartialLoader",function(e,t){return t.addPart("login"),e.refresh()}]}}),i.result.then(s,s))}var a={open:t},i=null,s=function(){i=null};return a}e.$inject=["$uibModal"],angular.module("Qualigy.theme.components").factory("LoginDlg",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){c.credentials={username:null,password:null,rememberMe:!0},c.authenticationError=!1,s.dismiss("cancel")}function o(a){a.preventDefault(),i.login({login:c.username,password:c.password,rememberMe:c.rememberMe}).then(function(){if(c.authenticationError=!1,s.close(),"register"!==t.current.name&&"activate"!==t.current.name&&"finishReset"!==t.current.name&&"requestReset"!==t.current.name||t.go("home"),e.$broadcast("authenticationSuccess"),Auth.getPreviousState()){var a=Auth.getPreviousState();Auth.resetPreviousState(),t.go(a.name,a.params)}}).catch(function(){c.authenticationError=!0})}function n(){s.dismiss("cancel"),t.go("account.register")}function l(){s.dismiss("cancel"),t.go("account.resetRequest")}var c=this;c.authenticationError=!1,c.cancel=r,c.credentials={},c.login=o,c.password=null,c.register=n,c.rememberMe=!0,c.requestResetPassword=l,c.username=null}e.$inject=["$rootScope","$state","$timeout","AuthService","$uibModalInstance"],angular.module("Qualigy.theme.components").controller("LoginDlgCtrl",e)}(),function(){"use strict";function e(e){return{restrict:"EA",replace:!0,scope:{geometry:"=manualPositionPanel",geometryType:"@",label:"@",position:"@"},templateUrl:"app/theme/components/manualPositionPanel/manual-position-panel.html",controller:"ManualPositionPanelCtrl",link:function(e,t,a,i,s){}}}e.$inject=["$rootScope"],angular.module("Qualigy.theme.components").directive("manualPositionPanel",e)}(),function(){"use strict";function e(e,t){function a(){e.$watch("geometry",function(t,a){if(t){if(/Point/.test(e.geometryType)||!e.lon&&!e.lat){var i=new OpenLayers.Geometry.fromWKT(t),s=new OpenLayers.LonLat(i.x||i.components[i.components.length-1].x,i.y||i.components[i.components.length-1].y);e.lon=s.lon,e.lat=s.lat;var o=n(e.lat,!0).replace("'","");e.latDeg=o.split(" ")[0],e.latMin=o.split(" ")[1],e.latDir=o.split(" ")[2];var l=n(e.lon,!1).replace("'","");e.lonDeg=l.split(" ")[0],e.lonMin=l.split(" ")[1],e.lonDir=l.split(" ")[2]}}else r()})}function i(){var t=e.latDeg+" "+e.latMin+"' "+e.latDir;e.lat=l(t,!0),/Point/.test(e.geometryType)&&(e.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function s(){var t=e.lonDeg+" "+e.lonMin+"' "+e.lonDir;e.lon=l(t,!1),/Point/.test(e.geometryType)&&(e.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function r(){e.lat=e.lon=null,e.latDeg=e.latMin=e.latDir=null,e.lonDeg=e.lonMin=e.lonDir=null}function o(){var a=t.currentLonLat();if(a){e.lon=a.lon,e.lat=a.lat;var i=n(e.lat,!0).replace("'","");e.latDeg=i.split(" ")[0],e.latMin=i.split(" ")[1],e.latDir=i.split(" ")[2];var s=n(e.lon,!1).replace("'","");if(e.lonDeg=s.split(" ")[0],e.lonMin=s.split(" ")[1],e.lonDir=s.split(" ")[2],/Point/.test(e.geometryType)){var r=new OpenLayers.Geometry.Point(a.split(",")[0],a.split(",")[1]);e.geometry||(e.geometry=r)}else e.addPoint()}}function n(e,t){if(!e)return null;var a=t?["N","S"]:["E","W"];a=e>0?a[0]:a[1];var i="",s=0,r=0;return e=Math.abs(e),s=Math.floor(e),e=60*(e-Math.floor(e)),r=Math.floor(1e3*e)/1e3,i+=s+" "+r+"' "+a}function l(e){if(!e)return null;var t=e.substr(e.length-1,1);t="N"==t||"E"==t?1:-1,e=e.substr(0,e.length-1);for(var a,i,s=0,r=".0123456789",o="",n=1;n<=2;n++){i=1,a=!1;for(var l=0;l<e.length;l++)if(r.indexOf(e.charAt(l))!=-1){a=!0;break}if(!a)return s;for(e=e.substring(l,e.length),l=0;l<e.length;l++)if(r.indexOf(e.charAt(l))==-1){switch(e.charAt(l)){case"'":i=60;break;case'"':i=3600}break}o=e.substring(0,l),e=e.substring(l,e.length),1==i&&(2==n&&(i=60),3==n&&(i=3600)),""==o?s=0:s+=parseFloat(o)/i}return s*t}e.refreshLat=i,e.refreshLon=s,e.currentPosition=o,e.addPoint=function(){if(!/Point/.test(e.geometryType)){var t;if(t=e.lon&&e.lat?new OpenLayers.Geometry.Point(e.lon,e.lat):e.currentPosition(),e.geometry){var a=new OpenLayers.Geometry.fromWKT(e.geometry);if(a instanceof OpenLayers.Geometry.Collection){for(var i=a.getVertices(),s=-1,r=-1,o=0,n=i.length;o<n;o++){var l=t.distanceTo(i[o]);(l<r||r==-1)&&(r=l,s=o)}a instanceof OpenLayers.Geometry.Polygon?a.components[0].addPoint(t,s):a instanceof OpenLayers.Geometry.LineString&&a.addPoint(t,s==i.length-1?s+1:s),e.geometry=a.toString(),e.points=i}else{if(/Polygon/.test(e.geometryType)||/MultiLineString/.test(e.geometryType)){var i=[a,t],c=new OpenLayers.Geometry.LinearRing(i),d=new(OpenLayers.Geometry[/Polygon/.test(e.geometryType)?"Polygon":"MultiLineString"])([c]);e.geometry=d.toString()}else if(/LineString/.test(e.geometryType)){var i=[a,t],d=new OpenLayers.Geometry.LineString([i]);e.geometry=d.toString()}else e.geometry=t.toString();e.points=i}}else e.geometry=t.toString(),e.points=[t]}},a()}e.$inject=["$scope","geoService"],angular.module("Qualigy.theme.components").controller("ManualPositionPanelCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/theme/components/msgCenter/msgCenter.html",controller:"MsgCenterCtrl"}}angular.module("Qualigy.theme.components").directive("msgCenter",e)}(),function(){"use strict";function e(e,t,a){function i(){a.one().lastest().then(function(t){e.notifications=t.map(function(e){var t;return"ALL"==e.sendTo?t="ion-home":"PERSON"==e.sendTo?t="ion-person":"TEAM"==e.sendTo&&(t="ion-person-stalker"),{image:t,title:e.title,message:e.message,time:moment(e.publishTime).fromNow()}})})}e.getMessage=function(e){var a="<strong>"+e.title+"</strong><br/> "+e.message;return t.trustAsHtml(a)},i()}e.$inject=["$scope","$sce","Notifications"],angular.module("Qualigy.theme.components").controller("MsgCenterCtrl",e)}(),function(){var e=angular.module("nzToggle",[]);e.directive("nzToggle",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{config:"=?",ngModel:"=",onToggle:"&",ngDisabled:"="},template:['<div class="nz-toggle-wrap" ng-class="getStyle()" ng-style="wrapStyle">','   <div class="nz-toggle">','       <div class="nz-toggle-handle"></div>',"   </div>",'   <div class="nz-toggle-tooltip" ng-show="tooltip">',"       <span ng-class=\"{'active': showTooltip1}\">",'           <span ng-show="tipFalse"></span>{{tipFalse}}',"       </span>",'       <br ng-show="vertical">','       <span ng-class="{\'active\': showTooltip2}" ng-show="triToggle">','           <span ng-show="tipNull"></span>{{tipNull}}',"       </span>",'       <br ng-show="vertical">',"       <span ng-class=\"{'active': showTooltip3}\">",'           <span ng-show="tipTrue"></span>{{tipTrue}}',"       </span>","   </div>","</div>"].join(""),link:function(t,a,i,s){function r(){d(),x(C.ngModel)||(x(C.valDefault)?C.ngModel=C.valDefault:C.triToggle?C.ngModel=C.valNull:C.ngModel=C.valFalse);var e=!0;C.$watch("ngModel",function(){if(u(),e)return void(e=!1);if(C.onToggle.call){var t=C.onToggle();t&&t.call&&t(C.ngModel)}},!0),h(a[0],"mousedown touchstart",n),h(a[0],"click",o),C.$on("$destroy",function(){g(a[0],"mousedown touchstart",n),g(window,"mousemove touchmove",l),g(window,"mouseup touchend",c),g(a[0],"click",o)})}function o(e){b<1&&m()}function n(e){if(!C.ngDisabled)return e=e?e:window.event,v={x:e.pageX||e.touches[0].pageX,y:e.pageY||e.touches[0].pageY},b=0,w.css("transition","0s"),h(window,"mousemove touchmove",l),h(window,"mouseup touchend",c),e.stopPropagation(),e.returnValue=!1,!1}function l(e){e=e?e:window.event;var t=(e.pageY||e.touches[0].pageY)-v.y,i=(e.pageX||e.touches[0].pageX)-v.x,s=a[0].offsetHeight,r=a[0].offsetWidth,o=t/(s/2)*100,n=i/(r/2)*100;return C.vertical?(f=parseFloat(O.vertical[C.state]),y=Math.max(Math.min(parseFloat(o+f),100),0),L=f+(y-f)/2,w.css("top",L+"%")):(f=parseFloat(O.horizontal[C.state]),y=Math.max(Math.min(parseFloat(n+f),100),0),L=f+(y-f)/2,w.css("left",L+"%")),b=Math.max(b,Math.max(Math.abs(t),Math.abs(i))),e.stopPropagation(),e.returnValue=!1,!1}function c(e){return e=e?e:window.event,v=!1,C.$apply(function(){if(!(b<1&&"mouseup"==e.type))return b<1&&"touchend"==e.type?void m():C.triToggle?C.vertical?y>73?void m("false"):y>27?void m("null"):void m("true"):y<27?void m("false"):y<73?void m("null"):void m("true"):C.vertical?y>50?void m("false"):void m("true"):y<50?void m("false"):void m("true")}),w.css({top:"",left:"",transition:""}),g(window,"mousemove touchmove",l),g(window,"mouseup touchend",c),e.stopPropagation(),e.returnValue=!1,!1}function d(){if(angular.extend(C,S,C.config||{}),x(i.triToggle)&&(C.triToggle=!0),angular.forEach(["valDefault","valTrue","valFalse","valNull","width","height","colorFalse","colorNull","colorTrue"],function(e){x(i[e])&&(C[e]=C.$eval(i[e]))}),angular.forEach(["tipTrue","tipFalse","tipNull"],function(e){x(i[e])&&C.$watch(i[e],function(t){C[e]=t})}),(C.tipTrue||i.tipFalse||i.tipNull)&&(C.tooltip=!0),x(i.vertical)){C.vertical=!0;var e;C.tooltip&&(e=C.tipTrue,C.tipTrue=C.tipFalse,C.tipFalse=e),C.$eval(i.width)||C.$eval(i.width)||C.config&&(C.config.width||C.config.height)||(e=C.width,C.width=C.height,C.height=e)}C.wrapStyle={width:C.width+"px",height:C.height+"px"},x(C.outerRadius)||(C.outerRadius=Math.min(C.width,C.height)/2),C.innerRadius=C.outerRadius-C.padding}function p(){return[C.vertical?"vertical":"horizontal",C.state]}function u(){return C.showTooltip1=!1,C.showTooltip2=!1,C.showTooltip3=!1,angular.equals(C.ngModel,C.valTrue)?(C.wrapStyle.backgroundColor=C.colorTrue,C.state="true",void(C.vertical?C.showTooltip1=!0:C.showTooltip3=!0)):angular.equals(C.ngModel,C.valFalse)?(C.state="false",C.wrapStyle.backgroundColor=C.colorFalse,void(C.vertical?C.showTooltip3=!0:C.showTooltip1=!0)):(C.state="null",C.wrapStyle.backgroundColor=C.colorNull,void(C.showTooltip2=!0))}function m(t){C.ngDisabled||e(function(){t?(C.state=t,"false"===t?C.ngModel=C.valFalse:"null"===t?C.ngModel=C.valNull:C.ngModel=C.valTrue):"false"==C.state?C.ngModel=C.triToggle?C.valNull:C.valTrue:"null"==C.state?C.ngModel=C.valTrue:C.ngModel=C.valFalse})}function h(e,t,a){for(var i=t.split(" "),s=0,r=i.length;s<r;s++)e.addEventListener(i[s],a,!1)}function g(e,t,a){for(var i=t.split(" "),s=0,r=i.length;s<r;s++)e.removeEventListener(i[s],a,!1)}var v,f,y,b,L,w=angular.element(a[0].querySelector(".nz-toggle-handle")),O={horizontal:{false:0,null:50,true:100},vertical:{false:100,null:50,true:0}},x=angular.isDefined,S=(angular.copy,{vertical:!1,valTrue:!0,valFalse:!1,valNull:null,width:50,height:25,padding:3,colorTrue:"#60BD68",colorFalse:"#F15854",colorNull:"#DDD",tooltip:!1}),C=t;angular.extend(C,{getStyle:p,toggle:m}),r()}}}])}(),function(){"use strict";var e=(angular.isDefined,angular.isFunction,angular.isString,angular.isObject,angular.isArray,angular.forEach),t=angular.extend;angular.copy;Array.prototype.inArray=function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return!0;return!1},Array.prototype.remove=function(e,t){for(var a=0;a<this.length;a++)t(this[a])&&this.splice(a,1)},Array.prototype.pushIfNotExist=function(e,t){var a=this.inArray(t);return a||this.push(e),a},Array.prototype.toggle=function(e){var t=this.indexOf(e);t!==-1?this.splice(t,1):this.push(item)};var a=function(e){for(var t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e};OpenLayers.Control.Click=OpenLayers.Class(OpenLayers.Control,{defaultHandlerOptions:{single:!0,double:!1,pixelTolerance:0,stopSingle:!1,stopDouble:!1},initialize:function(e){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions),OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Click(this,{click:this.trigger},this.handlerOptions)},trigger:function(e){var t=map.getLonLatFromPixel(e.xy);alert("You clicked near "+t.lat+" N, "+ +t.lon+" E")}}),angular.module("Qualigy.theme.components").value("ol.config",{mapdefaults:{projection:"EPSG:900913",displayProjection:"EPSG:4326",numZoomLevels:18,units:"m",maxResolution:"156543.0339",center:"[-905921.055,5293354.04]",zoom:8,theme:"assets/openlayers-bootstrap.css",proxyHost:"/arcopol/cgi-bin?targetURL="},wmslayerdefaults:{url:"//${s}.tile.openstreetmap.org/${z}/${x}/${y}.png",subdomains:["a","b","c"],projection:"EPSG:900913"}}),angular.module("Qualigy.theme.components").factory("olMapService",["ol.config",function(e){var t=e.mapdefaults.center,a=e.mapdefaults.zoom,i=e.mapdefaults.maxExtent,s=null;return{center:t,zoom:a,maxExtent:i,baseLayer:s}}]);var i={};e("beforefeatureselected,featureselected,beforefeaturesselected,featuresselected,featureunselected,clickout,hoverfeature,outfeature,beforegetfeatureinfo,nogetfeatureinfo,getfeatureinfo,beforefeaturehighlighted,featurehighlighted,featureunhighlighted,boxselectionstart,boxselectionend,featureadded,beforefeaturemodified,featuremodified,afterfeaturemodified,measure,measurepartial".split(","),function(e){var t=e.replace(/^\w/,function(e){return e.toUpperCase()}),a="olControl"+t;i[a]=["$parse",function(t){return{restrict:"A",priority:-10,require:["^olMap","^olMapControl"],link:function(i,s,r,o){var n=o[0],l=r[a];angular.isFunction(l)||(l=t(r[a]));var c=o[1].control.olcontrol;n.registerEvent(e,c,l)}}}]}),angular.module("Qualigy.theme.components").directive(i);var s={};e("beforefeatureselected,featureselected,beforefeaturesselected,featuresselected,featureunselected,clickout,hoverfeature,outfeature,featureadded,beforefeatureadded".split(","),function(e){var t=e.replace(/^\w/,function(e){return e.toUpperCase()}),a="olLayerControl"+t;s[a]=["$parse",function(t){return{restrict:"A",priority:-10,require:["^olMap","^olLayerControl"],link:function(i,s,r,o){var n=o[0],l=r[a];angular.isFunction(l)||(l=t(r[a]));var c=o[1].control.olcontrol;n.registerEvent(e,c,l)}}}]}),angular.module("Qualigy.theme.components").directive(s);var r={};e("preaddlayer,addlayer,preremovelayer,removelayer,changelayer,movestart,move,moveend,zoomstart,zoomend,mouseover,mouseout,mousemove,changebaselayer,updatesize".split(","),function(e){var t=e.replace(/^\w/,function(e){return e.toUpperCase()}),a="olMap"+t;r[a]=["$parse",function(t){return{restrict:"A",priority:-10,require:"^olMap",link:function(i,s,r,o){var n=r[a];angular.isFunction(n)||(n=t(r[a])),o.registerEvent(e,i.olmap,n)}}}]}),angular.module("Qualigy.theme.components").directive(r);var o={};e("loadstart,loadend,visibilitychanged,move,moveend,added,removed".split(","),function(e){var t=e.replace(/^\w/,function(e){return e.toUpperCase()}),a="olLayer"+t;o[a]=["$parse",function(t){return{restrict:"A",priority:-10,require:["^olMap","^olLayer"],link:function(i,s,r,o){var n=o[0],l=r[a];angular.isFunction(l)||(l=t(r[a])),n.registerEvent(e,o[1].layer.ollayer,l)}}}]}),angular.module("Qualigy.theme.components").directive(o);var n={};e("beforefeatureadded,beforefeaturesadded,featureadded,featuresadded,beforefeatureremoved,beforefeaturesremoved,featureremoved,featuresremoved,beforefeatureselected,featureselected,featureunselected,beforefeaturemodified,featuremodified,afterfeaturemodified,vertexmodified,vertexremoved,sketchstarted,sketchmodified,sketchcomplete,refresh".split(","),function(e){var t=e.replace(/^\w/,function(e){return e.toUpperCase()}),a="olLayer"+t;n[a]=["$parse",function(t){return{restrict:"A",priority:-10,require:["^olMap","^olLayer"],link:function(t,i,s,r){var o=r[0],n=r[1],l=s[a];o.registerEvent(e,n.layer.ollayer,l)}}}]}),angular.module("Qualigy.theme.components").directive(n),angular.module("Qualigy.theme.components").directive("olMapControl",["ol.config","$parse","$injector","$log",function(t,a,i,s){return{restrict:"EA",priority:10,replace:!0,html:"",require:"^olMap",scope:{ctrlType:"@",name:"@",options:"@",handler:"@",protocol:"@",layer:"@"},controller:["$scope",function(e){var t=this,a=t.control=e;e.refresh=function(){e.active?a.olcontrol.activate():a.olcontrol.deactivate()}}],compile:function(t,i,s){return{pre:function(e,t,i,s){var r=e.ctrlType.replace(/^\w/,function(e){return e.toUpperCase()}),o=a(e.options)();if(o&&!o.title&&(o.title=e.name),"measure"==e.ctrlType){var n={Point:{pointRadius:4,graphicName:"square",fillColor:"white",fillOpacity:1,strokeWidth:1,strokeOpacity:1,strokeColor:"#333333"},Line:{strokeWidth:2,strokeOpacity:1,strokeColor:"#666666",strokeDashstyle:"dash"},Polygon:{strokeWidth:2,strokeOpacity:1,strokeColor:"#666666",fillColor:"white",fillOpacity:.3}},l=new OpenLayers.Style;l.addRules([new OpenLayers.Rule({symbolizer:n})]);var c=new OpenLayers.StyleMap({default:l}),d=OpenLayers.Util.getParameters(window.location.href).renderer;d=d?[d]:OpenLayers.Layer.Vector.prototype.renderers;var p={persist:!0,handlerOptions:{layerOptions:{renderers:d,styleMap:c}}};if(!e.handler)throw"Hanlder required for "+r+". Use handler attr";var u={"OpenLayers.Handler.Point":OpenLayers.Handler.Point,"OpenLayers.Handler.Path":OpenLayers.Handler.Path,"OpenLayers.Handler.Polygon":OpenLayers.Handler.Polygon}[e.handler];e.olcontrol=new OpenLayers.Control[r](u,p)}else e.olcontrol=new OpenLayers.Control[r](o)},post:function(t,i,s,r){if(t.active=t.$eval(s.active),t.options&&t.$watch("options",function(i){var s=a(i)();if(s.layers){var o=[];e(s.layers.split(","),function(e){o.push(r.map.olmap.getLayersByName(e))}),t.olcontrol.layers=o}}),"getFeature"==t.ctrlType){if(!t.protocol&&!t.layer)throw"Protocol or Layer required for "+ctl+". Use protocol attr";var o=null;t.$watch("layer",function(e){o=OpenLayers.Protocol.WFS.fromWMSLayer(r.map.olmap.getLayersByName(t.layer)[0]),t.olcontrol.protocol=o,t.refresh()}),t.protocol&&(o=new OpenLayers.Protocol.WFS(t.protocol)),t.olcontrol.protocol=o}r.addControl(t),t.$watch(function(){return s.active},function(e){t.active=t.$eval(e),t.refresh()}),t.refresh(),t.$on("$destroy",function(){r.removeControl(t)})}}}}}]),angular.module("Qualigy.theme.components").directive("olLayerControl",["ol.config","$parse","$injector","$log",function(e,t,a,i){return{restrict:"EA",priority:10,replace:!0,html:"",require:["^olMap","^olLayer"],scope:{ctrlType:"@",name:"@",handler:"@",options:"@",protocol:"@",featureAdded:"&"},controller:["$scope","$parse",function(e,t){var a=this,i=a.control=e;e.refresh=function(){e.active&&i.olcontrol?i.olcontrol.activate():i.olcontrol&&i.olcontrol.deactivate()}}],compile:function(e,a,i){return{pre:function(e,a,i,s){var r=s[0],o=s[1],n=e.ctrlType.replace(/^\w/,function(e){return e.toUpperCase()}),l=t(e.options)();if(l.virtualStyle=OpenLayers.Feature.Vector.style.virtual,"selectFeature"==e.ctrlType||"modifyFeature"==e.ctrlType)e.olcontrol=new OpenLayers.Control[n](o.layer.ollayer,l);else if("drawFeature"==e.ctrlType){if(!e.handler)throw"Hanlder required for "+n+". Use handler attr";var c={"OpenLayers.Handler.Point":OpenLayers.Handler.Point,"OpenLayers.Handler.Path":OpenLayers.Handler.Path,"OpenLayers.Handler.Polygon":OpenLayers.Handler.Polygon}[e.handler];e.olcontrol=new OpenLayers.Control[n](o.layer.ollayer,c,l),e.olcontrol.featureAdded=e.featureAdded}else e.olcontrol=new OpenLayers.Control[n](l);o.addControl(e),r.addControl(e)},post:function(e,t,a,i){var s=i[0];e.active=e.$eval(a.active),e.$watch(function(){return a.active},function(t){e.active=e.$eval(t),e.refresh()}),e.$on("$destroy",function(){s.removeControl(e)})}}}}}]).directive("olLayer",["ol.config","$injector","$parse",function(e,t,a){return{restrict:"EA",replace:!0,priority:15,html:"",require:"^olMap",scope:{name:"@",type:"@",options:"@lyrOptions",visibility:"@",autoActivate:"@",selectedFeatures:"=",onSelect:"&select",onDeselect:"&deselect",useCanvas:"@"},controller:["$scope","$attrs","$injector",function(e,t,a){var i=this,s=i.layer=e,r=i.controls=e.controls=[],o=i.features=e.features=[];i.addControl=function(e){e.layer=s,r.pushIfNotExist(e,function(t){return t==e})},e.refreshControls=function(){e.controls.forEach(e.controls,function(e,t){e.layer&&(e.layer==s&&s.active&&e.active?e.olcontrol.activate():e.olcontrol.deactivate())})},i.removeControl=function(e){e.layer=null,e.olcontrol.deactivate(),e.olcontrol.protocol&&e.olcontrol.protocol.destroy(),r.remove(e,function(t){return t==e})},i.addFilter=function(e){s.ollayer.filter=e.olfilter},i.removeFilter=function(e){s.ollayer.filter==e&&(s.ollayer.filter=null)},i.addFeature=function(e){o.push(e),e.olfeature.fid=s.ollayer.name+(e.attributes?"."+e.attributes.id:""),s.ollayer.addFeatures([e.olfeature])},i.removeFeature=function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1),s.ollayer&&s.ollayer.destroyFeatures&&e.olfeature&&s.ollayer.destroyFeatures([e.olfeature])}}],compile:function(i,s,r){return{pre:function(i,s,r,o){var n=a(i.options)()||{},l=null,c=OpenLayers.Feature.Vector.style.default,d=OpenLayers.Feature.Vector.style.select,p=OpenLayers.Feature.Vector.style.temporary,u=OpenLayers.Feature.Vector.style.virtual,m=OpenLayers.Feature.Vector.style.vertex,l={};r.defaultStyle&&(l.default=OpenLayers.Util.applyDefaults(a(r.defaultStyle)(),c)),r.selectStyle&&(l.select=OpenLayers.Util.applyDefaults(a(r.selectStyle)(),d)),r.temporaryStyle&&(l.temporary=OpenLayers.Util.applyDefaults(a(r.temporaryStyle)(),p)),r.vertexStyle&&(l.vertex=OpenLayers.Util.applyDefaults(a(r.vertexStyle)(),m)),r.virtualStyle&&(l.virtual=OpenLayers.Util.applyDefaults(a(r.virtualStyle)(),u)),n.styleMap=new OpenLayers.StyleMap(l,{extendDefault:!1});var h=r.lyrType,g=r.lyrUrl,v=r.name,f=t.get(h+"LayerFactory");"true"==r.useCanvas&&(n.useCanvas=OpenLayers.Layer.Grid.ONECANVASPERLAYER);var y=f(v,g,n,e.wmslayerdefaults);y?i.ollayer=y:console.log("Error on create Layer "+v+" url: "+g)},post:function(e,t,a,i){e.active=e.$eval(a.active),e.autoActivate=e.$eval(e.autoActivate),a.opacity&&e.$watch(function(){return a.opacity},function(t){e.ollayer.setOpacity(e.$eval(t))}),a.visibility&&e.$watch(function(){return a.visibility},function(t){e.ollayer.setVisibility(e.$eval(t))}),e.$watch(function(){return a.active},function(t){e.active=e.$eval(t)||!1,e.active?(i.selectLayer(e),e.onSelect(),e.autoActivate&&e.refreshControls()):(i.selectLayer(null),e.onDeselect(),e.autoActivate&&e.refreshControls()),e.ollayer&&e.ollayer.redraw()}),i.addLayer(e),e.ollayer.redraw(),e.$on("$destroy",function(){i.removeLayer(e)})}}}}}]).constant("argisLayerFactory",function(e,a,i,s){if(i.fullExtent){var r=new OpenLayers.Bounds(i.fullExtent.xmin,i.fullExtent.ymin,i.fullExtent.xmax,i.fullExtent.ymax);i.maxExtent=r}if(i.tileInfo){for(var o=[],n=0;n<i.tileInfo.lods.length;n++)o.push(i.tileInfo.lods[n].resolution);i.resolutions=o,i.tileSize=new OpenLayers.Size(i.tileInfo.cols,i.tileInfo.rows),i.tileOrigin=new OpenLayers.LonLat(i.tileInfo.origin.x,i.tileInfo.origin.y)}i.spatialReference&&(i.projection="EPSG:"+i.spatialReference.wkid);var l=new OpenLayers.Layer.ArcGISCache(e,a,t({projection:i.projection||s.projection},i));return l}).constant("tilesLayerFactory",function(a,i,s,r){var o=s.subdomains!==!1&&(s.subdomains||r.subdomains);i||(i=r.url);var n=[],l=i.split("${s}");o&&l.length>1?(delete s.subdomains,e(o,function(e,a){n[a]=OpenLayers.String.format(l[0]+"${s}",t(s,{s:e}))+l[1]})):n=[i];var c=new OpenLayers.Layer.XYZ(a,n,t({projection:s.projection||r.projection,transitionEffect:"resize",wrapDateLine:!0},s),{eventListeners:{tileloaded:function(e){var t=e.tile.getCanvasContext();if(t){for(var a=t.getImageData(0,0,e.tile.size.w,e.tile.size.h),i=a.data,s=0,r=i.length;s<r;s+=4)i[s]=i[s+1]=i[s+2]=(3*i[s]+4*i[s+1]+i[s+2])/8;t.putImageData(a,0,0),e.tile.imgDiv.removeAttribute("crossorigin"),e.tile.imgDiv.src=t.canvas.toDataURL()}}}});return c}).constant("vectorLayerFactory",function(t,a,i,s){var r=["style","styleMap","filter","projection","isBaseLayer","visibility","useCanvas","renderers"],o={};e(r,function(e,t){e in i&&(o[e]=i[e])});var n=new OpenLayers.Layer.Vector(t,o);return n}).constant("wmsLayerFactory",function(t,a,i,s){var r=["styles","layers","version","format","exceptions","transparent","crs","useCanvas","renderers"],o={};e(r,function(e,t){e in i&&(o[e]=i[e],delete i[e])});var n=new OpenLayers.Layer.WMS(t,a,o,i);return n}).constant("wfsLayerFactory",function(a,i,s,r){var o=["style","styleMap","filter","projection","isBaseLayer","visibility","useCanvas","renderers"],n={};e(o,function(e,t){e in s&&(n[e]=s[e],delete s[e])});var l=new OpenLayers.Layer.Vector(a,t({protocol:new OpenLayers.Protocol.WFS(t({url:i,featureType:s.featureType,projection:s.projection?new OpenLayers.Projection(s.projection):new OpenLayers.Projection("EPSG:4326"),geometryName:s.geometryName||"geometry",featureNS:s.featureNS},s)),strategies:[s.strategy||new OpenLayers.Strategy.Fixed]},n));return l}).constant("googleLayerFactory",function(e,t,a,i){try{"google.maps.MapTypeId.HYBRID"==a.type?a.type=google.maps.MapTypeId.HYBRID:"google.maps.MapTypeId.SATELLITE"==a.type?a.type=google.maps.MapTypeId.SATELLITE:"google.maps.MapTypeId.ROADMAP"==a.type?a.type=google.maps.MapTypeId.ROADMAP:"google.maps.MapTypeId.TERRAIN"==a.type&&(a.type=google.maps.MapTypeId.TERRAIN);var s=new OpenLayers.Layer.Google(e,a);return s}catch(e){return console.log(e),null}}).constant("bingLayerFactory",function(e,t,a,i){return new OpenLayers.Layer.Bing(e,a)}).constant("osmLayerFactory",function(e,t,a,i){var s=new OpenLayers.Layer.OSM(e,["https://a.tile.openstreetmap.org/${z}/${x}/${y}.png","https://b.tile.openstreetmap.org/${z}/${x}/${y}.png","https://c.tile.openstreetmap.org/${z}/${x}/${y}.png"]);return s}).constant("markersLayerFactory",function(e,t,a,i){var s=new OpenLayers.Layer.Markers(e,a);return s}).constant("geojsonLayerFactory",function(a,i,s,r){var o=["style","styleMap","filter","projection","useCanvas","renderers"],n={};e(o,function(e,t){e in s&&(n[e]=s[e],delete s[e])});var l=new OpenLayers.Layer.Vector(a,t({protocol:new OpenLayers.Protocol.HTTP(t({url:i,format:new OpenLayers.Format.GeoJSON},s)),strategies:[s.strategy||new OpenLayers.Strategy.Fixed]},n));return l}).controller("olMapCtrl",["$scope","$log","$parse","$attrs","ol.config",function(e,t,a,i,s){var r=this,o=r.map=e,n=r.layers=e.layers=[];r.controls=e.controls=[];r.selectLayer=function(e){o.activeLayer=e},r.refreshControllers=function(t){e.controls.forEach(function(e,a){e.layer&&(e.layer==t&&e.active?e.olcontrol.activate():e.olcontrol.deactivate())})},r.addLayer=function(t){n.push(t),e.olmap.addLayer(t.ollayer),(1===n.length||t.active)&&r.selectLayer(t)},r.removeLayer=function(t){var a=n.indexOf(t);if(t.active&&n.length>1){var i=a==n.length-1?a-1:a+1;r.selectLayer(n[i])}e.olmap.removeLayer(t.ollayer),n.splice(a,1)},r.addControl=function(t){e.controls.pushIfNotExist(t,function(e){return e==t}),e.olmap.addControl(t.olcontrol)},r.removeControl=function(t){t.olcontrol.deactivate(),e.olmap.removeControl(t.olcontrol),e.controls.remove(t,function(e){return e==t})},r.registerEvent=function(t,i,s){e.events||(e.events=[]),e.events.push({name:t,callback:s,src:i}),i||(i=e.olmap),e.olmap&&(s=a(s),i.events.register(t,i,function(t){s(e,{$event:t}),e.$evalAsync()}))},r.lastLonLatPressed=function(){try{var t=e.olmap.getControlsByClass("OpenLayers.Control.MousePosition")[0],a=e.olmap.getLonLatFromPixel(t.lastXy);return a}catch(e){console.error("OpenLayers.Control.MousePosition not located. To get lastLonLatPressed need add MousePosition control to map")}}}]).directive("olFilter",["ol.config","$injector","$parse",function(e,t,a){return{restrict:"E",replace:!0,priority:15,html:"",require:"^?olFilter,^?olLayer",scope:{name:"@",filterClass:"@",type:"@",property:"@",value:"@"},controller:["$scope","$attrs","$injector",function(e,t,a){var i=this,s=(i.filter=e,i.filters=e.filters=[]);i.addFilter=function(e){s.push(e),e.olfilter.filters.push(e.olfilter)},i.removeFilter=function(e){var t=e.olfilter.filters.indexOf(e.olfilter);t>-1&&e.olfilter.filters.splice(t,1),t=s.indexOf(e),t>-1&&s.splice(t,1)}}],compile:function(e,t,a){return{pre:function(e,t,a,i){var s=i[0],r=i[1],o=a.filterClass;e.olfilter=new OpenLayers.Filter[o]({type:e.type,property:e.property,value:e.value}),r?r.addFilter(e):s&&s.addFilter(e)},post:function(e,t,a,i){var s=i[0],r=i[1];e.$on("$destroy",function(){r?r.removeFilter(e):s&&s.removeFilter(e)})}}}}}]).directive("olFeature",["ol.config","$injector","$parse",function(e,t,a){return{restrict:"E",replace:!0,priority:15,html:"",require:"^olLayer",scope:{feature:"=",geometry:"=",attributes:"=",displayProjection:"@",projection:"@",selected:"@",style:"@",label:"@"},controller:["$scope","$attrs","$injector",function(e,t,a){var i=this;i.feature=e;e.updateSelect=function(t){if(e.olfeature){var a=e.olfeature.layer;a&&("true"==t?(a.selectedFeatures.pushIfNotExist(e.olfeature,function(t){return t.id=e.olfeature.id}),a.drawFeature(e.olfeature,"select")):(OpenLayers.Util.removeItem(a.selectedFeatures,e.olfeature),a.drawFeature(e.olfeature,e.olfeature.style||e.olfeature.layer.style||"default")))}}}],compile:function(e,t,i){return{pre:function(e,t,a,i){},post:function(e,t,i,s){i.feature?e.$watch("feature",function(t){s.removeFeature(e),t&&(t.style=e.style?a(e.style)():t.style,e.olfeature=t,s.addFeature(e),e.updateSelect(e.selected))}):i.geometry&&e.$watch("geometry",function(t){if(s.removeFeature(e),t){var r=e.style?a(e.style)():null;i.marker&&(r=OpenLayers.Util.extend(e.style?e.style:OpenLayers.Feature.Vector.style.default,{externalGraphic:i.marker
})),"string"==typeof t?e.geom=OpenLayers.Geometry.fromWKT(t):e.geom=t,e.projection&&(e.geom=e.geom.transform(e.projection,e.displayProjection));var o=e.attributes;if(e.label){var n={label:e.label,fontColor:"blue",fontSize:"12px",fontFamily:"Courier New, monospace",fontWeight:"bold",labelAlign:"lc",labelXOffset:"14",labelYOffset:"0",labelOutlineColor:"white",labelOutlineWidth:3};r=angular.extend(r,n)}e.olfeature=new OpenLayers.Feature.Vector(e.geom,o,r),s.addFeature(e),e.updateSelect(e.selected)}}),i.selected&&(e.$watch(function(){return e&&e.olfeature?e.olfeature.renderIntent:null},function(t){e.selected="select"==t?"true":"false"}),e.$watch("selected",function(t){e.updateSelect(t)})),e.$on("$destroy",function(){s.removeFeature(e)})}}}}}]).directive("olMap",["ol.config","$parse","$log","olMapService","$timeout",function(e,i,s,r,o){return{restrict:"EA",priority:20,scope:!0,controller:"olMapCtrl",compile:function(o,n,l){return{pre:function(s,o,n){var l=e.mapdefaults,c=t({},l);if(c=t(c,a({center:r.center,zoom:r.zoom})),c=t(c,a(i(n.options)())),c=t(c,n),c.center&&(c.center=new OpenLayers.LonLat(i(c.center)())),c.maxExtent&&(c.maxExtent=new OpenLayers.Bounds(i(c.maxExtent)())),c.restrictExtent&&(c.restrictExtent=new OpenLayers.Bounds(i(c.restrictExtent)())),c.resolutions&&(c.resolutions=i(c.resolutions)()),c.tileSize){var d=c.tileSize.split(",");c.tileSize=new OpenLayers.Size(d[0],d[1])}var p=c.proxyHost;OpenLayers.ProxyHost=p;var u=a({projection:c.projection,displayProjection:c.displayProjection,units:c.units,maxResolution:c.maxResolution,center:c.center,zoom:c.zoom,maxExtent:c.maxExtent,restrictExtent:c.restrictExtent,resolutions:c.resolutions,tileSize:c.tileSize,numZoomLevels:c.numZoomLevels});u.theme=c.theme,s.olmap=new OpenLayers.Map(u)},post:function(e,t,a){var o=a.center||r.center;o=i(o)();var n=a.zoom||r.zoom,l=new OpenLayers.LonLat(o);if(e.olmap.setCenter(l,n),e.olmap.events.register("moveend",e.olmap,function(t){var a=e.olmap.getCenter();r.center="["+a.lon+","+a.lat+"]",r.projection=e.olmap.getProjection(),r.zoom=e.olmap.getZoom()}),a.$observe("baseLayer",function(t){if(t&&e.map.olmap){var a=e.map.olmap.getLayersByName(t);a&&(e.map.olmap.setBaseLayer(a[0]),r.baseLayer=t)}}),r.baseLayer){var c=e.olmap.getLayersByName(r.baseLayer);c&&e.olmap.setBaseLayer(c[0])}a.$observe("zoomToExtent",function(t){if(t){var a=t;angular.isString(t)&&(a=OpenLayers.Bounds.fromString(t)),e.olmap.zoomToExtent(a)}}),a.$observe("center",function(t){s.debug("Center:"+t),t&&e.olmap.setCenter(new OpenLayers.LonLat(i(t)(),e.olmap.getZoom()))}),a.$observe("zoom",function(t){t&&(t=parseInt(t),e.olmap.isValidZoom(t)?e.olmap.setCenter(e.olmap.getCenter(),t):s.debug("Invalid Zoom level: "+t))});var d=e.$watch(function(){return t[0].clientWidth&&t[0].clientHeight?t[0].clientWidth+t[0].clientHeight:0},function(){if(t[0].clientWidth&&t[0].clientHeight){e.olmap.render(t[0]);var s=i(a.olMap);e.service=r,s&&s.assign(e.$parent,e),a.zoomToExtent&&e.olmap.zoomToExtent(OpenLayers.Bounds.fromString(a.zoomToExtent)),d()}})}}}}}]).directive("olPopup",["ol.config","$parse","$log","$compile",function(e,t,a,i){return{restrict:"EA",require:["^olMap"],replace:!0,transclude:"element",scope:!1,compile:function(e,a){return{pre:function(e,a,i,s,r){var o=s[0],n=r(),l=t(l)();if(!l)try{l=e.feature.geometry?e.feature.geometry.getBounds().getCenterLonLat():e.feature.getBounds().getCenterLonLat()}catch(e){l=o.lastLonLatPressed()}if(l){if("anchored"==i.popupType)e.olpopup=new OpenLayers.Popup.Anchored("_id",l,null,n.html(),null,!0,e.onClose);else if("framedcloud"==i.popupType)e.olpopup=new OpenLayers.Popup.FramedCloud("_id",l,null,n.html(),null,!0,e.onClose);else{if("popover"!=i.popupType)throw"popupType not allowed. Use framedcloud,anchored or popover";e.olpopup=new OpenLayers.Popup.Popover("_id",l,n.html(),i.title,e.onClose)}o.map.olmap.addPopup(e.olpopup),e.$on("$destroy",function(t){e.olpopup&&e.olpopup.destroy(),e.feature.popup=null,o.map.olmap.removePopup(e.olpopup)})}}}}}}]).directive("olUrlPopup",["ol.config","$parse","$http","$compile","$templateCache",function(e,t,a,i,s){return{restrict:"EA",require:["^olMap","^olLayer"],replace:!0,template:"<div></div>",scope:{popupType:"@",templateUrl:"@",feature:"=",show:"@",lonlat:"@",onClose:"&"},link:function(e,r,o,n,l){var c=n[0],d=null;a.get(e.templateUrl,{cache:s}).then(function(a){d=i(a.data)(e),o.feature?e.$watch("feature",function(a){if(a){var i=t(e.lonlat)();if(i||(i=a.getBounds().getCenterLonLat()),"anchored"==e.popupType)e.olpopup=new OpenLayers.Popup.Anchored(a.id,i,null,d.html(),null,!0,e.onClose);else if("framedcloud"==e.popupType)e.olpopup=new OpenLayers.Popup.FramedCloud(a.id,i,null,d.html(),null,!0,e.onClose);else{if("popover"!=e.popupType)throw"popupType not allowed. Use framedcloud,anchored or popover";e.olpopup=new OpenLayers.Popup.Popover(a.id,i,d.html(),o.title,e.onClose)}a.popup=e.olpopup,c.map.olmap.addPopup(e.olpopup)}}):e.olpopup=new OpenLayers.Popup.Popover("null",lonlat,r.html(),o.title,e.onClose),e.$on("$destroy",function(t){e.olpopup&&e.olpopup.destroy(),e.feature.popup=null,c.map.olmap.removePopup(e.olpopup)})})}}}]).directive("olPopupConfirm",["ol.config","$parse","$log","$compile",function(e,t,a,i){return{restrict:"EA",require:["^olMap"],replace:!0,scope:{popupType:"@",name:"@",feature:"=",geometry:"=",show:"@",title:"@",confirmMessage:"@",acceptButtonText:"@",cancelButtonText:"@",lonlat:"@",onClose:"&",onAccept:"&",onCancel:"&"},compile:function(e,a){return{post:function(e,t,a,i,s){},pre:function(e,a,s,r,o){var n='<div><p>{{confirmMessage}}</p><div class="btn-group"><button ng-click="onAccept()">{{acceptButtonText}}</button><button ng-click="onCancel()">{{cancelButtonText}}</button></div></div>',l=i(n),c=l(e);a.append(c);var d=r[0],p=t(s.lonlat)();if("anchored"==s.popupType)e.olpopup=new OpenLayers.Popup.Anchored(feature.id||geometry.id,p,null,c.html(),null,!0);else if("framedcloud"==s.popupType)e.olpopup=new OpenLayers.Popup.FramedCloud(feature.id,p,null,c.html(),null,!0);else{if("popover"!=s.popupType)throw"popupType not allowed. Use framedcloud,anchored or popover";e.olpopup=new OpenLayers.Popup.Popover(e.title,p,c.html(),e.title,e.onClose)}d.map.olmap.addPopup(e.olpopup),e.$on("$destroy",function(t){e.olpopup.destroy(),e.feature&&(e.feature.popup=null),d.map.olmap.removePopup(e.olpopup)})}}}}}]).directive("olButton",["ol.config","$parse",function(e,t){return{restrict:"EA",replace:!0,html:"",require:["^olMap","^olPanel"],scope:{active:"@",olTrigger:"&"},compile:function(e,a,i){return{pre:function(e,t,a,i){},post:function(e,a,i,s){var r=s[0],o=s[1],n=e.olTrigger;angular.isFunction(n)||(n=t(e.olTrigger)),e.olbutton=new OpenLayers.Control.Button({text:i.text,title:i.title,icon:i.icon,displayClass:i.displayClass,trigger:n}),o&&o.panel?o.panel.olpanel.addControls([e.olbutton]):r&&r.map.olmap.addControls([e.olbutton]),e.$watch("active",function(t){e.olbutton&&(t?e.olbutton.activate():e.olbutton.deactivate())}),e.$on("$destroy",function(t){e.olbutton.destroy(),o&&o.panel?o.panel.olpanel.removeControl(e.olbutton):r&&r.map.olmap.removeControl(e.olbutton)})}}}}}]).directive("olPanel",["ol.config","$parse",function(e,t){return{restrict:"EA",replace:!0,html:"",require:"^olMap",controller:["$scope",function(e){var t=this;t.panel=e}],scope:{active:"@"},compile:function(e,t,a){return{pre:function(e,t,a,i){e.olpanel=new OpenLayers.Control.Panel({createControlMarkup:function(e){var t=document.createElement("a"),a=document.createElement("i");return a.setAttribute("class",e.icon),a.innerHTML="&nbsp;",e.text&&(a.innerHTML="&nbsp;"+e.text),t.appendChild(a),t}})},post:function(e,t,a,i){i.map.olmap.addControl(e.olpanel),e.$watch("active",function(t){e.olpanel&&(t?e.olpanel.activate():e.olpanel.deactivate())}),e.$on("$destroy",function(t){e.olpanel.destroy(),i.map.olmap.removeControl(e.olpanel)})}}}}}]).directive("olBaselayerSwitcher",["ol.config","$parse",function(e,t){return{restrict:"EA",replace:!0,html:"",require:"^olMap",controller:["$scope",function(e){var t=this;t.panel=e}],scope:{name:"@olBaselayerSwitcher"},compile:function(e,t,a){return{pre:function(e,t,a,i){},post:function(e,t,a,i){t.on("click",function(t){e.$apply(function(){var t=i.map.olmap.getLayersByName(e.name);i.map.olmap.setBaseLayer(t[0]),i.map.olmap.baseLayer.setVisibility(!0)})})}}}}}]).directive("olMarker",["ol.config","$injector","$parse",function(e,t,a){return{restrict:"E",replace:!0,priority:15,html:"",require:"^olLayer",scope:{feature:"=",lonlat:"@",mousedown:"&"},compile:function(e,t,a){return{pre:function(e,t,a,i){},post:function(e,t,a,i){var s=a.size.split(","),r=new OpenLayers.Size(s[0],s[1]),o=new OpenLayers.Pixel(-(r.w/2),-r.h);if(e.icon=new OpenLayers.Icon(a.icon,r,o),e.feature)e.marker=new OpenLayers.Marker(feature.lonlat,e.icon);else{var n=a.lonlat.split(",");e.marker=new OpenLayers.Marker(new OpenLayers.LonLat(n[0],n[1]),e.icon)}e.mousedown&&e.marker.events.register("mousedown",e.marker,e.mousedown),i.layer.ollayer.addMarker(e.marker),a.$observe("lonlat",function(t){i.layer.ollayer.removeMarker(e.marker);var a=t;if(angular.isString(t)){var s=t.split(",");a=new OpenLayers.LonLat(s[0],s[1])}e.marker=new OpenLayers.Marker(a,e.icon.clone()),i.layer.ollayer.addMarker(e.marker)}),e.$on("$destroy",function(){i.layer.ollayer.removeMarker(e.marker)})}}}}}]).factory("ol.services.map",["$rootScope",function(e){var t=null;return{map:t}}])}(),function(){"use strict";function e(){return{restrict:"E",scope:{templateUrl:"@",model:"=?",label:"@",icon:"@",btnClass:"@",onAccept:"&",onCancel:"&",dialogSize:"@"},controller:["$scope","$uibModal",function(e,t){e.openDialog=function(){var a=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:e.templateUrl,controller:"OpenDialogBtnCtrl",controllerAs:"vm",resolve:{model:function(){return e.model}},size:e.dialogSize});a.result.then(function(t){e.onAccept(t)},function(){e.onCancel()})}}],replace:!0,template:'<a href="" ng-click="openDialog()"><i ng-class="btnIcon"></i> {{label}}</a>'}}angular.module("Qualigy.theme.components").directive("openDialogAnchor",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{templateUrl:"@",model:"=?",btnLabel:"@",btnIcon:"@",btnClass:"@",onAccept:"&",onCancel:"&",dialogSize:"@"},controller:["$scope","$uibModal",function(e,t){e.openCreateDialog=function(){var a=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:e.templateUrl,controller:"OpenDialogBtnCtrl",controllerAs:"vm",backdrop:"static",resolve:{model:function(){return e.model}},size:e.dialogSize});a.result.then(function(t){e.onAccept(t)},function(){e.onCancel()})}}],replace:!0,template:'<button type="button" class="btn btn-primary" ng-class="btnClass" ng-click="openCreateDialog()"><i ng-class="btnIcon"></i><span> {{btnLabel}}</span></button>'}}angular.module("Qualigy.theme.components").directive("openDialogBtn",e)}(),function(){"use strict";function e(e,t){var a=this;a.model=t,a.ok=function(){e&&e.close(data)},a.cancel=function(){e&&e.dismiss("cancel")}}e.$inject=["$uibModalInstance","model"],angular.module("Qualigy.theme.components").controller("OpenDialogBtnCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/theme/components/pageTop/pageTop.html",controller:"PageTopCtrl",controllerAs:"vm",bindToController:!0}}angular.module("Qualigy.theme.components").directive("pageTop",e)}(),function(){"use strict";function e(e,t,a){function i(){s.user=t.getUser()}var s=this;s.logout=t.logout,i()}e.$inject=["$scope","AuthService","$window"],angular.module("Qualigy.theme.components").controller("PageTopCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",templateUrl:"app/theme/components/searchCenter/searchCenter.html",controller:"SearchCenterCtrl"}}angular.module("Qualigy.theme.components").directive("searchCenter",e)}(),function(){"use strict";function e(e,t,a,i){e.keywords=t.search().keywords,e.origin=t.search().origin,e.searchItems=i.getSearchItems(),e.selectedItem=e.searchItems[0],e.selectedSearchItem=function(t){e.selectedItem=e.searchItems[t]},e.executeSearch=function(){var t=e.selectedItem.stateParams||{};t[e.selectedItem.keyword]=e.keywords,a.go(e.selectedItem.stateRef,t)}}e.$inject=["$scope","$location","$state","searchCenterService"],angular.module("Qualigy.theme.components").controller("SearchCenterCtrl",e)}(),function(){"use strict";function e(){var e=[];this.addSearchItem=function(){e.push.apply(e,arguments)},this.$get=["$state","$security",function(t,a){function i(){function i(){return t.get().filter(function(e){return!e.permissions||a.hasAnyPermission(e.permissions)}).filter(function(e){return e.searchMeta}).map(function(e){var t=e.searchMeta;return{name:e.name,title:t.title||e.title,icon:t.icon,tooltip:t.tooltip,keyword:t.keyword,level:(e.name.match(/\./g)||[]).length,order:t.order,stateRef:e.name,stateParams:t.params}}).sort(function(e,t){return 100*(e.level-t.level)+e.order-t.order})}this.getSearchItems=function(){var t=i(),s=t.filter(function(e){return 0==e.level});s.forEach(function(e){var a=t.filter(function(t){return 1==t.level&&0===t.name.indexOf(e.name)});e.subSearch=a.length?a:null});var r=e.filter(function(e){return!e.permissions||a.hasAnyPermission(e.permissions.split(","))});return s=s.concat(r)},this.getAllStateRefsRecursive=function(e){function t(e){e.subSearch&&e.subSearch.forEach(function(e){e.stateRef&&a.push(e.stateRef),t(e)})}var a=[];return t(e),a}}return new i}],this.$get.$inject=["$state","$security"]}angular.module("Qualigy.theme.components").provider("searchCenterService",e)}(),function(){"use strict";function e(){return{restrict:"EA",scope:{ngModel:"="},templateUrl:"app/theme/components/widgets/widgets.html",replace:!0}}angular.module("Qualigy.theme.components").directive("widgets",e)}(),function(){"use strict";function e(e){return function(t){return e.images.root+t}}e.$inject=["layoutPaths"],angular.module("Qualigy.theme").filter("appImage",e)}(),function(){"use strict";function e(e){return function(t){return e.images.root+"theme/icon/kameleon/"+t+".svg"}}e.$inject=["layoutPaths"],angular.module("Qualigy.theme").filter("kameleonImg",e)}(),function(){"use strict";function e(e){return function(t,a){return a=a||"png",e.images.profile+t+"."+a}}e.$inject=["layoutPaths"],angular.module("Qualigy.theme").filter("profilePicture",e)}(),function(){"use strict";function e(e){return function(t,a,i,s){return s=s||"",i?(t||[]).map(function(t){return e.instant(s+t[i])}).join(a||", "):(t||[]).map(function(t){return e.instant(s+t)}).join(a||", ")}}e.$inject=["$translate"],angular.module("Qualigy.theme").filter("joinBy",e)}(),function(){"use strict";function e(){return function(e){return e?String(e).replace(/<[^>]+>/gm,""):""}}angular.module("Qualigy.theme").filter("plainText",e)}(),function(){"use strict";function e(e){return e.trustAsHtml}e.$inject=["$sce"],angular.module("Qualigy.theme").filter("unsafe",e)}(),function(){"use strict";function e(e,t,a,i){function s(){r.error=null,r.resetAccount.password==r.confirmPassword&&i.resetPasswordFinish({key:e.key,newPassword:r.resetAccount.password}).then(function(){r.success="OK",t(function(){a.location.href="/public.html"},3e3)}).catch(function(){r.success=null,r.error="ERROR"})}var r=this;r.keyMissing=angular.isUndefined(e.key),r.confirmPassword=null,r.doNotMatch=null,r.error=null,r.finishReset=s,r.resetAccount={},r.success=null}e.$inject=["$stateParams","$timeout","$window","AuthService"],angular.module("Qualigy.pages.account").controller("ResetFinishCtrl",e)}(),function(){"use strict";function e(e,t,a){function i(){s.isSubmit=!0,s.error=null,s.errorEmailNotExists=null,a(function(){s.isSubmit&&(s.success="OK")},3e3),t.resetPasswordInit(s.resetAccount.email).then(function(){s.success="OK"}).catch(function(e){s.success=null,s.isSubmit=!1,400===e.status&&"email address not registered"===e.data?s.errorEmailNotExists="ERROR":s.error="ERROR"})}var s=this;s.error=null,s.errorEmailNotExists=null,s.requestReset=i,s.resetAccount={},s.success=null,s.isSubmit=!1}e.$inject=["$scope","AuthService","$timeout"],angular.module("Qualigy.pages.account").controller("RequestResetCtrl",e)}(),function(){"use strict";function e(){return{scope:{panel:"=?",openDetail:"@?",cssClass:"@"},restrict:"E",controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(i){var s=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/admin/layergroups/create/layergroup-create-dlg.html",controller:"LayerGroupCreateCtrl",controllerAs:"vm",size:i,backdrop:"static",resolve:{panel:function(){return e.panel}}});s.result.then(function(t){e.$bus.channel("layergroups").publish("item.created",t),e.openDetail&&"true"==e.openDetail&&a.go("admin.layergroups.detail",{id:t.id})})}}],replace:!0,link:function(e,t){e.cssClass=e.cssClass||"btn btn-primary"},template:'<button type="button" ng-class="cssClass" ng-click="openCreateDialog()"><i class="ion-plus-round"></i></button>'}}angular.module("Qualigy.pages.admin").directive("layergroupCreateBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i){function s(){l.model={panel:i,enabled:!0,description:"",layergroupClass:"WMS"}}function r(){l.newForm.$valid&&e.post(l.model).then(function(e){t.close(e)})}function o(){t.dismiss("cancel")}function n(e){return a.getList(e)}var l=this;l.ok=r,l.cancel=o,l.searchPanels=n,s()}e.$inject=["LayerGroups","$uibModalInstance","Panels","panel"],angular.module("Qualigy.pages.admin").controller("LayerGroupCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{layergroup:"=",onClose:"&"},controller:"LayerGroupDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/layergroups/detail/layergroup-detail.html"}}angular.module("Qualigy.pages.admin").directive("layergroupDetail",e)}(),function(){"use strict";function e(e,t,a,i){function s(){var e=a.showConfirmationDeleteMessage();return e.result.then(function(e){return n.model.remove().then(function(e){toastr.success($translate.instant("app."+topic.substring(0,topic.length-1)+".deleted",e)),channel.publish("item.removed",e),n.close()},function(e){toastr.error($translate.instant("app."+topic.substring(0,topic.length-1)+".delete.error",data))})})}function r(){n.model=n.layergroup}function o(e){return i.getList(e)}var n=this;n.searchPanels=o,n.remove=s,t("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:n,topic:"layergroups"}),r()}e.$inject=["$scope","$controller","modalService","Panels"],angular.module("Qualigy.pages.admin").controller("LayerGroupDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{layergroup:"=",layers:"=?"},controller:"LayerGroupLayersCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/layergroups/layers/layergrouplayers-table.html"}}angular.module("Qualigy.pages.admin").directive("layergroupLayers",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){c.layers?c.items=c.layers:c.layergroup.getLayers().then(function(e){c.items=c.layers=e});e.$bus.subscribe({channel:"layers",topic:"item.created",callback:function(e,t){c.items||(c.items=[]),c.items.push(e)}})}function n(e){c.layergroup.removeLayer(e).then(function(t){toastr.success(s.instant("app.layer.deleted",t));var a=c.layers.indexOf(e);a>-1&&c.layers.splice(a,1)})}function l(e){a.go("admin.layers.detail",{id:e.id})}var c=this;c.showLayer=l,c.unlinkLayer=n,o()}e.$inject=["$scope","$controller","$state","Layers","$translate","modalService"],angular.module("Qualigy.pages.admin").controller("LayerGroupLayersCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"LayerGroupsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/layergroups/search/layergroups-search.html"}}angular.module("Qualigy.pages.admin").directive("layergroupSearch",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){s.getList({resource:"layergroups"}).then(function(e){n.tags=e}),n.searchTerms.enabled=!0,n.doSearch(),e.$watch("vm.searchTerms.enabled",function(e,t){e?n.searchTerms.enabled=!0:delete n.searchTerms.enabled,n.doSearch()})}function o(e){e&&(n.searchTerms.tags||(n.searchTerms.tags=[]),n.searchTerms.tags.indexOf(e.tag)<0?n.searchTerms.tags.push(e.tag):n.searchTerms.tags=n.searchTerms.tags.filter(function(t){return t!==e.tag}),n.doSearch())}var n=this;t("SearchCtrl",{$scope:e,vm:n,resource:i,config:{size:50}}),n.toggleTag=o,r()}e.$inject=["$scope","$controller","$state","LayerGroups","Tags"],angular.module("Qualigy.pages.admin").controller("LayerGroupsSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{layergroup:"=?",openDetail:"@?",cssClass:"@"},controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(i){var s=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/admin/layers/create/layer-create-dlg.html",controller:"LayerCreateCtrl",controllerAs:"vm",size:i,backdrop:"static",resolve:{layergroup:function(){return e.layergroup}}});s.result.then(function(t){e.$bus.channel("layers").publish("item.created",t),e.openDetail&&"true"==e.openDetail&&a.go("admin.layers.detail",{id:t.id})})}}],replace:!0,link:function(e,t){e.cssClass=e.cssClass||"btn btn-primary"},template:'<button type="button" ng-class="cssClass" ng-click="openCreateDialog()"><i class="ion-plus-round"></i></button>'}}angular.module("Qualigy.pages.admin").directive("layerCreateBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s){function r(){c.model={layerClass:"WMS",enabled:!0,layerGroup:s,queryable:!1,downloable:!1}}function o(){c.newForm.$valid&&e.post(c.model).then(function(e){a.close(e)})}function n(){a.dismiss("cancel")}function l(e){return i.getList(e)}var c=this;c.ok=o,c.cancel=n,c.searchLayerGroups=l,r()}e.$inject=["Layers","$scope","$uibModalInstance","LayerGroups","layergroup"],angular.module("Qualigy.pages.admin").controller("LayerCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{layer:"=",onClose:"&"},controller:"LayerDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/layers/detail/layer-detail.html"}}angular.module("Qualigy.pages.admin").directive("layerDetail",e)}(),function(){"use strict";function e(e,t,a,i){function s(){o.model=o.layer}function r(e){return i.getList(e)}var o=this;o.searchLayerGroups=r,t("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:o,topic:"layers"}),s()}e.$inject=["$scope","$controller","modalService","LayerGroups"],angular.module("Qualigy.pages.admin").controller("LayerDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{layer:"="},controller:"LayerMapCrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/admin/layers/map/layer-map.html"}}angular.module("Qualigy.pages.admin").directive("layerMap",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){}var n=this;n.model=n.layer,t("BaseMapCtrl",{$scope:e,vm:n,editable:!0,loadMembers:!1,dailyMap:!1}),o()}e.$inject=["$scope","$controller","$interval","$filter","leafletData","$uibModal"],angular.module("Qualigy.pages.admin").controller("LayerMapCrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"LayersSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/layers/search/layers-search.html"}}angular.module("Qualigy.pages.admin").directive("layerSearch",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){s.getList({resource:"layers"}).then(function(e){c.tags=e}),c.searchTerms.enabled=!0,c.doSearch(),e.$watch("vm.searchTerms.enabled",function(e,t){e?c.searchTerms.enabled=!0:delete c.searchTerms.enabled,c.doSearch()})}function n(e){e&&(c.searchTerms.tags||(c.searchTerms.tags=[]),c.searchTerms.tags.indexOf(e.tag)<0?c.searchTerms.tags.push(e.tag):c.searchTerms.tags=c.searchTerms.tags.filter(function(t){return t!==e.tag}),c.doSearch())}function l(t){var a=r.showConfirmationDeleteMessage();a.result.then(function(a){t.remove().then(function(){c.searchResults=c.searchResults.filter(function(e){return e.id!=t.id}),e.$bus.channel("layers").publish("item.removed",t)})})}var c=this;t("SearchCtrl",{$scope:e,vm:c,resource:i,config:{size:5e4}}),c.toggleTag=n,c.removeLayer=l,o()}e.$inject=["$scope","$controller","$state","Layers","Tags","modalService"],angular.module("Qualigy.pages.admin").controller("LayersSearchCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:["$scope","$uibModal","$state",function(e,t,a){e.openCreateDialog=function(e){var i=t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/admin/panels/create/panel-create-dlg.html",controller:"PanelCreateCtrl",controllerAs:"vm",backdrop:"static",size:e});i.result.then(function(e){a.go("admin.panels.detail",{id:e.id})})}}],replace:!0,template:'<button type="button" class="btn btn-primary" ng-click="openCreateDialog()" title="{{\'app.panel.home.createLabel\' | translate}}"><i class="ion-plus-round"></i></button>'}}angular.module("Qualigy.pages.admin").directive("panelCreateBtn",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a){function i(){n.model={enabled:!0}}function s(){n.newForm.$valid&&e.post(n.model).then(function(e){t.close(e)})}function r(){t.dismiss("cancel")}function o(t){return e.getList(t)}var n=this;n.ok=s,n.cancel=r,n.searchLayerGroups=o,i()}e.$inject=["Panels","$uibModalInstance","LayerGroups"],angular.module("Qualigy.pages.admin").controller("PanelCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{panel:"=",onClose:"&"},controller:"PanelDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/panels/detail/panel-detail.html"}}angular.module("Qualigy.pages.admin").directive("panelDetail",e)}(),function(){"use strict";function e(e,t,a,i){function s(){n.model=n.panel}function r(e){return i.getList(e)}function o(){var e=a.showConfirmationDeleteMessage();return e.result.then(function(e){return n.model.remove().then(function(e){toastr.success($translate.instant("app."+topic.substring(0,topic.length-1)+".deleted",e)),channel.publish("item.removed",e),n.close()},function(e){toastr.error($translate.instant("app."+topic.substring(0,topic.length-1)+".delete.error",data))})})}var n=this;n.searchPanels=r,n.remove=o,t("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:n,topic:"panels"}),s()}e.$inject=["$scope","$controller","modalService","Panels"],angular.module("Qualigy.pages.admin").controller("PanelDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{panel:"=",layergroups:"=?"},controller:"PanelLayerGroupsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/panels/layergroups/panel-layergroups-table.html"}}angular.module("Qualigy.pages.admin").directive("panelLayergroups",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){p.layergroups?p.items=p.layergroups:p.panel.getLayerGroups().then(function(e){p.items=p.layergroups=e});e.$bus.subscribe({channel:"layergroups",topic:"item.created",callback:function(e,t){p.items||(p.items=[]),p.items.push(e)}})}function c(e){p.panel.removeLayerGroup(e).then(function(t){toastr.success(o.instant("app.layergroup.deleted",t));var a=p.layergroups.indexOf(e);a>-1&&p.layergroups.splice(a,1)})}function d(e){a.go("admin.layergroups.detail",{id:e.id})}var p=this;p.showLayerGroup=d,p.unlinkLayerGroup=c,l()}e.$inject=["$scope","$controller","$state","$http","API_ENDPOINT","Layers","$translate","modalService"],angular.module("Qualigy.pages.admin").controller("PanelLayerGroupsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",controller:"PanelsSearchCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/admin/panels/search/panels-search.html"}}angular.module("Qualigy.pages.admin").directive("panelSearch",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){n.searchTerms.enabled=!0,n.doSearch(),e.$watch("vm.searchTerms.enabled",function(e,t){e?n.searchTerms.enabled=!0:delete n.searchTerms.enabled,n.doSearch()})}function o(t){var a=s.showConfirmationDeleteMessage();a.result.then(function(a){t.remove().then(function(){n.searchResults=n.searchResults.filter(function(e){return e.id!=t.id}),e.$bus.channel("panels").publish("item.removed",t)})})}var n=this;t("SearchCtrl",{$scope:e,vm:n,resource:i,config:{size:50}}),n.removePanel=o,r()}e.$inject=["$scope","$controller","$state","Panels","modalService"],angular.module("Qualigy.pages.admin").controller("PanelsSearchCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s,r){function o(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);p.model=i,p.model.dateTime||(p.model.dateTime=t),p.availableIcons=["assets/img/marker","assets/img/truck","assets/img/warning"],p.availableColors=["blue","red","green","yellow"]}function n(){p.newForm.$valid&&t.post(p.model).then(function(t){a.close(t),toastr.success(s.instant("app.gisasset.created",t)),e.$bus.channel("assets").publish("item.created",t)})}function l(){a.dismiss("cancel")}function c(e){return r.getList(e)}function d(e,t,a){console.log("Item:",e),console.log("Model:",t),console.log("Label:",a),e&&(p.model.name=p.model.assetitem&&p.model.name!==p.model.assetitem.name?p.model.name:e.name,p.model.owner=p.model.assetitem&&p.model.owner!==p.model.assetitem.owner?p.model.owner:e.owner,p.model.model=p.model.assetitem&&p.model.model!==p.model.assetitem.model?p.model.model:e.model,p.model.assetitem=e)}var p=this;p.create=n,p.cancel=l,p.searchAssetItems=c,p.onSelectAssetItem=d,o()}e.$inject=["$scope","GisAssets","$uibModalInstance","asset","$translate","AssetItems"],angular.module("Qualigy.pages.gislayouts").controller("GisAssetCreateCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s){function r(){d.model=a,c=e.$bus.channel("gisassets")}function o(){d.editForm.$valid&&d.model.patch().then(function(e){t.close(e),toastr.success(i.instant("app.gisasset.updated",e)),c.publish("item.changed",e)})}function n(){var e=s.showConfirmationDeleteMessage();e.result.then(function(e){d.model.remove().then(function(e){toastr.success(i.instant("app.gisasset.deleted",e)),c.publish("item.removed",e),t.close()})})}function l(){t.dismiss("cancel")}var c,d=this;d.save=o,d.cancel=l,d.remove=n,r()}e.$inject=["$scope","$uibModalInstance","asset","$translate","modalService"],angular.module("Qualigy.pages.gislayouts").controller("GisAssetEditCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodelayers:"=?",selectedlayers:"=?",onSave:"&?",onCancel:"&?"},controller:"EpisodeLayersEditCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodelayers/edit/episodelayers-edit.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodelayersEdit",e)}(),/*
 * ---------- . --------------
 * @Author:    Pablo Dorgambide [@pdorgambide]-pdorgambide@qualigy.com
 * @Date:      2022-02-14 22:21:58
 * @Company:   Qualigy Solutions Innovation (c) 2022
 * @Web:       
 * @Last Modified by:   pdorgambide
 * @Last Modified time: 2022-02-24 22:30:23
 */
function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c){function d(){g.ignoreChanges=!1,g.basicConfig={core:{multiple:!0,check_callback:!0,worker:!0,callback:{onselect:function(e,t){var a=$(e).attr("id"),i=ComParentSet.getScript(a);i.doXYZ()}}},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","checkbox","sort"],version:1},m()}function p(){var e=g.basicTree.jstree("get_selected",!0);return g.selectedlayers||(g.selectedlayers=[]),g.selectedlayers.length=0,angular.forEach(e,function(e){"layer"==e.type&&g.selectedlayers.push(e.data)}),e}function u(){var e=g.episodelayers,t=p(),i=t.map(function(e){return e.id}),s=e.filter(function(e){return!i.includes(e.layer.id)}),r=e.map(function(e){return e.layer.id}),o=g.selectedlayers.filter(function(e){return!r.includes(e.id)}).map(function(e){return{episode:g.pollutionepisode,layer:e}}),n=s.reduce(function(e,t){return e.then(function(){return t.remove()})},a.resolve());console.log("Removed ",s.length);var l=o.reduce(function(e,t){return e.then(function(){return c.post(t)})},a.resolve()),d=a.defer();return a.all([n,l]).then(function(){g.pollutionepisode.getEpisodeLayers().then(function(e){angular.extend(g.episodelayers,e),d.resolve()})}),d.promise}function m(){g.ignoreChanges=!0,r.getList({projection:"tree",enabled:!0,size:1e4}).then(function(e){g.treeData=[],h(e,g.treeData),g.basicConfig.version++})}function h(e,t){if(e&&!(t.filter(function(t){return t.id==e.id}).length>0))if(t||(t=[]),Array.isArray(e))e.forEach(function(e){h(e,t)});else{var a={id:e.id,text:e.name,parent:"#",data:e,state:{opened:!1}};"Layer"==e.dtype?(a.type="layer",a.text=e.name+" ("+e.level+")",e.layerGroup&&(a.parent=e.layerGroup.id,h(e.layerGroup,t)),t.push(a)):"LayerGroup"==e.dtype?(a.type="group",e.panel&&(a.parent=e.panel.id,h(e.panel,t)),t.push(a)):"Panel"==e.dtype&&(a.type="panel",a.parent="#",a.state={opened:!0},t.push(a))}}var g=this;g.navigate=t.navigate,g.saveSelectedLayers=u,g.readyCB=function(){var e=g.basicTree.jstree(!0);e.deselect_all(!0),g.episodelayers.forEach(function(t){e.select_node(t.layer.id)}),g.basicTree.on("deselect_node.jstree",function(e,t){p()}),g.basicTree.on("select_node.jstree",function(e,t){p()}),i(function(){p(),g.ignoreChanges=!1})},g.applyModelChanges=function(){return!g.ignoreChanges},d()}e.$inject=["$scope","$rootScope","$q","$timeout","UserLogins","Layers","modalService","$translate","Panels","EpisodeLayers"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeLayersEditCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodelayers:"=?",selectedlayers:"=?"},controller:"EpisodeLayersEditCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodelayers/edit/episodelayers-edit.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodelayersSelect",e)}(),/*
 * ---------- . --------------
 * @Author:    Pablo Dorgambide [@pdorgambide]-pdorgambide@qualigy.com
 * @Date:      2022-02-14 22:21:58
 * @Company:   Qualigy Solutions Innovation (c) 2022
 * @Web:       
 * @Last Modified by:   pdorgambide
 * @Last Modified time: 2022-02-24 22:30:23
 */
function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c){function d(){g.ignoreChanges=!1,g.basicConfig={core:{multiple:!0,check_callback:!0,worker:!0,callback:{onselect:function(e,t){var a=$(e).attr("id"),i=ComParentSet.getScript(a);i.doXYZ()}}},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","checkbox","sort"],version:1},m()}function p(){var e=g.basicTree.jstree("get_selected",!0);return g.selectedlayers||(g.selectedlayers=[]),g.selectedlayers.length=0,angular.forEach(e,function(e){"layer"==e.type&&g.selectedlayers.push(e.data)}),e}function u(){var e=g.episodelayers,t=p(),i=t.map(function(e){return e.id}),s=e.filter(function(e){return!i.includes(e.layer.id)}),r=e.map(function(e){return e.layer.id}),o=g.selectedlayers.filter(function(e){return!r.includes(e.id)}).map(function(e){return{episode:g.pollutionepisode,layer:e}}),n=s.reduce(function(e,t){return e.then(function(){return t.remove()})},a.resolve());console.log("Removed ",s.length);var l=o.reduce(function(e,t){return e.then(function(){return c.post(t)})},a.resolve()),d=a.defer();return a.all([n,l]).then(function(){g.pollutionepisode.getEpisodeLayers().then(function(e){angular.extend(g.episodelayers,e),d.resolve()})}),d.promise}function m(){g.ignoreChanges=!0,r.getList({projection:"tree",enabled:!0,size:1e4}).then(function(e){g.treeData=[],h(e,g.treeData),g.basicConfig.version++})}function h(e,t){if(e&&!(t.filter(function(t){return t.id==e.id}).length>0))if(t||(t=[]),Array.isArray(e))e.forEach(function(e){h(e,t)});else{var a={id:e.id,text:e.name,parent:"#",data:e,state:{opened:!1}};"Layer"==e.dtype?(a.type="layer",a.text=e.name+" ("+e.level+")",e.layerGroup&&(a.parent=e.layerGroup.id,h(e.layerGroup,t)),t.push(a)):"LayerGroup"==e.dtype?(a.type="group",e.panel&&(a.parent=e.panel.id,h(e.panel,t)),t.push(a)):"Panel"==e.dtype&&(a.type="panel",a.parent="#",a.state={opened:!0},t.push(a))}}var g=this;g.navigate=t.navigate,g.saveSelectedLayers=u,g.readyCB=function(){var e=g.basicTree.jstree(!0);e.deselect_all(!0),g.episodelayers.forEach(function(t){e.select_node(t.layer.id)}),g.basicTree.on("deselect_node.jstree",function(e,t){p()}),g.basicTree.on("select_node.jstree",function(e,t){p()}),i(function(){p(),g.ignoreChanges=!1})},g.applyModelChanges=function(){return!g.ignoreChanges},d()}e.$inject=["$scope","$rootScope","$q","$timeout","UserLogins","Layers","modalService","$translate","Panels","EpisodeLayers"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeLayersSelectCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodelayers:"=?"},controller:"EpisodeLayersCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodelayers/tree/episodelayers-tree.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodelayersTree",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){c.basicConfig={core:{multiple:!1,check_callback:!0,worker:!1},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","sort"],version:1};e.$bus.subscribe({channel:"episodelayers",topic:"list.changed",callback:function(e,t){c.pollutionepisode.getEpisodeLayers().then(function(e){c.episodelayers=e,n()})}});n()}function o(){return!c.ignoreChanges}function n(){c.treeData=[],c.ignoreChanges=!0;var e=c.episodelayers.map(function(e){return e.layer});l(e,c.treeData),c.basicConfig.version++}function l(e,t){if(e){t||(t=[]);var a=t.filter(function(t){return t.id==e.id});if(!(a.length>0))if(Array.isArray(e))e.forEach(function(e){l(e,t)});else{var i={id:e.id,text:e.name,data:e,state:{opened:!1}};e.layerGroup?(i.parent=e.layerGroup.id,i.type="layer",i.text=e.name+" ("+e.level+")",t.push(i),l(e.layerGroup,t)):e.panel?(i.type="group",i.parent=e.panel.id,t.push(i),l(e.panel,t)):(i.type="panel",i.parent="#",i.state={opened:!1},t.push(i))}}}var c=this;c.navigate=t.navigate,c.applyModelChanges=o,r()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeLayersCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episodeobserver:"=",onClose:"&"},controller:"EpisodeUserDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeobservers/detail/episodeobserver-detail.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeobserverDetail",e)}(),function(){"use strict";function e(e,t){function a(){s.model=s.episodeobserver}function i(e){return t.getList(e)}var s=this;s.searchUserLogins=i,a()}e.$inject=["$scope","UserLogins"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeUserDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodeobservers:"=?"},controller:"EpisodeObserversTableCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeobservers/table/episodeobservers-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeobserversTable",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){f.size=y,f.episodeobservers?f.items=f.episodeobservers:o(),v=e.$bus.channel("episodeobservers");e.$bus.subscribe({channel:"episodeobservers",topic:"item.*",callback:function(e,t){o()}}),e.$bus.subscribe({channel:"episodeobservers",topic:"layers.changed",callback:function(e,t){o()}})}function o(){f.pollutionepisode.getEpisodeObservers&&f.pollutionepisode.getEpisodeObservers().then(function(e){f.episodeobservers=f.items=e})}function n(e,t){return f.pollutionepisode.addEpisodeObserver(t).then(function(e){angular.extend(t,e),l(e),v.publish("item.created",e),f.insertedRow=null})}function l(t){var a=i.showConfirmationMessage(s.instant("app.episodeobserver.assign.logbookrecords.title"),s.instant("app.episodeobserver.assign.logbookrecords.message"));a.result.then(function(a){t.customPOST(null,"action/assign/logbookrecords").then(function(t){toastr.success(s.instant("app.episodeobserver.assign.logbookrecords.success",{count:t})),e.$bus.channel("logbookrecords").publish("list.changed",t)})})}function c(e,t){var a;return t.id?t.save().then(function(e){v.publish("item.changed",e),t.shallow&&l(e),delete t.shallow}):a=f.addRow(e,t),a}function d(e,t){t.shallow&&f.items.splice(f.items.indexOf(t),1),f.insertedRow=null,e.$cancel()}function p(e){var t=i.showConfirmationMessage(s.instant("app.episodeobserver.copydialog.title"),s.instant("app.episodeobserver.copydialog.message"),"ion-ios-copy-outline ion-lg");t.result.then(function(t){e.copy().then(function(e){toastr.success(s.instant("app.episodeobserver.copydialog.success"),s.instant("app.episodeobserver.copydialog.title")),f.items.push(e)})})}function u(e){if(e.remove){var t=i.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){v.publish("item.deleted",e);var t=f.items.indexOf(e);t>-1&&f.items.splice(t,1)})})}else{var a=f.items.indexOf(e);a>-1&&f.items.splice(a,1)}}function m(){var e=6e4;f.insertedRow={shallow:!0,startTime:new Date(Math.round((new Date).getTime()/e)*e)},f.items.push(f.insertedRow)}function h(e){return a.getList(e)}function g(e){var t={userLogin:e};return f.pollutionepisode.addEpisodeUser(t).then(function(e){o()})}var v,f=this,y=5;f.addRow=n,f.insertRow=m,f.saveRow=c,f.cancelEdit=d,f.deleteRow=u,f.searchUserLogins=h,f.navigate=t.navigate,f.cloneRow=p,f.onCreateUserLogin=g,r()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeObserversTableCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodeobservers:"=?",selectedusers:"=?",onSave:"&?",onCancel:"&?"},controller:"EpisodeObserversTreeCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeobservers/tree/episodeobservers-tree.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeobserversTree",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){u.basicConfig={core:{multiple:!0,check_callback:!0,worker:!1},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","checkbox","sort"],version:1};e.$bus.subscribe({channel:"episodeobservers",topic:"item.*",callback:function(e,t){u.pollutionepisodes.getEpisodeObservers().then(function(e){u.episodeobservers=e,c()})}});c()}function n(){return!u.ignoreChanges}function l(){u.basicTree.jstree(!0);u.basicTree.on("deselect_node.jstree",function(e,t){p()}),u.basicTree.on("select_node.jstree",function(e,t){p()}),r(function(){u.ignoreChanges=!1})}function c(){u.treeData=[],u.ignoreChanges=!0,u.episodeobservers?d(u.episodeobservers,u.treeData):a.getList({size:1e4}).then(function(e){u.episodeobservers=e.map(function(e){return{episode:u.pollutionepisode,userLogin:e,layers:[]}}),d(u.episodeobservers,u.treeData)}),u.basicConfig.version++}function d(e,t,a){if(e){t||(t=[]);var i=t.filter(function(t){return t.id==a+"."+e.id});if(!(i.length>0))if(Array.isArray(e))e.forEach(function(e){d(e,t,a)});else{var s={id:a?a+"."+e.id:e.id,text:e.name,data:e,state:{checkbox_disabled:!0,opened:!1}};e.layerGroup?(s.parent=a?a+"."+e.layerGroup.id:e.layerGroup.id,s.type="layer",s.text=e.name+" ("+e.level+")",t.push(s),d(e.layerGroup,t,a)):e.panel?(s.type="group",s.parent=a?a+"."+e.panel.id:e.panel.id,t.push(s),d(e.panel,t,a)):e.layers?e.episode&&(s.text=e.userLogin.fullName||e.userLogin.username+" ["+e.userLogin.userRole.role+"]",s.type="user",s.parent="#",s.state={checkbox_disabled:!1,opened:!1},t.push(s),e.layers&&d(e.layers,t,e.id)):(s.type="panel",s.state={opened:!1},s.parent=a,t.push(s))}}}function p(){var e=u.basicTree.jstree("get_selected",!0);return u.selectedusers||(u.selectedusers=[]),u.selectedusers.length=0,angular.forEach(e,function(e){"user"==e.type&&u.selectedusers.push(e.data)}),e}var u=this;u.navigate=t.navigate,u.applyModelChanges=n,u.readyCB=l,o()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate","$timeout"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeObserversTreeCtrl",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){n.model=n.episodeuser}function o(){var t=a.open({templateUrl:"app/pages/pollutionepisodes/episodeusers/assign-layers/layer-select-dlg.html",size:"lg",controller:["$scope","$uibModalInstance","items","episodeuser",function(e,t,a,i){function s(){e.items=a,i.getLayers().then(function(e){a.forEach(function(t){e.forEach(function(e){e.id==t.id&&(t.selected=!0)})})}),e.layerGroups=a.map(function(e){return e.layerGroup}).filter(function(e,t,a){return a.map(function(e){return e.id}).indexOf(e.id)===t}),e.$watch("selectAll",function(t){e.items.forEach(function(a){e.layerGroupFilter(a)&&(a.selected=t)})})}e.clearFilter=function(){e.layerGroup=null},e.layerGroupFilter=function(t){return e.layerGroup&&e.layerGroup.id?t.layerGroup.id==e.layerGroup.id?t:void 0:t},e.ok=function(){var a=e.items.filter(function(e,t,a){return e.selected});t.close(a)},e.cancel=function(){t.dismiss("cancel")},e.toggleSelect=function(e){e.selected=!e.selected},s()}],resolve:{episodeuser:function(){return n.episodeuser},items:function(){return i.getList({enabled:!0,size:1e4})}}});t.result.then(function(t){n.episodeuser.addLayers(t).then(function(){n.episodeuser.getLayers().then(function(t){n.layers=t,e.$bus.channel("episodeuser").publish("layers.changed",t)})})})}var n=this;n.openDialog=o,r()}e.$inject=["$scope","$rootScope","$uibModal","Layers","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssignLayersCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{episodeuser:"="},controller:"AssignLayersCtrl",controllerAs:"vm",bindToController:!0,template:'<button type="button" class="{{class}}" ng-click="vm.openDialog()"><span data-translate="app.layer.home.linkLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.pollutionepisodes").directive("assignLayersBtn",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episodeuser:"=",onClose:"&"},controller:"EpisodeUserDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeusers/detail/episodeuser-detail.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeuserDetail",e)}(),function(){"use strict";function e(e,t){function a(){s.model=s.episodeuser}function i(e){return t.getList(e)}var s=this;s.searchUserLogins=i,a()}e.$inject=["$scope","UserLogins"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeUserDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodeuser:"=?",episodeusers:"=?",selectedlayers:"=?",onSave:"&",onCancel:"&"},controller:"EpisodeUsersEditLayersCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeusers/edit-layers/episodeusers-edit-layers.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeusersEditLayers",e)}(),/*
 * ---------- . --------------
 * @Author:    Pablo Dorgambide [@pdorgambide]-pdorgambide@qualigy.com
 * @Date:      2022-02-14 22:21:58
 * @Company:   Qualigy Solutions Innovation (c) 2022
 * @Web:       
 * @Last Modified by:   pdorgambide
 * @Last Modified time: 2022-05-20 22:53:31
 */
function(){"use strict";function e(e,t,a,i,s,r,o,n,l,c){function d(){v.ignoreChanges=!1,v.layersBasicConfig={core:{multiple:!0,check_callback:!0,worker:!1},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","checkbox","sort"],version:1},u()}function p(){var e=v.layersBasicTree.jstree("get_selected",!0);return v.selectedlayers||(v.selectedlayers=[]),v.selectedlayers.length=0,angular.forEach(e,function(e){"layer"==e.type&&v.selectedlayers.push(e.data)}),e}function u(){v.ignoreChanges=!0,c.getList({episode:v.pollutionepisode.id,size:1e4,projection:"tree"}).then(function(e){var t=e.map(function(e){return e.layer});v.treeLayersData=[],g(t,v.treeLayersData),console.log(v.treeLayersData),v.layersBasicConfig.version++})}function m(){var e=v.layersBasicTree.jstree(!0);v.episodeuser.layers&&v.episodeuser.layers.forEach(function(t){e.select_node(t.id)}),v.layersBasicTree.on("deselect_node.jstree",function(e,t){p()}),v.layersBasicTree.on("select_node.jstree",function(e,t){p()}),i(function(){v.ignoreChanges=!1})}function h(){return!v.ignoreChanges}function g(e,t,a){if(e){t||(t=[]);var i=t.filter(function(t){return t.id==e.id});if(i.length>0)return void console.log("Node with ID exists: "+e.id);if(Array.isArray(e))e.forEach(function(e){g(e,t,a)});else{var s={id:e.id,text:e.name,data:e,state:{opened:!1}};"Layer"==e.dtype?(s.type="layer",s.text=e.name+" ("+e.level+")",e.layerGroup&&(s.parent=e.layerGroup.id,g(e.layerGroup,t,a)),t.push(s)):"LayerGroup"==e.dtype?(s.type="group",e.panel&&(s.parent=e.panel.id,g(e.panel,t,a)),t.push(s)):"Panel"==e.dtype&&(s.type="panel",s.state={opened:!1},s.parent="#",t.push(s))}}}var v=this;v.readyLayersCB=m,v.applyModelChanges=h,d()}e.$inject=["$scope","$rootScope","$q","$timeout","UserLogins","Layers","modalService","$translate","Panels","EpisodeLayers"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeUsersEditLayersCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episodeuser:"=",layers:"=?"},controller:"EpisodeUserLayersCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeusers/layers/episodeuser-layers-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeuserLayers",e)}(),function(){"use strict";function e(e,t,a){function i(){d.size=p,d.layers?d.items=d.layers:s();e.$bus.subscribe({channel:"episodeuser",topic:"layers.changed*",callback:function(e,t){d.layers=e}})}function s(){d.episodeuser.getLayers().then(function(e){d.layers=d.items=e})}function r(e,t){return d.episodeuser.addLayer(t).then(function(e){angular.extend(t,e),d.insertedRow=null},function(t){return e.$setError("batea",t.data.message),t.data.message})}function o(e,t){var a;return t.importe=(t.cantidad*t.precioUnidad).toFixed(2),t.id?(t.recibo=d.recibo,a=t.save().then(function(e){channel.publish("item.changed",e),delete t.newItem},function(t){return e.$setError("batea",t.data.message),t.data.message})):a=d.addRow(e,t),a}function n(e,t){t.newItem&&d.items.splice(d.items.indexOf(t),1),d.insertedRow=null,e.$cancel()}function l(e){if(linea.remove){var t=modalService.showConfirmationDeleteMessage();t.result.then(function(e){linea.remove().then(function(){channel.publish("item.deleted",linea);var e=d.items.indexOf(linea);e>-1&&d.items.splice(e,1)})})}else{var a=d.items.indexOf(linea);a>-1&&d.items.splice(a,1)}}function c(e){return a.getList(e)}var d=this,p=5;d.addRow=r,d.saveRow=o,d.cancelEdit=n,d.deleteRow=l,d.searchLayers=c,d.navigate=t.navigate,i()}e.$inject=["$scope","$rootScope","Layers"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeUserLayersCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",episodeusers:"=?"},controller:"EpisodeUsersTableCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeusers/table/episodeusers-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeusersTable",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){v.size=f,v.episodeusers?v.items=v.episodeusers:o(),g=e.$bus.channel("episodeusers");e.$bus.subscribe({channel:"episodeusers",topic:"item.*",callback:function(e,t){o()}}),e.$bus.subscribe({channel:"episodeusers",topic:"layers.changed",callback:function(e,t){o()}})}function o(){v.pollutionepisode.getEpisodeUsers&&v.pollutionepisode.getEpisodeUsers().then(function(e){v.episodeusers=v.items=e})}function n(e,t){return v.pollutionepisode.addEpisodeUser(t).then(function(e){angular.extend(t,e),g.publish("item.created",e),v.insertedRow=null})}function l(e,t){var a;return t.id?t.save().then(function(e){g.publish("item.changed",e),delete t.shallow}):a=v.addRow(e,t),a}function c(e,t){t.shallow&&v.items.splice(v.items.indexOf(t),1),v.insertedRow=null,e.$cancel()}function d(e){var t=i.showConfirmationMessage(s.instant("app.episodeuser.copydialog.title"),s.instant("app.episodeuser.copydialog.message"),"ion-ios-copy-outline ion-lg");t.result.then(function(t){e.copy().then(function(e){toastr.success(s.instant("app.episodeuser.copydialog.success"),s.instant("app.episodeuser.copydialog.title")),v.items.push(e)})})}function p(e){if(e.remove){var t=i.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){g.publish("item.deleted",e);var t=v.items.indexOf(e);t>-1&&v.items.splice(t,1)})})}else{var a=v.items.indexOf(e);a>-1&&v.items.splice(a,1)}}function u(){v.insertedRow={shallow:!0},v.items.push(v.insertedRow)}function m(e){var t={userauthorities:"ROLE_POLLUTION_EPISODE_MAP",size:1e4,sort:"fullName,asc"};return a.getList(angular.extend(t,e))}function h(e){var t={userLogin:e};return v.pollutionepisode.addEpisodeUser(t).then(function(e){o()})}var g,v=this,f=5;v.addRow=n,v.insertRow=u,v.saveRow=l,v.cancelEdit=c,v.deleteRow=p,v.searchUserLogins=m,v.navigate=t.navigate,v.cloneRow=d,v.onCreateUserLogin=h,r()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeUsersTableCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",userauthorities:"@?",episodeusers:"=?",selectedusers:"=?",onSave:"&?",onCancel:"&?"},controller:"EpisodeUsersTreeCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/episodeusers/tree/episodeusers-tree.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeusersTree",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){u.basicConfig={core:{multiple:!0,check_callback:!0,worker:!1},types:{folder:{icon:"ion-ios-folder"},group:{icon:"ion-grid"},panel:{icon:"ion-ios-folder"},layer:{icon:"ion-document-text"},user:{icon:"ion-ios-person"},default:{icon:"ion-document-text"}},plugins:["types","checkbox","sort"],version:1};e.$bus.subscribe({channel:"episodeusers",topic:"item.*",callback:function(e,t){u.pollutionepisodes.getEpisodeUsers().then(function(e){u.episodeusers=e,c()})}});c()}function n(){return!u.ignoreChanges}function l(){u.basicTree.jstree(!0);u.basicTree.on("deselect_node.jstree",function(e,t){p()}),u.basicTree.on("select_node.jstree",function(e,t){p()}),r(function(){u.ignoreChanges=!1})}function c(){if(u.treeData=[],u.ignoreChanges=!0,u.episodeusers)d(u.episodeusers,u.treeData);else{var e={size:1e4};u.userauthorities&&(e.userauthorities=u.userauthorities),a.getList(e).then(function(e){u.episodeusers=e.map(function(e){return{episode:u.pollutionepisode,userLogin:e,layers:[]}}),d(u.episodeusers,u.treeData)})}u.basicConfig.version++}function d(e,t,a){if(e){t||(t=[]);var i=t.filter(function(t){return t.id==a+"."+e.id});if(!(i.length>0))if(Array.isArray(e))e.forEach(function(e){d(e,t,a)});else{var s={id:a?a+"."+e.id:e.id,text:e.name,data:e,state:{checkbox_disabled:!0,opened:!1}};e.layerGroup?(s.parent=a?a+"."+e.layerGroup.id:e.layerGroup.id,s.type="layer",s.text=e.name+" ("+e.level+")",t.push(s),d(e.layerGroup,t,a)):e.panel?(s.type="group",s.parent=a?a+"."+e.panel.id:e.panel.id,t.push(s),d(e.panel,t,a)):e.layers?e.episode&&(s.text=e.userLogin.fullName||e.userLogin.username+" ["+e.userLogin.userRole.role+"]",s.type="user",s.parent="#",s.state={checkbox_disabled:!1,opened:!1},t.push(s),e.layers&&d(e.layers,t,e.id)):(s.type="panel",s.state={opened:!1},s.parent=a,t.push(s))}}}function p(){var e=u.basicTree.jstree("get_selected",!0);return u.selectedusers||(u.selectedusers=[]),u.selectedusers.length=0,angular.forEach(e,function(e){"user"==e.type&&u.selectedusers.push(e.data)}),e}var u=this;u.navigate=t.navigate,u.applyModelChanges=n,u.readyCB=l,o()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate","$timeout"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeUsersTreeCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{episode:"=",gislayouts:"=?"},controller:"AssignGisLayoutsCtrl",controllerAs:"vm",bindToController:!0,template:'<button type="button" class="{{class}}" ng-click="vm.openDialog()"><span data-translate="app.gislayout.home.linkLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.pollutionepisodes").directive("assignGislayoutsBtn",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=a.open({templateUrl:"app/pages/pollutionepisodes/gislayouts/assignGislayouts/gislayout-select-dlg.html",controller:["$scope","$uibModalInstance","GisLayouts",function(e,t,a){function i(){e.dateRange={startDate:moment().add(-7,"day").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)},e.$watch("dateRange",function(){s()}),s()}function s(){var t;if(e.dateRange&&e.dateRange.startDate){var i=[e.dateRange.startDate.toDate(),e.dateRange.endDate.toDate()];t=angular.extend({episode:"null",sort:"createdTime,desc",size:1e4},{createdTime:i})}else t={episode:"null",sort:"createdTime,desc"};a.getList(t).then(function(t){e.items=t})}e.doSearch=s,e.ok=function(){var a=e.items.filter(function(e,t,a){return e.selected});t.close(a)},e.cancel=function(){t.dismiss("cancel")},e.toggleSelect=function(e){e.selected=!e.selected},i()}],windowClass:"modal-repair"});e.result.then(function(e){e.forEach(function(e){e.patch({episode:o.episode._links.self.href})})})}var o=this;o.openDialog=r}e.$inject=["$scope","$rootScope","$uibModal","GisLayouts","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssignGisLayoutsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episode:"=",gislayouts:"=?"},controller:"EpisodeGisLayoutsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/gislayouts/table/episode-gislayouts-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeGislayouts",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){c.sort={field:"createdTime",reverse:!1},e.$bus.subscribe({channel:"gislayouts",topic:"item.*",callback:function(e,t){o()}}),c.gislayouts?c.items=c.gislayouts:o()}function o(){var e={size:1e4};c.episode.getGisLayouts(e).then(function(e){c.gislayouts=c.items=e})}function n(e){return i.getList(e)}function l(e){e.patch({episode:null})}var c=this;c.navigate=t.navigate,c.unlinkGisLayout=l,a("EditableRowCtrl",{$scope:e,vm:c,Resource:i,parent:c.episode,items:c.gislayouts||c.items,addMethod:"addGisLayout",channel:"gislayouts"}),c.searchGisLayouts=n,r()}e.$inject=["$scope","$rootScope","$controller","GisLayouts","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeGisLayoutsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{episode:"=",logbookrecords:"=?"},controller:"AssignLogBookRecordsCtrl",controllerAs:"vm",bindToController:!0,template:'<button type="button" class="{{class}}" ng-click="vm.openDialog()"><span data-translate="app.logbookrecord.home.linkLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.pollutionepisodes").directive("assignLogbookrecordsBtn",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){var t=a.open({templateUrl:"app/pages/pollutionepisodes/logbookrecords/assign/logbookrecord-select-dlg.html",controller:["$scope","$uibModalInstance","LogBookRecords",function(e,t,a){function i(){e.dateRange={startDate:moment().add(-1,"month").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)},e.$watch("dateRange",function(){s()}),s()}function s(){var t;if(e.dateRange&&e.dateRange.startDate){var i=[e.dateRange.startDate.toDate(),e.dateRange.endDate.toDate()];t=angular.extend({episode:"null",sort:"createdTime,desc",size:1e4},{createdTime:i})}else t={episode:"null",sort:"createdTime,desc"};a.getList(t).then(function(t){e.items=t})}e.doSearch=s,e.ok=function(){var a=e.items.filter(function(e,t,a){return e.selected});t.close(a)},e.cancel=function(){t.dismiss("cancel")},e.toggleSelect=function(e){e.selected=!e.selected},i()}],windowClass:"modal-repair"});t.result.then(function(t){var a=t.reduce(function(e,t){return e.then(function(){return t.patch({episode:n.episode._links.self.href})})},r.resolve());r.all([a]).then(function(){t.length&&e.$bus.channel("logbookrecords").publish("list.changed",t)})})}var n=this;n.openDialog=o}e.$inject=["$scope","$rootScope","$uibModal","LogBookRecords","$state","$q"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssignLogBookRecordsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{episode:"=",logbookrecords:"=?"},controller:"EpisodeLogBookRecordsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/logbookrecords/table/episode-logbookrecords-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeLogbookrecords",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){v.size=f,v.logbookrecords?v.items=v.logbookrecords:c();e.$bus.subscribe({channel:"logbookrecords",topic:"list.*",callback:function(e,t){c()}})}function c(){v.episode.getLogBookRecords().then(function(e){v.logbookrecords=v.items=e})}function d(e,t){return v.logbookrecords.addLogBookRecord(t).then(function(e){angular.extend(t,e),v.insertedRow=null},function(e){return e.data.message})}function p(e,t){var a;return t.importe=(t.cantidad*t.precioUnidad).toFixed(2),t.id?(t.recibo=v.recibo,a=t.save().then(function(e){channel.publish("item.changed",e),delete t.newItem},function(e){return e.data.message})):a=v.addRow(e,t),a}function u(e,t){t.newItem&&v.items.splice(v.items.indexOf(t),1),v.insertedRow=null,e.$cancel()}function m(e){if(e.remove){var t=a.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){var t=v.items.indexOf(e);t>-1&&v.items.splice(t,1)})})}else{var i=v.items.indexOf(linea);i>-1&&v.items.splice(i,1)}}function h(e){e.patch({episode:null}).then(function(){var t=v.items.indexOf(e);t>-1&&v.items.splice(t,1)})}function g(e,t){e.preventDefault(),e.stopImmediatePropagation(),s({method:"GET",url:o+"/logbookrecords/"+t.id+"/download",responseType:"arraybuffer"}).then(function(e){var a=t.fileName;r.saveFile(e.data,a)})}var v=this,f=5;v.addRow=d,v.saveRow=p,v.cancelEdit=u,v.deleteRow=m,v.unlink=h,v.navigate=t.navigate,v.download=g,l()}e.$inject=["$scope","$rootScope","modalService","$uibModal","$http","$navigator","API_ENDPOINT","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeLogBookRecordsCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s){function r(){var e=6e4,t=new Date(Math.round((new Date).getTime()/e)*e);l.model=i,l.model.dateTime||(l.model.dateTime=t),l.availableIcons=["assets/img/marker","assets/img/truck","assets/img/warning"],l.availableColors=["blue","red","green","yellow"]}function o(){l.newForm.$valid&&t.post(l.model).then(function(t){a.close(t),toastr.success(s.instant("app.asset.created",t)),e.$bus.channel("assets").publish("item.created",t)})}function n(){a.dismiss("cancel")}var l=this;l.create=o,l.cancel=n,r()}e.$inject=["$scope","Assets","$uibModalInstance","asset","$translate"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssetCreateCtrl",e)}(),/**
 * @Author: Pablo Dorgambide [@pdorgambide]
 * @Date:   2017-12-21
 * @Email:  pdorgambide@qualigy.com
 * @Last modified by:   systems
 * @Last modified time: 2018-01-26
 * @Copyright: Qualigy Solutions Innovation, https://qualigy.com
 */
function(){"use strict";function e(e,t,a,i,s){function r(){d.model=a,c=e.$bus.channel("assets")}function o(){d.editForm.$valid&&d.model.patch().then(function(e){t.close(e),toastr.success(i.instant("app.asset.updated",e)),c.publish("item.changed",e)})}function n(){var e=s.showConfirmationDeleteMessage();e.result.then(function(e){d.model.remove().then(function(e){toastr.success(i.instant("app.asset.deleted",e)),c.publish("item.removed",e)}).finally(function(){t.close()})})}function l(){t.dismiss("cancel")}var c,d=this;d.save=o,d.cancel=l,d.remove=n,r()}e.$inject=["$scope","$uibModalInstance","asset","$translate","modalService"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssetEditCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{pollutionepisode:"=",pollutionreports:"=?"},controller:"AssignPollutionReportsCtrl",controllerAs:"vm",bindToController:!0,template:'<button type="button" class="{{class}}" ng-click="vm.openDialog()"><span data-translate="app.pollutionreport.home.linkLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.pollutionepisodes").directive("assignPollutionreportsBtn",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=a.open({templateUrl:"app/pages/pollutionepisodes/pollutionreports/assignPollutionreports/pollutionreport-select-dlg.html",controller:["$scope","$uibModalInstance","PollutionReports",function(e,t,a){function i(){e.dateRange={startDate:moment().add(-7,"day").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)},e.$watch("dateRange",function(){s()}),s()}function s(){var t;if(e.dateRange&&e.dateRange.startDate){var i=[e.dateRange.startDate.toDate(),e.dateRange.endDate.toDate()];t=angular.extend({pollutionEpisode:"null",sort:"reportTime,desc",size:1e4},{reportTime:i})}else t={pollutionEpisode:"null",sort:"reportTime,desc"};a.getList(t).then(function(t){e.items=t})}e.doSearch=s,e.ok=function(){var a=e.items.filter(function(e,t,a){return e.selected});t.close(a)},e.cancel=function(){t.dismiss("cancel")},e.toggleSelect=function(e){e.selected=!e.selected},i()}],windowClass:"modal-repair"});e.result.then(function(e){e.forEach(function(e){e.patch({pollutionEpisode:o.pollutionepisode._links.self.href})})})}var o=this;o.openDialog=r}e.$inject=["$scope","$rootScope","$uibModal","PollutionReports","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssignPollutionReportsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",pollutionreports:"=?"},controller:"EpisodePollutionReportsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/pollutionreports/table/episode-pollutionreports-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodePollutionreports",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){c.sort={field:"reportTime",reverse:!1},e.$bus.subscribe({channel:"pollutionreports",topic:"item.*",callback:function(e,t){o()}}),c.pollutionreports?c.items=c.pollutionreports:o()}function o(){var e={size:1e4};c.pollutionepisode.getPollutionReports(e).then(function(e){c.pollutionreports=c.items=e})}function n(e){return i.getList(e)}function l(e){e.patch({pollutionEpisode:null})}var c=this;c.navigate=t.navigate,c.unlinkPollutionReport=l,a("EditableRowCtrl",{$scope:e,vm:c,Resource:i,parent:c.pollutionepisode,items:c.pollutionreports||c.items,addMethod:"addPollutionReport",channel:"pollutionreports"}),c.searchPollutionReports=n,r()}e.$inject=["$scope","$rootScope","$controller","PollutionReports","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodePollutionReportsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",replace:!0,scope:{pollutionepisode:"=",scatreports:"=?"},controller:"AssignScatReportsCtrl",controllerAs:"vm",bindToController:!0,template:'<button type="button" class="{{class}}" ng-click="vm.openDialog()"><span data-translate="app.scatreport.home.linkLabel"> </span></button>',link:function(e,t,a){e.class=a.class?a.class:"btn btn-primary"}}}angular.module("Qualigy.pages.pollutionepisodes").directive("assignScatreportsBtn",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=a.open({templateUrl:"app/pages/pollutionepisodes/scatreports/assignScatreports/scatreport-select-dlg.html",controller:["$scope","$uibModalInstance","ScatReports",function(e,t,a){function i(){e.dateRange={startDate:moment().add(-7,"day").startOf("day"),endDate:moment().add(1,"day").endOf("day").milliseconds(0)},e.$watch("dateRange",function(){s()}),s()}function s(){var t;if(e.dateRange&&e.dateRange.startDate){var i=[e.dateRange.startDate.toDate(),e.dateRange.endDate.toDate()];t=angular.extend({pollutionEpisode:"null",sort:"reportTime,desc",size:1e4},{reportTime:i})}else t={pollutionEpisode:"null",sort:"reportTime,desc"};a.getList(t).then(function(t){e.items=t})}e.doSearch=s,e.ok=function(){var a=e.items.filter(function(e,t,a){return e.selected});t.close(a)},e.cancel=function(){t.dismiss("cancel")},e.toggleSelect=function(e){e.selected=!e.selected},i()}],windowClass:"modal-repair"});e.result.then(function(e){e.forEach(function(e){e.patch({pollutionEpisode:o.pollutionepisode._links.self.href})})})}var o=this;o.openDialog=r}e.$inject=["$scope","$rootScope","$uibModal","ScatReports","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("AssignScatReportsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionepisode:"=",scatreports:"=?"},controller:"EpisodeScatReportsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionepisodes/scatreports/table/episode-scatreports-table.html"}}angular.module("Qualigy.pages.pollutionepisodes").directive("episodeScatreports",e)}(),function(){"use strict";function e(e,t,a){function i(){o.sort={field:"reportTime",reverse:!1},e.$bus.subscribe({channel:"scatreports",topic:"item.*",callback:function(e,t){s()}}),o.scatreports?o.items=o.scatreports:s()}function s(){var e={size:1e4};o.pollutionepisode.getScatReports(e).then(function(e){o.scatreports=o.items=e})}function r(e){e.patch({pollutionEpisode:null})}var o=this;o.navigate=t.navigate,o.unlinkPollutionReport=r,i()}e.$inject=["$scope","$rootScope","$state"],angular.module("Qualigy.pages.pollutionepisodes").controller("EpisodeScatReportsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",onClose:"&"},transclude:!0,controller:"PollutionSourceCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/pollutionreports/pollutionsources/create-wizard/pollutionsource-create-wizard.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionsourceCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=6e4;p.mapAction="none";var t=new Date(Math.round((new Date).getTime()/e)*e);p.model={report:p.pollutionreport,observedTime:t},p.currentLang=a.use(),"sourcetype,pollutioncause".split(",").forEach(function(e){s.getConfigParamsByTopic("app.pollutionsource."+e).then(function(t){p[e]=t})})}function o(){p.form1.$valid&&p.form3.$valid&&t.post(p.model).then(function(t){toastr.success(a.instant("app.pollutionsource.created",t)),e.$bus.channel("pollutionsources").publish("item.created",t)})}function n(t){p.mapAction==t?p.mapAction="none":p.mapAction=t,"none"==p.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==p.mapAction?e.$bus.channel("map").publish("action.draw",p.model):"deletePoints"==p.mapAction&&e.$bus.channel("map").publish("action.deletePoints",p.model)}function l(){e.$bus.channel("map").publish("action.draw",p.model)}function c(){e.$bus.channel("map").publish("action.none")}function d(){var e=i.currentLonLat();e&&(p.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}var p=this;p.ok=o,p.cancel=p.onClose,p.drawPollutionSource=l,p.disableDrawPollutionSource=c,p.toggleMapAction=n,p.currentPosition=d,r()}e.$inject=["$scope","PollutionSources","$translate","geoService","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionSourceCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionsource:"=",onClose:"&"},controller:"PollutionSourceDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/pollutionsources/detail/pollutionsource-detail.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionsourceDetail",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){d.model=d.pollutionsource,e.$bus.channel("map").publish("action.select",d.pollutionsource),d.map={action:"none"},c=e.$bus.channel("map"),c.publish("action.select",d.pollutionsource),n(),d.currentLang=s.use(),"sourcetype,pollutioncause".split(",").forEach(function(e){r.getConfigParamsByTopic("app.pollutionsource."+e).then(function(t){d[e]=t})})}function n(){e.$bus.subscribe({channel:"pollutionsources",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("pollutionsources: "+t.topic),"edit"==a?(d.model.geometry?d.map.action="edit":d.map.action="draw",c.publish("action."+d.map.action,d.pollutionsource)):"show"==a&&(c.publish("action.select",d.pollutionsource),d.map.action="select")}})}function l(e,t){if(e&&t&&d[e]){var a=d[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[s.use()]}}var c,d=this;d.translateConfig=l,o()}e.$inject=["$scope","$state","modalService","$controller","$translate","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionSourceDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",pollutionsources:"=?"},controller:"PollutionreportPollutionSourcesCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/pollutionsources/table/pollutionreport-pollutionsources-table.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportPollutionsources",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){u.pollutionsources||u.pollutionreport.getPollutionSources().then(function(e){u.pollutionsources=e}),u.currentLang=o.use(),"sourcetype,pollutioncause".split(",").forEach(function(e){n.getConfigParamsByTopic("app.pollutionsource."+e).then(function(t){u[e]=t})}),d(),e.$bus.subscribe({channel:"pollutionsources",topic:"item.removed",callback:function(e,t){u.pollutionsources=u.pollutionsources.filter(function(t){return t.id!=e.id})}})}function c(e,t){if(e&&t&&u[e]){var a=u[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[o.use()]}}function d(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){u.pollutionsources.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){u.pollutionsources.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function p(e){var t=a.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){u.pollutionsources=u.pollutionsources.filter(function(t){return t.id!=e.id})})})}var u=this;u.remove=p,u.navigate=t.navigate,u.translateConfig=c,l()}e.$inject=["$scope","$rootScope","modalService","PollutionSources","PollutionReports","$state","$translate","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionreportPollutionSourcesCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{dialogTitle:"@",reportType:"@",taskTypes:"@?",taskType:"=?",params:"="},transclude:!0,controller:["$scope","$uibModal",function(e,t){e.openCreateDialog=function(a){t.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"app/pages/reports/report-tasks-btn/report-tasks-dlg.html",controller:"ReportTasksCtrl",controllerAs:"vm",backdrop:"static",size:a,resolve:{dialogTitle:function(){return e.dialogTitle},reportType:function(){return e.reportType},taskTypes:function(){return"signatures"==e.reportType?"AllTask,CleanTask,GuardTask,SeedTask,RelocationTask,DisperseTask".split(","):"AllTask,ExtractionTask,CleanTask,GuardTask,SeedTask,RelocationTask,DisperseTask".split(",")},params:function(){if(e.params)return e.params;switch(e.reportType){case"signatures":return{start:moment().add(1,"day").startOf("day").toDate(),end:moment().add(1,"day").endOf("day").milliseconds(0).toDate(),format:"pdf"};case"tasklist":return{start:moment().startOf("year").toDate(),end:moment().endOf("year").milliseconds(0).toDate(),format:"pdf"};case"requests":return{start:moment().add(1,"month").startOf("month").toDate(),end:moment().add(1,"month").endOf("month").milliseconds(0).toDate(),format:"pdf"}}}}})}}],replace:!0,template:'<button type="button" class="btn btn-primary" ng-click="openCreateDialog()"><ng-transclude></ng-transclude></button>'}}angular.module("Qualigy.pages.pollutionreports").directive("spillCreateBtn",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n,l){function c(){p.start=p.params.start||moment().startOf("year").toDate(),p.end=p.params.end||moment().endOf("year").milliseconds(0).toDate(),p.dateRange={startDate:p.start,endDate:p.end}}function d(){a&&a.dismiss("cancel")}var p=this;p.createReport=createReport,p.cancel=d,p.dialogTitle=i,p.taskTypes=s,p.reportType=r,p.params=o,c()}e.$inject=["$scope","$filter","$uibModalInstance","dialogTitle","taskTypes","reportType","params","$uibModal","$translate"],angular.module("Qualigy.pages.pollutionreports").controller("SpillCreateCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",onClose:"&"},transclude:!0,controller:"SpillCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/pollutionreports/spills/create-wizard/spill-create-wizard.html"}}angular.module("Qualigy.pages.pollutionreports").directive("spillCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){var e=6e4;h.mapAction="none";var t=new Date(Math.round((new Date).getTime()/e)*e);h.model={report:h.pollutionreport,observedTime:t,speedUnit:"knots"},h.currentLang=a.use(),"spillaparience,spillaspect,pollutantorigin".split(",").forEach(function(e){r.getConfigParamsByTopic("app.spill."+e).then(function(t){h[e]=t})})}function n(){if(h.form1.$valid&&h.form2.$valid&&h.form5.$valid){if(h.model.geometry){var i=new OpenLayers.Geometry.fromWKT(h.model.geometry),s=new OpenLayers.LonLat(i.x,i.y);h.model.longitude=s.lon,h.model.latitude=s.lat}t.post(h.model).then(function(t){toastr.success(a.instant("app.spill.created",t)),e.$bus.channel("spills").publish("item.created",t)})}}function l(e){i.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}function c(){h.mapAction="deletePoints",e.$bus.channel("map").publish("action.deletePoints",h.model)}function d(){h.mapAction="draw",e.$bus.channel("map").publish("action.draw",h.model);e.$bus.subscribe({channel:"map",topic:"feature.*",callback:function(e,t){e&&(h.model.geometry=e.geometry.toString())}})}function p(t){h.mapAction==t?h.mapAction="none":h.mapAction=t,"none"==h.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==h.mapAction?e.$bus.channel("map").publish("action.draw",h.model):"deletePoints"==h.mapAction&&e.$bus.channel("map").publish("action.deletePoints",h.model)}function u(){var e=s.currentLonLat();e&&(h.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function m(){h.mapAction="none",e.$bus.channel("map").publish("action.none")}var h=this;h.ok=n,h.cancel=h.onClose,h.drawSpill=d,h.editSpillPoints=c,h.disableDrawSpill=m,h.openModal=l,h.toggleMapAction=p,h.currentPosition=u,o()}e.$inject=["$scope","Spills","$translate","$uibModal","geoService","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("SpillCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{spill:"=",onClose:"&"},controller:"SpillDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/spills/detail/spill-detail.html"}}angular.module("Qualigy.pages.pollutionreports").directive("spillDetail",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){p.model=p.spill,p.map={action:"none"},d=e.$bus.channel("map"),d.publish("action.select",p.spill),p.currentLang=s.use(),"spillaparience,spillaspect,pollutantorigin".split(",").forEach(function(e){r.getConfigParamsByTopic("app.spill."+e).then(function(t){p[e]=t})}),c()}function n(e,t){if(e&&t&&p[e]){var a=p[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[s.use()]}}function l(){p.map.action="edit"==p.map.action?"deletePoints":"edit",e.$bus.channel("map").publish("action."+p.map.action,p.model)}function c(){e.$bus.subscribe({channel:"spills",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("spills: "+t.topic),"edit"==a?(p.model.geometry?p.map.action="edit":p.map.action="draw",d.publish("action."+p.map.action,p.spill)):"show"==a&&(d.publish("action.select",p.spill),p.map.action="select")}})}var d,p=this;p.toggleDeleteSpillPoints=l,p.translateConfig=n,o()}e.$inject=["$scope","$state","modalService","$controller","$translate","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("SpillDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{pollutionreport:"=",spills:"=?"},controller:"PollutionreportSpillsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/pollutionreports/spills/table/pollutionreport-spills-table.html"}}angular.module("Qualigy.pages.pollutionreports").directive("pollutionreportSpills",e)}(),function(){"use strict";function e(e,t,a,i,s,r,o,n){function l(){u.spills||u.pollutionreport.getSpills().then(function(e){u.spills=e}),u.currentLang=o.use(),"spillaparience,spillaspect".split(",").forEach(function(e){n.getConfigParamsByTopic("app.spill."+e).then(function(t){u[e]=t})}),c(),e.$bus.subscribe({channel:"spills",topic:"item.removed",callback:function(e,t){u.spills=u.spills.filter(function(t){return t.id!=e.id})}})}function c(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){u.spills.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){u.spills.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function d(e,t){if(e&&t&&u[e]){var a=u[e].filter(function(e){return e.value==t});if(a&&a[0])return a[0].bundle[o.use()]}}function p(t){var i=a.showConfirmationDeleteMessage();i.result.then(function(a){t.remove().then(function(){u.spills=u.spills.filter(function(e){return e.id!=t.id}),e.$bus.channel("spills").publish("item.removed",t)})})}var u=this;u.removeSpill=p,u.navigate=t.navigate,u.translateConfig=d,l()}e.$inject=["$scope","$rootScope","modalService","Spills","PollutionReports","$state","$translate","configParamsService"],angular.module("Qualigy.pages.pollutionreports").controller("PollutionreportSpillsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"="},transclude:!0,controller:"ScatReportCreateMapCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/create-wizard/map/scatreport-create-map.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportCreateMap",e)}(),function(){"use strict";function e(e,t,a){function i(){L.model=L.scatreport,L.map={action:"none"},u(),e.$watch("vm.model.segment.geometry",function(e){f(L.model.segment),y()})}function s(e){if(L.map.action&&L.map.action.indexOf("draw")>=0){var t=e.feature.layer.features.filter(function(e){return"Insert"==e.state});t&&e.feature.layer.removeFeatures(t)}}function r(){if(L.feature.geometry.components.length>2){L.feature.geometry.removePoint(L.selectedPoint);var e=L.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");L.model.segment.geometry=e.toString()}else L.model.segment.geometry=null,L.toggleDeletePoints();L.selectedPoint=null}function o(e){L.selectedPoint=e.feature.geometry}function n(){L.selectedPoint=null}function l(e){var t=e.feature.geometry.clone().transform("EPSG:900913","EPSG:4326");L.model.segment||(L.model.segment={}),L.model.segment.geometry=t.toString()}function c(){L.model.segment.geometry&&(L.feature=null,"deletePoints"!=L.map.action?(L.map.action="deletePoints",L.feature=(new OpenLayers.Format.WKT).read(L.model.segment.geometry.toString())):L.map.action=null)}function d(t){t&&L.map.action!==t||(t="none"),e.$bus.channel("map").publish("action."+t,L.model)}function p(t){L.meausre=t;var a=t.measure.toFixed(1);if("km"==t.units&&(a*=1e3),L.map.action.indexOf("measure")!=-1){var i=L.map.action.substring("measure".length);L.model.segment[i]=parseFloat(a)}e.$bus.channel("map").publish("action.none")}function u(){e.$bus.subscribe({channel:"map",topic:"action.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;L.map.action=a}})}function m(e){L.olmap&&L.olmap.olmap.updateSize()}function h(e){L.selectedFeatures.pushIfNotExist(e.feature,function(t){return t.id==e.feature.id})}function g(e){L.selectedFeatures=L.selectedFeatures[e.feature.layer.name].filter(function(t){return t.id!=e.feature.id})}function v(){L.olmap&&t.currentLonLat()&&L.olmap.olmap.setCenter(t.currentLonLat(L.olmap.olmap.getProjection()),L.olmap.olmap.getNumZoomLevels()-1)}function f(e){if(e&&e.geometry){var t=(new OpenLayers.Format.WKT).read(e.geometry);if(t){var a=t.geometry.getVertices(!0);if(a){if(a[0]){e.startPosition=a[0];var i=e.startPosition.clone().transform("EPSG:900913","EPSG:4326"),s=i.getBounds().getCenterLonLat();e.startLon=s.lon,e.startLat=s.lat}if(a[1]){e.endPosition=a[1];var r=e.endPosition.clone().transform("EPSG:900913","EPSG:4326"),o=r.getBounds().getCenterLonLat();e.startLon=o.lon,e.startLat=o.lat}}}}}function y(){if(L.scatreport.segment&&L.scatreport.segment.geometry){var e=(new OpenLayers.Format.WKT).read(L.scatreport.segment.geometry);if(e&&e.geometry.components){var t=e.geometry.components;L.scatreport.segment.startPosition=t[0].toString(),L.scatreport.segment.endPosition=t[t.length-1].toString()}}}function b(){L.scatreport.segment={}}var L=this;L.geoService=t,L.beforeFeatureAdded=s,L.removeSelectedPoint=r,L.confirmRemoveSelectedPoint=o,L.cancelRemoveSelectedPoint=n,L.featureAdded=l,L.toggleDeletePoints=c,L.toggleMapAction=d,L.featureSelected=h,L.featureUnselected=g,L.updateSize=m,L.centerOnCurrentPosition=v,L.removeSegment=b,L.measureAction=p,i()}e.$inject=["$scope","geoService","$translate"],angular.module("Qualigy.pages.scatreports").controller("ScatReportCreateMapCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",editMode:"=",onClose:"&"},transclude:!0,controller:"ScatReportContactsCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/detail/contacts/scatreport-contacts.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportContacts",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){l.model=l.scatreport}function o(){l.scatreport.contacts||(l.scatreport.contacts=[]),l.scatreport.contacts.push(angular.copy(l.newContact)),l.newContact=null,angular.element("#inputContactName")[0].focus()}function n(e){l.scatreport.contacts&&(l.scatreport.contacts=l.scatreport.contacts.filter(function(t){return t!=e}))}var l=this;l.addContact=o,l.removeContact=n,r()}e.$inject=["$scope","Photos","API_ENDPOINT","$http","$translate"],angular.module("Qualigy.pages.scatreports").controller("ScatReportContactsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",detailForm:"=",onClose:"&"},controller:"ScatReportOperationalFeaturesCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/detail/operationalfeatures/scatreport-operationalfeatures.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportOperationalfeatures",e)}(),function(){"use strict";function e(e){function t(){l.model=l.scatreport}function a(e){e&&e.number&&e.type&&(l.model.operationalFeatures||(l.model.operationalFeatures={}),l.model.operationalFeatures.oiledFaunas||(l.model.operationalFeatures.oiledFaunas=[]),l.model.operationalFeatures.oiledFaunas.push(e),l.faunaNumber=null,l.faunaType=null)}function i(e){l.model.operationalFeatures.oiledFaunas.splice(e,1)}function s(e){e&&e.number&&e.type&&(l.model.operationalFeatures||(l.model.operationalFeatures={}),l.model.operationalFeatures.debrises||(l.model.operationalFeatures.debrises=[]),l.model.operationalFeatures.debrises.push(e),l.debrisNumber=null,l.debrisType=null)}function r(e){l.model.operationalFeatures.debrises.splice(e,1)}function o(e){e&&e.number&&e.type&&(l.model.operationalFeatures||(l.model.operationalFeatures={}),l.model.operationalFeatures.algaes||(l.model.operationalFeatures.algaes=[]),l.model.operationalFeatures.algaes.push(e),l.algaeNumber=null,l.algaeType=null)}function n(e){l.model.operationalFeatures.algaes.splice(e,1)}var l=this;l.addOiledFauna=a,l.removeOiledFauna=i,l.addDebris=s,l.removeDebris=r,l.addAlgae=o,l.removeAlgae=n,t()}e.$inject=["$scope"],angular.module("Qualigy.pages.scatreports").controller("ScatReportOperationalFeaturesCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",detailForm:"=",onClose:"&"},controller:"ScatReportShoreLineTypesCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/detail/shorelinetypes/scatreport-shorelinetypes.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportShorelinetypes",e)}(),function(){"use strict";function e(e,t){function a(){p.model=p.scatreport,p.shorelineTypes={},e.$watch("vm.model.shorelineTypes",function(e){e&&(p.shorelineTypes=e.reduce(function(e,t){p[t.shorelineType]=!0;var a=t.shorelineType;return e[a]=t,e},{}))},!0)}function i(e){t.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}function s(e){e&&(e.oiled=!e.oiled)}function r(e){if(!p.shorelineTypes[e]){var t={shorelineType:e};p.model.shorelineTypes||(p.model.shorelineTypes=[]),0==p.model.shorelineTypes.length&&(t.primary=!0),p.model.shorelineTypes.push(t)}}function o(e){p.shorelineTypes[e]&&(p.model.shorelineTypes=p.model.shorelineTypes.filter(function(t){return t.shorelineType!=e}),1==p.model.shorelineTypes.length&&(p.model.shorelineTypes[0].primary=!0))}function n(e){if(p.shorelineTypes[e])p.model.shorelineTypes=p.model.shorelineTypes.filter(function(t){return t.shorelineType!=e}),1==p.model.shorelineTypes.length&&(p.model.shorelineTypes[0].primary=!0);else{var t={shorelineType:e};p.model.shorelineTypes||(p.model.shorelineTypes=[]),0==p.model.shorelineTypes.length&&(t.primary=!0),p.model.shorelineTypes.push(t)}}function l(e){e.primary?p.unMarkAsPrimary(e):p.markAsPrimary(e)}function c(e){p.model.shorelineTypes.forEach(function(e){e.primary=!1}),e.primary=!0}function d(e){e.primary=!1}var p=this;p.toggleOiled=s,p.toggleSelect=n,p.toggleAsPrimary=l,p.selectShoreLineType=r,p.unSelectShoreLineType=o,p.markAsPrimary=c,p.unMarkAsPrimary=d,p.openModal=i,a()}e.$inject=["$scope","$uibModal"],angular.module("Qualigy.pages.scatreports").controller("ScatReportShoreLineTypesCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",onClose:"&"},controller:"OperationalFeaturesDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/operationalfeatures/detail/operationalfeatures-detail.html"}}angular.module("Qualigy.pages.scatreports").directive("operationalfeaturesDetail",e)}(),function(){"use strict";function e(e,t,a){function i(){d.model=d.scatreport}function s(e){e&&e.number&&e.type&&(d.model.operationalFeatures||(d.model.operationalFeatures={}),d.model.operationalFeatures.oiledFaunas||(d.model.operationalFeatures.oiledFaunas=[]),d.model.operationalFeatures.oiledFaunas.push(e),d.faunaNumber=null,d.faunaType=null)}function r(e){d.model.operationalFeatures.oiledFaunas.splice(e,1)}function o(e){e&&e.number&&e.type&&(d.model.operationalFeatures||(d.model.operationalFeatures={}),d.model.operationalFeatures.debrises||(d.model.operationalFeatures.debrises=[]),d.model.operationalFeatures.debrises.push(e),d.debrisNumber=null,d.debrisType=null)}function n(e){d.model.operationalFeatures.debrises.splice(e,1)}function l(e){e&&e.number&&e.type&&(d.model.operationalFeatures||(d.model.operationalFeatures={}),d.model.operationalFeatures.algaes||(d.model.operationalFeatures.algaes=[]),d.model.operationalFeatures.algaes.push(e),d.algaeNumber=null,d.algaeType=null)}function c(e){d.model.operationalFeatures.algaes.splice(e,1)}var d=this;d.addOiledFauna=s,d.removeOiledFauna=r,d.addDebris=o,d.removeDebris=n,d.addAlgae=l,d.removeAlgae=c,t("BaseEditableDetailCtrl",{$scope:e,modalService:a,vm:d,topic:"scatreports"}),i()}e.$inject=["$scope","$controller","modalService"],angular.module("Qualigy.pages.scatreports").controller("OperationalFeaturesDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",onClose:"&"},transclude:!0,controller:"OtherSubstanceCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/othersubstances/create-wizard/othersubstance-create-wizard.html"}}angular.module("Qualigy.pages.scatreports").directive("othersubstanceCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=6e4;u.mapAction="draw";var t=new Date(Math.round((new Date).getTime()/e)*e);u.model={report:u.scatreport,observedTime:t}}function o(){u.form1.$valid&&u.form2.$valid&&t.post(u.model).then(function(t){toastr.success(a.instant("app.othersubstance.created",t)),e.$bus.channel("othersubstances").publish("item.created",t)})}function n(e){i.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}function l(){e.$bus.channel("map").publish("action.draw",u.model)}function c(){e.$bus.channel("map").publish("action.none")}function d(){var e=s.currentLonLat();e&&(u.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function p(t){u.mapAction==t?u.mapAction="none":u.mapAction=t,"none"==u.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==u.mapAction?e.$bus.channel("map").publish("action.draw",u.model):"deletePoints"==u.mapAction&&e.$bus.channel("map").publish("action.deletePoints",u.model)}var u=this;u.ok=o,u.cancel=u.onClose,u.drawOtherSubstance=l,u.disableDrawOtherSubstance=c,u.openModal=n,u.toggleMapAction=p,u.currentPosition=d,r()}e.$inject=["$scope","OtherSubstances","$translate","$uibModal","geoService"],angular.module("Qualigy.pages.scatreports").controller("OtherSubstanceCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{othersubstance:"=",onClose:"&"},controller:"OtherSubstanceDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/othersubstances/detail/othersubstance-detail.html"}}angular.module("Qualigy.pages.scatreports").directive("othersubstanceDetail",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){d.model=d.othersubstance,e.$bus.channel("map").publish("action.select",d.othersubstance),d.map={action:"none"},c=e.$bus.channel("map"),c.publish("action.select",d.othersubstance),n()}function o(){d.map.action="edit"==d.map.action?"deletePoints":"edit",e.$bus.channel("map").publish("action."+d.map.action,d.model)}function n(){e.$bus.subscribe({channel:"othersubstances",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("othersubstances: "+t.topic),"edit"==a?(d.model.geometry?d.map.action="edit":d.map.action="draw",
c.publish("action."+d.map.action,d.othersubstance)):"show"==a&&(c.publish("action.select",d.othersubstance),d.map.action="select")}})}function l(e){s.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}var c,d=this;d.openModal=l,d.toggleDeleteSurfaceOilPoints=o,r()}e.$inject=["$scope","$state","modalService","$controller","$uibModal"],angular.module("Qualigy.pages.scatreports").controller("OtherSubstanceDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",othersubstances:"=?"},controller:"ScatReportOtherSubstancesCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/othersubstances/table/scatreport-othersubstances-table.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportOthersubstances",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){c.othersubstances||c.scatreport.getOtherSubstances().then(function(e){c.othersubstances=e}),n(),e.$bus.subscribe({channel:"othersubstances",topic:"item.removed",callback:function(e,t){c.othersubstances=c.othersubstances.filter(function(t){return t.id!=e.id})}})}function n(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){c.othersubstances.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){c.othersubstances.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function l(e){var t=a.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){c.othersubstances=c.othersubstances.filter(function(t){return t.id!=e.id})})})}var c=this;c.remove=l,c.navigate=t.navigate,o()}e.$inject=["$scope","$rootScope","modalService","OtherSubstances","ScatReports","$state"],angular.module("Qualigy.pages.scatreports").controller("ScatReportOtherSubstancesCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",editable:"=?",onClose:"&"},controller:"ScatReportShoreLineTypeDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/shorelinetypes/detail/scatreport-shorelinetypes-detail.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportShorelinetypeDetail",e)}(),function(){"use strict";function e(e,t,a,i){function s(){m.model=m.scatreport,m.shorelineTypes={},e.$watch("vm.model.shorelineTypes",function(e){e&&(m.shorelineTypes=e.reduce(function(e,t){m[t.shorelineType]=!0;var a=t.shorelineType;return e[a]=t,e},{}))},!0)}function r(e){t.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}function o(e){e&&(e.oiled=!e.oiled)}function n(e){if(!m.shorelineTypes[e]){var t={shorelineType:e};m.model.shorelineTypes||(m.model.shorelineTypes=[]),0==m.model.shorelineTypes.length&&(t.primary=!0),m.model.shorelineTypes.push(t)}}function l(e){m.shorelineTypes[e]&&(m.model.shorelineTypes=m.model.shorelineTypes.filter(function(t){return t.shorelineType!=e}),1==m.model.shorelineTypes.length&&(m.model.shorelineTypes[0].primary=!0))}function c(e){if(m.shorelineTypes[e])m.model.shorelineTypes=m.model.shorelineTypes.filter(function(t){return t.shorelineType!=e}),1==m.model.shorelineTypes.length&&(m.model.shorelineTypes[0].primary=!0);else{var t={shorelineType:e};m.model.shorelineTypes||(m.model.shorelineTypes=[]),0==m.model.shorelineTypes.length&&(t.primary=!0),m.model.shorelineTypes.push(t)}}function d(e){e.primary?m.unMarkAsPrimary(e):m.markAsPrimary(e)}function p(e){m.model.shorelineTypes.forEach(function(e){e.primary=!1}),e.primary=!0}function u(e){e.primary=!1}var m=this;m.toggleOiled=o,m.toggleSelect=c,m.toggleAsPrimary=d,m.selectShoreLineType=n,m.unSelectShoreLineType=l,m.markAsPrimary=p,m.unMarkAsPrimary=u,m.openModal=r,a("BaseEditableDetailCtrl",{$scope:e,modalService:i,vm:m,topic:"scatreports"}),s()}e.$inject=["$scope","$uibModal","$controller","modalService"],angular.module("Qualigy.pages.scatreports").controller("ScatReportShoreLineTypeDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{report:"=",reportusers:"=?",disabled:"=?"},controller:"ScatReportUsersTableCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/scatreportusers/table/scatreport-users-table.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportUsersTable",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){h.size=g,h.reportusers?h.items=h.reportusers:o(),m=e.$bus.channel("reportusers");e.$bus.subscribe({channel:"reportusers",topic:"item.*",callback:function(e,t){o()}})}function o(){h.report.getReportUsers&&h.report.getReportUsers().then(function(e){h.reportusers=h.items=e})}function n(e,t){return h.report.addReportUser(t).then(function(e){angular.extend(t,e),m.publish("item.created",e),h.insertedRow=null})}function l(e,t){var a;return t.id?t.save().then(function(e){m.publish("item.changed",e),delete t.shallow}):a=h.addRow(e,t),a}function c(e,t){t.shallow&&h.items.splice(h.items.indexOf(t),1),h.insertedRow=null,e.$cancel()}function d(e){if(e.remove){var t=i.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){m.publish("item.deleted",e);var t=h.items.indexOf(e);t>-1&&h.items.splice(t,1)})})}else{var a=h.items.indexOf(e);a>-1&&h.items.splice(a,1)}}function p(){h.insertedRow={shallow:!0},h.items.push(h.insertedRow)}function u(e){var t={userauthorities:"ROLE_SCAT_INSPECTOR",size:1e4,sort:"fullName,asc"};return a.getList(angular.extend(t,e))}var m,h=this,g=5;h.addRow=n,h.insertRow=p,h.saveRow=l,h.cancelEdit=c,h.deleteRow=d,h.searchUserLogins=u,h.navigate=t.navigate,r()}e.$inject=["$scope","$rootScope","UserLogins","modalService","$translate"],angular.module("Qualigy.pages.scatreports").controller("ScatReportUsersTableCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",onClose:"&"},transclude:!0,controller:"SubsurfaceOilConditionCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/subsurfaceoilconditions/create-wizard/subsurfaceoilcondition-create-wizard.html"}}angular.module("Qualigy.pages.scatreports").directive("subsurfaceoilconditionCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=6e4;u.mapAction="none";var t=new Date(Math.round((new Date).getTime()/e)*e);u.model={report:u.scatreport,observedTime:t}}function o(){u.form1.$valid&&u.form2.$valid&&t.post(u.model).then(function(t){toastr.success(a.instant("app.subsurfaceoilcondition.created",t)),e.$bus.channel("subsurfaceoilconditions").publish("item.created",t)})}function n(e){i.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}function l(){e.$bus.channel("map").publish("action.draw",u.model)}function c(){e.$bus.channel("map").publish("action.none")}function d(){var e=s.currentLonLat();e&&(u.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function p(t){u.mapAction==t?u.mapAction="none":u.mapAction=t,"none"==u.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==u.mapAction?e.$bus.channel("map").publish("action.draw",u.model):"deletePoints"==u.mapAction&&e.$bus.channel("map").publish("action.deletePoints",u.model)}var u=this;u.ok=o,u.cancel=u.onClose,u.drawSubsurfaceOilCondition=l,u.disableDrawSubsurfaceOilCondition=c,u.openModal=n,u.toggleMapAction=p,u.currentPosition=d,r()}e.$inject=["$scope","SubsurfaceOilConditions","$translate","$uibModal","geoService"],angular.module("Qualigy.pages.scatreports").controller("SubsurfaceOilConditionCreateWizardCtrl",e)}();!function(){"use strict";function e(){return{restrict:"E",scope:{subsurfaceoilcondition:"=",onClose:"&"},controller:"SubsurfaceOilConditionDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/subsurfaceoilconditions/detail/subsurfaceoilcondition-detail.html"}}angular.module("Qualigy.pages.scatreports").directive("subsurfaceoilconditionDetail",e)}();!function(){"use strict";function e(e,t,a,i){function s(){n.model=n.subsurfaceoilcondition,e.$bus.channel("map").publish("action.select",n.subsurfaceoilcondition),n.map={action:"none"},o=e.$bus.channel("map"),o.publish("action.select",n.subsurfaceoilcondition),r()}function r(){e.$bus.subscribe({channel:"subsurfaceoilconditions",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("subsurfaceoilconditions: "+t.topic),"edit"==a?(n.model.geometry?n.map.action="edit":n.map.action="draw",o.publish("action."+n.map.action,n.subsurfaceoilcondition)):"show"==a&&(o.publish("action.select",n.subsurfaceoilcondition),n.map.action="select")}})}var o,n=this;s()}e.$inject=["$scope","$state","modalService","$controller"],angular.module("Qualigy.pages.scatreports").controller("SubsurfaceOilConditionDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",subsurfaceoilconditions:"=?"},controller:"ScatReportSubsurfaceOilConditionsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/subsurfaceoilconditions/table/scatreport-subsurfaceoilconditions-table.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportSubsurfaceoilconditions",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){c.subsurfaceoilconditions||c.scatreport.getSubsurfaceOilConditions().then(function(e){c.subsurfaceoilconditions=e}),n(),e.$bus.subscribe({channel:"subsurfaceoilconditions",topic:"item.removed",callback:function(e,t){c.subsurfaceoilconditions=c.subsurfaceoilconditions.filter(function(t){return t.id!=e.id})}})}function n(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){c.subsurfaceoilconditions.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){c.subsurfaceoilconditions.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function l(e){var t=a.showConfirmationDeleteDeleteMessage();t.result.then(function(t){e.remove().then(function(){c.subsurfaceoilconditions=c.subsurfaceoilconditions.filter(function(t){return t.id!=e.id})})})}var c=this;c.remove=l,c.navigate=t.navigate,o()}e.$inject=["$scope","$rootScope","modalService","SubsurfaceOilConditions","ScatReports","$state"],angular.module("Qualigy.pages.scatreports").controller("ScatReportSubsurfaceOilConditionsCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",onClose:"&"},transclude:!0,controller:"SurfaceOilConditionCreateWizardCtrl",controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"app/pages/scatreports/surfaceoilconditions/create-wizard/surfaceoilcondition-create-wizard.html"}}angular.module("Qualigy.pages.scatreports").directive("surfaceoilconditionCreateWizard",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){var e=6e4;u.mapAction="draw";var t=new Date(Math.round((new Date).getTime()/e)*e);u.model={report:u.scatreport,observedTime:t}}function o(){u.form1.$valid&&u.form2.$valid&&t.post(u.model).then(function(t){toastr.success(a.instant("app.surfaceoilcondition.created",t)),e.$bus.channel("surfaceoilconditions").publish("item.created",t)})}function n(e){i.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}function l(){e.$bus.channel("map").publish("action.draw",u.model)}function c(){e.$bus.channel("map").publish("action.none")}function d(){var e=s.currentLonLat();e&&(u.model.geometry=new OpenLayers.Geometry.Point(e.lon,e.lat).toString())}function p(t){u.mapAction==t?u.mapAction="none":u.mapAction=t,"none"==u.mapAction?e.$bus.channel("map").publish("action.none"):"draw"==u.mapAction?e.$bus.channel("map").publish("action.draw",u.model):"deletePoints"==u.mapAction&&e.$bus.channel("map").publish("action.deletePoints",u.model)}var u=this;u.ok=o,u.cancel=u.onClose,u.drawSurfaceOilCondition=l,u.disableDrawSurfaceOilCondition=c,u.openModal=n,u.toggleMapAction=p,u.currentPosition=d,r()}e.$inject=["$scope","SurfaceOilConditions","$translate","$uibModal","geoService"],angular.module("Qualigy.pages.scatreports").controller("SurfaceOilConditionCreateWizardCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{surfaceoilcondition:"=",onClose:"&"},controller:"SurfaceOilConditionDetailCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/surfaceoilconditions/detail/surfaceoilcondition-detail.html"}}angular.module("Qualigy.pages.scatreports").directive("surfaceoilconditionDetail",e)}(),function(){"use strict";function e(e,t,a,i,s){function r(){d.model=d.surfaceoilcondition,e.$bus.channel("map").publish("action.select",d.surfaceoilcondition),d.map={action:"none"},c=e.$bus.channel("map"),c.publish("action.select",d.surfaceoilcondition),n()}function o(){d.map.action="edit"==d.map.action?"deletePoints":"edit",e.$bus.channel("map").publish("action."+d.map.action,d.model)}function n(){e.$bus.subscribe({channel:"surfaceoilconditions",topic:"form.*",callback:function(e,t){var a=t.topic.split(".")[1]||null;console.log("surfaceoilconditions: "+t.topic),"edit"==a?(d.model.geometry?d.map.action="edit":d.map.action="draw",c.publish("action."+d.map.action,d.surfaceoilcondition)):"show"==a&&(c.publish("action.select",d.surfaceoilcondition),d.map.action="select")}})}function l(e){s.open({templateUrl:e,controller:["$scope","$translate",function(e,t){e.currentLocaleTemplate=function(e){return e.replace("[locale]",t.use())}}],size:"lg"})}var c,d=this;d.openModal=l,d.toggleDeleteSurfaceOilPoints=o,r()}e.$inject=["$scope","$state","modalService","$controller","$uibModal"],angular.module("Qualigy.pages.scatreports").controller("SurfaceOilConditionDetailCtrl",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{scatreport:"=",surfaceoilconditions:"=?"},controller:"ScatReportSurfaceOilConditionsCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"app/pages/scatreports/surfaceoilconditions/table/scatreport-surfaceoilconditions-table.html"}}angular.module("Qualigy.pages.scatreports").directive("scatreportSurfaceoilconditions",e)}(),function(){"use strict";function e(e,t,a,i,s,r){function o(){c.surfaceoilconditions||c.scatreport.getSurfaceOilConditions().then(function(e){c.surfaceoilconditions=e}),n(),e.$bus.subscribe({channel:"surfaceoilconditions",topic:"item.removed",callback:function(e,t){c.surfaceoilconditions=c.surfaceoilconditions.filter(function(t){return t.id!=e.id})}})}function n(){e.$bus.subscribe({channel:"map",topic:"feature.selected",callback:function(e,t){c.surfaceoilconditions.forEach(function(t){t.selected=t.id==e.attributes.id})}}),e.$bus.subscribe({channel:"map",topic:"feature.unselected",callback:function(e,t){c.surfaceoilconditions.forEach(function(t){t.id==e.attributes.id&&(t.selected=!1)})}})}function l(e){var t=a.showConfirmationDeleteMessage();t.result.then(function(t){e.remove().then(function(){c.surfaceoilconditions=c.surfaceoilconditions.filter(function(t){return t.id!=e.id})})})}var c=this;c.remove=l,c.navigate=t.navigate,o()}e.$inject=["$scope","$rootScope","modalService","SurfaceOilConditions","ScatReports","$state"],angular.module("Qualigy.pages.scatreports").controller("ScatReportSurfaceOilConditionsCtrl",e)}(),!function(e){e.fn.backTop=function(t){var a=this,i=e.extend({position:400,speed:500,color:"white"},t),s=i.position,r=i.speed,o=i.color;a.addClass("white"==o?"white":"red"==o?"red":"green"==o?"green":"black"),a.css({right:40,bottom:40,position:"fixed"}),e(document).scroll(function(){var t=e(window).scrollTop();t>=s?a.fadeIn(r):a.fadeOut(r)}),a.click(function(){e("html, body").animate({scrollTop:0},{duration:1200})})}}(jQuery),angular.module("Qualigy").run(["$templateCache",function(e){e.put("app/dialogs/dialogs.html",' <div class="hidden-print">   <div id="growlDiv" growl=""></div> <div id="shorelinetype_modal" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/shorelinetype_help_${pageContext.response.locale}.html" var="url_shorelinetype"></spring:url> <div ng-include="\'${url_shorelinetype}\'"></div> </div> <div id="exposicion_oleaje" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/exposicion_oleaje_help_${pageContext.response.locale}.html" var="url_exposicion_oleaje"></spring:url> <div ng-include="\'${url_exposicion_oleaje}\'"></div> </div>  <div id="oil_character" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/apariencia_subsuperficial_help_${pageContext.response.locale}.html" var="url_apariencia_subsuperficial"></spring:url> <div ng-include="\'${url_apariencia_subsuperficial}\'"></div> </div> <div id="sediment_types" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/tamano_sedimento_help_${pageContext.response.locale}.html" var="url_tamano_sedimento"></spring:url> <div ng-include="\'${url_tamano_sedimento}\'"></div> </div> <div id="level_tidal" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/posicion_mareal_help_${pageContext.response.locale}.html" var="url_posicion_mareal"></spring:url> <div ng-include="\'${url_posicion_mareal}\'"></div> </div> <div id="oil_cover_thickness" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/espesor_superficial_help_${pageContext.response.locale}.html" var="url_espesor_superficial"></spring:url> <div ng-include="\'${url_espesor_superficial}\'"></div> </div> <div id="oil_cover_character" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <spring:url value="app/dialogs/help/apariencia_superficial_help_${pageContext.response.locale}.html" var="url_apariencia_superficial"></spring:url> <div ng-include="\'${url_apariencia_superficial}\'"></div> </div> <div id="oil_cover_distribution" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <div class="modal-header"> <h3> <spring:message code="label_eu_arcopol_domain_scat_surfaceoilcondition_oildistribution"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">Cerrar</button> </spring:message></h3> </div> <div class="modal-body"> <div class="thumbnail"> <spring:url value="images/surface_oil_distribution_2.jpg" var="url_oil_distribution"></spring:url> <img src="${url_oil_distribution}"> </div> </div> </div> <div id="course_info" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:800px;"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button> <br> </div> <div class="modal-body"> <spring:message code="label_help_eu_arcopol_domain_pollution_spill_course"> <spring:url value="images/rosa_vientos.jpg" var="url_exposure"></spring:url> <img src="${url_exposure}" style="width:100%"> </spring:message></div> </div> <div id="buried_help" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:1024px;"> <div class="modal-body"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button> <spring:url value="images/subsurface_buried.jpg" var="url_buried"></spring:url> <img src="${url_buried}" style="width:100%"> </div> </div> </div> '),e.put("app/dialogs/help/apariencia_subsuperficial.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>SurfaceThickness</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Apariencia del hidrocarburo subsuperficial</h1> <p><strong>Poros llenos:</strong> los espacios porosos estï¿½n completamente llenos de hidrocarburo.</p> <p><img alt="Poros llenos" src="ASS_OFP.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>Poros parcialmente llenos:</strong> el hidrocarburo no fluye del sedimento cuando se remueve ï¿½ste.</p> <p><img alt="Poros parcialmente llenos" src="ASS_PFP.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>Residuo de hidrocarburo:</strong> los sedimentos estï¿½n visiblemente contaminados con una capa o cubierta negra/marrï¿½n, pero con poca o ninguna acumulaciï¿½n de hidrocarburo dentro de los espacios porosos.</p> <p><img alt="Poros llenos" src="ASS_OFP.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>Pelï¿½cula de hidrocarburo:</strong> los sedimentos estï¿½n ligeramente contaminados con una pelï¿½cula o mancha oleosa.</p> <p><img alt="Poros parcialmente llenos" src="ASS_PFP.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>Traza:</strong> pelï¿½cula discontinua o gotas de hidrocarburo, u olor.</p> <p><img alt="Balsa" src="TSur_PO.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> </body> </html> '),e.put("app/dialogs/help/apariencia_subsuperficial_help_en.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">Pechar</button> <h3>Apariencia del hidrocarburo subsuperficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Poros Llenos" src="app/dialogs/help/images/ASS_OFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Poros llenos:</strong> <p>los espacios porosos estÃ¡n completamente llenos de hidrocarburo.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Poros parcialmente llenos" src="app/dialogs/help/images/ASS_PFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Poros parcialmente llenos:</strong> <p>el hidrocarburo no fluye del sedimento cuando se remueve Ã©ste. </p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Residuo de hidrocarburo" src="app/dialogs/help/images/ASS_OFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Residuo de hidrocarburo:</strong> <p>los sedimentos estÃ¡n visiblemente contaminados con una capa o cubierta negra/marrÃ³n, pero con poca o ninguna acumulaciÃ³n de hidrocarburo dentro de los espacios porosos.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="PelÃ­cula de hidrocarburo:" src="app/dialogs/help/images/ASS_PFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PelÃ­cula de hidrocarburo:</strong> <p>los sedimentos estÃ¡n ligeramente contaminados con una pelï¿½cula o mancha oleosa.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Traza" src="app/dialogs/help/images/TSur_PO.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Traza:</strong> <p>pelÃ­cula discontinua o gotas de hidrocarburo, u olor.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/apariencia_subsuperficial_help_es.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">Cerrar</button> <h3>Apariencia del hidrocarburo subsuperficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Poros Llenos" src="app/dialogs/help/images/ASS_OFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Poros llenos:</strong> <p>los espacios porosos estÃ¡n completamente llenos de hidrocarburo.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Poros parcialmente llenos" src="app/dialogs/help/images/ASS_PFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Poros parcialmente llenos:</strong> <p>el hidrocarburo no fluye del sedimento cuando se remueve Ã©ste. </p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Residuo de hidrocarburo" src="app/dialogs/help/images/ASS_OFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Residuo de hidrocarburo:</strong> <p>los sedimentos estÃ¡n visiblemente contaminados con una capa o cubierta negra/marrÃ³n, pero con poca o ninguna acumulaciÃ³n de hidrocarburo dentro de los espacios porosos.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="PelÃ­cula de hidrocarburo:" src="app/dialogs/help/images/ASS_PFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PelÃ­cula de hidrocarburo:</strong> <p>los sedimentos estÃ¡n ligeramente contaminados con una pelï¿½cula o mancha oleosa.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Traza" src="app/dialogs/help/images/TSur_PO.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Traza:</strong> <p>pelÃ­cula discontinua o gotas de hidrocarburo, u olor.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/apariencia_subsuperficial_help_gl.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>Apariencia del hidrocarburo subsuperficial</h3> <div class="modal-body"> <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Poros Llenos" src="app/dialogs/help/images/ASS_OFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Poros llenos:</strong> <p>los espacios porosos estÃ¡n completamente llenos de hidrocarburo.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Poros parcialmente llenos" src="app/dialogs/help/images/ASS_PFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Poros parcialmente llenos:</strong> <p>el hidrocarburo no fluye del sedimento cuando se remueve Ã©ste. </p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Residuo de hidrocarburo" src="app/dialogs/help/images/ASS_OFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Residuo de hidrocarburo:</strong> <p>los sedimentos estÃ¡n visiblemente contaminados con una capa o cubierta negra/marrÃ³n, pero con poca o ninguna acumulaciÃ³n de hidrocarburo dentro de los espacios porosos.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="PelÃ­cula de hidrocarburo:" src="app/dialogs/help/images/ASS_PFP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PelÃ­cula de hidrocarburo:</strong> <p>los sedimentos estÃ¡n ligeramente contaminados con una pelÃ­cula o mancha oleosa.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Traza" src="app/dialogs/help/images/TSur_PO.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Traza:</strong> <p>pelÃ­cula discontinua o gotas de hidrocarburo, u olor.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div></div>'),
e.put("app/dialogs/help/apariencia_superficial.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>Apariencia del hidrocarburo superficial</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Apariencia del hidrocarburo superficial</h1> <p><strong>FR = Fresco</strong> Hidrocarburo lï¿½quido, no envejecido.</p> <p><img alt="Fresco" src="ASup_FR.PNG" width="463" height="348"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> <p><strong>MS = Mousse</strong> Hidrocarburo emulsionado en ï¿½reas amplias.</p> <p><img alt="Mousse" src="ASup_MS.PNG" width="465" height="348"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> <p><strong>BA = Bolas de alquitrï¿½n</strong> (acumulaciones diferenciadas de diï¿½metro &lt;10 cm.</p> <p><img alt="Bolas de altquitrï¿½n" src="ASup_TB.PNG" width="463" height="348"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> <p><strong>GA = Galletas de alquitrï¿½n</strong> (parches o pedazos diferenciados de diï¿½metro &gt;10 cm.</p> <p><img alt="Galletas de alquitrï¿½n" src="ASup_PT.PNG" width="463" height="348"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> <p><strong>RS = Residuo oleoso superficial</strong> (sedimentos superficiales oleosos, no cohesionados.</p> <p><img alt="Residuo oleoso" src="ASup_SR.PNG" width="463" height="348"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>PA = Pavimentos de asfalto</strong> (sedimentos superficiales altamente oleosos, cohesionados.</p> <p><img alt="Pavimento de asfalto" src="ASup_AP.PNG" width="463" height="348"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> </body> </html> '),e.put("app/dialogs/help/apariencia_superficial_help_en.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>Apariencia del hidrocarburo superficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Fresco" src="app/dialogs/help/images/ASup_FR.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>FR = Fresco</strong> <p>Hidrocarburo lÃ­quido, no envejecido.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="app/dialogs/help/images/ASup_MS.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>MS = Mousse</strong> <p>Hidrocarburo emulsionado en Ã¡reas amplias</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Bolas de altquitrÃ¡n" src="app/dialogs/help/images/ASup_TB.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>BA = Bolas de alquitrÃ¡n</strong> <p>Acumulaciones diferenciadas de diÃ¡metro &lt;10 cm.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Galletas de alquitrÃ¡n" src="app/dialogs/help/images/ASup_PT.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>GA = Galletas de alquitrÃ¡n</strong> <p>Parches o pedazos diferenciados de diÃ¡metro &gt;10 cm.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Residuo oleoso superficial" src="app/dialogs/help/images/ASup_SR.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>RS = Residuo oleoso superficial</strong> <p>Sedimentos superficiales oleosos, no cohesionados.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Pavimentos de asfalto" src="app/dialogs/help/images/ASup_AP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PA = Pavimentos de asfalto</strong> <p>Sedimentos superficiales altamente oleosos, cohesionados.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/apariencia_superficial_help_es.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>Apariencia del hidrocarburo superficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Fresco" src="app/dialogs/help/images/ASup_FR.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>FR = Fresco</strong> <p>Hidrocarburo lÃ­quido, no envejecido.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="app/dialogs/help/images/ASup_MS.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>MS = Mousse</strong> <p>Hidrocarburo emulsionado en Ã¡reas amplias</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Bolas de altquitrÃ¡n" src="app/dialogs/help/images/ASup_TB.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>BA = Bolas de alquitrÃ¡n</strong> <p>Acumulaciones diferenciadas de diÃ¡metro &lt;10 cm.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Galletas de alquitrÃ¡n" src="app/dialogs/help/images/ASup_PT.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>GA = Galletas de alquitrÃ¡n</strong> <p>Parches o pedazos diferenciados de diÃ¡metro &gt;10 cm.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Residuo oleoso superficial" src="app/dialogs/help/images/ASup_SR.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>RS = Residuo oleoso superficial</strong> <p>Sedimentos superficiales oleosos, no cohesionados.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Pavimentos de asfalto" src="app/dialogs/help/images/ASup_AP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PA = Pavimentos de asfalto</strong> <p>Sedimentos superficiales altamente oleosos, cohesionados.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/apariencia_superficial_help_gl.html",'<?xml version="1.0" encoding="UTF-8"?>  <h3>Apariencia del hidrocarburo superficial</h3>   <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Fresco" src="app/dialogs/help/images/ASup_FR.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>FR = Fresco</strong> <p>Hidrocarburo lÃ­quido, no envejecido.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="app/dialogs/help/images/ASup_MS.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>MS = Mousse</strong> <p>Hidrocarburo emulsionado en Ã¡reas amplias</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Bolas de altquitrÃ¡n" src="app/dialogs/help/images/ASup_TB.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>BA = Bolas de alquitrÃ¡n</strong> <p>Acumulaciones diferenciadas de diÃ¡metro &lt;10 cm.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Galletas de alquitrÃ¡n" src="app/dialogs/help/images/ASup_PT.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>GA = Galletas de alquitrÃ¡n</strong> <p>Parches o pedazos diferenciados de diÃ¡metro &gt;10 cm.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Residuo oleoso superficial" src="app/dialogs/help/images/ASup_SR.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>RS = Residuo oleoso superficial</strong> <p>Sedimentos superficiales oleosos, no cohesionados.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Pavimentos de asfalto" src="app/dialogs/help/images/ASup_AP.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PA = Pavimentos de asfalto</strong> <p>Sedimentos superficiales altamente oleosos, cohesionados.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> '),e.put("app/dialogs/help/espesor_superficial.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>SurfaceThickness</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Espesor del hidrocarburo superficial</h1> <p><strong>BL = Balsa</strong> Hidrocarburo fresco o emulsionado en mousse de espesor &gt; 1 cm.</p> <p><img alt="Balsa" src="TSur_PO.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>CU = Cubierta</strong> Hidrocarburo o mousse de espesor &gt;0.1 cm y &lt;1 cm sobre cualquier superficie.</p> <p><img alt="Cubierta" src="TSur_CV.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: OTRA</span></p> <p></p> <p><strong>CA = Capa</strong> Hidrocarburo visible &lt;0.1 cm, que puede quitarse raspando con la uï¿½a.</p> <p><img alt="Capa" src="TSur_CT.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> <p><strong>MA = Mancha</strong> Hidrocarburo visible, que no puede ser raspado con la uï¿½a.</p> <p><img alt="Mancha" src="TSur_ST.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> <p><strong>PE = Pelï¿½cula</strong> (lï¿½mina o pelï¿½cula oleosa transparente o iridiscente.</p> <p><img alt="Pelï¿½cula" src="TSur_FL.PNG" width="462" height="345"> <span style="font-size: 10pt">Fotografï¿½a: ITOPF</span></p> <p></p> </body> </html> '),e.put("app/dialogs/help/espesor_superficial_help_en.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>Espesor del hidrocarburo superficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Balsa" src="app/dialogs/help/images/TSur_PO.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>BL = Balsa</strong> <p> Hidrocarburo fresco o emulsionado en mousse de espesor &gt; 1 cm.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Cubierta" src="app/dialogs/help/images/TSur_CV.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>CU = Cubierta</strong> <p>Hidrocarburo o mousse de espesor &gt;0.1 cm y &lt;1 cm sobre cualquier superficie.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Capa" src="app/dialogs/help/images/TSur_CT.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>CA = Capa</strong> <p> Hidrocarburo visible &lt;0.1 cm, que puede quitarse raspando con la uÃ±a.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Mancha" src="app/dialogs/help/images/TSur_ST.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>MA = Mancha</strong> <p> Hidrocarburo visible, que no puede ser raspado con la uÃ±a.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="PelÃ­cula" src="app/dialogs/help/images/TSur_FL.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PE = PelÃ­cula</strong> <p> (lÃ¡mina o pelÃ­cula oleosa transparente o iridiscente.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/espesor_superficial_help_es.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>Espesor del hidrocarburo superficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Balsa" src="app/dialogs/help/images/TSur_PO.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>BA = Balsa</strong> <p> Hidrocarburo fresco o emulsionado en mousse de espesor &gt; 1 cm.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Cubierta" src="app/dialogs/help/images/TSur_CV.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>CU = Cubierta</strong> <p>Hidrocarburo o mousse de espesor &gt;0.1 cm y &lt;1 cm sobre cualquier superficie.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Capa" src="app/dialogs/help/images/TSur_CT.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>CA = Capa</strong> <p> Hidrocarburo visible &lt;0.1 cm, que puede quitarse raspando con la uÃ±a.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Mancha" src="app/dialogs/help/images/TSur_ST.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>MA = Mancha</strong> <p> Hidrocarburo visible, que no puede ser raspado con la uÃ±a.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="PelÃ­cula" src="app/dialogs/help/images/TSur_FL.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PE = PelÃ­cula</strong> <p> (lÃ¡mina o pelÃ­cula oleosa transparente o iridiscente.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/espesor_superficial_help_gl.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>Espesor del hidrocarburo superficial</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Balsa" src="app/dialogs/help/images/TSur_PO.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>BL = Balsa</strong> <p> Hidrocarburo fresco o emulsionado en mousse de espesor &gt; 1 cm.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Cubierta" src="app/dialogs/help/images/TSur_CV.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>CU = Cubierta</strong> <p>Hidrocarburo o mousse de espesor &gt;0.1 cm y &lt;1 cm sobre cualquier superficie.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Capa" src="app/dialogs/help/images/TSur_CT.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>CA = Capa</strong> <p> Hidrocarburo visible &lt;0.1 cm, que puede quitarse raspando con la uÃ±a.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Mancha" src="app/dialogs/help/images/TSur_ST.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>MA = Mancha</strong> <p> Hidrocarburo visible, que no puede ser raspado con la uÃ±a.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="PelÃ­cula" src="app/dialogs/help/images/TSur_FL.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>PE = PelÃ­cula</strong> <p> (lÃ¡mina o pelÃ­cula oleosa transparente o iridiscente.</p> <blockquote> <small class="pull-right">OTRA</small> </blockquote> </div> </div> </li> </ul> </div> </div> '),e.put("app/dialogs/help/exposicion_oleaje.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>ExposiciÃ³n al oleaje</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>ExposiciÃ³n al oleaje</h1> <p>Este punto se refiere al Ã­ndice de exposiciÃ³n total aproximada de las zonas superiores de la costa (o zona afectada) del segmento:</p> <p><strong>Muy expuesta:</strong> Lugares emplazados frente a los vientos predominantes y que reciben mar de fondo.</p> <p><strong>Expuesta:</strong> Lugares donde los vientos fuertes en direcciÃ³n a la costa son frecuentes (pero no necesariamente predominantes) y con cierto grado de abrigo debido a extensas zonas de poca profundidad u otras obstrucciones a la mar.</p> <p><strong>Parcialmente abrigada:</strong> Lugares con un Ã³rea de mar restringida expuesta al viento (p.e. &lt;10 km). Pueden estar expuestas a los vientos predominantes pero con extensas Ã³reas poco profundas o a resguardo de los mismos.</p> <p><strong>Muy abrigada:</strong> Lugares con un Ã³rea de mar muy restringida expuesta al viento (p.e. &lt;2 km) y resguardadas de los vientos predominantes o con obstrucciones tales como arrecifes o que estÃ³n totalmente cerradas.</p> <p><img alt="exposiciÃ³n al oleaje" src="exposicion_oleaje.PNG" width="411" height="464"></p> </body> </html> '),e.put("app/dialogs/help/exposicion_oleaje_help_en.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>ExposiciÃ³n al oleaje</h3> </div> <div class="modal-body"> <p>Este punto se refiere al Ã­ndice de exposiciÃ³n total aproximada de las zonas superiores de la costa (o zona afectada) del segmento:</p> <p><strong>Muy expuesta:</strong> Lugares emplazados frente a los vientos predominantes y que reciben mar de fondo.</p> <p><strong>Expuesta:</strong> Lugares donde los vientos fuertes en direcciÃ³n a la costa son frecuentes (pero no necesariamente predominantes) y con cierto grado de abrigo debido a extensas zonas de poca profundidad u otras obstrucciones a la mar.</p> <p><strong>Parcialmente abrigada:</strong> Lugares con un Ã¡rea de mar restringida expuesta al viento (p.e. &lt;10 km). Pueden estar expuestas a los vientos predominantes pero con extensas Ã¡reas poco profundas o a resguardo de los mismos.</p> <p><strong>Muy abrigada:</strong> Lugares con un Ã¡rea de mar muy restringida expuesta al viento (p.e. &lt;2 km) y resguardadas de los vientos predominantes o con obstrucciones tales como arrecifes o que estÃ¡n totalmente cerradas.</p> <p class="text-center"><img alt="ExposiciÃ³n al oleaje" src="app/dialogs/help/images/exposicion_oleaje.jpg" height="100%"></p> </div> '),e.put("app/dialogs/help/exposicion_oleaje_help_es.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>ExposiciÃ³n al oleaje</h3> </div> <div class="modal-body"> <p>Este punto se refiere al Ã­ndice de exposiciÃ³n total aproximada de las zonas superiores de la costa (o zona afectada) del segmento:</p> <p><strong>Muy expuesta:</strong> Lugares emplazados frente a los vientos predominantes y que reciben mar de fondo.</p> <p><strong>Expuesta:</strong> Lugares donde los vientos fuertes en direcciÃ³n a la costa son frecuentes (pero no necesariamente predominantes) y con cierto grado de abrigo debido a extensas zonas de poca profundidad u otras obstrucciones a la mar.</p> <p><strong>Parcialmente abrigada:</strong> Lugares con un Ã¡rea de mar restringida expuesta al viento (p.e. &lt;10 km). Pueden estar expuestas a los vientos predominantes pero con extensas Ã¡reas poco profundas o a resguardo de los mismos.</p> <p><strong>Muy abrigada:</strong> Lugares con un Ã¡rea de mar muy restringida expuesta al viento (p.e. &lt;2 km) y resguardadas de los vientos predominantes o con obstrucciones tales como arrecifes o que estÃ¡n totalmente cerradas.</p> <p class="text-center"><img alt="ExposiciÃ³n al oleaje" src="app/dialogs/help/images/exposicion_oleaje.jpg" height="100%"></p> </div> '),e.put("app/dialogs/help/exposicion_oleaje_help_gl.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>ExposiciÃ³n al oleaje</h3> </div> <div class="modal-body"> <p>Este punto se refiere al Ã­ndice de exposiciÃ³n total aproximada de las zonas superiores de la costa (o zona afectada) del segmento:</p> <p><strong>Muy expuesta:</strong> Lugares emplazados frente a los vientos predominantes y que reciben mar de fondo.</p> <p><strong>Expuesta:</strong> Lugares donde los vientos fuertes en direcciÃ³n a la costa son frecuentes (pero no necesariamente predominantes) y con cierto grado de abrigo debido a extensas zonas de poca profundidad u otras obstrucciones a la mar.</p> <p><strong>Parcialmente abrigada:</strong> Lugares con un Ã¡rea de mar restringida expuesta al viento (p.e. &lt;10 km). Pueden estar expuestas a los vientos predominantes pero con extensas Ã¡reas poco profundas o a resguardo de los mismos.</p> <p><strong>Muy abrigada:</strong> Lugares con un Ã¡rea de mar muy restringida expuesta al viento (p.e. &lt;2 km) y resguardadas de los vientos predominantes o con obstrucciones tales como arrecifes o que estÃ¡n totalmente cerradas.</p> <p class="text-center"><img alt="ExposiciÃ³n al oleaje" src="app/dialogs/help/images/exposicion_oleaje.jpg" height="100%"></p> </div> '),
e.put("app/dialogs/help/posicion_mareal.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>Posiciï¿½n Mareal</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Posiciï¿½n (Mareal): </h1> <p>Utilice los cï¿½digos para indicar la posiciï¿½n de la zona contaminada a describir. El hidrocarburo puede alcanzar la zona supramareal debido a grandes olas durante los</p> <p>temporales.</p> <p><img alt="posiciï¿½n (mareal)" src="posicion_mareal.PNG" width="100%"></p> </body> </html> '),e.put("app/dialogs/help/posicion_mareal_help_en.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>PosiciÃ³n Mareal</h3> </div> <div class="modal-body"> <p>Utilice los cÃ³digos para indicar la posiciÃ³n de la zona contaminada a describir. El hidrocarburo puede alcanzar la zona supramareal debido a grandes olas durante los temporales.</p> <p><img alt="posiciÃ³n mareal" src="app/dialogs/help/images/posicion_mareal.jpg" width="100%"></p> </div> '),e.put("app/dialogs/help/posicion_mareal_help_es.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>PosiciÃ³n Mareal</h3> </div> <div class="modal-body"> <p>Utilice los cÃ³digos para indicar la posiciÃ³n de la zona contaminada a describir. El hidrocarburo puede alcanzar la zona supramareal debido a grandes olas durante los temporales.</p> <p><img alt="posiciÃ³n mareal" src="app/dialogs/help/images/posicion_mareal.jpg" width="100%"></p> </div> '),e.put("app/dialogs/help/posicion_mareal_help_gl.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <h3>PosiciÃ³n Mareal</h3> </div> <div class="modal-body"> <p>Utilice los cÃ³digos para indicar la posiciÃ³n de la zona contaminada a describir. El hidrocarburo puede alcanzar la zona supramareal debido a grandes olas durante los temporales.</p> <p><img alt="posiciÃ³n mareal" src="app/dialogs/help/images/posicion_mareal.jpg" width="100%"></p> </div> '),e.put("app/dialogs/help/ShorelineTypeDialog_EN.html",'<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta content="IE=8" http-equiv="X-UA-Compatible"> <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css" media="screen" type="text/css" rel="stylesheet"> <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.css" media="screen" type="text/css" rel="stylesheet"> <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css" media="screen" type="text/css" rel="stylesheet"> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.js"></script> </head> <body> <div class="container"> <div class="row"> <button class="offset3 span 6 btn-primary btn-large" data-toggle="modal" data-target="#modalDialog">Open Modal</button> </div> <div class="modal hide fade" id="modalDialog"> <div class="modal-header"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">&times;</button> <h3>ShoreLine Types</h3> </div> <div class="modal-body"> <ul class="thumbnails"> <li> <div class="thumbnail"> <img alt="Acantilado rocoso" src="Sust_Cliff.PNG" width="463" height="346"> <div class="caption"> <strong>Bedrock cliff</strong> <p>Vertical or steeply sloping solid bedrock.</p> <blockquote> <small class="pull-right">FotografÃ­a:ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="Sust_Platform.PNG" width="463" height="346"> <div class="caption"> <strong>Bedrock slope / platform</strong> <p>Gently sloping or horizontal solid bedrock.</p> <blockquote> <small class="pull-right">FotografÃ­a: The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Estructura artificial no permeable" src="Sust_ManMadeSolid.PNG" width="463" height="346"> <div class="caption"> <strong>Man-made solid</strong> <p>Solid seawalls, piers or quays, usually made from concrete, wood or metal.</p> <blockquote> <small class="pull-right">FotografÃ­a: The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Estructura artificial permeable" src="Sust_ManMadePermeable.PNG" width="464" height="345"> <div class="caption"> <strong>Man-made permeable</strong> <p>Revetments or riprap that may allow penetration of stranded oil.</p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Marisma de agua salobre" src="Sust_SaltMarsh.PNG" width="464" height="345"> <div class="caption"> <strong>Salt marsh</strong> <p>Marine vegetated areas on muddy sediments.</p> <blockquote> <small class="pull-right">FotografÃ­a: The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Sedimentos fangosos" src="Sust_Mud.PNG" width="464" height="345"> <div class="caption"> <strong>Mud sediments</strong> <p>Mud shores are typical of very sheltered inlets and estuarine conditions. </p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Sedimentos arenosos" src="Sust_Sand.PNG" width="464" height="345"> <div class="caption"> <strong>Sand sediments</strong> <p>May be fine-grainedand hard packed or coarser soft sand &ndash; this should be noted. </p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Sedimentos mixtos" src="Sust_Mix.PNG" width="464" height="345"> <div class="caption"> <strong>Mixed sediments</strong> <p>Made from a mix of different sediment sizes, including sand smaller stones &ndash; the mix can be seasonal. </p> <blockquote> <small class="pull-right">FotografÃ­a: The Oil Spill Training Company</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Guijarros/cantos/grava" src="Sust_Peebles.PNG" width="464" height="345"> <div class="caption"> <strong>Guijarros/cantos/grava</strong> <p>Sedimentos de tamaÃ±o medio que pueden incluir fragmentos de conchas. En la parte alta de la playa podrÃ­a haber terraplenes abruptos. </p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Rocas" src="Sust_Boulder.PNG" width="464" height="345"> <div class="caption"> <strong>Rocas</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Estuario" src="Sust_Estuary.PNG" width="464" height="345"> <div class="caption"> <strong>Estuario</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> <li> <div class="thumbnail"> <img alt="Balsas" src="Sust_Pools.PNG" width="464" height="345"> <div class="caption"> <strong>Balsas</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right">FotografÃ­a: ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="modal-footer"> <a href="#" class="btn">Close</a> </div> </div></div></body></html> '),e.put("app/dialogs/help/ShorelineType_EN.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>Tipo de sustrato</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Shoreline Types:</h1> <ul> <li style="text-align:left;margin-left:0;margin-right:auto;"><strong>Bedrock cliff:</strong> Vertical or steeply sloping solid bedrock. <p><span style="font-size: 10pt"><img alt="Acantilado rocoso" src="Sust_Cliff.PNG" width="463" height="346"> Fotografï¿½a:ITOPF</span></p> </li> <li><strong>Bedrock slope / platform:</strong> Gently sloping or horizontal solid bedrock. <p><span style="font-size: 10pt"><img alt="Plataforma o ladera rocosa" src="Sust_Platform.PNG" width="464" height="349"> Fotografï¿½a: The Oil Spill TrainingCompany</span></p> </li> <li><strong>Man-made solid:</strong> Solid seawalls, piers or quays, usually made from concrete, wood or metal. <p><span style="font-size: 10pt"><img alt="Estructura artificial no permeable" src="Sust_ManMadeSolid.PNG" width="464" height="345"> Fotografï¿½a: The Oil Spill TrainingCompany</span></p> </li> <li><strong>Man-made </strong><strong>permeable:</strong> Revetments or riprap that may allow penetration of stranded oil. <p><span style="font-size: 10pt"><img alt="Estructura artificial permeable" src="Sust_ManMadePermeable.PNG" width="464" height="345"> Fotografï¿½a:ITOPF</span></p> </li> <li><strong>Salt marsh:</strong> Marine vegetated areas on muddy sediments. <p><img alt="Marisma de agua salobre" src="Sust_SaltMarsh.PNG" width="464" height="345"><span style="font-size: 10pt">Fotografï¿½a: The Oil Spill TrainingCompany</span></p> </li> <li><strong>Mud sediments:</strong> Mud shores are typical of very sheltered inlets and estuarine conditions. <p><span style="font-size: 10pt"><img alt="Sedimentos fangosos" src="Sust_Mud.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Sand sediments:</strong> May be fine-grainedand hard packed or coarser soft sand &ndash; this should be noted. <p><span style="font-size: 10pt"><img alt="Sedimentos arenosos" src="Sust_Sand.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Mixed sediments:</strong> Made from a mix of different sediment sizes, including sand smaller stones &ndash; the mix can be seasonal. <p><span style="font-size: 10pt"><img alt="Sedimentos mixtos" src="Sust_Mix.PNG" width="464" height="345"> Fotografï¿½a: The Oil Spill Training Company</span></p> </li> <li><strong>Guijarros/cantos/grava:</strong> Sedimentos de tamaï¿½o medio que pueden incluir fragmentos de conchas. En la parte alta de la playa podrï¿½a haber terraplenes abruptos. <p><span style="font-size: 10pt"><img alt="Guijarros/cantos/grava" src="Sust_Peebles.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Rocas:</strong> Caracterizadas por estar cubiertas de algas, lï¿½quenes o animales que indican que no estï¿½n siempre cubiertas por aguas. <p><span style="font-size: 10pt"><img alt="Rocas" src="Sust_Boulder.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Estuario:</strong> <p><span style="font-size: 10pt"><img alt="Estuario" src="Sust_Estuary.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Balsas:</strong> <p><span style="font-size: 10pt"><img alt="Balsas" src="Sust_Pools.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> </ul> </body> </html> '),e.put("app/dialogs/help/ShorelineType_ES.html",'<?xml version="1.0" encoding="iso-8859-1"?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"\r\n      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>Tipo de sustrato</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Tipo de Lï¿½nea de Costa:</h1> <ul> <li style="text-align:left;margin-left:0;margin-right:auto;"><strong>Acantilado Rocoso:</strong> Pared rocosa en vertical o con una inclinaciï¿½n abrupta. <p><span style="font-size: 10pt"><img alt="Acantilado rocoso" src="Sust_Cliff.PNG" width="463" height="346"> Fotografï¿½a:ITOPF</span></p> </li> <li><strong>Plataforma o ladera rocosa:</strong> Roca con poca inclinaciï¿½n o en horizontal. <p><span style="font-size: 10pt"><img alt="Plataforma o ladera rocosa" src="Sust_Platform.PNG" width="464" height="349"> Fotografï¿½a: The Oil Spill TrainingCompany</span></p> </li> <li><strong>Estructura artificial no permeable:</strong> Muelles, paredes solidas, embarcaderos usualmente de cemento, madera o metal. <p><span style="font-size: 10pt"><img alt="Estructura artificial no permeable" src="Sust_ManMadeSolid.PNG" width="464" height="345"> Fotografï¿½a: The Oil Spill TrainingCompany</span></p> </li> <li><strong>Estructura artificial permeable: </strong>Escolleras o similares que permitan penetraciï¿½n de hidrocarburos. <p><span style="font-size: 10pt"><img alt="Estructura artificial permeable" src="Sust_ManMadePermeable.PNG" width="464" height="345"> Fotografï¿½a:ITOPF</span></p> </li> <li><strong>Marisma de agua salobre: </strong>ï¿½reas marinas con vegetaciï¿½n sobre sedimentos fangos. <p><img alt="Marisma de agua salobre" src="Sust_SaltMarsh.PNG" width="464" height="345"><span style="font-size: 10pt">Fotografï¿½a: The Oil Spill TrainingCompany</span></p> </li> <li><strong>Sedimentos fangosos:</strong> Costa fangosa tï¿½picos de bahï¿½as sedimentarias con condiciones estuï¿½ricas. <p><span style="font-size: 10pt"><img alt="Sedimentos fangosos" src="Sust_Mud.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Sedimentos arenosos:</strong> Arenales de distinto tipo de arena, desde grano fino hasta algo mï¿½s grueso. <p><span style="font-size: 10pt"><img alt="Sedimentos arenosos" src="Sust_Sand.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Sedimentos mixtos:</strong> Mezcla de sedimentos de diferentes tamaï¿½os, incluyendo arena y pequeï¿½as piedras - la mezcla puede ser estacional. <p><span style="font-size: 10pt"><img alt="Sedimentos mixtos" src="Sust_Mix.PNG" width="464" height="345"> Fotografï¿½a: The Oil Spill Training Company</span></p> </li> <li><strong>Guijarros/cantos/grava:</strong> Sedimentos de tamaï¿½o medio que pueden incluir fragmentos de conchas. En la parte alta de la playa podrï¿½a haber terraplenes abruptos. <p><span style="font-size: 10pt"><img alt="Guijarros/cantos/grava" src="Sust_Peebles.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Rocas:</strong> Caracterizadas por estar cubiertas de algas, lï¿½quenes o animales que indican que no estï¿½n siempre cubiertas por aguas. <p><span style="font-size: 10pt"><img alt="Rocas" src="Sust_Boulder.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Estuario:</strong> <p><span style="font-size: 10pt"><img alt="Estuario" src="Sust_Estuary.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> <li><strong>Balsas:</strong> <p><span style="font-size: 10pt"><img alt="Balsas" src="Sust_Pools.PNG" width="464" height="345"> Fotografï¿½a: ITOPF</span></p> </li> </ul> </body> </html> '),e.put("app/dialogs/help/shorelinetype_help_en.html",' <?xml version="1.0" encoding="UTF-8" standalone="no"?> <div class="modal-header"> <h3>Shoreline Type</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Acantilado rocoso" src="app/dialogs/help/images/Sust_Cliff.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Bedrock cliff</strong> <p>Vertical or steeply sloping solid bedrock.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="app/dialogs/help/images/Sust_Platform.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Bedrock slope / platform</strong> <p>Gently sloping or horizontal solid bedrock.</p> <blockquote> <small class="pull-right">The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estructura artificial no permeable" src="app/dialogs/help/images/Sust_ManMadeSolid.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Man-made solid</strong> <p>Solid seawalls, piers or quays, usually made from concrete, wood or metal.</p> <blockquote> <small class="pull-right">The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estructura artificial permeable" src="app/dialogs/help/images/Sust_ManMadePermeable.jpg" width="464" height="345"> <div class="caption"> <strong>Man-made permeable</strong> <p>Revetments or riprap that may allow penetration of stranded oil.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Marisma de agua salobre" src="app/dialogs/help/images/Sust_SaltMarsh.jpg" width="464" height="345"> <div class="caption"> <strong>Salt marsh</strong> <p>Marine vegetated areas on muddy sediments.</p> <blockquote> <small class="pull-right">The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos fangosos" src="app/dialogs/help/images/Sust_Mud.jpg" width="464" height="345"> <div class="caption"> <strong>Mud sediments</strong> <p>Mud shores are typical of very sheltered inlets and estuarine conditions. </p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos arenosos" src="app/dialogs/help/images/Sust_Sand.jpg" width="464" height="345"> <div class="caption"> <strong>Sand sediments</strong> <p>May be fine-grainedand hard packed or coarser soft sand &ndash; this should be noted. </p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos mixtos" src="app/dialogs/help/images/Sust_Mix.jpg" width="464" height="345"> <div class="caption"> <strong>Mixed sediments</strong> <p>Made from a mix of different sediment sizes, including sand smaller stones &ndash; the mix can be seasonal. </p> <blockquote> <small class="pull-right">The Oil Spill Training Company</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Guijarros/cantos/grava" src="app/dialogs/help/images/Sust_Peebles.jpg" width="464" height="345"> <div class="caption"> <strong>Peebles</strong> <p>Sedimentos de tamaÃ±o medio que pueden incluir fragmentos de conchas. En la parte alta de la playa podrÃ­a haber terraplenes abruptos. </p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Rocas" src="app/dialogs/help/images/Sust_Boulder.jpg" width="464" height="345"> <div class="caption"> <strong>Boulder</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estuario" src="app/dialogs/help/images/Sust_Estuary.jpg" width="464" height="345"> <div class="caption"> <strong>Estuary</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estï¿½n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Balsas" src="app/dialogs/help/images/Sust_Pools.jpg" width="464" height="345"> <div class="caption"> <strong>Pools</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> </div>'),e.put("app/dialogs/help/shorelinetype_help_es.html",'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <div class="modal-header"> <h3>Tipo linea de costa</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Acantilado rocoso" src="app/dialogs/help/images/Sust_Cliff.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Acantilado rocoso</strong> <p>Pared rocosa en vertical o con una inclinaciÃ³n abrupta.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="app/dialogs/help/images/Sust_Platform.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Plataforma o ladera rocosa</strong> <p>Roca con poca inclinaciÃ³n o en horizontal. </p> <blockquote> <small class="pull-right">The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estructura artificial no permeable" src="app/dialogs/help/images/Sust_ManMadeSolid.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Estructura artificial no permeable</strong> <p>Muelles, paredes solidas, embarcaderos usualmente de cemento, madera o metal.</p> <blockquote> <small class="pull-right"> The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estructura artificial permeable" src="app/dialogs/help/images/Sust_ManMadePermeable.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Estructura artificial permeable</strong> <p>Escolleras o similares que permitan penetraciÃ³n de hidrocarburos.</p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Marisma de agua salobre" src="app/dialogs/help/images/Sust_SaltMarsh.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Marisma de agua salobre</strong> <p>Ãreas marinas con vegetaciÃ³n sobre sedimentos fangos.</p> <blockquote> <small class="pull-right"> The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos fangosos" src="app/dialogs/help/images/Sust_Mud.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Sedimentos fangosos</strong> <p>Costa fangosa tÃ­picos de bahÃ­as sedimentarias con condiciones estuÃ³ricas. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos arenosos" src="app/dialogs/help/images/Sust_Sand.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Sedimentos arenosos</strong> <p>Arenales de distinto tipo de arena, desde grano fino hasta algo mÃ¡s grueso. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos mixtos" src="app/dialogs/help/images/Sust_Mix.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Sedimentos mixtos</strong> <p>Mezcla de sedimentos de diferentes tamaÃ±os, incluyendo arena y pequeÃ±as piedras - la mezcla puede ser estacional. </p> <blockquote> <small class="pull-right"> The Oil Spill Training Company</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Guijarros/cantos/grava" src="app/dialogs/help/images/Sust_Peebles.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Guijarros/cantos/grava</strong> <p>Sedimentos de tamaÃ±o medio que pueden incluir fragmentos de conchas. En la parte alta de la playa podrÃ­a haber terraplenes abruptos. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> </ul> </div> <div class="row"> <ul class="thumbnails"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Rocas" src="app/dialogs/help/images/Sust_Boulder.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Rocas</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estuario" src="app/dialogs/help/images/Sust_Estuary.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Estuario</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Balsas" src="app/dialogs/help/images/Sust_Pools.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Balsas</strong> <p>Caracterizadas por estar cubiertas de algas, lÃ­quenes o animales que indican que no estÃ¡n siempre cubiertas por aguas. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> </ul></div> </div> '),
e.put("app/dialogs/help/shorelinetype_help_gl.html",'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <div class="modal-header"> <h3>Tipo linea de costa</h3> </div> <div class="modal-body"> <div class="row"> <ul class="thumbnails" style="list-style-type: none;"> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Acantilado rocoso" src="app/dialogs/help/images/Sust_Cliff.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Acantilado rocoso</strong> <p>Parede rocosa en vertical ou cunha inclinaciÃ³n abrupta.</p> <blockquote> <small class="pull-right">ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Plataforma o ladera rocosa" src="app/dialogs/help/images/Sust_Platform.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Plataforma ou ladeira rocosa</strong> <p>Roca con pouca inclinaciÃ³n ou en horizontal. </p> <blockquote> <small class="pull-right">The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estructura artificial no permeable" src="app/dialogs/help/images/Sust_ManMadeSolid.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Estructura artificial non permeable</strong> <p>Muelles, paredes solidas, embarcadeiros usualmente de cemento, madeira ou metal.</p> <blockquote> <small class="pull-right"> The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estructura artificial permeable" src="app/dialogs/help/images/Sust_ManMadePermeable.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Estructura artificial permeable</strong> <p>Escolleras ou similares que permitan penetraciÃ³n de hidrocarburos.</p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Marisma de agua salobre" src="app/dialogs/help/images/Sust_SaltMarsh.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Marisma de auga salobre</strong> <p>Ãreas marinas con vexetaciÃ³n sobre sedimentos de fangos.</p> <blockquote> <small class="pull-right"> The Oil Spill TrainingCompany</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos fangosos" src="app/dialogs/help/images/Sust_Mud.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Sedimentos fangosos</strong> <p>Costa fangosa tÃ­picos de bahÃ­as sedimentarias con condiciones estuÃ³ricas. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos arenosos" src="app/dialogs/help/images/Sust_Sand.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Sedimentos areosos</strong> <p>Areales de distinto tipo de area, dende grano fino ata algo mÃ¡is groso. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Sedimentos mixtos" src="app/dialogs/help/images/Sust_Mix.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Sedimentos mixtos</strong> <p>Mezcla de sedimentos de diferentes tamaÃ±os, incluindo area y pequenas pedras - a mezcla pode ser estacional. </p> <blockquote> <small class="pull-right"> The Oil Spill Training Company</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Guijarros/cantos/grava" src="app/dialogs/help/images/Sust_Peebles.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Guijarros/cantos/grava</strong> <p>Sedimentos de tamaÃ±o medio que poden incluir fragmentos de cunchas. Na parte alta de la praia podrÃ­a haber terraplens abruptos. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Rocas" src="app/dialogs/help/images/Sust_Boulder.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Rocas</strong> <p>Caracterizadas por estar cubertas de algas, lÃ­quenes ou animais que indican que non estÃ©n sempre cubertas por auga. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Estuario" src="app/dialogs/help/images/Sust_Estuary.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Estuario</strong> <p>Caracterizadas por estar cubertas de algas, lÃ­quenes ou animais que indican que non estÃ©n sempre cubertas por auga. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> <li class="col-lg-6 col-md-6 col-sm-12 col-xs-12"> <div class="thumbnail"> <img alt="Balsas" src="app/dialogs/help/images/Sust_Pools.jpg" style="width:463px; height:345px"> <div class="caption"> <strong>Balsas</strong> <p>Caracterizadas por estar cubertas de algas, lÃ­quenes ou animais que indican que non estÃ©n sempre cubertas por auga. </p> <blockquote> <small class="pull-right"> ITOPF</small> </blockquote> </div> </div> </li> </ul></div> </div> '),e.put("app/dialogs/help/tamano_sedimento.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"\r\n      "http://www.w3.org/TR/html4/loose.dtd"> <?xml version="1.0" encoding="iso-8859-1"?> <html> <head> <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"> <title>tamaï¿½o sedimentos</title> <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/"> <style type="text/css" title="Amaya theme">\r\n/* Modern style for Amaya Editor Lite */\r\n\r\n/* default rules for the whole document */\r\nbody {\r\n    font-size: 12pt;\r\n    font-family: Helvetica, Arial, sans-serif;\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    color: black;\r\n    background-color: white;\r\n    line-height: 1.2em;\r\n    margin-left: 4em;\r\n    margin-right: 2em;\r\n   }\r\n\r\n/* paragraphs */\r\np  {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\n\r\n/* headings */\r\nh1 {\r\n    font-size: 180%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    font-variant: small-caps;\r\n    text-align: left;\r\n    padding: 0;\r\n    margin-top: 1.7em;\r\n    margin-bottom: 1.7em;\r\n   }\r\nh2 {\r\n    font-size: 150%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.5em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh3 {\r\n    font-size: 130%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.3em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh4 {\r\n    font-size: 110%;\r\n    font-weight: bold;\r\n    font-style: normal;\r\n    padding: 0;\r\n    margin-top: 1.1em;\r\n    margin-bottom: 1.1em;\r\n   }\r\nh5 {\r\n    font-size: 100%;\r\n    font-weight: bold;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nh6 {\r\n    font-size: 100%;\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\n\r\n/* divisions */\r\ndiv {\r\n    padding: 0;\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\n\r\n/* lists */\r\nul, ol {\r\n    padding: 0 0 0 3em;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nul ul, ol ol, ul ol, ol ul {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\nli {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    text-align: left;\r\n   }\r\nli p {\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n   }\r\ndl {\r\n    padding: 0;\r\n    margin-top: 1em;\r\n    margin-bottom: 1em;\r\n    margin-left: 1em;\r\n   }\r\ndl dl {\r\n    margin-top: 0em;\r\n    margin-bottom: 0em;\r\n   }\r\ndt {\r\n    padding: 0;\r\n    font-weight: bold;\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndd {\r\n    padding: 0;\r\n    margin-top: .3em;\r\n    margin-left: 3em;\r\n    margin-bottom: .3em;\r\n   }\r\ndl p {\r\n    margin-top: .3em;\r\n    margin-bottom: .3em;\r\n   }\r\n\r\n/* inline */\r\nstrong {\r\n    font-weight: bold;\r\n   }\r\nem {\r\n    font-style: italic;\r\n   }\r\ncode {\r\n    font-family: Courier New, Courier, monospace;\r\n   }\r\nins {\r\n    background-color: yellow;\r\n    text-decoration: underline;\r\n   }\r\ndel {\r\n    text-decoration: line-through;\r\n   }\r\n\r\n/* anchors */\r\na[href] {\r\n    color: blue;\r\n    text-decoration: underline;\r\n   }\r\n\r\n/* end */\r\n  </style> </head> <body> <h1>Tipo de sedimento de la playa</h1> <p>Hay varias escalas para clasificar las playas sedimentarias. Para los objetivos de esta evaluaciï¿½n de la costa, se emplean categorï¿½as de carï¿½cter general. Utilice el grï¿½fico siguiente como guï¿½a del tamaï¿½o de los sedimentos para determinar la naturaleza de la playa:</p> <p><img alt="tamaï¿½o de sedimento" src="tamano_sedimento.jpg" width="552" height="281"></p> </body> </html> '),e.put("app/dialogs/help/tamano_sedimento_help_en.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">Pechar</button> <h3>Tipo de sedimento da praia</h3> </div> <div class="modal-body"> <p> Existen varias escalas para a clasificaciÃ³n das praias sedimentarias. Para os obxetivos de esta evaluaciÃ³n da costa, empleanse categorÃ­as de carÃ¡cter xeral. Utilice o grÃ¡fico seguiente como guÃ­a do tamaÃ±o dos sedimentos para determinar a natureza da praia:</p> <p><img alt="tamaÃ±o do sedimento" src="app/dialogs/help/images/tamano_sedimento.jpg" width="552" height="281"></p> </div> '),e.put("app/dialogs/help/tamano_sedimento_help_es.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">Cerrar</button> <h3>Tipo de sedimento de la playa</h3> </div> <div class="modal-body"> <p>Hay varias escalas para clasificar las playas sedimentarias. Para los objetivos de esta evaluaciÃ³n de la costa, se emplean categorÃ­as de carÃ¡cter general. Utilice el grÃ¡fico siguiente como guÃ­a del tamaÃ±o de los sedimentos para determinar la naturaleza de la playa:</p> <p><img alt="tamaÃ±o de sedimento" src="app/dialogs/help/images/tamano_sedimento.jpg" width="552" height="281"></p> </div> '),e.put("app/dialogs/help/tamano_sedimento_help_gl.html",'<?xml version="1.0" encoding="UTF-8"?> <div class="modal-header"> <button type="button" class="btn btn-inverse pull-right" data-dismiss="modal" aria-hidden="true">Pechar</button> <h3>Tipo de sedimento da praia</h3> </div> <div class="modal-body"> <p> Existen varias escalas para a clasificaciÃ³n das praias sedimentarias. Para os obxetivos de esta evaluaciÃ³n da costa, empleanse categorÃ­as de carÃ¡cter xeral. Utilice o grÃ¡fico seguiente como guÃ­a do tamaÃ±o dos sedimentos para determinar a natureza da praia:</p> <p><img alt="tamaÃ±o do sedimento" src="app/dialogs/help/images/tamano_sedimento.jpg" width="552" height="281"></p> </div> '),e.put("app/components/color-picker-modal/color-picker-modal.html",'<div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.colorPicker.$invalid && (vm.newForm.colorPicker.$dirty || vm.$submitted)}"> <label for="colorPicker">Selecciona un color</label> <color-picker available-colors="vm.availableColors" ng-model="vm.selectedColor"></color-picker> </div> </div> </div> </form> </div> '),e.put("app/components/map-marker-detail/map-marker-detail.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title">EdiciÃ³n de marcador</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.markerTitle.$invalid && (vm.markerTitle.$dirty || vm.$submitted)}"> <label for="markerTitle">TÃ­tulo</label> <input type="text" name="markerTitle" id="markerTitle" class="form-control" required="" ng-model="vm.feature.properties.title" autofocus=""> <span class="help-block error-block basic-block">Debe indicarse o tÃ­tulo do marcador</span> </div> </div> </div> <div class="form-group"> <label for="markerDescription">DescripciÃ³n</label> <textarea rows="4" cols="50" name="markerDescription" id="markerDescription" class="form-control" required="" ng-model="vm.feature.properties.description"></textarea> </div> <div class="form-group"> <label for="markerURL">Enlace a mÃ¡is informaciÃ³n (PÃ¡xina Wordpress)</label> <input type="text" name="markerURL" id="markerURL" class="form-control" ng-model="vm.feature.properties.url"> </div> <div class="form-group"> <label for="markerImage">Enlace a unha imaxe destacada</label> <input type="text" name="markerImage" id="markerImage" class="form-control" ng-model="vm.feature.properties.imageUrl"> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerIcon">Icono</label> <icon-picker available-icons="vm.availableIcons" ng-model="vm.feature.properties.icon"></icon-picker> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerCategory">Color del marcador</label> <color-picker available-colors="vm.availableColors" ng-model="vm.feature.properties.markerColor"></color-picker> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerCategory">Marcador final</label> <div class="awesome-marker-icon-{{vm.feature.properties.markerColor}} awesome-marker" style="position:relative!important"> <i class="{{vm.feature.properties.icon}} icon-white"></i> </div> </div> </div> </div></form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.save">Gardar</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div> '),e.put("app/components/ng-breadcrumbs/ngBreadCrumbTemplate.html",'<ol class="breadcrumb"> <li ng-repeat="crumb in breadcrumbs" ng-class="{ active: $last }"><a ui-sref="{{ crumb.route }}" ng-if="!$last" data-translate="crumb.displayName"></a><span ng-show="$last" data-translate="crumb.displayName"></span> </li> </ol> '),e.put("app/components/reportusers-tree/reportusers-tree.html",'<div class="widgets"> <div class="panel-body"> <div js-tree="vm.basicConfig" ng-model="vm.treeData" should-apply="vm.applyModelChanges()" tree="vm.basicTree" tree-events="ready:vm.readyCB"></div> </div> <div class="panel-footer clearfix"> <span class="pull-left"> {{\'app.reportuser.message.usersSelected\' | translate}} <strong> {{vm.selectedusers.length}}</strong> </span> <div class="pull-right"> <div input="input-group"> <a ng-show="vm.onSave" class="btn btn-primary btn-sm" ng-click="vm.cancel()" data-translate="global.button.cancel"></a> <a ng-show="vm.onCancel" class="btn btn-primary btn-sm" ng-click="vm.save()" data-translate="global.button.save"></a> </div> </div> </div> </div>'),e.put("app/pages/account/account.html",' <div>  <div ui-view=""></div> <footer class="navbar-fixed-bottom" style="background: white;"> <img class="img-responsive" style="margin: 0 auto;" src="assets/img/publicidad-footer.min.png" alt="MANIFEST-COPManagementTool: has been co-funded by the European UniÃ³n Civil Protection">  </footer> </div>'),e.put("app/pages/calendar/calendar-task-popover.html",'<table> <tbody> <tr ng-repeat="task in event.tasks"> <td class="fc-event-container"> <a class="fc-day-grid-event fc-h-event fc-event fc-start fc-end ng-scope {{event.className[0]}}" ui-sref="tasks.detail({\'id\': task.id})"> <div class="fc-content"> <span class="fc-time">{{task.plannedStartTime | date: \'HH:mm\'}} a {{task.plannedEndTime | date: \'HH:mm\'}}</span> <span class="fc-title">{{task.name}}<br>{{task.description}}</span> </div> </a> </td> </tr> </tbody> </table> '),e.put("app/pages/calendar/calendar.html",'<div class="widgets"> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="panel calendar-panel"> <div class="panel-body"> <div id="calendar" ui-calendar="vm.calendarConfig" class="task-calendar" ng-model="vm.eventSources"></div> </div> </div> </div> </div> </div> '),e.put("app/pages/dashboard/dashboard.html",'   <div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-12 col-xs-12"> <dashboard-bookmarks> </dashboard-bookmarks> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-if-role="ROLE_ADMIN,ROLE_POLLUTION_EPISODE"> <dashboard-episodes> </dashboard-episodes> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-if-role="ROLE_POLLUTION_EPISODE_MAP"> <dashboard-episodes-map> </dashboard-episodes-map> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-if-role="ROLE_ADMIN,ROLE_POLREP,ROLE_POLLUTION_EPISODE"> <dashboard-pollutionreports></dashboard-pollutionreports> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-if-role="ROLE_ADMIN,ROLE_SCAT_INSPECTOR,ROLE_SCAT_MANAGER,ROLE_POLLUTION_EPISODE"> <dashboard-scatreports></dashboard-scatreports> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-12 col-xs-12" ng-if-role="ROLE_ADMIN,ROLE_LOGBOOKRECORD,ROLE_POLLUTION_EPISODE"> <dashboard-logbookrecords></dashboard-logbookrecords> </div> </div> </div> '),e.put("app/pages/logbookrecords/logbookrecords-create.html",'<div class="widgets"> <div class="panel"> <div class="panel-body"> <logbookrecord-create-wizard on-create="onCreate(logbookrecord)" on-close="onClose()"></logbookrecord-create-wizard> </div> </div> </div>'),e.put("app/pages/logbookrecords/logbookrecords-detail.html",'<div class="widgets"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <logbookrecord-detail logbookrecord="logbookrecord" on-close="goBack()"></logbookrecord-detail> </div> </div> <div class="panel full-invisible viewport100" zoom-in=""> <div class="panel-body"> <div class="row">  <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point"></div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-default btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.pollutionreport.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-default btn-sm" ng-click="vm.currentPosition()" data-translate="app.pollutionreport.map.currentPoint"></button> <button class="btn btn-default btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <logbookrecord-map ng-if="vm.mapAction==\'draw\'" logbookrecord="logbookrecord" action="show"></logbookrecord-map> </div> </div> </div> '),e.put("app/pages/logbookrecords/logbookrecords.html",'<div class="widgets" ui-view="">  <div class="row" ng-if-permission="ROLE_ADMIN,ROLE_LOGBOOKRECORD"> <div class="col-xlg-12 col-lg-12 col-md-12"> <a class="btn btn-primary" title="{{\'app.logbookrecord.home.createLabel\' | translate}}" ui-sref="logbookrecords.create"><i class="ion-plus-round"></i></a> </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <logbookrecords-search></logbookrecords-search> </div> </div> </div> '),e.put("app/pages/gislayouts/gislayouts-create.html",'<div class="widgets"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-12"> <div class="panel"> <gislayout-create gislayout="gislayout" on-create="onCreate(gislayout)" on-close="onClose()"> </gislayout-create></div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> </div> </div> '),e.put("app/pages/gislayouts/gislayouts-detail.html",'<div> <gislayout-detail gislayout="gislayout" detail-form="vm.detailForm" on-close="vm.onClose()"></gislayout-detail>  <div ba-panel="" ba-panel-class="none-padding"> <gislayout-map gislayout="gislayout" detail-form="vm.detailForm"></gislayout-map> </div> </div>'),e.put("app/pages/gislayouts/gislayouts.html",'<div class="widgets" ui-view=""> <div class="row" ng-if-permission="ROLE_ADMIN,ROLE_GISLAYOUT"> <div class="col-xlg-12 col-lg-12 col-md-12">  <a class="btn btn-primary btn-default" ui-sref="gislayouts.create" title="{{\'app.gislayout.home.createLabel\'|translate}}"> <i class="ion-plus-round"></i></a>  </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <gislayout-search></gislayout-search> </div> </div> </div> '),e.put("app/pages/pollutionepisodes/pollutionepisodes-create.html",'<div class="widgets"> <div class="col-xlg-12 col-lg-12 col-md-12"> <div class="panel"> <div class="panel-body"> <pollutionepisode-create-wizard on-create="onCreate(pollutionepisode)" on-close="onClose()"></pollutionepisode-create-wizard> </div> </div> </div> </div>'),e.put("app/pages/pollutionepisodes/pollutionepisodes-detail.html",'<div class="widgets"> <div ui-vew="detail-content"> <div class="row"> <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"> <div class="btn-group"> <pollutionepisode-copy-btn pollutionepisode="pollutionepisode"></pollutionepisode-copy-btn> <a class="btn btn-default" ui-sref="pollutionepisodes" data-translate="global.button.close">Pechar</a> <a class="btn btn-success" ng-click="publishAndClose()" data-translate="app.pollutionepisode.publishclose" ng-show="pollutionepisode.status==\'NEW\'">Publicar</a> <a class="btn btn-default btn-with-icon" ng-click="openVisor($event,pollutionepisode)"><i class="ion-ios-location"></i> {{\'app.pollutionepisodemap.title\' | translate}}</a> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <span class="pull-right"> <div animated-on-change="{{vm.marked}}" animated-in="animated zoomIn"> <bookmark resource="pollutionepisodes" marked="vm.marked" resource-id="{{pollutionepisode.id}}" title="{{pollutionepisode.name}}" description="{{\'app.pollutionepisode.title\' | translate}}"></bookmark> </div> </span> </div> </div> <br> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <pollutionepisode-detail pollutionepisode="pollutionepisode" episodeusers="episodeusers" detail-form="vm.detailForm"></pollutionepisode-detail> </div>  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-12" ng-hide="vm.detailForm.$visible"> <div class="panel tabs-panel none-padding horizontal-tabs with-scroll" style="padding-bottom: 0px;"> <div class="panel-body"> <div ui-view="tab-buttons" class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;"> </div> <div class="tabset-primary"> <ul class="nav nav-tabs">  <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.episodelayers" data-translate="app.pollutionepisode.detail.tab.layers"></a> <span ng-show="vm.episodelayers"> ({{vm.episodelayers.lenght}}) </span></li> <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.episodeusers" data-translate="app.pollutionepisode.detail.tab.users"></a></li>  <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.pollutionreports" data-translate="app.pollutionepisode.detail.tab.pollutionreports"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.scatreports" data-translate="app.pollutionepisode.detail.tab.scatreports"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.gislayouts" data-translate="app.pollutionepisode.detail.tab.gislayouts"></a></li>  <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.photos" data-translate="app.pollutionepisode.detail.tab.photos"></a></li>    <li ui-sref-active="active"><a ui-sref="pollutionepisodes.detail.episodeobservers" data-translate="app.pollutionepisode.detail.tab.observers"></a></li> </ul> </div> <div class="tab-content clearfix"> <div ui-view="tab-content"></div> </div> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-12" ng-hide="vm.detailForm.$visible"> <div ba-panel="" ba-panel-class="none-padding with-scroll" ba-panel-title="{{\'app.pollutionepisode.detail.tab.logbookrecords\' | translate}}"> <div class="panel-body"> <episode-logbookrecords episode="pollutionepisode" logbookrecords="logbookrecords"></episode-logbookrecords> </div> </div> </div>  </div> </div> </div>'),e.put("app/pages/pollutionepisodes/pollutionepisodes-pub.html",'<div class="widgets"> <div class="col-xlg-12 col-lg-12 col-md-12"> <div class="panel"> <div class="panel-body"> <pollutionepisode-pub-detail on-create="onCreate(pollutionepisode)" on-close="onClose()"> </pollutionepisode-pub-detail></div> </div> </div> </div>'),e.put("app/pages/pollutionepisodes/pollutionepisodes.html",'<div class="widgets" ui-view="">  <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <a class="btn btn-primary" ui-sref="pollutionepisodes.create" title="{{\'app.pollutionepisode.home.createLabel\' | translate}}"><i class="ion-plus-round"></i></a>  </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <pollutionepisode-search></pollutionepisode-search> </div> </div> </div> '),e.put("app/pages/pollutionepisodesmap/pollutionepisodes-map.html",'<div class="widgets" ui-view="">  <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <pollutionepisode-map-search></pollutionepisode-map-search> </div> </div> </div> '),e.put("app/pages/pub/pollutionepisodes-detail.html",'<div class="widgets"> <div ui-vew="detail-content"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <pollutionepisode-pub-detail pollutionepisode="pollutionepisode" detail-form="vm.detailForm"></pollutionepisode-pub-detail> </div> </div> </div> </div>'),e.put("app/pages/pub/pub.html",'<div class="widgets" ui-view=""> </div> '),e.put("app/pages/pollutionreports/pollutionreports-create.html",'<div class="widgets"> <div class="col-xlg-12 col-lg-12 col-md-12"> <div class="panel"> <div class="panel-body"> <pollutionreport-create-wizard pollutionepisode="pollutionepisode" on-create="onCreate(pollutionreport)" on-close="onClose()"></pollutionreport-create-wizard> </div> </div> </div> </div>'),e.put("app/pages/pollutionreports/pollutionreports-detail-desktop.html",'<div class="widgets"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <span class="pull-right"> <div animated-on-change="{{vm.marked}}" animated-in="animated zoomIn"> <bookmark resource="pollutionreports" marked="vm.marked" resource-id="{{pollutionreport.id}}" title="{{pollutionreport.reportTime | date: \'dd/MM/yy HH:mm\'}}" description="{{\'app.pollutionreport.title\' | translate}}"></bookmark> </div> </span> </div> </div> <div class="clearfix"></div> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-5"> <pollutionreport-detail pollutionreport="pollutionreport" detail-form="vm.detailForm"></pollutionreport-detail> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-7" ng-hide="vm.detailForm.$visible"> <div ba-panel="" ba-panel-class="tabs-panel none-padding horizontal-tabs"> <div ui-view="tab-buttons" class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;"> </div> <div class="tabset-primary"> <ul class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.spills" data-translate="app.pollutionreport.detail.tab.spills"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.pollutionsources" data-translate="app.pollutionreport.detail.tab.pollutionsources"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.photos" data-translate="app.pollutionreport.detail.tab.photos"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.comments" data-translate="app.pollutionreport.detail.tab.comments"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.signeddocument" data-translate="app.pollutionreport.detail.tab.signeddocument"></a></li> </ul> </div> <div class="tab-content clearfix"> <div ui-view="tab-content"></div> </div> </div> </div> </div>   </div>'),e.put("app/pages/pollutionreports/pollutionreports-detail-mobile.html",'<div class="widgets"> <div class="row"> <div class="col-xs-11 col-sm-11 col-md-11 col-lg-11"> <span class="pull-right"> <a href="" style="margin-right:20px" class="btn btn-primary btn-with-icon" ui-sref="pollutionreports.detail.print" title="{{\'global.button.print\'| translate}}"><i class="ion-printer"></i> <span data-translate="app.pollutionreport.detail.review"></span></a> </span> </div> <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1"> <span class="pull-right"> <div animated-on-change="{{vm.marked}}" animated-in="animated zoomIn"> <bookmark resource="pollutionreports" marked="vm.marked" resource-id="{{pollutionreport.id}}" title="{{pollutionreport.reportTime | date: \'dd/MM/yy HH:mm\'}}" description="{{\'app.pollutionreport.title\' | translate}}"></bookmark> </div> </span> </div> </div> <div class="clearfix"></div> <uib-tabset active="active"> <uib-tab index="0" heading="{{\'app.pollutionreport.detail.mobile.tab.elements\' | translate}}"> <div ba-panel="" ba-panel-class="tabs-panel none-padding horizontal-tabs"> <div ui-view="tab-buttons" class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;"> </div> <div class="tabset-primary"> <ul class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.spills" data-translate="app.pollutionreport.detail.tab.spills"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.pollutionsources" data-translate="app.pollutionreport.detail.tab.pollutionsources"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.photos" data-translate="app.pollutionreport.detail.tab.photos"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.comments" data-translate="app.pollutionreport.detail.tab.comments"></a></li> <li ui-sref-active="active"><a ui-sref="pollutionreports.detail.signeddocument" data-translate="app.pollutionreport.detail.tab.signeddocument"></a></li> </ul> </div> <div class="tab-content clearfix"> <div ui-view="tab-content"></div> </div> </div> </uib-tab> <uib-tab index="1" heading="{{\'app.pollutionreport.detail.mobile.tab.map\' | translate}}"> <div style="width:100%; height:100%"> <pollutionreport-map pollutionreport="pollutionreport" readonly="true"></pollutionreport-map> </div> </uib-tab> <uib-tab index="2" heading="{{\'app.pollutionreport.detail.mobile.tab.detail\' | translate}}"> <pollutionreport-detail-mobile pollutionreport="pollutionreport" detail-form="vm.detailForm"></pollutionreport-detail-mobile> </uib-tab> </uib-tabset> </div>'),e.put("app/pages/pollutionreports/pollutionreports-detail.html","<div>    <ng-include src=\"'app/pages/pollutionreports/pollutionreports-detail-mobile.html'\"></ng-include> </div>"),e.put("app/pages/pollutionreports/pollutionreports-print.html",'<div class="widgets"> <div class="panel none-padding"> <div class="panel-heading"> <div class="clearfix pull-right" ng-if-role="ROLE_ADMIN,ROLE_POLREP"> <a href="" class="btn btn-xs btn-default hidden-print" ui-sref="pollutionreports.detail" data-translate="global.button.close"></a> <a href="" class="btn btn-xs btn-primary hidden-print" ui-sref="pollutionreports" data-translate="global.button.finish"></a> </div> <div class="clearfix pull-right" ng-if-role="ROLE_POLLUTION_EPISODE" ng-if-not-role="ROLE_ADMIN,ROLE_POLREP"> <a href="" class="btn btn-xs btn-default btn-primary hidden-print" ui-sref="pollutionreports" data-translate="global.button.close"></a> </div> </div> <div class="panel-body"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <pollutionreport-print pollutionreport="pollutionreport"></pollutionreport-print> </div> </div> </div> </div>'),
e.put("app/pages/pollutionreports/pollutionreports.html",'<div class="widgets" ui-view=""> <div class="row" ng-if-permission="ROLE_ADMIN,ROLE_POLREP"> <div class="col-xlg-12 col-lg-12 col-md-12"> <a class="btn btn-default btn-primary" ui-sref="pollutionreports.create" title="{{\'app.pollutionreport.home.createLabel\' | translate }}"> <i class="ion-plus-round"> </i></a> </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <pollutionreport-search></pollutionreport-search> </div> </div> </div> '),e.put("app/pages/scatreports/scatreports-create.html",'<div class="widgets"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-12"> <div class="panel"> <scatreport-create-wizard scatreport="scatreport" on-create="onCreate(scatreport)" on-close="onClose()"></scatreport-create-wizard> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">  </div> </div> '),e.put("app/pages/scatreports/scatreports-detail.html",'<div class="widgets"> <div class="row"> <div class="col-xs-11 col-sm-11 col-md-11 col-lg-11"> <span class="pull-right"> <a href="" style="margin-right:20px" class="btn btn-primary btn-with-icon" ui-sref="scatreports.detail.print" title="{{\'global.button.print\'| translate}}"><i class="ion-printer"></i> <span data-translate="app.scatreport.detail.review"></span></a> </span> </div> <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1"> <span class="pull-right"> <div animated-on-change="{{vm.marked}}" animated-in="animated zoomIn"> <bookmark resource="scatreports" marked="vm.marked" resource-id="{{scatreport.id}}" title="{{scatreport.reportTime | date: \'dd/MM/yy HH:mm\'}}" description="{{\'app.scatreport.title\' | translate}}"></bookmark> </div> </span> </div> </div> <div class="clearfix"></div> <uib-tabset active="active"> <uib-tab index="0" heading="{{\'app.scatreport.detail.mobile.tab.detail\' | translate}}"> <scatreport-detail scatreport="scatreport" detail-form="vm.detailForm"></scatreport-detail> </uib-tab> <uib-tab index="1" heading="{{\'app.scatreport.detail.mobile.tab.elements\' | translate}}"> <div ba-panel="" ba-panel-class="tabs-panel none-padding horizontal-tabs"> <div ui-view="tab-buttons" class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;"> </div> <div class="tabset-primary"> <ul class="nav nav-tabs"> <li ui-sref-active="active"><a ui-sref="scatreports.detail.shorelinetypes" data-translate="app.scatreport.detail.tab.shorelinetypes"></a></li> <li ui-sref-active="active"><a ui-sref="scatreports.detail.operationalfeatures" data-translate="app.scatreport.detail.tab.operationalfeatures"></a></li> <li ui-sref-active="active"><a ui-sref="scatreports.detail.surfaceoilconditions" data-translate="app.scatreport.detail.tab.surfaceoilconditions"></a></li> <li ui-sref-active="active"><a ui-sref="scatreports.detail.subsurfaceoilconditions" data-translate="app.scatreport.detail.tab.subsurfaceoilconditions"></a></li> <li ui-sref-active="active"><a ui-sref="scatreports.detail.othersubstances" data-translate="app.scatreport.detail.tab.othersubstances"></a></li> <li ui-sref-active="active"><a ui-sref="scatreports.detail.photos" data-translate="app.scatreport.detail.tab.photos"></a></li> <li ui-sref-active="active"><a ui-sref="scatreports.detail.comments" data-translate="app.scatreport.detail.tab.comments"></a></li> </ul> </div> <div class="tab-content clearfix"> <div ui-view="tab-content"></div> </div> </div> </uib-tab> <uib-tab index="2" heading="{{\'app.scatreport.detail.mobile.tab.map\' | translate}}"> <div style="width:100%; height:100%"> <scatreport-map scatreport="scatreport" readonly="true"></scatreport-map> </div> </uib-tab>   </uib-tabset> </div>'),e.put("app/pages/scatreports/scatreports-print.html",'<div class="widgets"> <div class="panel none-padding"> <div class="panel-heading"> <div class="clearfix pull-right" ng-if-role="ROLE_ADMIN,ROLE_SCAT_INSPECTOR,ROLE_SCAT_MANAGER"> <a href="" class="btn btn-xs btn-default hidden-print" ui-sref="scatreports.detail" data-translate="global.button.close"></a> <a href="" class="btn btn-xs btn-primary hidden-print" ui-sref="scatreports" data-translate="global.button.finish"></a> </div> <div class="clearfix pull-right" ng-if-role="ROLE_POLLUTION_EPISODE" ng-if-not-role="ROLE_ADMIN,ROLE_SCAT_INSPECTOR,ROLE_SCAT_MANAGER"> <a href="" class="btn btn-xs btn-default btn-primary hidden-print" ui-sref="scatreports" data-translate="global.button.close"></a> </div> </div> <div class="panel-body"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <scatreport-print scatreport="scatreport"></scatreport-print> </div> </div> </div> </div>'),e.put("app/pages/scatreports/scatreports.html",'<div class="widgets" ui-view=""> <div class="row" ng-if-permission="ROLE_ADMIN,ROLE_SCAT_MANAGER"> <div class="col-xlg-12 col-lg-12 col-md-12">  <a class="btn btn-primary btn-default" ui-sref="scatreports.create" title="{{\'app.scatreport.home.createLabel\' | translate }}"> <i class="ion-plus-round"> </i></a>  </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <scatreport-search></scatreport-search> </div> </div> </div> '),e.put("app/pages/templates/datoscontacto-table-template.html",'<table class="table table-condensed table-hover table-responsive"> <thead> <tr class="active"> <th>Nome</th> <th class="text-center">Cargo</th> <th class="text-center">TelÃ©fono</th> <th class="text-center">MÃ³vil</th> <th class="text-center">Fax</th> <th class="text-center">Email</th> <th style="width:140px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="dc in vm.model.datosContacto track by $index"> <td>{{dc.nombre}}</td> <td class="text-center">{{dc.cargo}}</td> <td class="text-center">{{dc.telefono}}</td> <td class="text-center">{{dc.telefono2}}</td> <td class="text-center">{{dc.fax}}</td> <td class="text-center">{{dc.email}}</td> <td class="text-right"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!dcRowForm.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle=""> <span class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.eliminarContacto(dc)">Eliminar</a></li> </ul> </div> <form editable-form="" name="dcRowForm" onaftersave="vm.guardarContacto(bateatitular)" ng-show="dcRowForm.$visible" class="form-buttons form-inline" shown="vm.insertedTitular == bateatitular"> <div class="btn-group"> <button type="submit" ng-disabled="dcRowForm.$waiting" class="btn editable-table-button btn-xs btn-primary"> Gardar </button> <button type="button" ng-disabled="dcRowForm.$waiting" ng-click="vm.cancelarEdicion(dcRowForm,$index)" class="btn editable-table-button btn-xs btn-default"> Cancelar </button> </div> </form> </td> </tr> <tr> <td colspan="6"> </td> <td class="text-right"> <a ng-click="vm.nuevoContacto()" class="btn editable-table-button btn-xs btn-primary">Insertar</a> </td> </tr> </tbody> </table>'),e.put("app/pages/templates/detail-footer.html",'<div class="panel-footer clearfix">  <div ng-show="vm.showMode()"> <button ng-click="vm.remove()" class="btn btn-default pull-left btn-with-icon" ng-disabled="vm.detailForm.$invalid"><i class="ion-trash-b"></i>Eliminar</button> <button class="btn btn-primary btn-with-icon" ng-click="vm.edit()"><i class="fa fa fa-pencil"></i>Editar</button> </div>  <div class="pull-right" ng-hide="vm.showMode()"> <button class="btn btn-primary" ng-disabled="vm.detailForm.$invalid" ng-click="vm.save()" data-translate="global.button.accept">Aceptar</button> <button class="btn btn-default" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div> </div> '),e.put("app/pages/templates/detail-heading.html",'<span class="bnt-group pull-right"> <span ng-hide="vm.showMode()"> <button type="submit" class="btn btn-primary btn-sm" ng-disabled="vm.detailForm.$invalid" data-translate="global.button.accept">Aceptar</button> <button class="btn btn-default btn-sm" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </span>  <span ng-show="vm.showMode()"> <button ng-click="vm.remove()" class="btn btn-default btn-sm btn-with-icon" ng-disabled="vm.detailForm.$invalid"><i class="ion-trash-b"></i>Eliminar</button> <button class="btn btn-primary btn-sm btn-with-icon" ng-click="vm.edit()"><i class="fa fa-pencil"></i>Editar</button> <button type="button" style="padding-left: 30px;" class="close" ng-click="vm.close()" aria-label="Close"> <span aria-hidden="true">&times;</span></button> </span>  </span> '),e.put("app/pages/templates/direccion-create-template.html",'<div class="row"> <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"> <div class="form-group"> <label for="direccion" class="control-label">Enderezo</label> <input type="text" name="direccion" id="direccion" class="form-control" ng-model="vm.model.direccion.direccion" required="required" title="Enderezo(Calle,Rua,...)"> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="cp" class="control-label">CÃ³digo Postal</label> <input type="text" name="cp" id="cp" class="form-control" ng-model="vm.model.direccion.cp" required="required" title="Enderezo(Calle,Rua,...)"> </div> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"> <div class="form-group"> <label for="poblacion" class="control-label">PoboaciÃ³n</label> <input type="text" name="poblacion" id="poblacion" class="form-control" ng-model="vm.model.direccion.poblacion" required="required" title="Poblacion(Calle,Rua,...)"> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="provincia" class="control-label">Provincia</label> <select ng-options="o as o for o in [\'A CORUÃA\',\'PONTEVEDRA\',\'LUGO\']" name="cp" id="cp" class="form-control" ng-model="vm.model.direccion.provincia" required="required" title="Provincia"> </select></div> </div> </div> '),e.put("app/pages/templates/direccion-editable-template.html",'<div class="row"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label">Enderezo</label> <div> <p class="form-control-static" editable-text="vm.model.direccion.direccion"> {{vm.model.direccion.direccion }} </p> </div> </div> </div> <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label">CÃ³digo Postal</label> <div> <p class="form-control-static" editable-text="vm.model.direccion.cp"> {{vm.model.direccion.cp}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label">Localidade</label> <div> <p class="form-control-static" editable-text="vm.model.direccion.poblacion"> {{vm.model.direccion.poblacion}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label">Provincia</label> <div> <p class="form-control-static" editable-select="vm.model.direccion.provincia" e-ng-options="o as o for o in [\'A CORUÃA\',\'PONTEVEDRA\',\'LUGO\']"> {{vm.model.direccion.provincia}} </p> </div> </div> </div> </div> '),e.put("app/pages/templates/direccion-envio-template.html",'<fiedlset> <legend class="scheduler-border"> Enderezo EnvÃ­o</legend> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="input-id" class="control-label">Destinatario</label> <input type="text" name="destinatario" id="destinatario" class="form-control" ng-model="vm.model.direccionEnvio.destinatario" pattern="" title="Datos del destinatario"> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="direccion" class="control-label">Enderezo</label> <input type="text" name="direccion" id="direccion" class="form-control" ng-model="vm.model.direccionEnvio.direccion" title="Enderezo(Calle,Rua,...)"> </div> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="poblacion" class="control-label">PoboaciÃ³n</label> <input type="text" name="poblacion" id="poblacion" class="form-control" ng-model="vm.model.direccionEnvio.poblacion" title="Poblacion(Calle,Rua,...)"> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="provincia" class="control-label">Provincia</label> <select ng-options="o as o for o in [\'A CORUÃA\',\'PONTEVEDRA\',\'LUGO\',\'Ourense\']" name="cp" id="cp" class="form-control" ng-model="vm.model.direccionEnvio.provincia" title="Provincia"> </select></div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="cp" class="control-label">CÃ³digo Postal</label> <input type="text" name="cp" id="cp" class="form-control" ng-model="vm.model.direccionEnvio.cp" title="Enderezo(Calle,Rua,...)"> </div> </div> </div> </fiedlset>'),e.put("app/pages/templates/direccion-facturacion-template.html",'<fiedlset> <legend class="scheduler-border"> Enderezo FacturaciÃ³n</legend> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="input-id" class="control-label">Destinatario</label> <input type="text" name="destinatario" id="destinatario" class="form-control" ng-model="vm.model.direccionFacturacion.destinatario" pattern="" title="Datos del destinatario"> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="direccion" class="control-label">Enderezo</label> <input type="text" name="direccion" id="direccion" class="form-control" ng-model="vm.model.direccionFacturacion.direccion" title="Enderezo(Calle,Rua,...)"> </div> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="poblacion" class="control-label">PoboaciÃ³n</label> <input type="text" name="poblacion" id="poblacion" class="form-control" ng-model="vm.model.direccionFacturacion.poblacion" title="Poblacion(Calle,Rua,...)"> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="provincia" class="control-label">Provincia</label> <select ng-options="o as o for o in [\'A CORUÃA\',\'PONTEVEDRA\',\'LUGO\',\'Ourense\']" name="cp" id="cp" class="form-control" ng-model="vm.model.direccionFacturacion.provincia" title="Provincia"> </select></div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="cp" class="control-label">CÃ³digo Postal</label> <input type="text" name="cp" id="cp" class="form-control" ng-model="vm.model.direccionFacturacion.cp" title="Enderezo(Calle,Rua,...)"> </div> </div> </div> </fiedlset>'),e.put("app/pages/templates/direccionenvio-editable-template.html",'<div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="input-id" class="control-label">Destinatario</label> <p class="form-control-static" editable-text="vm.model.direccionEnvio.destinatario"> {{vm.model.direccionEnvio.destinatario }} </p> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label">Enderezo</label> <div> <p class="form-control-static" editable-text="vm.model.direccionEnvio.direccion"> {{vm.model.direccionEnvio.direccion }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label">C.Postal</label> <div> <p class="form-control-static" editable-text="vm.model.direccionEnvio.cp"> {{vm.model.direccionEnvio.cp}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label">Localidade</label> <div> <p class="form-control-static" editable-text="vm.model.direccionEnvio.poblacion"> {{vm.model.direccionEnvio.poblacion}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label">Provincia</label> <div> <p class="form-control-static" editable-select="vm.model.direccionEnvio.provincia" e-ng-options="o as o for o in [\'A CORUÃA\',\'PONTEVEDRA\',\'LUGO\']"> {{vm.model.direccionEnvio.provincia}} </p> </div> </div> </div> </div>'),e.put("app/pages/templates/direccionfacturacion-editable-template.html",'<div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="form-group"> <label class="control-label">Enderezo</label> <div> <p class="form-control-static" editable-text="vm.model.direccionFacturacion.direccion"> {{vm.model.direccionFacturacion.direccion }} </p> </div> </div> </div> <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label">C.Postal</label> <div> <p class="form-control-static" editable-text="vm.model.direccionFacturacion.cp"> {{vm.model.direccionFacturacion.cp}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label">Localidade</label> <div> <p class="form-control-static" editable-text="vm.model.direccionFacturacion.poblacion"> {{vm.model.direccionFacturacion.poblacion}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label">Provincia</label> <div> <p class="form-control-static" editable-select="vm.model.direccionFacturacion.provincia" e-ng-options="o as o for o in [\'A CORUÃA\',\'PONTEVEDRA\',\'LUGO\']"> {{vm.model.direccionFacturacion.provincia}} </p> </div> </div> </div> </div> '),e.put("app/pages/templates/editable-detail-heading.html",'<div class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting">Aceptar</button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.detailForm.$cancel()" ng-disabled="vm.detailForm.$waiting">Cancelar</button> </span>  <span ng-hide="vm.detailForm.$visible"> <button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b"></i>Eliminar</button> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.detailForm.$show()"><i class="fa fa-pencil"></i>Editar</button>  </span> </div> '),e.put("app/pages/templates/metodo-pago-template.html",'<fieldset> <legend class="scheduler-border">MÃ©todo de pago</legend> <div class="row"> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="provincia" class="control-label">Tipo</label> <select ng-options="o | translate for o in vm.tiposMetodosPago" name="tipo" id="cp" class="form-control" ng-model="vm.model.metodoPago.tipoPago" title="Forma de Pago"> </select></div> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputTitular" class="control-label">Titular </label> <input type="text" name="inputTitular" id="inputTitular" class="form-control" ng-model="vm.model.metodoPago.nombreTitular" pattern="" title="Datos del titular de la {{vm.model.metodoPago.tipoPago}}"> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputIBAN" class="control-label">IBAN </label> <input type="text" name="inputIBAN" id="inputIBAN" class="form-control" ng-model="vm.model.metodoPago.numero" e-pattern="^ES\\d{22}$" title="NÃºmero de {{vm.model.metodoPago.tipoPago}}"> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <input type="text" name="otroTipoPago" id="otroTipoPago" class="form-control" ng-model="vm.model.metodoPago.otroTipoPago" pattern="" title="Especifique o tipo de pago" ng-required="vm.model.metodoPago.tipoPago==\'OTRO\'"> </div> </div> </fieldset> '),e.put("app/pages/templates/metodopago-editable-template.html",'<div class="row"> <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2"> <div class="form-group"> <label class="control-label">MÃ©todo de pago</label> <div> <p class="form-control-static" editable-select="vm.model.metodoPago.tipoPago" e-ng-options="o | translate for o in [\'INGRESO_EN_CUENTA\',\'RECIBO_DOMICILIADO\', \'OTRO\']">{{vm.model.metodoPago.tipoPago | translate }}</p> </div> </div> </div> <div class="col-xs-12 col-sm-8 col-md-3 col-lg-4"> <div class="form-group"> <label class="control-label">Titular</label> <div> <p class="form-control-static" editable-text="vm.model.metodoPago.titular">{{vm.model.metodoPago.titular}}</p> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label">IBAN</label> <div> <p class="form-control-static" data-e-name="IBAN" name="IBAN" editable-text="vm.model.metodoPago.numero" onbeforesave="vm.validateIBAN($data)" e-pattern="^ES\\d{22}$" title="Introduza un nÃºmero de conta vÃ¡lido"> <span ng-class="{\'line-through\': vm.model.metodoPago.tipoPago==\'INGRESO_EN_CUENTA\'}"> {{vm.model.metodoPago.numero | iban}}</span> </p><p class="help-block" ng-show="vm.model.metodoPago.tipoPago==\'INGRESO_EN_CUENTA\'"> <small class="text-info"> Utilizarase a conta do Consello Regulador</small> </p> <p></p> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2"> <div class="form-group"> <div> <p class="form-control-static" editable-text="vm.model.metodoPago.otroTipoPago" e-title="Especifique o tipo de pago">{{vm.model.metodoPago.otroTipoPago}}</p> </div> </div> </div> </div> '),e.put("app/pages/templates/productor-configrecibos-dlg.html",'<div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Pechar" ng-click="vm.cancel()"><span aria-hidden="true">&times;</span></button> <h3 class="modal-title" id="modal-title">Nova asociacion</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.createForm" ng-submit="vm.create(createForm)"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.model.nombre.$invalid && (vm.model.nombre.$dirty || vm.$submitted)}"> <label for="name">Nome</label> <input type="text" name="name" placeholder="Nome..." id="inputNombre" class="form-control" required="required" ng-model="vm.model.nombre"> <span class="help-block error-block basic-block">Required</span> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="submit" ng-click="vm.create()">Crear</button>  </div> '),e.put("app/pages/templates/search-title-template.html",' <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <input id="searchInput" class="form-control ng-pristine ng-untouched ng-valid ng-empty" ng-model="vm.searchTerms.letra" ng-model-options="{ updateOn: \'blur\' }" type="text" placeholder="Buscar por..." ng-keyup="$event.keyCode == 13 ? doSearch() : null"> <div class="input-group-btn"> <button class="btn btn-default"><span class="fa fa-search"></span></button> <button class="btn btn-default" title="Novo" ng-click="vm.openCreateDialog()"><i class="fa fa-plus"></i></button> <button class="btn btn-default" title="Ocultar resultados" data-toggle="collapse" data-target="#resultsPanel" aria-label="Ocultar resultados" aria-expanded="true"> <span class="fa fa-chevron-up"></span> <span class="fa fa-chevron-down"></span> </button> </div> </div> </form> </div> '),e.put("app/pages/userlogins/userlogin-list-template.html",'<a> <span ng-bind-html="match.model.numero | uibTypeaheadHighlight:query"></span> <small class="text-info"> {{match.model.poligono}}, {{match.model.distrito}}</small> </a> '),e.put("app/pages/userlogins/userlogins-detail.html",'<div class="widgets"> <div class="row"> <div class="col-md-6 col-sm-12"> <p class="pull-left"> <userlogin-create-btn></userlogin-create-btn> </p> </div>  </div> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <userlogin-detail userlogin="userlogin"></userlogin-detail> </div> </div> </div> <script type="text/ng-template" id="userlogins-popover.html"> <a> <span ng-bind-html="match.model.numero | uibTypeaheadHighlight:query"></span> <small class="text-info"> - {{match.model.poligono}}, {{match.model.distrito}}</small> </a> </script> '),e.put("app/pages/userlogins/userlogins.html",'<div class="widgets" ui-view=""> <p> <userlogin-create-btn></userlogin-create-btn> </p> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <userlogins-search></userlogins-search> </div> </div> </div>'),e.put("app/pages/account/activate/activate.html",'<div> <div class="card card-container"> <a href="/public.html"><img alt="COP Tool" class="profile-img-card animate-show-hide" id="profile-img" src="assets/img/page_top_img.png"></a> <h4 data-translate="activate.title">Confirming your email...</h4> <div class="alert alert-warning text-center" ng-hide="vm.success"> <i class="glyphicon glyphicon-refresh fa-spin"></i> </div> <div class="alert alert-success" ng-show="vm.success" data-translate="activate.messages.success" translate-compile=""> <strong>Your user has been activated.</strong> Please <a class="alert-link" href="" ng-click="vm.login()">sign in</a>. </div> <div class="alert alert-danger" ng-show="vm.error" data-translate="activate.messages.error"> <strong>Your user could not be activated.</strong> Please use the registration form to sign up. </div> </div> </div> '),e.put("app/pages/account/auth/auth.html",'<div> <div class="card card-container"> <img id="profile-img" class="profile-img-card" src="assets/img/page_top_img.png"> <form class="form-signin" ng-submit="vm.login()"> <span id="reauth-email" class="reauth-email"></span> <input type="text" ng-model="vm.userlogin" id="inputEmail" class="form-control" placeholder="{{\'login.form.userlogin\' | translate}}" required="" autofocus=""> <input type="password" id="inputPassword" ng-model="vm.password" class="form-control" placeholder="{{\'login.form.password\' | translate}}" required="">   <div class="wrapper clearfix"> <button class="btn btn-lg btn-primary btn-block btn-signin" type="submit" data-translate="login.form.button">Â¡Entrar!</button> </div> </form> </div> </div>'),e.put("app/pages/account/password/password-change-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="settings.form.changepassword">Mudar o contrasinal</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="alert alert-danger" ng-show="vm.error"> {{vm.error}} </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.oldpassword.$invalid && (vm.newForm.oldpassword.$dirty || vm.$submitted)}"> <label class="control-label" for="oldpassword">Contrasinal Actual</label> <input type="password" id="oldpassword" ng-model="vm.oldpassword" class="form-control" placeholder="Contrasinal Actual" required="" autocomplete="off"> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.newPassword.$invalid && (vm.newForm.newPassword.$dirty || vm.$submitted)}"> <label class="control-label" for="newPassword">Novo Contrasinal</label> <input type="password" id="newPassword" ng-model="vm.password" class="form-control" placeholder="Novo Contrasinal" required="" autocomplete="off"> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.confirmPassword.$invalid && (vm.newForm.confirmPassword.$dirty || vm.$submitted)}"> <label class="control-label" for="confirmPassword">Confirmar novo contrasinal</label> <input type="password" id="confirmPassword" ng-model="vm.confirmPassword" class="form-control" placeholder="Confirme o contrasinal" required="" autocomplete="off"> </div> <ng-password-meter password="vm.password"></ng-password-meter> <div class="alert alert-danger" ng-show="vm.password!=vm.confirmPassword" data-translate="global.messages.error.dontmatch"> The password and its confirmation do not match! </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid||vm.password==vm.confirmPassword, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid||vm.password!=vm.confirmPassword||vm.isSubmit" type="button" ng-click="vm.save()">{{::vm.acceptLabel || \'Gardar\' }}</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancelar</button> </div> '),e.put("app/pages/admin/layergroups/layergroups-detail.html",'<div class="widgets"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <layergroup-detail layergroup="layergroup" on-close="goBack()"></layergroup-detail> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div ba-panel="" ba-panel-class="none-padding" ba-panel-title="{{\'app.layergroup.layers\' | translate}}"> <layergroup-layers layergroup="layergroup"></layergroup-layers> </div> </div> </div> </div>'),e.put("app/pages/admin/layergroups/layergroups.html",'<div class="widgets" ui-view=""> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <layergroup-create-btn open-detail="true"></layergroup-create-btn> </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <layergroup-search></layergroup-search> </div> </div> </div> '),e.put("app/pages/admin/layers/layers-detail.html",'<div class="widgets"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <layer-detail layer="layer" on-close="goBack()"></layer-detail> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <layer-map layer="layer"></layer-map> </div> </div> </div> '),e.put("app/pages/admin/layers/layers.html",'<div class="widgets" ui-view=""> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <layer-create-btn open-detail="true"></layer-create-btn> </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <layer-search></layer-search> </div> </div> </div> '),e.put("app/pages/admin/panels/panels-detail.html",'<div class="widgets"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <panel-detail panel="panel" on-close="goBack()"></panel-detail> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div ba-panel="" ba-panel-class="none-padding" ba-panel-title="{{\'app.panel.layergroups\' | translate}}"> <panel-layergroups panel="panel"></panel-layergroups> </div> </div> </div> </div> '),e.put("app/pages/admin/panels/panels.html",'<div class="widgets" ui-view=""> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <panel-create-btn></panel-create-btn> </div> </div> <br> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12"> <panel-search></panel-search> </div> </div> </div> '),e.put("app/pages/comments/create-wizard/comment-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.comment.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputComments.$invalid && (vm.form1.inputComments.$dirty || vm.form1.$submitted)}"> <label for="inputComments" class="control-label" data-translate="app.comment.comment">comments</label> <textarea name="inputComments" class="form-control" autofocus="autofocus" ng-model="vm.model.comment" rows="4" ng-maxlength="255">\r\n                            </textarea> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.comment.createform.step2\' | translate}}" form="vm.form2" on-activate="vm.drawComment()" on-exit="vm.disableDrawComment()"> <form name="vm.form2" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div id="geometry-manual" aria-hidden="true"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point"> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.pollutionreport.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-sm" ng-click="vm.currentPosition()" data-translate="app.pollutionreport.map.currentPoint"></button> <button class="btn btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <div ng-show="vm.mapAction!=\'none\'"> <comment-map report="vm.report" hide-layers-panel="true"></comment-map> </div>   </form> </ba-wizard-step> </ba-wizard> </div>'),
e.put("app/pages/comments/map/comment-map.html",'<div class="panel viewport100 none-padding"> <div class="panel-body"> <div style="position:relative; width:100%; height:100%;" ng-mouseenter="updateSize()">  <div ng-hide="vm.hideLayersPanel" class="alert alert-info" style="position: absolute; top: 10px; left:40px; z-index:1020; opacity:0.9">  <div class="pull-right"> <span ng-if="vm.measure" class="label label-info">{{vm.measure.measure.toFixed(3) + " "+ vm.measure.units + (vm.measure.order==2 ? \'2\':\'\')}}</span> </div> <div ng-repeat="layer in vm.reportlayers"> <div style="display:inline-block; width:18px;"> <i ng-show="vm.worklayer.name==layer.name" class="ion-wrench"></i> </div> <label class="control-label" ng-style="!layer.active ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !layer.active}"> <input type="checkbox" ng-model="layer.visibility"> <span> {{layer.label | translate}} </span> </label> </div> <div class="text-right" style="padding-top:10px;" ng-if="vm.worklayer"> <i class="ion-wrench"></i>&#160; <small data-translate="app.page.pollutionreports.map.activelayer"></small> </div> </div> <div id="map" ol-map="vm.olmap" proxy-host="/arcopol/cgi-bin?targetURL=" class="olMap" options="{numZoomLevels: 20 }">  <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{prefix: \'EPSG:4326 (Lon|Lat) \',separator: \' | \',numDigits: 2}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureLength\')>=0}}" handler="OpenLayers.Handler.Path" ol-control-measure="measureAction($event)"> </ol-map-control> <ol-map-control name="MeasureArea" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureArea\')>=0}}" handler="OpenLayers.Handler.Polygon" ol-control-measure="measureAction($event)"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group"> <div class="btn-group"> <a class="btn btn-default" title="{{ \'global.button.centermap\' | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> </div> <div class="btn-group">   <a class="btn dropdown-toggle btn-default" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[vm.olmap.olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li> </ul> </div> </div>   <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="GeoLocation" lyr-type="markers"> <ol-marker icon="assets/img/gsv_icon2.png" lonlat="{{vm.geoService.currentPosition(\'EPSG:900913\')}}" size="21,40"> </ol-marker> </ol-layer> <ol-layer ng-if="l!=vm.worklayer" ng-repeat="l in vm.reportlayers" name="{{l.name}}" lyr-type="vector" lyr-options="{{l.options}}" visibility="{{l.visibility}}" default-style="{{l.defaultStyle}}" temporary-style="{{l.temporaryStyle}}" select-style="{{l.selectStyle}}" ol-layer-moveend="vm.zoomToExtent($event)" ol-layer-featureselected="vm.featureSelected($event)" ol-layer-featureunselected="vm.featureUnselected($event)"> <ol-feature ng-repeat="item in vm.features[l.items] | filter:filterFeature" geometry="item.geometry" selected="item.id==vm.model.id" attributes="item" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Select\'+l.name}}" active="{{vm.map.action!=\'deletePoints\' && l.active}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer> <ol-layer ng-if="vm.worklayer" name="worklayer" lyr-type="vector" lyr-options="{{vm.worklayer.options}}" visibility="{{vm.map.action!=\'deletePoints\'}}" default-style="{{vm.worklayer.defaultStyle}}" temporary-style="{{vm.worklayer.temporaryStyle}}" select-style="{{vm.worklayer.selectStyle}}" virtual-style="{{vm.worklayer.virtualStyle}}" vertex-style="{{vm.worklayer.vertexStyle}}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.geometry" attributes="vm.model" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Create\'+vm.worklayer.name}}" active="{{vm.map.action==\'draw\'}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}" handler="{{vm.worklayer.handler}}" ol-layer-control-featureadded="vm.featureAdded($event)"> </ol-layer-control> <ol-layer-control name="{{\'Edit\'+vm.worklayer.name}}" active="{{vm.map.action==\'edit\'}}" ctrl-type="modifyFeature" handler="{{vm.worklayer.handler}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}"> </ol-layer-control> </ol-layer>  <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="gpoints" lyr-type="vector" default-style="{{vm.worklayer.temporaryStyle}}" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }"> <ol-feature geometry="vm.model.geometry" display-projection="EPSG:900913" selected="true" projection="EPSG:4326"> </ol-feature> </ol-layer> <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="points" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }" default-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" select-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 18 ,\'fillColor\': \'#FE9929\'}" ol-layer-featureselected="vm.confirmRemoveSelectedPoint($event)" ol-layer-featureunselected="vm.cancelRemoveSelectedPoint($event)"> <ol-feature ng-repeat="p in vm.feature.geometry.getVertices()" geometry="p" attributes="p" selected="{{vm.selectedPoint.id==p.id}}" style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="selectPointCtrl" active="{{vm.map.action==\'deletePoints\'}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer>  <div class="alert alert-info col-md-3" ng-if="vm.selectedPoint" style="position: absolute; top: 10px; left:430px; z-index:1030; border:2px solid;">  <strong><i class="icon-question-sign" data-translate="app.page.pollutionreports.map.confirm"> </i> </strong> <p data-translate="app.page.pollutionreports.map.confirmdeletepoint"> </p> <div class="btn-group"> <button ng-click="vm.removeSelectedPoint()" data-translate="global.button.yes"></button> <button ng-click="vm.cancelRemoveSelectedPoint()" data-translate="global.button.no"></button> </div> </div> </div> </div> </div> </div>'),e.put("app/pages/comments/table/report-comments-table.html",'<div class="none-padding"> <div ng-hide="vm.comments.length" class="alert alert-info" data-translate="app.comment.help.noresults"> </div> <table ng-show="vm.comments.length" class="table table-condensed table-hover" st-table="vm.comments"> <thead> <tr class="active"> <th style="width:80px;" st-sort="code" data-translate="app.comment.code">code</th> <th st-sort="comment" data-translate="app.comment.comment"></th> <th style="width:120px;" st-sort="createdTime" data-translate="app.comment.createdtime"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.comments | limitTo:vm.size" ng-class="{\'alert-success\':item.selected}"> <td>{{item.code}}</td> <td>{{item.comment}} </td> <td>{{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.remove(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.page.totalPages > 1"> <tr> <td colspan="4" class="text-center"> <p> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.refresh()"></uib-pagination>  </p> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/dashboard/bookmarks/bookmarks.html",'<div class="widgets"> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="panel"> <div class="panel-heading"> <h4> <span style="font-size:x-large,color: #E60;padding-right: 10px;"><i class="ion-android-bookmark"></i></span><span data-translate="app.dashboard.bookmarks.title"></span> </h4> </div> <div class="list-group"> <div ng-show="vm.bookmarks.length" class="list-group-item" ng-repeat="bookmark in vm.bookmarks track by $index"> <span class="pull-right"> <a href="" ng-click="vm.remove(bookmark)"><i class="ion-trash-b"></i></a></span> <h4 class="list-group-item-heading"> <a href="" target="_blank" style="padding-right:10px;" ng-click="vm.openPage($event,bookmark)"><i class="ion-android-open"></i></a> {{bookmark.title}} </h4> <small class="text-muted list-group-item-text">{{bookmark.description}}</small> <div class="clearfix"></div> </div> <div ng-hide="vm.bookmarks.length" class="list-group-item"> <p class="text-info"> {{\'global.theme.component.bookmark.empty\' | translate}} </p> </div> </div> <div class="panel-footer" ng-show="vm.hasNext() || vm.hasPrevious()"> <span class="text-right"> <div class="input-group-btn"> <button class="btn btn-default btn-sm" ng-click="vm.previousPage()" ng-disabled="!vm.hasPrevious()"> <i class="ion-chevron-left"></i></button> <button class="btn btn-default btn-sm" ng-click="vm.nextPage()" ng-disabled="!vm.hasNext()"><i class="ion-chevron-right"></i></button> </div> </span> <div class="clearfix"></div> </div> </div> </div> </div> </div>'),e.put("app/pages/dashboard/calendar/calendar-episode-popover.html",'<table> <tbody> <tr ng-repeat="episode in event.episodes"> <td class="fc-event-container"> <a class="fc-day-grid-event fc-h-event fc-event fc-start fc-end ng-scope {{event.className[0]}}" ui-sref="pollutionepisodes.detail({\'id\': episode.id})"> <div class="fc-header"> <span class="fc-title">{{episode.name}}</span> <span class="fc-title pull-right">{{episode.status}}</span> </div> <div class="fc-content"> <span class="fc-time">{{episode.beginTime | date: \'HH:mm\'}} a {{episode.endTime | date: \'HH:mm\'}}</span> <p>{{episode.description}}</p> </div> </a> </td> </tr> </tbody> </table> '),e.put("app/pages/dashboard/calendar/calendar.html",'<div class="widgets"> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="panel calendar-panel"> <div class="panel-body"> <div id="calendar" ui-calendar="vm.calendarConfig" class="task-calendar" ng-model="vm.eventSources"></div> </div> </div> </div> </div> </div> '),e.put("app/pages/dashboard/episodes/episodes.html",'<div class="widgets"> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="panel"> <div class="panel-heading"> <h4> <span data-translate="app.dashboard.pollutionepisodes.title"></span>     </h4> </div> <div class="list-group"> <a ui-sref="pollutionepisodes.detail({\'id\': pollutionepisode.id})" class="list-group-item clearfix" href="" ng-repeat="pollutionepisode in vm.results track by $index"> <div class="badge label-info"> {{pollutionepisode.beginTime | date: \'dd/MM/yyyy\'}} </div> <h4 class="list-group-item-heading"> <small><label style="padding-right: 10px;" class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-default\', \'ARCHIVED\':\'label-muted\'}[pollutionepisode.status]" data-translate="{{\'app.episodestatus.\'+pollutionepisode.status}}"></label></small> {{pollutionepisode.name}} <button class="btn btn-xs btn-default btn-with-icon" type="button" ng-click="vm.openVisor($event,pollutionepisode)"><i class="ion-ios-location"></i> {{\'app.pollutionepisodemap.title\' | translate}}</button> </h4> <div class="list-group-item-text"> <small>{{pollutionepisode.description}}</small>  </div>  </a> </div> </div> </div> </div> </div>'),e.put("app/pages/dashboard/episodesmap/episodes-map.html",'<div class="widgets"> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="panel"> <div class="panel-heading"> <h4> <span data-translate="app.dashboard.pollutionepisodes.title"></span>     </h4> </div> <div class="list-group"> <div class="list-group-item clearfix" href="" ng-repeat="pollutionepisode in vm.results track by $index"> <div class="badge label-info"> {{pollutionepisode.beginTime | date: \'dd/MM/yyyy\'}} </div> <h4 class="list-group-item-heading"> <small><label style="padding-right: 10px;" class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-default\', \'ARCHIVED\':\'label-muted\'}[pollutionepisode.status]" data-translate="{{\'app.episodestatus.\'+pollutionepisode.status}}"></label></small> {{pollutionepisode.name}} <button class="btn btn-xs btn-default btn-with-icon" type="button" ng-click="vm.openVisor($event,pollutionepisode)"><i class="ion-ios-location"></i> {{\'app.pollutionepisodemap.title\' | translate}}</button> </h4> <div class="list-group-item-text"> <small>{{pollutionepisode.description}}</small> </div> </div> </div> </div> </div> </div> </div>'),e.put("app/pages/dashboard/logbookrecords/logbookrecords.html",'<div class="widgets"> <div class="panel with-scroll none-padding"> <div class="panel-heading"> <h4> <span data-translate="app.dashboard.logbookrecords.title"></span> </h4> </div> <div class="banel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:16px;" class="text-center"><i class="ion-android-open"></i></th> <th st-sort="createdTime" data-translate="app.logbookrecord.createdTime">CreatedTime</th> <th st-sort="title" data-translate="app.logbookrecord.title">Title</th> <th ng-if-role="ROLE_ADMIN" class="hidden-mobile text-left" st-sort="createdBy.fullName" data-translate="app.logbookrecord.createdBy">CreatedBy</th> <th class="hidden-mobile text-left" st-sort="episode.name" data-translate="app.logbookrecord.episode">Episode</th> <th class="text-left" data-translate="app.logbookrecord.tags">tags</th>  </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td> <a href="" ng-click="vm.navigate($event, \'logbookrecords.detail\',{id:item.id})"><i class="ion-android-open"></i></a> </td> <td><small>{{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td> <strong> {{item.title}} </strong> <div class="ellipsis"><small>{{item.message}}</small></div> </td> <td ng-if-role="ROLE_ADMIN" class="hidden-mobile text-left">{{item.createdBy.fullName}}</td> <td class="hidden-mobile"> <a ng-if="item.episode" ng-click="$event.preventDefault(); vm.navigate($event,\'pollutionepisodes.detail\',{\'id\': item.episode.id});" href=""> <small class="pull-right"><label style="padding-right: 10px;" class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-default\',\'ARCHIVED\':\'label-muted\'}[item.episode.status]" data-translate="{{\'app.episodestatus.\'+item.episode.status}}"></label></small> <div> {{item.episode.name}} </div> <div class="list-group-item-text"> <small>{{item.episode.description}}</small> </div> </a> </td> <td> <span class="ui label tag" ng-repeat="t in item.tags">{{t}}</span> </td>  </tr> </tbody> </table> </div> </div> </div>'),e.put("app/pages/dashboard/map/map.html",'<leaflet lf-center="vm.center" defaults="vm.defaults" height="100%" width="100%"></leaflet> '),e.put("app/pages/dashboard/pollutionreports/pollutionreports.html",'<div class="widgets"> <div class="panel with-scroll none-padding"> <div class="panel-heading"> <h4> <span data-translate="app.dashboard.pollutionreports.title"></span> </h4> </div> <div class="banel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:16px;" class="text-center"><i class="ion-android-open"></i></th> <th style="width:180px;" st-sort="reportTime" data-translate="app.pollutionreport.reporttime">reportTime</th> <th st-sort="observerName" data-translate="app.pollutionreport.observer"></th> <th st-sort="callerOrganization" data-translate="app.pollutionreport.callerorganization"></th> <th st-sort="callerNumber" data-translate="app.pollutionreport.callernumber"></th>  </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td class="text-center"> <a ng-if-role="ROLE_ADMIN,ROLE_POLREP" href="" ng-click="vm.navigate($event, \'pollutionreports.detail.spills\',{id:item.id})"><i class="ion-android-open"></i></a> <a ng-if-role="ROLE_POLLUTION_EPISODE" ng-if-not-role="ROLE_ADMIN,ROLE_POLREP" href="" ng-click="vm.navigate($event, \'pollutionreports.detail.print\',{id:item.id})"><i class="ion-android-open"></i></a> </td> <td> <small>{{item.reportTime | date:\'dd/MM/yyyy HH:mm\'}}</small> </td> <td>{{item.observerName }}</td> <td>{{item.callerOrganization}}</td> <td>{{item.callerNumber}}</td>  </tr> </tbody> </table> </div> </div> </div>'),e.put("app/pages/dashboard/scatreports/scatreports.html",'<div class="widgets"> <div class="panel with-scroll none-padding"> <div class="panel-heading"> <h4> <span data-translate="app.dashboard.scatreports.title"></span> </h4> </div> <div class="banel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:16px;" class="text-center"><i class="ion-android-open"></i></th> <th style="width:180px;" st-sort="reportTime" data-translate="app.scatreport.reporttime">reportTime</th> <th st-sort="author.username" data-translate="app.scatreport.author"></th> <th st-sort="incident" data-translate="app.scatreport.incident"></th>  </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td> <a ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER,ROLE_SCAT_INSPECTOR" href="" ng-click="vm.navigate($event, \'scatreports.detail.surfaceoilconditions\',{id:item.id})"><i class="ion-android-open"></i></a> <a ng-if-role="ROLE_POLLUTION_EPISODE" ng-if-not-role="ROLE_ADMIN,ROLE_SCAT_MANAGER,ROLE_SCAT_INSPECTOR" href="" ng-click="vm.navigate($event, \'scatreports.detail.print\',{id:item.id})"><i class="ion-android-open"></i></a> </td> <td><small>{{item.reportTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td>{{item.authorName }}</td> <td>{{item.incident}}</td>  </tr> </tbody> </table> </div> </div> </div>'),e.put("app/pages/dashboard/summary/summary.html",'<table class="table table-condensed"> <thead> <tr class="active"> <th>Actividade</th> <th>CÃ³digo</th>  <th>Hora de Inicio</th> <th>Hora de Fin</th> <th>Participantes</th> </tr> </thead> <tbody> <tr ng-repeat="journey in vm.items"> <td><a ui-sref="journeys.detail({\'id\': journey.id})">{{journey.name}}</a></td> <td>{{journey.token}}</td>  <td>{{journey.plannedStartTime| date: \'HH:mm\'}}</td> <td>{{journey.plannedEndTime| date: \'HH:mm\'}}</td> <td>{{journey.journeyMembersLength}}</td> </tr> </tbody> </table> '),e.put("app/pages/dashboard/weather/weather.html",'<div class="weather-wrapper"> <div class="weather-main-info"> <h5 class="city-date font-x1dot5"> <div> {{geoData.geoplugin_city}} - {{geoData.geoplugin_countryName | uppercase}} </div> <div> {{ weather.days[weather.current].date | date : \'EEEE h:mm\'}} </div> </h5> <div class="weather-description font-x1dot5"> <i class="font-x3 {{weatherIcons[weather.days[weather.current].icon]}}"></i> <div class="weather-info">{{weather.days[weather.current].main}} - {{weather.days[weather.current].description}} </div> </div> <div class="weather-temp font-x1dot5"> <i class="font-x2 ion-thermometer"></i> <div class="weather-info" ng-switch="" on="units"> <span ng-switch-when="metric">{{weather.days[weather.current].temp}} Â°C | <a ng-click="switchUnits(\'imperial\')" href="">Â°F</a></span> <span ng-switch-when="imperial">{{weather.days[weather.current].temp}} Â°F | <a ng-click="switchUnits(\'metric\')" href="">Â°C</a></span> </div> </div> </div> <div id="tempChart" class="temp-by-time"></div> <div class="select-day"> <div class="day" ng-repeat="day in weather.days" ng-click="switchDay($index)"> <div> <span class="font-x1dot25">{{day.temp}}</span> </div> <div> <i class="weatherIcon font-x2 {{weatherIcons[day.icon]}}"></i> <span class="select-day-info">{{day.main}}</span> </div> <div> <span>{{day.date | date : \'EEE\'}}</span> </div> </div> </div> </div> '),e.put("app/pages/logbookrecords/create-wizard/logbookrecord-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.logbookrecord.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate="" autocomplete="off"> <div class="row"> <div class="form-group has-feedback" ng-if-role="ROLE_ADMIN" ng-class="{\'has-error\': vm.form1.inputTitle.$invalid && (vm.form1.inputTitle.$dirty || vm.form1.$submitted)}"> <label for="inputEpisode" class="control-label" data-translate="app.logbookrecord.episode">Episode</label> <input ng-if-role="ROLE_ADMIN,ROLE_SUPERVISOR,ROLE_POLLUTION_EPISODE\'" ng-if-not-role="ROLE_LOGBOOKRECORD" type="text" name="inputEpisode" class="form-control" ng-model="vm.model.episode" typeahead-wait-ms="200" uib-typeahead="p as p.name for p in vm.searchEpisodes({\'name\':$viewValue}) | limitTo:12" typeahead-select-on-blur="true" autocomplete="off"> <input ng-if-role="ROLE_LOGBOOKRECORD" ng-disabled="true" type="text" class="form-control" ng-model="vm.model.episode"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> <div class="form-group has-feedback" ng-if-role="ROLE_USER"> <label for="inputEpisode" class="control-label" data-translate="app.logbookrecord.episode">Episode</label> <p class="form-control-static"> <strong> {{vm.model.episode.name}} </strong> </p> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputTitle.$invalid && (vm.form1.inputTitle.$dirty || vm.form1.$submitted)}"> <label for="inputTitle" class="control-label" data-translate="app.logbookrecord.title">title</label> <input type="text" name="inputTitle" autofocus="autofocus" class="form-control" ng-model="vm.model.title"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.form1.inputMessage.$invalid && (vm.form1.inputMessage.$dirty || vm.form1.$submitted)}"> <label for="inputMessage" class="control-label" data-translate="app.logbookrecord.message">MESSAGE</label> <textarea name="inputMessage" class="form-control" ng-model="vm.model.message" rows="4" required=""> </textarea> <span class="help-block error-block basic-block" data-translate="global.messages.validate.textarea.required"></span> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputFile.$invalid && (vm.form1.inputFile.$dirty || vm.form1.$submitted)}"> <label for="inputFile" class="control-label" data-translate="app.logbookrecord.file">FILE</label> <input type="file" id="inputFile" onchange="angular.element(this).scope().$emit(\'files_selected\',this.files)" accept="{{vm.allowedFileTypes | joinBy:\',\'}}"> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" data-translate="app.logbookrecord.type"> </label> <select ng-options="p as vm.translateConfig(\'app.logbookrecord.tag\',p) for p in vm.logBookRecordTags" type="text" ng-model="vm.model.type" class="form-control" required=""> </select>  </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label"> </label> <span style="{{vm.getStyle()}}" data-translate="app.logbookrecord.style"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.logbookrecord.createform.step2\' | translate}}" form="vm.form2"> <form name="vm.form2" novalidate=""> <div class="row">  <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point"></div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-default btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.pollutionreport.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-default btn-sm" ng-click="vm.currentPosition()" data-translate="app.pollutionreport.map.currentPoint"></button> <button class="btn btn-default btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <div ng-show="vm.mapAction!=\'none\'"> <logbookrecord-map hide-layers-panel="true"></logbookrecord-map> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/logbookrecords/detail/logbookrecord-detail.html",'<div class="panel full-invisible" zoom-in=""> <form id="fu_eu_arcopol_domain_pollution_PollutionEpisode" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate="">  <div class="editable-form-heading"> <div class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;"> <button type="button" style="padding-left: 30px;" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button> </div> <h3 class="panel-heading"> <div class="bnt-group pull-right" ng-if-role="ROLE_ADMIN,ROLE_LOGBOOKRECORD">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting"><span data-translate="global.button.accept"></span></button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.cancel()" ng-disabled="vm.detailForm.$waiting"><span data-translate="global.button.cancel"></span></button> </span>  <span ng-hide="vm.detailForm.$visible">  <button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b"></i><span data-translate="global.button.remove"></span></button> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.edit()"><i class="fa fa-pencil"></i><span data-translate="global.button.edit"></span></button>  </span> </div> </h3> </div> <div class="panel-body"> <fieldset id="origin">  <div class="form-group"> <label class="control-label" data-translate="app.logbookrecord.episode">Episode</label> <div> <p ng-if-role="ROLE_ADMIN" class="form-control-static" editable-text="vm.model.episode" e-name="episode" e-typeahead-wait-ms="200" e-uib-typeahead="p as p.name for p in vm.searchEpisodes({\'name\':$viewValue}) | limitTo:12" e-typeahead-select-on-blur="true" e-autocomplete="off" e-autofocus=""> <a ui-sref="pollutionepisodes.detail({\'id\': vm.model.episode.id})">{{vm.model.episode.name}}</a> <span class="badge label-info pull-right"> {{vm.model.episode.beginTime | date: \'dd/MM/yyyy HH:mm\'}} </span> </p> <p ng-if-role="ROLE_USER" class="form-control-static"> <a ui-sref="pollutionepisodes.detail({\'id\': vm.model.episode.id})">{{vm.model.episode.name}}</a> <span class="badge label-info pull-right"> {{vm.model.episode.beginTime | date: \'dd/MM/yyyy HH:mm\'}} </span> </p> </div> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputTitle.$invalid && (vm.form1.inputTitle.$dirty || vm.form1.$submitted)}"> <label for="inputTitle" class="control-label" data-translate="app.logbookrecord.title">title</label> <div> <p class="form-control-static" ng-bind="vm.model.title" editable-text="vm.model.title"></p> </div> </div> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form1.inputMessage.$invalid && (vm.form1.inputMessage.$dirty || vm.form1.$submitted)}"> <label for="inputMessage" class="control-label" data-translate="app.logbookrecord.message">MESSAGE</label> <div> <p class="form-control-static" ng-bind="vm.model.message" editable-textarea="vm.model.message" e-required=""></p> </div> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputFile.$invalid && (vm.form1.inputFile.$dirty || vm.form1.$submitted)}"> <label for="inputFile" class="control-label" data-translate="app.logbookrecord.file">MESSAGE</label> <p class="form-control-static"> {{vm.model.fileName || \'app.logbookrecord.createform.validate.fileEmpty\' | translate}} <a style="padding-left: 20px;" ng-show="vm.model.fileName && !vm.detailForm.$visible" title="{{vm.model.fileName}}" href="" ng-click="vm.download($event,vm.model)"><i class="ion-android-download"></i></a> <a style="padding-left: 20px;" ng-show="vm.model.fileName && vm.detailForm.$visible" title="{{vm.model.fileName}}" href="" ng-click="vm.deleteFile()"><i class="ion-trash-b"></i> {{global.button.delete || translate}}</a> </p> <div class="form-group" ng-show="vm.detailForm.$visible"> <div class="input-group"> <input type="file" id="inputFile" onchange="angular.element(this).scope().$emit(\'files_selected\',this.files)" accept="{{vm.allowedFileTypes | joinBy:\',\'}}" style="display:none;"> <button class="btn btn-sm btn-default" type="button" onclick="document.getElementById(\'inputFile\').click();" data-translate="global.button.selectfile"></button>  </div> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label" data-translate="app.logbookrecord.type"> </label> <div> <p class="form-control-static" onbeforesave="vm.onbeforesave($data)" ng-bind="vm.translateConfig(\'app.logbookrecord.tag\',vm.model.type)" editable-select="vm.model.type" e-ng-options="p as vm.translateConfig(\'app.logbookrecord.tag\',p) for p in vm.logBookRecordTags"> </p> </div> </div> </div> <div class="col-md-6"> <div class="form-group"> <label class="control-label"> </label> <div> <span class="form-control-static" style="{{vm.model.style}}" data-translate="app.logbookrecord.style"></span> </div> </div> </div>   </fieldset> </div> </form></div>'),e.put("app/pages/logbookrecords/map/logbookrecord-map.html",'<div class="panel viewport100 none-padding"> <div class="panel-body"> <div style="position:relative; width:100%; height:100%;" ng-mouseenter="updateSize()"> <div id="map" ol-map="vm.olmap" proxy-host="/arcopol/cgi-bin?targetURL=" class="olMap" options="{numZoomLevels: 20 }"> <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{prefix: \'EPSG:4326 (Lon|Lat) \',separator: \' | \',numDigits: 2}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureLength\')>=0}}" handler="OpenLayers.Handler.Path" ol-control-measure="measureAction($event)"> </ol-map-control> <ol-map-control name="MeasureArea" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureArea\')>=0}}" handler="OpenLayers.Handler.Polygon" ol-control-measure="measureAction($event)"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group"> <div class="btn-group"> <a class="btn btn-default" title="{{ \'global.button.centermap\' | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> </div> <div class="btn-group"> <a class="btn dropdown-toggle btn-default" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[vm.olmap.olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li> </ul> </div> </div> <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="GeoLocation" lyr-type="markers"> <ol-marker icon="assets/img/gsv_icon2.png" lonlat="{{vm.geoService.currentPosition(\'EPSG:900913\')}}" size="21,40"> </ol-marker> </ol-layer> <ol-layer ng-if="vm.worklayer" name="worklayer" lyr-type="vector" lyr-options="{{vm.worklayer.options}}" visibility="{{vm.map.action!=\'deletePoints\'}}" default-style="{{vm.worklayer.defaultStyle}}" temporary-style="{{vm.worklayer.temporaryStyle}}" select-style="{{vm.worklayer.selectStyle}}" virtual-style="{{vm.worklayer.virtualStyle}}" vertex-style="{{vm.worklayer.vertexStyle}}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.geometry" attributes="vm.model" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Create\'+vm.worklayer.name}}" active="{{vm.map.action==\'draw\'}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}" handler="{{vm.worklayer.handler}}" ol-layer-control-featureadded="vm.featureAdded($event)"> </ol-layer-control> <ol-layer-control name="{{\'Edit\'+vm.worklayer.name}}" active="{{vm.map.action==\'edit\'}}" ctrl-type="modifyFeature" handler="{{vm.worklayer.handler}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}"> </ol-layer-control> </ol-layer> </div> </div> </div> </div>'),
e.put("app/pages/logbookrecords/search/logbookrecords-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.titleormessage" ng-model-options="{ updateOn: \'blur\' }" type="text" placeholder="{{\'app.logbookrecord.search.placeholder\' | translate }}"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div>  </form> <span class="blog-tags"> <a class="ui label tag" ng-repeat="t in vm.tags" href="" ng-class="{\'tag-selected\': vm.searchTerms.tags.indexOf(t.tag) >= 0 }" ng-click="vm.toggleTag(t)"> {{t.tag}} </a> </span> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="panel-body"> <table class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults"> <thead> <tr class="active">  <th st-sort="geometry" style="width:10px;"><i class="ion-ios-location"></i></th> <th st-sort="createdTime" data-translate="app.logbookrecord.createdTime">CreatedTime</th> <th st-sort="title" data-translate="app.logbookrecord.title">Title</th> <th class="hidden-mobile text-left" st-sort="createdBy.fullName" data-translate="app.logbookrecord.createdBy">CreatedBy</th> <th class="text-left" st-sort="episode.name" data-translate="app.logbookrecord.episode">Episode</th> <th class="text-left hidden-mobile" data-translate="app.logbookrecord.tags">tags</th> <th style="width:28px"><i class="ion-android-attach"></i></th> <th ng-if-role="ROLE_ADMIN,ROLE_LOGBOOKRECORD" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td class="text-center"> <i class="ion-ios-location text-info" ng-show="item.geometry"></i> </td> <td><small>{{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td class="text-left"> <strong> <a style="{{item.style}}" href="" ui-sref="logbookrecords.detail({\'id\': item.id})"> <i class="ion-android-open"></i> {{item.title || \'-\'}}</a> </strong> <div class="ellipsis"><small>{{item.message}}</small></div> </td> <td class="hidden-mobile text-left"> {{item.createdBy.fullName}} </td> <td> <a ng-if="item.episode" ng-click="$event.preventDefault(); vm.navigate($event,\'pollutionepisodes.detail\',{\'id\': item.episode.id});" href=""> <small class="pull-right"><label style="padding-right: 10px;" class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-muted\'}[item.episode.status]" data-translate="{{\'app.episodestatus.\'+item.episode.status}}"></label></small> <div> {{item.episode.name}} </div> <div class="list-group-item-text"> <small>{{item.episode.description}}</small> </div> </a> </td> <td class="hidden-mobile"> <span class="ui label tag" ng-repeat="t in item.tags">{{t}}</span> </td> <td class="text-center"> <a ng-show="item.fileName" title="{{item.fileName}}" href="" ng-click="vm.download($event,item)"><i class="ion-android-download icon-large"></i></a> </td> <td class="text-right none-padding" ng-if-role="ROLE_ADMIN,ROLE_LOGBOOKRECORD"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; margin-left:10px" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.navigate($event,\'logbookrecords.detail\',{\'id\': item.id})" data-translate="global.button.detail">Ver detalle</a></li> <li role="menuitem"><a href="" ng-click="vm.deleteRow(item)" data-translate="global.button.remove">Eliminar</a></li> </ul> </div> </td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages > 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.doSearch()"></uib-pagination>  </div> </div> </div>'),e.put("app/pages/logbookrecords/table/logbookrecords-table.html",'<table class="table table-condensed table-hover" st-table="vm.logbookrecords"> <thead> <tr class="active">  <th st-sort="geometry" style="width:10px;"><i class="ion-ios-location"></i></th> <th st-sort="createdTime" data-translate="app.logbookrecord.createdTime">CreatedTime</th> <th style="width:20px"><i class="ion-android-open"></i></th> <th st-sort="title" data-translate="app.logbookrecord.title">Title</th> <th class="hidden-mobile text-left" st-sort="createdBy.fullName" data-translate="app.logbookrecord.createdBy">CreatedBy</th> <th class="hidden-mobile text-left" st-sort="episode.name" data-translate="app.logbookrecord.episode">Episode</th> <th class="text-left" st-sort="episode.name" data-translate="app.logbookrecord.tags">tags</th> <th style="width:28px"><i class="ion-android-attach"></i></th> <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.logbookrecords track by item.id"> <td class="text-center"> <i class="ion-ios-location text-info" ng-show="item.geometry"></i> </td> <td><small>{{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td> <a href="" target="_blank" style="padding-right:10px;" ng-click="vm.navigate($event,\'logbookrecords.detail\',{\'id\': item.id})"><i class="ion-android-open"></i></a> </td> <td class="text-left"> <strong> {{item.title}} </strong> <div class="ellipsis"><small>{{item.message}}</small></div> </td> <td class="hidden-mobile text-left"> {{item.createdBy.fullName}} </td> <td class="hidden-mobile"> <a ng-if="item.episode" ng-click="$event.preventDefault(); vm.navigate($event,\'pollutionepisodes.detail\',{\'id\': item.episode.id});" href=""> <small class="pull-right"><label style="padding-right: 10px;" class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-default\',\'ARCHIVED\':\'label-muted\'}[item.episode.status]" data-translate="{{\'app.episodestatus.\'+item.episode.status}}"></label></small> <div> {{item.episode.name}} </div> <div class="list-group-item-text"> <small>{{item.episode.description}}</small> </div> </a> </td> <td> <span class="ui label tag" ng-repeat="t in item.tags">{{t}}</span> </td> <td class="text-center"> <a ng-show="item.fileName" title="{{item.fileName}}" href="" ng-click="vm.download($event,item)"><i class="ion-android-download icon-large"></i></a> </td> <td class="text-right none-padding"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; margin-left:10px" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.deleteRow(item)" data-translate="global.button.remove">Eliminar</a></li> </ul> </div> </td> </tr> </tbody> </table> '),e.put("app/pages/gislayouts/detail/gislayout-detail.html",'<div class="panel full-invisible" zoom-in=""> <editable-form form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="gislayouts" custom-heading="true"> <div class="editable-form-heading"> <div class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;"> <button type="button" style="padding-left: 30px;" class="close" ng-click="vm.onClose()" aria-label="Close"><span aria-hidden="true">&times;</span></button> </div> <h3 class="panel-heading"> {{vm.model.name}} <div class="bnt-group pull-right" ng-if-role="ROLE_ADMIN,ROLE_GISLAYOUT">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting"><span data-translate="global.button.accept"></span></button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.cancel()" ng-disabled="vm.detailForm.$waiting"><span data-translate="global.button.cancel"></span></button> </span>  <span ng-hide="vm.detailForm.$visible">  <button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b"></i><span data-translate="global.button.remove"></span></button> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.edit()"><i class="fa fa-pencil"></i><span data-translate="global.button.edit"></span></button> </span> </div> </h3> </div> <div class="panel-body"> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.gislayout.name">name</label> <div> <p editable-text="vm.model.name" class="form-control-static" e-name="name" e-form="vm.detailForm"> {{vm.model.name}}</p> </div> </div> </div> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.gislayout.description">description</label> <div> <p editable-text="vm.model.description" class="form-control-static" e-name="description" e-form="vm.detailForm"> {{vm.model.description}}</p> </div> </div> </div> </div> </div> </editable-form> </div>'),e.put("app/pages/gislayouts/create/gislayout-create.html",'<form name="vm.newForm"> <div class="modal-header"> <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.cancel()">&times;</button> <h3 class="modal-title" id="modal-title" data-translate="app.gislayout.home.createLabel">Novo GisLayout</h3> </div> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="app.gislayout.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputDescription.$invalid && (vm.newForm.inputDescription.$dirty || vm.newForm.$submitted)}"> <label for="inputDescription" data-translate="app.gislayout.description">description</label> <input type="text" name="inputDescription" id="inputDescription" class="form-control" required="" ng-model="vm.model.description" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-default pull-left" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> </div> </form>'),e.put("app/pages/gislayouts/map/gislayout-map.html",'<div class="panel viewport100"> <div ng-mouseenter="vm.updateSize()" style="position:relative; width:100%; height:100%" ng-class="{\'map-edit\': vm.map.action==\'edit\' || vm.map.action==\'draw\'}">  <div id="map" ol-map="vm.olmap" class="olMap"> <div style="position: absolute; padding: 10px 4em; z-index: 1010;"> <div class="btn-group"> <button class="btn" ng-class="{ \'btn-primary\' : vm.isMeasureEnabled() }" ng-click="vm.toggleMeasure()">{{\'global.button.measure\' | translate}} <span ng-show="vm.isMeasureEnabled()"> {{vm.isLengthMeasureEnabled() ? \'Long\':\'Area\'}}</span></button> <button class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"> </span></button> <ul class="dropdown-menu"> <li><a href="javascript:void()" ng-click="vm.setLengthMeasure()"><i ng-class="vm.handler == \'OpenLayers.Handler.Path\' ? \'icon-check\' : \'icon-check-empty\'"> </i>{{\'global.messages.map.longitude\' | translate}}</a></li> <li><a href="javascript:void()" ng-click="vm.setAreaMeasure()"><i ng-class="vm.handler == \'OpenLayers.Handler.Polygon\' ? \'icon-check\' : \'icon-check-empty\'"> </i>{{\'global.messages.map.area\' | translate}}</a></li> </ul> </div>  &#160;<span ng-if="vm.measure" class="label label-info">{{vm.measure.measure.toFixed(3) + " "+ vm.measure.units + (vm.measure.order==2 ? \'2\':\'\') }}</span> </div> <div style="position: absolute; padding: 80px 8px; z-index: 1010;" ng-hide="vm.map.action==\'edit\'"> <div class="btn-group-vertical"> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.point\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.drawPointAsset();" ng-class="vm.isDrawAssetEnabled() && vm.handler == \'OpenLayers.Handler.Point\' ? \'btn-primary\' :\'\'"><i class="ion-ios-location"> </i></a> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.linestring\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.drawLineAsset();" ng-class="vm.isDrawAssetEnabled() && vm.handler == \'OpenLayers.Handler.Path\'? \'btn-primary\' :\'\'"><i class="ion-android-share-alt"> </i></a> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.polygon\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.drawPolygonAsset();" ng-class="vm.isDrawAssetEnabled() && vm.handler == \'OpenLayers.Handler.Polygon\'? \'btn-primary\' :\'\'"><i class="ion-stop"> </i></a> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.cancel\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.cancelDrawAsset();"><i class="text-danger ion-close"> </i></a> </div> </div> <ol-map-control name="Zoom" ctrl-type="zoom" active="true"> </ol-map-control> <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{displayProjection: \'EPSG:4326\'}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.isLengthMeasureEnabled()}}" handler="OpenLayers.Handler.Path" ol-control-measure="vm.measure=$event"> </ol-map-control> <ol-map-control name="MeasureArea" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.isAreaMeasureEnabled() }}" handler="OpenLayers.Handler.Polygon" ol-control-measure="vm.measure=$event"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group">  <div class="btn-group"> <a class="btn btn-default" title="{{ app.page.gislayouts.map.centermap | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> </div> <div class="btn-group">   <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li>  </ul> </div> </div>  <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer>   <ol-layer ng-if="vm.map.action!=\'edit\'" name="assets" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false, projection:\'EPSG:4326\'}" default-style="{{vm.assetPointStyle.defaultStyle}}" select-style="{{vm.assetPointStyle.selectStyle}}" ol-layer-featureselected="vm.assetSelected($event)"> <ol-feature ng-repeat="asset in vm.gisAssets" geometry="asset.geometry" attributes="asset" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="PaintPointAsset" active="{{vm.isDrawPointAssetEnabled()}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Point" ol-layer-control-featureadded="vm.assetAdded($event)"> </ol-layer-control> <ol-layer-control name="PaintPathAsset" active="{{vm.isDrawPathAssetEnabled()}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Path" ol-layer-control-featureadded="vm.assetAdded($event)"> </ol-layer-control> <ol-layer-control name="PaintPolygonAsset" active="{{vm.isDrawPolygonAssetEnabled()}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Polygon" ol-layer-control-featureadded="vm.assetAdded($event)"> </ol-layer-control> <ol-layer-control name="selectAssetCtrl" active="{{!vm.isDrawPointAssetEnabled()}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" ol-layer-control-featureselected="vm.edit($event)"> </ol-layer-control>   </ol-layer> </div> </div> </div> '),e.put("app/pages/gislayouts/search/gislayouts-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.name" ng-model-options="{ updateOn: \'blur\' }" type="text"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="panel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th st-sort="name" data-translate="app.gislayout.name">name</th> <th data-translate="app.gislayout.description">Description</th> <th data-translate="app.gislayout.episode">Episode</th> <th style="max-width:90px" st-sort="createdBy" data-translate="app.gislayout.createdBy">createdBy</th> <th style="width:120px;" st-sort="createdTime" data-translate="app.gislayout.createdTime">createdTime</th> <th ng-if-role="ROLE_ADMIN,ROLE_GISLAYOUT" style="width:20px;" class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td> <a href="" ng-click="navigate($event, \'gislayouts.detail\',{id:item.id})"><strong>{{item.name}}</strong></a> </td> <td class="ellipsis"><small>{{item.description}}</small></td> <td class="ellipsis"><a href="" ng-click="navigate($event, \'pollutionepisodes.detail\',{id:item.episode.id})">{{item.episode.name }}</a></td> <td class="ellipsis"><small class="text-muted">{{item.createdBy.fullName }}</small></td> <td><small>{{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td class="text-right none-padding nowrap" ng-if-role="ROLE_ADMIN,ROLE_GISLAYOUT"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:20px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="gislayouts.detail({\'id\':item.id})" data-translate="global.button.detail"></a></li> </ul> </div> </td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.doSearch()"></uib-pagination> </div> </div> </div> '),e.put("app/pages/photos/create-wizard/photo-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.photo.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12">  <div class="userpic"> <icon class="fa fa-spinner fa-spin" style="float:left;font-size:2em" ng-if="vm.loading"></icon> <div class="userpic-wrapper"> <img ng-src="{{ vm.model.thumbnail }}" ng-click="vm.choosePicture()"> </div> <i class="ion-ios-close-outline" ng-click="vm.removePicture()" ng-if="vm.worker.picture.id"></i> <a href="" class="change-userpic" ng-click="vm.choosePicture()" data-translate="global.button.select"></a> <input type="file" ng-show="false" id="fileInput" onchange="angular.element(this).scope().$emit(\'files_selected\',this.files)" accept="{{vm.allowedFileTypes | joinBy:\',\'}}"> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputComments.$invalid && (vm.form1.inputComments.$dirty || vm.form1.$submitted)}"> <label for="inputComments" class="control-label" data-translate="app.photo.comments">comments</label> <textarea name="inputComments" autofocus="autofocus" class="form-control" ng-model="vm.model.comments" rows="4" ng-maxlength="255">\r\n                            </textarea> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.photo.createform.step2\' | translate}}" form="vm.form2" on-activate="vm.drawPhoto()" on-exit="vm.disableDrawPhoto()"> <form name="vm.form2" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div id="geometry-manual" aria-hidden="true"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point" label="app.photo.map.currentPoint"></div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-default btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.photo.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-default btn-sm" ng-click="vm.currentPosition()" data-translate="app.photo.map.currentPoint"></button> <button class="btn btn-default btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <div ng-show="vm.mapAction!=\'none\'"> <photo-map report="vm.report" episode="vm.episode" hide-layers-panel="true"></photo-map> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/photos/detail/photo-detail.html",'<editable-form style="padding:15px 15px 5px 15px;" id="fu_eu_arcopol_domain_pollution_PollutionReport" form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="photos"> <div class="panel-body"> <fieldset id="origin" class="with-border"> <legend data-translate="app.photo.detail.fieldset.origin" class="with-border"></legend> <div class="row"> <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label" data-translate="app.photo.code">code</label> <div> <p class="form-control-static" editable-select="vm.model.sourceType" e-ng-options="o as \'app.sourcetype.\' +o | translate for o in [\'ship\',\'land\',\'unknown\']" e-form="rowform"> {{ vm.model.sourceType ? \'app.sourcetype.\' + vm.model.sourceType : \'\' | translate}} </p> </div> </div> </div> <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8"> <div class="form-group"> <label class="control-label" data-translate="app.photo.name">name</label> <div> <p class="form-control-static" ng-bind="vm.model.name" editable-text="vm.model.name" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="form-group"> <label class="control-label" data-translate="app.photo.description">description</label> <div> <p class="form-control-static" ng-bind="vm.model.description" editable-text="vm.model.description" e-required=""> </p> </div> </div> </div> </div> </fieldset>  <fieldset id="geometry" class="with-border"> <legend data-translate="app.photo.detail.fieldset.cause" class="with-border"></legend> <div class="row"> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.photo.pollutioncause">code</label> <div> <p class="form-control-static" editable-select="vm.model.pollutionCause" e-ng-options="o as \'app.pollutioncause.\' +o | translate for o in [\'collision\',\'sink\',\'explosion\',\'runaground\',\'leak\',\'loadfuel\',\'unknown\',\'others\']"> {{ (vm.model.pollutionCause ? \'app.pollutioncause.\' + vm.model.pollutionCause : \'\') | translate}} </p> </div> </div> </div> <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8"> <div class="form-group"> <label class="control-label" data-translate="app.photo.causedescription">causedescription</label> <div> <p class="form-control-static" ng-bind="vm.model.causeDescription" editable-text="vm.model.causeDescription" e-required=""> </p> </div> </div> </div> </div> </fieldset> </div> </editable-form>'),e.put("app/pages/photos/map/photo-map.html",'<div class="panel viewport100 none-padding"> <div class="panel-body"> <div style="position:relative; width:100%; height:100%;" ng-mouseenter="updateSize()">  <div ng-hide="vm.hideLayersPanel" class="alert alert-info" style="position: absolute; top: 10px; left:40px; z-index:1020; opacity:0.9">  <div class="pull-right"> <span ng-if="vm.measure" class="label label-info">{{vm.measure.measure.toFixed(3) + " "+ vm.measure.units + (vm.measure.order==2 ? \'2\':\'\')}}</span> </div> <div ng-repeat="layer in vm.reportlayers"> <div style="display:inline-block; width:18px;"> <i ng-show="vm.worklayer.name==layer.name" class="ion-wrench"></i> </div> <label class="control-label" ng-style="!layer.active ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !layer.active}"> <input type="checkbox" ng-model="layer.visibility"> <span> {{layer.label | translate}} </span> </label> </div> <div class="text-right" style="padding-top:10px;" ng-if="vm.worklayer"> <i class="ion-wrench"></i>&#160; <small data-translate="app.page.pollutionreports.map.activelayer"></small> </div> </div> <div id="map" ol-map="vm.olmap" proxy-host="/arcopol/cgi-bin?targetURL=" class="olMap" options="{numZoomLevels: 20 }">  <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{prefix: \'EPSG:4326 (Lon|Lat) \',separator: \' | \',numDigits: 2}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureLength\')>=0}}" handler="OpenLayers.Handler.Path" ol-control-measure="measureAction($event)"> </ol-map-control> <ol-map-control name="MeasureArea" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureArea\')>=0}}" handler="OpenLayers.Handler.Polygon" ol-control-measure="measureAction($event)"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group"> <div class="btn-group"> <a class="btn btn-default" title="{{ \'global.button.centermap\' | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> </div> <div class="btn-group">   <a class="btn dropdown-toggle btn-default" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[vm.olmap.olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li> </ul> </div> </div>   <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="GeoLocation" lyr-type="markers"> <ol-marker icon="assets/img/gsv_icon2.png" lonlat="{{vm.geoService.currentPosition(\'EPSG:900913\')}}" size="21,40"> </ol-marker> </ol-layer> <ol-layer ng-if="l!=vm.worklayer" ng-repeat="l in vm.reportlayers" name="{{l.name}}" lyr-type="vector" lyr-options="{{l.options}}" visibility="{{l.visibility}}" default-style="{{l.defaultStyle}}" temporary-style="{{l.temporaryStyle}}" select-style="{{l.selectStyle}}" ol-layer-moveend="vm.zoomToExtent($event)" ol-layer-featureselected="vm.featureSelected($event)" ol-layer-featureunselected="vm.featureUnselected($event)"> <ol-feature ng-repeat="item in vm.features[l.items] | filter:filterFeature" geometry="item.geometry" selected="item.id==vm.model.id" attributes="item" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Select\'+l.name}}" active="{{vm.map.action!=\'deletePoints\' && l.active}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer> <ol-layer ng-if="vm.worklayer" name="worklayer" lyr-type="vector" lyr-options="{{vm.worklayer.options}}" visibility="{{vm.map.action!=\'deletePoints\'}}" default-style="{{vm.worklayer.defaultStyle}}" temporary-style="{{vm.worklayer.temporaryStyle}}" select-style="{{vm.worklayer.selectStyle}}" virtual-style="{{vm.worklayer.virtualStyle}}" vertex-style="{{vm.worklayer.vertexStyle}}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.geometry" attributes="vm.model" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Create\'+vm.worklayer.name}}" active="{{vm.map.action==\'draw\'}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}" handler="{{vm.worklayer.handler}}" ol-layer-control-featureadded="vm.featureAdded($event)"> </ol-layer-control> <ol-layer-control name="{{\'Edit\'+vm.worklayer.name}}" active="{{vm.map.action==\'edit\'}}" ctrl-type="modifyFeature" handler="{{vm.worklayer.handler}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}"> </ol-layer-control> </ol-layer>  <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="gpoints" lyr-type="vector" default-style="{{vm.worklayer.temporaryStyle}}" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }"> <ol-feature geometry="vm.model.geometry" display-projection="EPSG:900913" selected="true" projection="EPSG:4326"> </ol-feature> </ol-layer> <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="points" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }" default-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" select-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 18 ,\'fillColor\': \'#FE9929\'}" ol-layer-featureselected="vm.confirmRemoveSelectedPoint($event)" ol-layer-featureunselected="vm.cancelRemoveSelectedPoint($event)"> <ol-feature ng-repeat="p in vm.feature.geometry.getVertices()" geometry="p" attributes="p" selected="{{vm.selectedPoint.id==p.id}}" style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="selectPointCtrl" active="{{vm.map.action==\'deletePoints\'}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer>  <div class="alert alert-info col-md-3" ng-if="vm.selectedPoint" style="position: absolute; top: 10px; left:430px; z-index:1030; border:2px solid;">  <strong><i class="icon-question-sign" data-translate="app.page.pollutionreports.map.confirm"> </i> </strong> <p data-translate="app.page.pollutionreports.map.confirmdeletepoint"> </p> <div class="btn-group"> <button ng-click="vm.removeSelectedPoint()" data-translate="global.button.yes"></button> <button ng-click="vm.cancelRemoveSelectedPoint()" data-translate="global.button.no"></button> </div> </div> </div> </div> </div> </div>'),
e.put("app/pages/photos/table/report-photos-table.html",'<div class="none-padding"> <div ng-hide="vm.photos.length" class="alert alert-info" data-translate="app.photo.help.noresults"> </div> <div class="modal-body"> <div class="feed-messages-container ng-isolate-scope" track-width="smallContainerWidth" min-width="360"> <div class="feed-message" ng-repeat="photo in vm.photos" ng-click="expandMessage(message)" ng-class="{\'alert-success\':photo.selected}"> <a class="message-icon" href="" ng-click="vm.openModal(photo)"> <img class="photo-icon" http-src="{{::vm.photoFileUrl(photo)}}"> </a> <div class="text-block text-message"> <div class="message-header"><h3>{{::photo.code}} <span> <a href="" ng-click="vm.remove(photo)"><i class="ion-trash-b"></i></a></span></h3></div> <div class="message-content line-clamp">{{::photo.comments}}</div> <div class="message-time"> <div class="post-time"> <i ng-if="photo.geometry" class="ion-ios-location"></i>&#160;{{::photo.userLogin.fullName}}: {{::photo.createdTime | date: \'dd/MM/yyyy HH:mm\'}} </div> </div> <div class="clearfix"></div> </div> </div> </div> </div> <script type="text/ng-template" id="photoImageModal.html"> <button type="button" class="close btn-image-close" ng-click="close()" aria-hidden="true">&times</button> <img class="photo-icon" http-src="{{::photoFileUrl(photo)}}" style="width:100%"> <div class="img-description"> <p class="text-center"><strong>{{photo.code}}</strong>: {{photo.comments}}</p> </div> </script> </div>'),e.put("app/pages/pollutionepisodes/create/pollutionepisode-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.pollutionepisode.home.createLabel">Novo Episodio</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted),\'has-warning\':vm.duplicate }"> <label for="inputName" data-translate="app.pollutionepisode.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> <span class="help-block warning-block basic-block" data-translate="global.messages.validate.text.unique"></span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputStatus.$invalid && (vm.newForm.inputStatus.$dirty || vm.newForm.$submitted)}"> <label for="inputStatus" data-translate="app.pollutionepisode.status">status</label> <select name="inputStatus" id="inputStatus" ng-options="v as \'app.episodestatus.\'+v | translate for v in \'NEW;OPEN;CLOSE\'.split(\';\')" required="" ng-model="vm.model.status" class="form-control"></select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.newForm.inputBeginTime.$invalid && (vm.newForm.inputBeginTime.$dirty || vm.newForm.$submitted)}"> <label for="inputBeginTime" data-translate="app.pollutionepisode.begintime">beginTime</label> <div class="dropdown"> <div class="input-group"> <input type="date" name="inputBeginTime" id="inputBeginTime" step="900" class="form-control" ng-model="vm.model.beginTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.newForm.inputEndTime.$invalid && (vm.newForm.inputEndTime.$dirty || vm.newForm.$submitted)}"> <label for="inputEndTime" data-translate="app.pollutionepisode.begintime">endTime</label> <div class="dropdown"> <div class="input-group"> <input type="date" name="inputEndTime" id="inputEndTime" step="900" class="form-control" ng-model="vm.model.endTime"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> </div> <div class="form-group"> <label for="inputDescription" data-translate="app.pollutionepisode.description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> <div class="form-group"> <div id="map" ol-map="vm.olmap" class="olMap" proxy-host="/arcopol/cgi-bin?targetURL=" zoom-to-extent="{{vm.zoomToExtent}}"> <ol-map-control name="Zoom" ctrl-type="zoom" active="true"> </ol-map-control> <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{displayProjection: \'EPSG:4326\'}" active="true"> </ol-map-control>  <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group">  <div class="btn-group"> <spring:message code="button_center_map" var="center_map"> <a class="btn" title="${center_map}" ng-click="$parent.centerOnCurrentPosition()"><i class="icon-screenshot"></i></a> </spring:message></div> <div class="btn-group"> <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li> </ul> </div> </div> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="pollutionepisodes" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false, projection:\'EPSG:4326\'}" default-style="{\'strokeWidth\':2, \'strokeColor\': \'#F00\', \'fillColor\': \'#09d\'}" temporary-style="{\'strokeWidth\':2, \'strokeColor\': \'#000\', \'fillColor\': \'#09A\'}" select-style="{\'strokeWidth\':1, \'strokeColor\': \'#000\', \'fillColor\': \'#09F\'}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.affectedArea" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="PaintAffectedArea" active="true" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Polygon" ol-layer-control-featureadded="vm.featureAdded($event)" ol-layer-control-beforefeatureadded="vm.beforeFeatureAdded($event)"> </ol-layer-control> </ol-layer> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid || vm.duplicate" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div>'),e.put("app/pages/pollutionepisodes/create-wizard/pollutionepisode-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.cancel()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.pollutionepisode.createform.step1\' | translate}}" form="vm.form1" on-exit="vm.buildPollutionEpisode()"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.form1.inputName.$invalid && (vm.form1.inputName.$dirty || vm.form1.$submitted)}"> <label class="control-label" for="inputName" data-translate="app.pollutionepisode.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" ng-model="vm.model.name" autofocus="" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputStatus.$invalid && (vm.form1.inputStatus.$dirty || vm.form1.$submitted)}"> <label class="control-label" for="inputStatus" data-translate="app.pollutionepisode.status">status</label> <select name="inputStatus" id="inputStatus" ng-options="v as \'app.episodestatus.\'+v | translate for v in \'NEW;OPEN;CLOSE\'.split(\';\')" required="" ng-model="vm.model.status" class="form-control"></select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.form1.inputBeginTime.$invalid && (vm.form1.inputBeginTime.$dirty || vm.form1.$submitted)}"> <label class="control-label" for="inputBeginTime" data-translate="app.pollutionepisode.begintime">beginTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputBeginTime" id="inputBeginTime" step="900" class="form-control" ng-model="vm.model.beginTime" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.datetime.required"></small> </div> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputEndTime.$invalid && (vm.form1.inputEndTime.$dirty || vm.form1.$submitted)}"> <label class="control-label" for="inputEndTime" data-translate="app.pollutionepisode.endtime">endTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputEndTime" id="inputEndTime" step="900" class="form-control" ng-model="vm.model.endTime"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.datetime.required"></small> </div> </div> </div> </div> </div> <div class="form-group"> <label class="control-label" for="inputDescription" data-translate="app.pollutionepisode.description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.pollutionepisode.createform.step2\' | translate}}" form="vm.form2"> <form name="vm.form2" novalidate=""> <input type="text" style="visibility: hidden;" ng-model="vm.model.affectedArea" required=""> <div style="width:100%; height:400px; position:relative;"> <div id="map" ol-map="vm.olmap" class="olMap" proxy-host="/arcopol/cgi-bin?targetURL=" zoom-to-extent="{{vm.zoomToExtent}}"> <ol-map-control name="Zoom" ctrl-type="zoom" active="true"> </ol-map-control> <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{displayProjection: \'EPSG:4326\'}" active="true"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group">  <div class="btn-group"> <spring:message code="button_center_map" var="center_map"> <a class="btn" title="${center_map}" ng-click="$parent.centerOnCurrentPosition()"><i class="icon-screenshot"></i></a> </spring:message></div> <div class="btn-group"> <a class="btn btn-default" ng-disabled="!vm.model.affectedArea" ng-click="vm.removeAffectedArea()"><i class="ion-trash-b"></i></a> <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li> </ul> </div> </div> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="pollutionepisodes" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false, projection:\'EPSG:4326\'}" default-style="{\'strokeWidth\':2, \'strokeColor\': \'#F00\', \'fillColor\': \'#09d\'}" temporary-style="{\'strokeWidth\':2, \'strokeColor\': \'#000\', \'fillColor\': \'#09A\'}" select-style="{\'strokeWidth\':1, \'strokeColor\': \'#000\', \'fillColor\': \'#09F\'}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.affectedArea" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="PaintAffectedArea" active="true" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Polygon" ol-layer-control-featureadded="vm.featureAdded($event)" ol-layer-control-beforefeatureadded="vm.beforeFeatureAdded($event)"> </ol-layer-control> </ol-layer> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.pollutionepisode.createform.step3\' | translate}}" form="vm.form3"> <form name="vm.form3" novalidate=""> <input type="text" style="visibility: hidden;" ng-model="vm.selectedlayers.length" required=""> <div> <episodelayers-edit pollutionepisode="vm.model" episodelayers="vm.episodelayers" selectedlayers="vm.selectedlayers"></episodelayers-edit> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.pollutionepisode.createform.step4\' | translate}}"> <form name="vm.form4" novalidate=""> <input type="text" style="visibility: hidden;" ng-model="vm.selectedusers.length" required=""> <div> <episodeusers-tree pollutionepisode="vm.model" userauthorities="ROLE_POLLUTION_EPISODE_MAP" episodelayers="vm.episodeusers" selectedusers="vm.selectedusers"></episodeusers-tree> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/pollutionepisodes/detail/pollutionepisode-detail.html",'  <form id="fu_eu_arcopol_domain_pollution_PollutionEpisode" editable-form="" onshow="vm.onShow()" name="vm.detailForm" onaftersave="vm.save()" novalidate=""> <div class="panel tabs-panel horizontal-tabs"> <div class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting" data-translate="global.button.accept"></button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.detailForm.$cancel()" ng-disabled="vm.detailForm.$waiting" data-translate="global.button.cancel"></button> </span>  <span ng-hide="vm.detailForm.$visible">   <button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b"></i> <span data-translate="global.button.remove"></span></button> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.detailForm.$show()"><i class="fa fa-pencil"></i><span data-translate="global.button.edit"></span></button> </span> </div> <uib-tabset class="tabset-primary">  <uib-tab index="0" heading="{{\'app.pollutionepisode.detail.tab.info\' | translate}}" class="active"> <div class="modal-body"> <div class="row"> <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.name">Name</label> <div> <p editable-text="vm.model.name" class="form-control-static"> {{ vm.model.name }} </p> </div> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-6"> <div class="form-group"> <label class="control-label" for="c_eu_arcopol_domain_pollution_PollutionEpisode_status" data-translate="app.pollutionepisode.status">Status</label> <div> <p editable-select="vm.model.status" e-ng-options="v as \'app.episodestatus.\'+v | translate for v in vm.status" class="form-control-static"> {{ vm.model.status ? (\'app.episodestatus.\' + vm.model.status | translate) : \'\' }} </p> </div> </div> </div>  </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.begintime">Begin Time</label> <div> <p editable-date="vm.model.beginTime" class="form-control-static"> {{ vm.model.beginTime | date: \'dd/MM/yy\' }} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.endtime">End Time</label> <div> <p editable-date="vm.model.endTime" class="form-control-static"> {{ vm.model.endTime | date: \'dd/MM/yy\'}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.description">Description</label> <div> <p editable-text="vm.model.description" class="form-control-static"> {{ vm.model.description }} </p> </div> </div> </div> </div>  <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.tags">Tags</label> <div> <tags-input class="tags-info" ng-disabled="!vm.detailForm.$visible" use-strings="true" ng-model="vm.model.tags" add-from-autocomplete-only="false"></tags-input> </div> </div> </div> </div>  <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.publicUser">Public User</label> <div> <p editable-select="vm.model.publicUser" e-ng-options="eu as eu.userLogin.fullName for eu in vm.episodeUsers" class="form-control-static"> {{::vm.model.publicUser.userLogin.fullName}} {{vm.model.publicUser ? \' (\'+vm.model.publicUser.layersCount+\')\' :\'\'}} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group pull-right"> <label class="control-label"> </label> <div> <p class="form-control-static" editable-checkbox="vm.model.publish" e-title="{{ \'app.pollutionepisode.detail.fieldset.inputPublish.title\' | translate }}"> <span class="label label-success" ng-show="vm.model.publish" data-translate="app.pollutionepisode.publicAccess">Public </span> <span class="label label-danger" ng-hide="vm.model.publish" data-translate="app.pollutionepisode.requireAuthentification">Requires authentification</span> </p> </div> </div> </div> </div> </div> </uib-tab> <uib-tab index="1" heading="{{\'app.pollutionepisode.detail.tab.map\' | translate}}"> <pollutionepisode-map pollutionepisode="vm.pollutionepisode" resources="spills;pollutionsources;photos;comments"></pollutionepisode-map> </uib-tab> </uib-tabset> </div> </form>'),e.put("app/pages/pollutionepisodes/detail/pub-link-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.pollutionepisode.detail.pub.linkTitle">Compartir</h3> </div> <div class="modal-body" id="modal-body"> <form name="newForm"> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group"> <label for="inputName" data-translate="app.pollutionepisode.detail.pub.link"></label> <div class="input-group"> <input type="text" name="inputLink" id="inputLink" class="form-control" required="" ng-model="publicLink" autofocus=""> <span class="input-group-addon" title="{{\'app.pollutionepisode.detail.pub.linkCopy\' | translate}}" ng-click="copyLink()"><i class="ion-ios-copy-outline"></i></span> </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-warning" type="button" ng-click="close()" data-translate="global.button.close"></button> </div>'),e.put("app/pages/pollutionepisodes/map/pollutionepisode-map.html",'<div class="panel viewport100"> <div ng-mouseenter="vm.updateSize()" style="position:relative; width:100%; height:100%" ng-class="{\'map-edit\': vm.map.action==\'edit\' || vm.map.action==\'draw\'}"> <div id="map" ol-map="vm.olmap" class="olMap" proxy-host="/arcopol/cgi-bin?targetURL=" zoom-to-extent="{{vm.zoomToExtent}}"> <div style="position: absolute; padding: 10px 4em; z-index: 1010;"> <div class="btn-group"> <button class="btn" ng-class="{ \'btn-primary\' : vm.isMeasureEnabled() }" ng-click="vm.toggleMeasure()">Medir <span ng-show="vm.isMeasureEnabled()"> {{vm.isLengthMeasureEnabled() ? \'Long\':\'Area\'}}</span></button> <button class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"> </span></button> <ul class="dropdown-menu"> <li><a href="javascript:void()" ng-click="vm.setLengthMeasure()"><i ng-class="vm.handler == \'OpenLayers.Handler.Path\' ? \'icon-check\' : \'icon-check-empty\'"> </i>Longitud</a></li> <li><a href="javascript:void()" ng-click="vm.setAreaMeasure()"><i ng-class="vm.handler == \'OpenLayers.Handler.Polygon\' ? \'icon-check\' : \'icon-check-empty\'"> </i>Area</a></li> </ul> </div>  &#160;<span ng-if="vm.measure" class="label label-info">{{vm.measure.measure.toFixed(3) + " "+ vm.measure.units + (vm.measure.order==2 ? \'2\':\'\') }}</span> </div> <div style="position: absolute; padding: 80px 8px; z-index: 1010;" ng-hide="vm.map.action==\'edit\'"> <div class="btn-group-vertical"> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.point\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.drawPointAsset();" ng-class="vm.isDrawAssetEnabled() && vm.handler == \'OpenLayers.Handler.Point\' ? \'btn-primary\' :\'\'"><i class="ion-ios-location"> </i></a> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.linestring\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.drawLineAsset();" ng-class="vm.isDrawAssetEnabled() && vm.handler == \'OpenLayers.Handler.Path\'? \'btn-primary\' :\'\'"><i class="ion-android-share-alt"> </i></a> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.polygon\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.drawPolygonAsset();" ng-class="vm.isDrawAssetEnabled() && vm.handler == \'OpenLayers.Handler.Polygon\'? \'btn-primary\' :\'\'"><i class="ion-stop"> </i></a> <a href="javascript:void(0)" ng-title="{{\'app.map.draw.cancel\' | translate }}" class="btn btn-default btn-sm" ng-click="vm.cancelDrawAsset();"><i class="text-danger ion-close"> </i></a> </div> </div> <ol-map-control name="Zoom" ctrl-type="zoom" active="true"> </ol-map-control> <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{displayProjection: \'EPSG:4326\'}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.isLengthMeasureEnabled()}}" handler="OpenLayers.Handler.Path" ol-control-measure="vm.measure=$event"> </ol-map-control> <ol-map-control name="MeasureArea" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.isAreaMeasureEnabled() }}" handler="OpenLayers.Handler.Polygon" ol-control-measure="vm.measure=$event"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group">  <div class="btn-group"> <a class="btn btn-default" title="{{ app.page.pollutionreports.map.centermap | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> <a class="btn btn-default" ng-show="vm.map.action == \'edit\' || vm.map.action == \'draw\'" ng-disabled="!vm.model.affectedArea" ng-click="vm.removeAffectedArea()"><i class="ion-trash-b"></i></a> </div> <div class="btn-group">   <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li>  </ul> </div> </div>  <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer> <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer>   <ol-layer name="pollutionepisodes" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false, projection:\'EPSG:4326\'}" default-style="{\'strokeWidth\':2, \'strokeColor\': \'#F00\', \'fillColor\': \'#09d\'}" temporary-style="{\'strokeWidth\':2, \'strokeColor\': \'#000\', \'fillColor\': \'#09A\'}" select-style="{\'strokeWidth\':1, \'strokeColor\': \'#000\', \'fillColor\': \'#09F\'}" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.affectedArea" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="PaintAffectedArea" active="{{vm.map.action==\'draw\'}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Polygon" ol-layer-control-featureadded="vm.featureAdded($event)"> </ol-layer-control> <ol-layer-control name="EditAffectedArea" active="{{vm.map.action==\'edit\'}}" ctrl-type="modifyFeature" handler="OpenLayers.Handler.Polygon" options="{vertexRenderIntent: \'virtual\'}"> </ol-layer-control> </ol-layer>  <ol-layer ng-if="vm.map.action!=\'edit\'" name="assets" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false, projection:\'EPSG:4326\'}" default-style="{{vm.assetPointStyle.defaultStyle}}" temporary-style="{{vm.assetPointStyle.temporaryStyle}}" select-style="{{vm.assetPointStyle.selectStyle}}" ol-layer-featureselected="vm.assetSelected($event)"> <ol-feature ng-repeat="asset in vm.assets" geometry="asset.geometry" attributes="asset" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="PaintPointAsset" active="{{vm.isDrawPointAssetEnabled()}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Point" ol-layer-control-featureadded="vm.assetAdded($event)"> </ol-layer-control> <ol-layer-control name="PaintPathAsset" active="{{vm.isDrawPathAssetEnabled()}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Path" ol-layer-control-featureadded="vm.assetAdded($event)"> </ol-layer-control> <ol-layer-control name="PaintPolygonAsset" active="{{vm.isDrawPolygonAssetEnabled()}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Polygon" ol-layer-control-featureadded="vm.assetAdded($event)"> </ol-layer-control> <ol-layer-control name="selectAssetCtrl" active="{{!vm.isDrawPointAssetEnabled()}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" ol-layer-control-featureselected="vm.edit($event)"> </ol-layer-control>   </ol-layer>  <ol-layer ng-repeat="l in vm.episodelayers" name="{{l.name}}" lyr-type="vector" lyr-options="{{l.options}}" visibility="{{l.visibility}}" default-style="{{l.defaultStyle}}" temporary-style="{{l.temporaryStyle}}" select-style="{{l.selectStyle}}" ol-layer-moveend="vm.zoomToExtent($event)" ol-layer-featureselected="vm.featureSelected($event)" ol-layer-featureunselected="vm.featureUnselected($event)"> <ol-feature ng-repeat="item in vm.features[l.items]" geometry="item.geometry" attributes="item" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> </ol-layer> </div> </div> </div> '),e.put("app/pages/pollutionepisodes/photos/episode-photos-table.html",'<div class="none-padding"> <div ng-hide="vm.photos.length" class="alert alert-info" data-translate="app.photo.help.noresults"> </div> <div class="modal-body"> <div class="feed-messages-container ng-isolate-scope" track-width="smallContainerWidth" min-width="360"> <div class="feed-message" ng-repeat="photo in vm.photos" ng-click="expandMessage(message)" ng-class="{\'alert-success\':photo.selected}"> <a class="message-icon" href="" ng-click="vm.openModal(photo)"> <img class="photo-icon" http-src="{{::vm.photoFileUrl(photo)}}"> </a> <div class="text-block text-message"> <div class="message-header"><h3>{{::photo.code}} <span> <a href="" ng-click="vm.remove(photo)"><i class="ion-trash-b"></i></a></span></h3></div> <div class="message-content line-clamp">{{::photo.comments}}</div> <div class="message-time"> <div class="post-time"> {{::photo.createdTime | date: \'dd/MM/yyyy HH:mm\'}}</div> </div> </div> </div> </div> </div> <script type="text/ng-template" id="photoImageModal.html"> <button type="button" class="close btn-image-close" ng-click="close()" aria-hidden="true">&times</button> <img class="photo-icon" http-src="{{::photoFileUrl(photo)}}" style="width:100%"> <div class="img-description"> <p class="text-center"><strong>{{photo.code}}</strong>: {{photo.comments}}</p> </div> </script> </div>'),e.put("app/pages/pollutionepisodes/search/pollutionepisodes-search-table.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="col-lg-10 col-md-10 col-sm-8 col-xs-8"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.name" ng-model-options="{ updateOn: \'blur\' }" type="text" placeholder="{{\'app.pollutionepisode.search.placeholder\' | translate }}"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </div> <div class="col-lg-2 col-md-2 col-sm-4 col-xs-4"> <div class="form-group">  <select placeholder="Filtrar por estado..." name="resource" id="resource" ng-options="v as \'app.episodestatus.\'+v | translate for v in vm.status" ng-model="vm.searchTerms.status" class="form-control input-sm" ng-change="vm.doSearch()"> <option value="" selected=""></option> </select> </div> </div>  </form> <span class="blog-tags"> <a class="ui label tag" ng-repeat="t in vm.tags" href="" ng-class="{\'tag-selected\': vm.searchTerms.tags.indexOf(t.tag) >= 0 }" ng-click="vm.toggleTag(t)"> {{t.tag}} </a> </span> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="panel-body"> <table class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" ng-show="vm.searchResults.length"> <thead> <tr class="active">  <th st-sort="affectedArea" style="width:10px;"><i class="ion-ios-location"></i></th> <th st-sort="publish" title="{{\'app.pollutionepisode.publicAccess\' | translate}}" style="width:10px;"><i class="ion-earth"></i></th> <th class="text-center" st-sort="status" data-translate="app.pollutionepisode.status">Status</th> <th st-sort="name" data-translate="app.pollutionepisode.name">Name</th> <th class="hidden-mobile" st-sort="description" data-translate="app.pollutionepisode.description">Description</th> <th st-sort="beginTime" data-translate="app.pollutionepisode.begintime">BeginTime</th> <th st-sort="endTime" data-translate="app.pollutionepisode.endtime">EndTime</th>  <th data-translate="app.pollutionepisode.tags">TAGS</th> <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id">  <td class="text-center"> <i class="ion-ios-location text-info" ng-show="item.affectedArea"></i> </td> <td class="text-center"> <i class="ion-earth text-muted" title="{{\'app.pollutionepisode.publicAccess\' | translate}}" ng-show="item.publish"></i> </td> <td class="text-center"> <label class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-default\', \'ARCHIVED\':\'label-muted\'}[item.status]" data-translate="{{\'app.episodestatus.\'+item.status}}"></label> </td> <td class="text-left"> <strong> <a href="" ui-sref="pollutionepisodes.detail.episodelayers({\'id\':item.id})">  {{item.name || \'-\'}} </a> </strong> </td> <td style="max-width:180px;" class="ellipsis text-left hidden-mobile" title="{{item.description}}"> {{item.description}} </td> <td><small>{{item.beginTime | date:\'dd/MM/yyyy\'}}</small></td> <td><small>{{item.endTime | date:\'dd/MM/yyyy\'}}</small></td>  <td> <span class="ui label tag" ng-repeat="t in item.tags">{{t}}</span> </td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="pollutionepisodes.detail.episodelayers({\'id\':item.id})" data-translate="global.button.detail"></a></li> <li role="menuitem"><a href="" ng-click="vm.removeEpisode(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages > 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.doSearch()"></uib-pagination>  </div> </div> </div>'),
e.put("app/pages/pollutionepisodes/search/pollutionepisodes-search.html",'<div class="with-scroll panel"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm">  <input id="searchInput" class="form-control" ng-model="vm.searchTerms.login" ng-model-options="{ updateOn: \'blur\' }" type="text" placeholder="{{\'app.pollutionepisode.search.planceholder\' | translate }}"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> <div class="col-lg-4 col-md-3 col-sm-4 col-xs-4"> <div class="form-group">  <select placeholder="Filtrar por estado..." name="resource" id="resource" ng-options="v as \'app.episodestatus.\'+v | translate for v in vm.status" ng-model="vm.searhTerms.status" ng-change="vm.doSearch()" class="form-control"> <option value="" selected=""></option> </select> </div> </div>  </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="list-group"> <a ui-sref="pollutionepisodes.detail({\'id\': pollutionepisode.id})" class="list-group-item" href="" ng-repeat="pollutionepisode in vm.searchResults track by $index"> <div class="badge label-info">{{pollutionepisode.beginTime | date: \'dd/MM/yyyy\'}}</div> <h4 class="list-group-item-heading">{{pollutionepisode.name}} {{pollutionepisode.pollutionReportsLength}}</h4> <div class="list-group-item-text"> {{pollutionepisode.description}} </div> <div class="clearfix"></div> </a> </div> </div>'),e.put("app/pages/pollutionepisodesmap/search/pollutionepisodes-map-search-table.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.name" ng-model-options="{ updateOn: \'blur\' }" type="text" placeholder="{{\'app.pollutionepisode.search.placeholder\' | translate }}"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="panel-body"> <table class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" ng-show="vm.searchResults.length"> <thead> <tr class="active"> <th st-sort="affectedArea" style="width:10px;"><i class="ion-ios-location"></i></th> <th class="text-center" st-sort="status" data-translate="app.pollutionepisode.status">Status</th> <th st-sort="name" data-translate="app.pollutionepisode.name">Name</th> <th class="hidden-mobile" st-sort="description" data-translate="app.pollutionepisode.description">Description</th> <th st-sort="beginTime" data-translate="app.pollutionepisode.begintime">BeginTime</th> <th st-sort="endTime" data-translate="app.pollutionepisode.endtime">EndTime</th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id" ng-click="vm.openVisor($event,item)"> <td class="text-center"> <i class="ion-ios-location text-info" ng-show="item.affectedArea"></i> </td> <td class="text-center"> <label style="width:80px;" class="label" ng-class="{\'NEW\':\'label-info\',\'OPEN\': \'label-success\',\'CLOSE\':\'label-default\',\'ARCHIVED\':\'label-muted\'}[item.status]" data-translate="{{\'app.episodestatus.\'+item.status}}"></label> </td> <td class="text-left"> <strong>{{item.name}}</strong></td> <td style="max-width:180px;" class="ellipsis text-left hidden-mobile" title="{{item.description}}"> <small>{{item.description}}</small> </td> <td><small>{{item.beginTime | date:\'dd/MM/yyyy\'}}</small></td> <td><small>{{item.endTime | date:\'dd/MM/yyyy\'}}</small></td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages > 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.doSearch()"></uib-pagination> </div> </div> </div>'),e.put("app/pages/pollutionepisodesmap/search/pollutionepisodes-map-search.html",'<div class="with-scroll panel"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm">  <input id="searchInput" class="form-control" ng-model="vm.searchTerms.login" ng-model-options="{ updateOn: \'blur\' }" type="text" placeholder="{{\'app.pollutionepisode.search.planceholder\' | translate }}"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div>  </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="list-group"> <a ui-sref="pollutionepisodes.detail({\'id\': pollutionepisode.id})" class="list-group-item" href="" ng-repeat="pollutionepisode in vm.searchResults track by $index"> <div class="badge label-info">{{pollutionepisode.beginTime | date: \'dd/MM/yyyy\'}}</div> <h4 class="list-group-item-heading">{{pollutionepisode.name}} {{pollutionepisode.pollutionReportsLength}}</h4> <div class="list-group-item-text"> {{pollutionepisode.description}} </div> <div class="clearfix"></div> </a> </div> </div> '),e.put("app/pages/pub/pollutionepisodes/pollutionepisode-pub-detail.html",'  <form id="fu_eu_arcopol_domain_pollution_PollutionEpisode" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate=""> <div class="panel tabs-panel horizontal-tabs"> <div class="panel-body"> <uib-tabset class="tabset-primary">  <uib-tab index="0" heading="{{\'app.pollutionepisode.detail.tab.info\' | translate}}" class="active"> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.name">Name</label> <div> <p editable-text="vm.model.name" class="form-control-static"> {{ vm.model.name }} </p> </div> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-6"> <div class="form-group"> <label class="control-label" for="c_eu_arcopol_domain_pollution_PollutionEpisode_status" data-translate="app.pollutionepisode.status">Status</label> <div> <p editable-select="vm.model.status" e-ng-options="v as \'app.episodestatus.\'+v | translate for v in vm.status" class="form-control-static"> {{ vm.model.status ? (\'app.episodestatus.\' + vm.model.status | translate) : \'\' }} </p> </div> </div> </div>  </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.begintime">Begin Time</label> <div> <p editable-datetime-local="vm.model.beginTime" class="form-control-static"> {{ vm.model.beginTime | date: \'dd/MM/yy HH:mm\' }} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.endtime">End Time</label> <div> <p editable-datetime-local="vm.model.endTime" class="form-control-static"> {{ vm.model.endTime | date: \'dd/MM/yy HH:mm\'}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.description">Description</label> <div> <p editable-text="vm.model.description" class="form-control-static"> {{ vm.model.description }} </p> </div> </div> </div> </div>  <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.tags">Tags</label> <div> <tags-input class="tags-info" ng-disabled="vm.formStatus!=\'edit\'" use-strings="true" ng-model="vm.model.tags" add-from-autocomplete-only="false"></tags-input> </div> </div> </div> </div> </uib-tab> <uib-tab index="1" heading="{{\'app.pollutionepisode.detail.tab.map\' | translate}}"> <pollutionepisode-map pollutionepisode="vm.pollutionepisode" resources="spills;pollutionsources;photos;comments"></pollutionepisode-map> </uib-tab> </uib-tabset> </div> </div> </form>'),e.put("app/pages/pollutionreports/create/pollutionreport-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.pollutionreport.home.createLabel"></h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.name.$invalid && (vm.newForm.name.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="label_eu_arcopol_domain_pollution_pollutionreport_name">label_name</label> <input type="text" inputname="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_pollutionreport_name">err_name</span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.status.$invalid && (vm.status.$dirty || vm.$submitted)}"> <label for="inputStatus" data-translate="label_eu_arcopol_domain_pollution_pollutionreport_status">label_status</label> <select name="inputStatus" id="inputStatus" ng-options="v as \'label_eu_arcopol_domain_pollution_pollutionreport_status_\'+v | translate for v in [\'NEW\',\'OPEN\'.\'CLOSE\']" required="" ng-model="vm.model.status" class="form-control"></select> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_pollutionreport_status">err_status</span> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.newForm.beginTime.$invalid && (vm.newForm.beginTime.$dirty || vm.newForm.$submitted)}"> <label for="inputBeginTime" data-translate="label_eu_arcopol_domain_pollution_pollutionreport_begintime">label_beginTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputBeginTime" id="inputBeginTime" step="900" class="form-control" ng-model="vm.model.beginTime" required=""> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_pollutionreport_beginTime">err_beginTime</span> </div> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.newForm.endTime.$invalid && (vm.newForm.endTime.$dirty || vm.newForm.$submitted)}"> <label for="inputEndTime" data-translate="label_eu_arcopol_domain_pollution_pollutionreport_begintime">label_endtime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputEndTime" id="inputEndTime" step="900" class="form-control" ng-model="vm.model.endTime" required=""> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_pollutionreport_endTime">err_endTime</span> </div> </div> </div> </div> </div> <div class="form-group"> <label for="inputDescription" data-translate="label_eu_arcopol_domain_pollution_pollutionreport_description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" required="" ng-model="vm.model.description"></textarea> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div> '),e.put("app/pages/pollutionreports/create-wizard/pollutionreport-create-wizard.html",'<div> <div class="modal-header"> <h3 ng-show="vm.model.pollutionEpisode"> <strong data-translate="app.pollutionreport.pollutionepisode"></strong>: <small>{{vm.model.pollutionEpisode.description}}</small> </h3> <h3 ng-hide="vm.model.pollutionEpisode" class="modal-title" id="modal-title" data-translate="app.pollutionreport.home.createLabel"></h3> <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.cancel()">&times;</button> </div> <div class="modal-body"> <ba-wizard on-finish="vm.ok()" finish-label="global.button.continue"> <ba-wizard-step step-title="{{\'app.pollutionreport.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.form1.inputReportTime.$invalid && (vm.form1.inputReportTime.$dirty || vm.form1.$submitted)}"> <label for="inputReportTime" class="control-label" data-translate="app.pollutionreport.reporttime">reportTime</label> <div class="input-group"> <input type="datetime-local" name="inputReportTime" id="inputReportTime" step="60" class="form-control" ng-model="vm.model.reportTime" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form2.inputObserverName.$invalid && (vm.form2.inputObserverName.$dirty || vm.form2.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.observername">observerName</label> <input name="inputObserverName" class="form-control" type="text" ng-model="vm.model.observerName"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div for="inputOrganization" class="form-group required" ng-class="{\'has-error\': vm.form1.inputOrganization.$invalid}"> <label class="control-label" data-translate="app.pollutionreport.callerorganization">callerOrganization</label> <input id="inputOrganization" autofocus="" name="inputOrganization" class="form-control" type="text" ng-model="vm.model.callerOrganization" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputCallerNumber.$invalid && (vm.form1.inputCallerNumber.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callernumber">callerNumber</label> <input id="inputCallerNumber" name="inputCallerNumber" class="form-control" type="text" ng-model="vm.model.callerNumber"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputCallerTransportType.$invalid && (vm.form1.inputCallerTransportType.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callertransporttype">callerTransportType</label>  <select name="inputCallerTransportType" class="form-control" ng-model="vm.model.callerTransportType" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.callertransporttype"></select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputCallerTransportNumber.$invalid && (vm.form1.inputCallerTransportNumber.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callertransportnumber">callerTransportNumber</label> <input id="inputCallerTransportNumber" name="inputCallerTransportNumber" class="form-control" type="text" ng-model="vm.model.callerTransportNumber"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div>     <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form2.inputObservationSystem.$invalid && (vm.form2.inputObservationSystem.$dirty || vm.form2.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.observationsystem">observationSystem</label> <select name="inputObservationSystem" class="form-control" ng-model="vm.model.observationSystem" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.observationsystem"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div>  </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.pollutionreport.createform.step3\' | translate}}" form="vm.form3"> <form name="vm.form3" novalidate=""> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputwindDirection.$invalid && (vm.form3.inputwindDirection.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.winddirection">windDirection</label> <div class="input-group"> <input name="inputwindDirection" class="form-control" type="number" step="1" min="0" ng-model="vm.model.windDirection"> <a class="input-group-addon" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.winddirection\' | translate}}" popover-append-to-body="true" href=""><i class="fa fa-info"></i></a> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.windspeed">windSpeed</label> <div class="input-group"> <input name="windSpeed" min="0" step="1" type="number" class="form-control" ng-model="vm.model.windSpeed"> <div class="input-group-addon"> <a href="javascript:void()" data-toggle="dropdown"> <span data-translate="{{vm.model.windSpeedUnit ? \'app.windspeedunit.\'+vm.model.windSpeedUnit : \'\'}}"></span> <i class="caret"> </i> </a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'knots\'" data-translate="app.windspeedunit.knots"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'m/s\'" data-translate="app.windspeedunit.m/s"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'km/h\'" data-translate="app.windspeedunit.km/h"></a></li> </ul> </div> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputObservationSystem.$invalid && (vm.form3.inputObservationSystem.$dirty || vm.form3.$submitted)}"> <label class="control-label"> <span data-translate="app.pollutionreport.seadirection"> </span> </label> <div class="input-group"> <input name="inputSeaDirection" class="form-control" type="number" step="1" min="0" ng-model="vm.model.seaDirection"> <a class="input-group-addon input-sm" popover-trigger="click : outsideClick" popover-append-to-body="true" uib-popover="{{\'app.pollutionreport.help.seadirection\' | translate}}" href=""><i class="fa fa-info"></i></a> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputSeaStatus.$invalid && (vm.form3.inputSeaStatus.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.seastatus">seaStatus</label> <select name="inputSeaStatus" class="form-control" ng-model="vm.model.seaStatus" ng-options="v as \'app.seastatus.\'+v | translate for v in \'rizado;ovellado;marusia;fortemarusia;mediavaga;vaga;vagallon;vagalloncampal\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputVisibilityStatus.$invalid && (vm.form3.inputVisibilityStatus.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.visibilitystatus">visibilityStatus</label> <select name="inputVisibilityStatus" class="form-control" ng-model="vm.model.visibilityStatus" ng-options="v.value as v.bundle[vm.currentLang] for v in vm.visibilitystatus"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputCloudCover.$invalid && (vm.form3.inputinputCloudCover.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.cloudcover">cloudCover</label> <select name="inputCloudCover" class="form-control" ng-model="vm.model.cloudCover" ng-options="v as v for v in \'0;1/4;2/4;3/4;4/4\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputCloudHeight.$invalid && (vm.form3.inputinputCloudHeight.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.cloudheight">cloudHeight</label> <select name="inputCloudHeight" class="form-control" ng-model="vm.model.cloudHeight" ng-options="v.value as v.bundle[vm.currentLang] for v in vm.cloudheight"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </form> </ba-wizard-step> </ba-wizard> </div> </div>'),e.put("app/pages/pollutionreports/create-wizard-btn/pollutionreport-create-wizard.html",'<div> <div class="modal-header"> <h3 ng-show="vm.model.pollutionEpisode"> <strong data-translate="app.pollutionreport.pollutionepisode"></strong>: <small>{{vm.model.pollutionEpisode.description}}</small> </h3> <h3 ng-hide="vm.model.pollutionEpisode" class="modal-title" id="modal-title" data-translate="app.pollutionreport.home.createLabel"></h3> <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.cancel()">&times;</button> </div> <div class="modal-body"> <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.pollutionreport.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.form1.inputReportTime.$invalid && (vm.form1.inputReportTime.$dirty || vm.form1.$submitted)}"> <label for="inputReportTime" class="control-label" data-translate="app.pollutionreport.reporttime">reportTime</label> <div class="input-group"> <input type="datetime-local" name="inputReportTime" id="inputReportTime" step="60" class="form-control" ng-model="vm.model.reportTime" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div for="inputOrganization" class="form-group required" ng-class="{\'has-error\': vm.form1.inputOrganization.$invalid && (vm.form1.inputOrganization.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callerorganization">callerOrganization</label> <input id="inputOrganization" name="inputOrganization" class="form-control" type="text" ng-model="vm.model.callerOrganization" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputCallerNumber.$invalid && (vm.form1.inputCallerNumber.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callernumber">callerNumber</label> <input id="inputCallerNumber" name="inputCallerNumber" class="form-control" type="text" ng-model="vm.model.callerNumber"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputCallerTransportType.$invalid && (vm.form1.inputCallerTransportType.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callertransporttype">callerTransportType</label>  <select name="inputCallerTransportType" class="form-control" ng-model="vm.model.callerTransportType" ng-options="o.value as o.name | translate for o in vm.callertransporttype"></select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputCallerTransportNumber.$invalid && (vm.form1.inputCallerTransportNumber.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.callertransportnumber">callerTransportNumber</label> <input id="inputCallerTransportNumber" name="inputCallerTransportNumber" class="form-control" type="text" ng-model="vm.model.callerTransportNumber"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div>     <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form2.inputObservationSystem.$invalid && (vm.form2.inputObservationSystem.$dirty || vm.form2.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.observationsystem">observationSystem</label> <select name="inputObservationSystem" class="form-control" ng-model="vm.model.observationSystem" ng-options="o.value as o.name | translate for o in vm.observationsystem"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form2.inputObserverName.$invalid && (vm.form2.inputObserverName.$dirty || vm.form2.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.observername">observerName</label> <input name="inputObserverName" class="form-control" type="text" ng-model="vm.model.observerName"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form2.inputObserverRole.$invalid && (vm.form2.inputObserverRole.$dirty || vm.form2.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.observerrole">observerRole</label> <input name="inputObserverRole" class="form-control" type="text" ng-model="vm.model.observerRole"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.pollutionreport.createform.step3\' | translate}}" form="vm.form3"> <form name="vm.form3" novalidate=""> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputwindDirection.$invalid && (vm.form3.inputwindDirection.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.winddirection">windDirection</label> <div class="input-group"> <input name="inputwindDirection" class="form-control" type="number" step="1" min="0" ng-model="vm.model.windDirection"> <a class="input-group-addon" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.winddirection\' | translate}}" popover-append-to-body="true" href=""><i class="fa fa-info"></i></a> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.windspeed">windSpeed</label> <div class="input-group"> <input name="windSpeed" min="0" step="1" type="number" class="form-control" ng-model="vm.model.windSpeed"> <div class="input-group-addon"> <a href="javascript:void()" data-toggle="dropdown"> <span data-translate="{{vm.model.windSpeedUnit ? \'app.windspeedunit.\'+vm.model.windSpeedUnit : \'\'}}"></span> <i class="caret"> </i> </a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'knots\'" data-translate="app.windspeedunit.knots"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'m/s\'" data-translate="app.windspeedunit.m/s"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'km/h\'" data-translate="app.windspeedunit.km/h"></a></li> </ul> </div> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputObservationSystem.$invalid && (vm.form3.inputObservationSystem.$dirty || vm.form3.$submitted)}"> <label class="control-label"> <span data-translate="app.pollutionreport.seadirection"> </span> </label> <div class="input-group"> <input name="inputSeaDirection" class="form-control" type="number" step="1" min="0" ng-model="vm.model.seaDirection"> <a class="input-group-addon input-sm" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.seadirection\' | translate}}" popover-append-to-body="true" href=""><i class="fa fa-info"></i></a> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputSeaStatus.$invalid && (vm.form3.inputSeaStatus.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.seastatus">seaStatus</label> <select name="inputSeaStatus" class="form-control" ng-model="vm.model.seaStatus" ng-options="v as \'app.seastatus.\'+v | translate for v in \'rizado;ovellado;marusia;fortemarusia;mediavaga;vaga;vagallon;vagalloncampal\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputVisibilityStatus.$invalid && (vm.form3.inputVisibilityStatus.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.visibilitystatus">visibilityStatus</label> <select name="inputVisibilityStatus" class="form-control" ng-model="vm.model.visibilityStatus" ng-options="v as \'app.visibilitystatus.\'+v | translate for v in \'excelente;moiboa;boa;regular;mala;nula\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputCloudCover.$invalid && (vm.form3.inputinputCloudCover.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.cloudcover">cloudCover</label> <select name="inputCloudCover" class="form-control" ng-model="vm.model.cloudCover" ng-options="v as v for v in \'0;1/4;2/4;3/4;4/4\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputCloudHeight.$invalid && (vm.form3.inputinputCloudHeight.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.pollutionreport.cloudheight">cloudHeight</label> <select name="inputCloudHeight" class="form-control" ng-model="vm.model.cloudHeight" ng-options="v as \'app.cloudheight.\'+v | translate for v in \'low;medium;high\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </form> </ba-wizard-step> </ba-wizard> </div> </div>'),
e.put("app/pages/pollutionreports/detail/pollutionreport-detail.html",'<form id="fu_eu_arcopol_domain_pollution_PollutionReport" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate=""> <div class="panel tabs-panel horizontal-tabs">  <div class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting" data-translate="global.button.accept"></button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.detailForm.$cancel()" ng-disabled="vm.detailForm.$waiting" data-translate="global.button.cancel"></button> </span>  <span ng-hide="vm.detailForm.$visible"> <a href="" style="margin-right:20px" class="btn btn-xs btn-default btn-with-icon" ui-sref="pollutionreports.detail.print" title="{{\'global.button.print\'| translate}}"><i class="ion-printer"></i> <span data-translate="global.button.print"></span></a>  <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.detailForm.$show()"><i class="fa fa-pencil"></i><span data-translate="global.button.edit"></span></button> </span> </div> <uib-tabset class="tabset-primary">  <uib-tab index="0" heading="{{\'app.pollutionreport.detail.tab.caller\' | translate}}" class="active"> <div class="modal-body"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.reporttime">reportTime</label> <div> <p editable-datetime-local="vm.model.reportTime" class="form-control-static" e-step="60"> {{ vm.model.reportTime | date: \'dd/MM/yy HH:mm\' }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callerorganization">callerOrganization</label> <div> <p editable-text="vm.model.callerOrganization" class="form-control-static" ng-bind="vm.model.callerOrganization"> </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callernumber">callerNumber</label> <div> <p editable-text="vm.model.callerNumber" class="form-control-static" ng-bind="vm.model.callerNumber"> </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callertransporttype">callerTransportType</label> <div> <p editable-select="vm.model.callerTransportType" e-ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.callertransporttype" class="form-control-static"> {{vm.translateConfig(\'callertransporttype\',vm.model.callerTransportType)}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callertransportnumber">callerTransportNumber</label> <div> <p editable-text="vm.model.callerTransportNumber" class="form-control-static" ng-bind="vm.model.callerTransportNumber"> </p> </div> </div> </div> </div> </div> </uib-tab>  <uib-tab index="1" heading="{{\'app.pollutionreport.detail.tab.observer\' | translate }}"> <div class="modal-body"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.observationsystem">observationSystem</label> <div> <p editable-select="vm.model.observationSystem" e-ng-options="o as \'app.observationsystem.\'+o | translate for o in [\'visual\',\'teledetection\',\'termographic\']" class="form-control-static"> {{ (vm.model.observationSystem ? \'app.observationsystem.\'+vm.model.observationSystem : \'\') | translate }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.observername">observerName</label> <div> <p editable-text="vm.model.observerName" class="form-control-static" ng-bind="vm.model.observerName"> </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.observerrole">observerRole</label> <div> <p editable-text="vm.model.observerRole" class="form-control-static" ng-bind="vm.model.observerRole"> </p> </div> </div> </div> </div> </div> </uib-tab>  <uib-tab index="2" heading="{{\'app.pollutionreport.detail.tab.meteo\' | translate }}"> <div class="modal-body"> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label"><span data-translate="app.pollutionreport.winddirection"></span> <a href="" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.winddirection\' | translate}}" popover-append-to-body="true"> <i style="padding-left:10px;" class="fa fa-info"></i></a></label> <div> <p editable-number="vm.model.windDirection" class="form-control-static" ng-bind="vm.model.windDirection"> </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div ng-class="{error: detail_itemeditform.distance.$invalid}" class="form-group"> <label class="control-label" data-translate="app.pollutionreport.windspeed">windSpeed</label> <div ng-hide="vm.detailForm.$visible"> <p class="form-control-static">{{vm.model.windSpeed}} <small>{{vm.model.windSpeedUnit}}</small> </p> </div> <div ng-show="vm.detailForm.$visible" class="input-group"> <input id="_windspeed_id" name="windSpeed" min="0" step="1" type="number" class="form-control" ng-model="vm.model.windSpeed"> <div class="input-group-btn"> <button class="btn btn-default" href="javascript:void()" data-toggle="dropdown"> <span data-translate="{{vm.model.windSpeedUnit ? \'app.windspeedunit.\'+vm.model.windSpeedUnit : \'\'}}"></span> <i class="caret"> </i></button> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'knots\'" data-translate="app.windspeedunit.knots"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'m/s\'" data-translate="app.windspeedunit.m/s"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'km/h\'" data-translate="app.windspeedunit.km/h"></a></li> </ul> </div> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label"> <span data-translate="app.pollutionreport.seadirection"></span> <a href="" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.seadirection\' | translate}}" popover-append-to-body="true"> <i style="padding-left:10px;" class="fa fa-info"></i></a> </label> <div> <p editable-number="vm.model.seaDirection" e-max="360" e-min="0" class="form-control-static" ng-bind="vm.model.seaDirection"> </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.seastatus">seaStatus</label> <div> <p editable-select="vm.model.seaStatus" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.seastatus" class="form-control-static"> {{vm.translateConfig(\'seastatus\',vm.model.seaStatus)}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.visibilitystatus">visibilityStatus</label> <div> <p editable-select="vm.model.visibilityStatus" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.visibilitystatus" class="form-control-static"> {{vm.translateConfig(\'visibilitystatus\',vm.model.visibilityStatus)}} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.cloudcover">cloudCover</label> <div> <p editable-select="vm.model.cloudCover" e-ng-options="v as v for v in \'0;1/4;2/4;3/4;4/4\'.split(\';\')" class="form-control-static"> {{ vm.model.cloudCover }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.cloudheight">cloudHeight</label> <div> <p editable-select="vm.model.cloudHeight" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.cloudheight" class="form-control-static"> {{vm.translateConfig(\'cloudheight\',vm.model.cloudHeight)}} </p> </div> </div> </div> </div> </div> </uib-tab>  <uib-tab index="3" heading="{{\'app.pollutionreport.detail.tab.map\' | translate }}"> <div class="panel full-invisible viewport100" zoom-in=""> <pollutionreport-map pollutionreport="vm.model" resources="spills;pollutionsources;photos;comments"></pollutionreport-map> </div> </uib-tab>  <uib-tab index="4" heading="{{\'app.pollutionreport.detail.tab.signeddocument\' | translate }}"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputFile.$invalid && (vm.form1.inputFile.$dirty || vm.form1.$submitted)}"> <label for="inputFile" class="control-label" data-translate="app.pollutionreport.file">MESSAGE</label> <p class="form-control-static"> {{vm.model.fileName || \'app.pollutionreport.createform.validate.fileEmpty\' | translate}} <a style="padding-left: 20px;" ng-show="vm.model.fileName && !vm.detailForm.$visible" title="{{vm.model.fileName}}" href="" ng-click="vm.download($event)"><i class="ion-android-download"></i></a> <a style="padding-left: 20px;" ng-show="vm.model.fileName && vm.detailForm.$visible" title="{{vm.model.fileName}}" href="" ng-click="vm.deleteFile()"><i class="ion-trash-b"></i> {{global.button.delete || translate}}</a> </p> <div> <input ng-show="vm.detailForm.$visible" type="file" id="inputFile" onchange="angular.element(this).scope().$emit(\'files_selected\',this.files)" accept="{{vm.allowedFileTypes | joinBy:\',\'}}"> </div> </div> </uib-tab> </uib-tabset> </div>  </form>'),e.put("app/pages/pollutionreports/detail-mobile/pollutionreport-detail-mobile.html",'<form id="fu_eu_arcopol_domain_pollution_PollutionReport" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate=""> <div class="panel tabs-panel horizontal-tabs none-padding"> <div class="btn-group pull-right" style="padding-top:6px; padding-right:6px;">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting" data-translate="global.button.accept"></button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.detailForm.$cancel()" ng-disabled="vm.detailForm.$waiting" data-translate="global.button.cancel"></button> </span>  <span ng-hide="vm.detailForm.$visible">  <button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b"></i> <span data-translate="global.button.remove"></span></button> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.detailForm.$show()"><i class="fa fa-pencil"></i><span data-translate="global.button.edit"></span></button> </span> </div> <div class="panel-body"> <uib-tabset class="tabset-primary">  <uib-tab index="0" heading="{{\'app.pollutionreport.detail.tab.observer\' | translate}}" class="active"> <div class="modal-body"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.reporttime">reportTime</label> <div> <p editable-datetime-local="vm.model.reportTime" class="form-control-static" e-step="60"> {{ vm.model.reportTime | date: \'dd/MM/yy HH:mm\' }} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.observername">observerName</label> <div> <p editable-text="vm.model.observerName" class="form-control-static" ng-bind="vm.model.observerName"> </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callerorganization">callerOrganization</label> <div> <p editable-text="vm.model.callerOrganization" class="form-control-static" ng-bind="vm.model.callerOrganization"> </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callernumber">callerNumber</label> <div> <p editable-text="vm.model.callerNumber" class="form-control-static" ng-bind="vm.model.callerNumber"> </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callertransporttype">callerTransportType</label> <div> <p editable-select="vm.model.callerTransportType" e-ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.callertransporttype" class="form-control-static"> {{::vm.translateConfig(\'callertransporttype\',vm.model.callerTransportType)}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.callertransportnumber">callerTransportNumber</label> <div> <p editable-text="vm.model.callerTransportNumber" class="form-control-static" ng-bind="vm.model.callerTransportNumber"> </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.observationsystem">observationSystem</label> <div> <p editable-select="vm.model.observationSystem" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.observationsystem" class="form-control-static"> {{::vm.translateConfig(\'observationsystem\',vm.model.observationSystem)}} </p> </div> </div> </div> </div> </div> </uib-tab>    <uib-tab index="1" heading="{{\'app.pollutionreport.detail.tab.meteo\' | translate }}"> <div class="modal-body"> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label"> <span data-translate="app.pollutionreport.winddirection"></span> <a href="" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.winddirection\' | translate}}" popover-append-to-body="true"> <i style="padding-left:10px;" class="fa fa-info"></i></a></label> <div> <p editable-number="vm.model.windDirection" class="form-control-static" ng-bind="vm.model.windDirection"> </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div ng-class="{error: detail_itemeditform.distance.$invalid}" class="form-group"> <label class="control-label" data-translate="app.pollutionreport.windspeed">windSpeed</label> <div ng-hide="vm.detailForm.$visible"> <p editable-text="_" class="form-control-static">{{vm.model.windSpeed}} <small>{{vm.model.windSpeedUnit}}</small> </p> </div> <div ng-show="vm.detailForm.$visible" class="input-group"> <input id="_windspeed_id" name="windSpeed" min="0" step="1" type="number" class="form-control" ng-model="vm.model.windSpeed"> <div class="input-group-btn"> <button class="btn btn-default" href="javascript:void()" data-toggle="dropdown"> <span data-translate="{{vm.model.windSpeedUnit ? \'app.windspeedunit.\'+vm.model.windSpeedUnit : \'\'}}"></span> <i class="caret"> </i></button> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'knots\'" data-translate="app.windspeedunit.knots"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'m/s\'" data-translate="app.windspeedunit.m/s"></a></li> <li><a href="javascript:void()" ng-click="vm.model.windSpeedUnit=\'km/h\'" data-translate="app.windspeedunit.km/h"></a></li> </ul> </div> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label"> <span data-translate="app.pollutionreport.seadirection"></span> <a href="" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.winddirection\' | translate}}" popover-append-to-body="true"> <i style="padding-left:10px;" class="fa fa-info"></i></a> </label> <div> <p editable-number="vm.model.seaDirection" e-max="360" e-min="0" class="form-control-static" ng-bind="vm.model.seaDirection"> </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.seastatus">seaStatus</label> <div> <p editable-select="vm.model.seaStatus" e-ng-options="v.value as v.bundle[vm.currentLang] for v in vm.seastatus" class="form-control-static"> {{::vm.translateConfig(\'seastatus\',vm.model.seaStatus)}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.visibilitystatus">visibilityStatus</label> <div> <p editable-select="vm.model.visibilityStatus" e-ng-options="v.value as v.bundle[vm.currentLang] for v in vm.visibilitystatus" class="form-control-static"> {{::vm.translateConfig(\'visibilitystatus\',vm.model.visibilityStatus)}} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.cloudcover">cloudCover</label> <div> <p editable-select="vm.model.cloudCover" e-ng-options="v as v for v in \'0;1/4;2/4;3/4;4/4\'.split(\';\')" class="form-control-static"> {{ vm.model.cloudCover }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionreport.cloudheight">cloudHeight</label> <div> <p editable-select="vm.model.cloudHeight" e-ng-options="v.value as v.bundle[vm.currentLang] for v in vm.cloudheight" class="form-control-static"> {{::vm.translateConfig(\'cloudheight\',vm.model.cloudHeight)}} </p> </div> </div> </div> </div> </div> </uib-tab> </uib-tabset> </div> </div> </form>'),e.put("app/pages/pollutionreports/dialogs/seadirection-info-dialog.html",'<div id="seadirection_info" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:800px;"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button> <br> </div> <div class="modal-body">   <img ng-src="images/rosa_vientos.png" style="width:100%"> </div></div>'),e.put("app/pages/pollutionreports/dialogs/winddirection-info-dialog.html",'<div id="winddirection_info" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:800px;"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button> <br> </div> <div class="modal-body">  <img ng-src="images/rosa_vientos.png" style="width:100%"> </div> </div>'),e.put("app/pages/pollutionreports/map/pollutionreport-map.html",'<div class="panel viewport100 none-padding">      <div class="panel-body"> <div>   </div> <div style="position:relative; width:100%; height:100%;" ng-mouseenter="updateSize()">  <div ng-hide="vm.hideLayersPanel" class="alert alert-info" style="position: absolute; top: 10px; left:40px; z-index:1020; opacity:0.9">  <div class="pull-right"> <span ng-if="vm.measure" class="label label-info">{{vm.measure.measure.toFixed(3) + " "+ vm.measure.units + (vm.measure.order==2 ? \'2\':\'\')}}</span> </div> <div ng-repeat="layer in vm.reportlayers"> <div style="display:inline-block; width:18px;"> <i ng-show="vm.worklayer.name==layer.name" class="ion-wrench"></i> </div> <label class="control-label" ng-style="!layer.active ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !layer.active}"> <input type="checkbox" ng-model="layer.visibility"> <span> {{layer.label | translate}} </span> </label> </div> <div class="text-right" style="padding-top:10px;" ng-if="vm.worklayer"> <i class="ion-wrench"></i>&#160; <small data-translate="app.page.pollutionreports.map.activelayer"></small> </div> </div> <div id="map" ol-map="vm.olmap" proxy-host="/arcopol/cgi-bin?targetURL=" class="olMap" options="{numZoomLevels: 20 }">  <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{prefix: \'EPSG:4326 (Lon|Lat) \',separator: \' | \',numDigits: 2}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureLength\')>=0}}" handler="OpenLayers.Handler.Path" ol-control-measure="measureAction($event)"> </ol-map-control> <ol-map-control name="MeasureArea" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measureArea\')>=0}}" handler="OpenLayers.Handler.Polygon" ol-control-measure="measureAction($event)"> </ol-map-control> <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group">  <div class="btn-group"> <a class="btn btn-default" title="{{ app.page.pollutionreports.map.centermap | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> </div> <div class="btn-group">   <a class="btn dropdown-toggle btn-default" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[vm.olmap.olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li>  </ul> </div> </div>   <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer>  <ol-layer name="GeoLocation" lyr-type="markers"> <ol-marker icon="assets/img/gsv_icon2.png" lonlat="{{vm.geoService.currentPosition(\'EPSG:900913\')}}" size="21,40"> </ol-marker> </ol-layer> <ol-layer ng-if="l!=vm.worklayer" ng-repeat="l in vm.reportlayers" name="{{l.name}}" lyr-type="vector" lyr-options="{{l.options}}" visibility="{{l.visibility}}" default-style="{{l.defaultStyle}}" temporary-style="{{l.temporaryStyle}}" select-style="{{l.selectStyle}}" ol-layer-moveend="vm.zoomToExtent($event)" ol-layer-featureselected="vm.featureSelected($event)" ol-layer-featureunselected="vm.featureUnselected($event)"> <ol-feature ng-repeat="item in vm.features[l.items] | filter:filterFeature" geometry="item.geometry" selected="item.id==vm.model.id" attributes="item" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Select\'+l.name}}" active="{{vm.map.action!=\'deletePoints\' && l.active}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer> <ol-layer ng-if="vm.worklayer" name="worklayer" lyr-type="vector" lyr-options="{{vm.worklayer.options}}" visibility="{{vm.map.action!=\'deletePoints\'}}" default-style="{{vm.worklayer.defaultStyle}}" temporary-style="{{vm.worklayer.temporaryStyle}}" select-style="{{vm.worklayer.selectStyle}}" virtual-style="{{vm.worklayer.virtualStyle}}" vertex-style="{{vm.worklayer.vertexStyle}}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.geometry" attributes="vm.model" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Create\'+vm.worklayer.name}}" active="{{vm.map.action==\'draw\'}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}" handler="{{vm.worklayer.handler}}" ol-layer-control-featureadded="vm.featureAdded($event)"> </ol-layer-control> <ol-layer-control name="{{\'Edit\'+vm.worklayer.name}}" active="{{vm.map.action==\'edit\'}}" ctrl-type="modifyFeature" handler="{{vm.worklayer.handler}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}"> </ol-layer-control> </ol-layer>  <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="gpoints" lyr-type="vector" default-style="{{vm.worklayer.temporaryStyle}}" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }"> <ol-feature geometry="vm.model.geometry" display-projection="EPSG:900913" selected="true" projection="EPSG:4326"> </ol-feature> </ol-layer> <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="points" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }" default-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" select-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 18 ,\'fillColor\': \'#FE9929\'}" ol-layer-featureselected="vm.confirmRemoveSelectedPoint($event)" ol-layer-featureunselected="vm.cancelRemoveSelectedPoint($event)"> <ol-feature ng-repeat="p in vm.feature.geometry.getVertices()" geometry="p" attributes="p" selected="{{vm.selectedPoint.id==p.id}}" style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="selectPointCtrl" active="{{vm.map.action==\'deletePoints\'}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer>  <div class="alert alert-info col-md-3" ng-if="vm.selectedPoint" style="position: absolute; top: 10px; left:430px; z-index:1030; border:2px solid;">  <strong><i class="icon-question-sign" data-translate="app.page.pollutionreports.map.confirm"> </i> </strong> <p data-translate="app.page.pollutionreports.map.confirmdeletepoint"> </p> <div class="btn-group"> <button ng-click="vm.removeSelectedPoint()" data-translate="global.button.yes"></button> <button ng-click="vm.cancelRemoveSelectedPoint()" data-translate="global.button.no"></button> </div> </div> </div> </div> </div> </div>'),e.put("app/pages/pollutionreports/print/pollutionreport-print.html",'<div style="background: white; padding-top:10px"> <table class="table table-bordered table-condensed table-print"> <tr> <th rowspan="2"><img src="assets/img/headXunta.png"></th> <th style="text-align:center;">PLAN CAMGAL</th> <th style="text-align:center;">Anexo</th> </tr> <tr> <td style="text-align:center;">POLREP</td> <td style="text-align:center;">IV.3 <br>VersiÃ³n 0</td> </tr> </table> <div> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="4" style="text-align:center; background: lightgray;"><strong>COMUNICANTE</strong></th> <th style="text-align:center; background: lightgray;"><strong>DESTINATARIO</strong></th> </tr> <tr> <td colspan="4">ORGANISMO: {{::vm.model.callerOrganization}}</td> <th>SUBDIRECCIÃN XERAL DE GARDACOSTAS DE GALICIA</th> </tr> <tr> <td colspan="4">OBSERVADOR(nÂº axente): {{::vm.model.callerNumber}}</td> <th rowspan="2"> <div>COORDINADOR/A OPERACIÃNS DO MAR</div> <div>COORDINADOR/A OPERACIÃNS EN TERRA</div> <br> <br> <div>SALA DE OPERACIÃNS DA SUBDIRECCIÃNXERAL DE GARDACOSTAS DE GALICIA</div> </th> </tr> <tr> <td colspan="4"> <div ng-repeat="o in vm.callertransporttype track by o.id"> <span ng-class="{\'label-important\':vm.model.callerTransportType==o.value}"> {{::o.bundle[vm.currentLang]}}</span> </div> </td> </tr> <tr> <td>DATA:</td> <td>{{::vm.model.reportTime | date:\'dd\'}}</td> <td>{{::vm.model.reportTime | date:\'MM\'}}</td> <td>{{::vm.model.reportTime | date:\'yyyy\'}}</td> <td>TEL: 981544070 <span class="pull-right"> FAX: 981544031</span></td> </tr> </table>  <div> <div ng-repeat="spill in vm.model.spills track by $index"> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th colspan="7" style="text-align:center; background: lightgray;"><strong>CARACTERÃSTICAS DA CONTAMINACIÃN ({{spill.code}})</strong></th> </tr> <tr> <th colspan="4"><strong>DATA E HORA LOCAL DA OBSERVACÃON</strong></th> <th colspan="3"><strong>EXTENSIÃN DA ÃREA AFECTADA</strong></th> </tr> <tr> <td>DÃA</td> <td>MES</td> <td>ANO</td> <td>HORA</td> <td>LONGO</td> <td>ANCHO</td> <td>SUPERFICIE</td> </tr> <tr> <td>{{spill.observedTime | date: \'dd\'}}</td> <td>{{spill.observedTime | date: \'MM\'}}</td> <td>{{spill.observedTime | date: \'yyyy\'}}</td> <td>{{spill.observedTime | date: \'HH:mm\'}}</td> <td>{{spill.height}}</td> <td>{{spill.width}}</td> <td>{{spill.area}}</td> </tr> </table> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th colspan="4"><strong>SITUACIÃN XEOGRÃFICA DO CENTRO DA MANCHA</strong></th> </tr> <tr> <td>LATITUDE</td> <td>LONXITUDE</td> <td></td> <td></td> </tr> <tr> <td>{{spill.latitude | lonlat:\'lat\'}}</td> <td>{{spill.longitude | lonlat:\'lon\' }}</td>  <td>{{spill.demora}}</td> <td>{{spill.distance}}{{spill.distanceUnit}}</td> </tr> <tr> <td>DERIVA DA MANCHA:</td> <td colspan="3">RUMBO: {{spill.course}} <span class="pull-right"> VELOCIDADE: {{spill.speed}} {{spill.speedUnit}}</span></td> </tr> </table> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th><strong>APARENCIA DA MANCHA</strong></th> </tr> <tr ng-repeat="o in vm.spillaparience track by $index"> <td><span ng-class="{\'label-important\': spill.spillAparience==o.value}">{{o.bundle[vm.currentLang]}}</span></td> </tr> </table> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th><strong>ASPECTO DA MANCHA</strong></th> </tr> <tr ng-repeat="o in vm.spillaspect track by o.id"> <td><span ng-class="{\'label-important\': spill.spillAspect==o.value}">{{o.bundle[vm.currentLang]}}</span></td> </tr>  </table> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th><strong>NATUREZA DA CONTAMINACIÃN</strong></th> </tr> <tr ng-repeat="o in vm.pollutantorigin track by o.id"> <td><span ng-class="{\'label-important\': spill.pollutantOrigin==o.value}">{{o.bundle[vm.currentLang]}}</span></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th><strong>DESCRIPCIÃN DO AXENTE CONTAMINANTE</strong></th> </tr> <tr> <td>{{spill.description}}</td> </tr> <tr ng-if="!vm.model.spills"> <td></td> </tr> <tr ng-if="!vm.model.spills"> <td></td> </tr> </table> </div>  </div>  <div> <div ng-repeat="item in vm.model.pollutionSources track by $index"> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th colspan="3" style="text-align:center; background: lightgray;"><strong>ORIXE DA CONTAMINACIÃN ({{::item.code}})</strong></th> </tr> <tr ng-repeat="o in vm.sourcetype track by o.id"> <td><span ng-class="{\'label-important\': item.sourceType==o.value}">{{::o.bundle[vm.currentLang]}}</span></td> </tr> <tr> <td colspan="3"><strong>IDENTIFICACIÃN DA FONTE DE CONTAMINACIÃN</strong></td> </tr> <tr> <td colspan="3">{{item.name}}: {{item.description}}</td> </tr> <tr ng-if="!vm.model.pollutionSources"> <td colspan="3"></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="3"><strong>CAUSA DA CONTAMINACIÃN(1)</strong></th> </tr> <tr ng-repeat="o in vm.pollutioncause track by o.id"> <td><span ng-class="{\'label-important\': item.pollutionCause==o.value}">{{::o.bundle[vm.currentLang]}}</span></td> </tr> </table> </div> </div> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th colspan="4" style="text-align:center; background: lightgray;"><strong>CONDICIÃNS METEOROLÃXICAS DA ZONA</strong></th> </tr> <tr> <td colspan="2">VENTO</td> <td colspan="2">MAR</td> </tr> <tr> <td>DIRECCION</td> <td>FORZA</td> <td>DIRECCIÃN</td> <td>ESTADO</td> </tr> <tr> <td>{{::vm.model.windDirection}}</td> <td>{{::vm.model.windSpeed}} {{::vm.model.windSpeedUnit}}</td> <td>{{::vm.model.seaDirection}}</td> <td>{{::vm.model.seaStatus}}</td> </tr> </table> <table class="table table-bordered table-condensed table-print" style="margin:0px;"> <tr> <th colspan="3"><strong>VISIBILIDADE (1)</strong></th> </tr> <tr ng-repeat="o in vm.visibilitystatus track by o.id"> <td><span ng-class="{\'label-important\': vm.model.visibilityStatus==o.value}">{{::o.bundle[vm.currentLang]}}</span></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="5"><strong>NUBOSIDADE</strong></th> </tr> <tr> <td colspan="4">CEO CUBERTO (1)</td> <td>ALTURA DAS NUBES (medios aereos)</td> </tr> <tr> <td><span ng-class="{\'label-important\': vm.model.cloudCover==\'1/4\'}">1/4</span></td> <td><span ng-class="{\'label-important\': vm.model.cloudCover==\'2/4\'}">2/4</span></td> <td><span ng-class="{\'label-important\': vm.model.cloudCover==\'3/4\'}">3/4</span></td> <td><span ng-class="{\'label-important\': vm.model.cloudCover==\'4/4\'}">4/4</span></td> <td>{{::vm.translateConfig(\'cloudheight\',vm.model.cloudHeight)}}</td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="3"><strong>SISTEMA DE OBSERVACIÃN UTILIZADO (1)</strong></th> </tr> <tr ng-repeat="o in vm.observationsystem track by o.id"> <td><span ng-class="{\'label-important\': vm.model.observationSystem==o.value}">{{::o.bundle[vm.currentLang]}}</span></td> </tr> </table> <div> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="4" style="text-align:center; background: lightgray;">PROBAS GRÃFICAS OBTIDAS (1)</th> </tr> <tr> <td>FOTOGRAFÃAS</td> <td>VÃDEO</td> <td>OUTRAS</td> <td>NINGUNHA</td> </tr> </table>  <div id="photo-thumbnail" class="collapse in" ng-if="vm.model.photos.length"> <ul class="thumbnails"> <li ng-repeat="item in vm.model.photos track by $index" class="span4"> <div class="thumbnail"> <a href="#myModal" data-toggle="modal" data-img-url="api/photos/{{item.id}}/image" onclick="angular.element(\'#myModal img\').attr(\'src\', angular.element(this).attr(\'data-img-url\'));"> <img http-src="api/photos/{{item.id}}/download"> </a> <div class="caption"> <legend>{{item.code}} <span style="padding-left:10px" class="text-right"> <span style="font-size: small" class="text-muted"> {{item.userLogin.fullName}}: {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}} </span> </span></legend> <p>{{item.comments}}</p> <p class="text-right"> <small> <i ng-if="item.geometry" class="ion-ios-location"></i>&#160; {{item.geometry | lonlat: \'point\'}} </small> </p> </div> </div> </li> </ul> </div> </div> <table class="table table-bordered table-condensed table-print"> <tr> <th style="text-align:center; background: lightgray;">INFORMACIÃN COMPLEMENTARIA</th> </tr> <tr> <td> <div ng-repeat="item in vm.model.comments track by $index"> <legend>{{item.code}} <span style="padding-left:10px" class="pull-right"> <small class="text-muted">{{item.userLogin.fullName}}: {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small> </span> </legend> <p>{{item.comment}}</p> <p class="text-right"> <small> <i ng-if="item.geometry" class="ion-ios-location"></i>&#160; {{item.geometry | lonlat: \'point\'}} </small> </p> </div> </td> </tr> <tr ng-if="!vm.model.comments"> <td></td> </tr> <tr ng-if="!vm.model.comments"> <td></td> </tr> <tr ng-if="!vm.model.comments"> <td></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="2" style="text-align:center; background: lightgray;">IDENTIFICADOR DO OBSERVADOR</th> </tr> <tr> <th>NOME E APELIDOS:</th> <th>FIRMA</th> </tr> <tr> <td>{{::vm.model.observerName}}</td> <td rowspan="3"></td> </tr> <tr> <th>CARGO (nÂº de axente no seu caso):</th> </tr> <tr> <td>{{::vm.model.observerRole}}</td> </tr> </table> <p style="font-weight: bold;">Unha vez recibido os operadores de sala daranlle un nÃºmero e o envirÃ¡n o POLREP ao/Ã¡ director do COP Tool e mÃ¡is aos/Ã¡s coordinadores de operaciÃ³ns.</p> <table class="table table-bordered table-condensed table-print"> <tr> <td>NÂº(a cubrir polo operador/a da Sala de OperaciÃ³ns de Gardacostas de Galicia)</td> </tr> <tr> <td>Ano (aaaa)/Mes(mm)/nÂº(0000)</td> </tr> </table> </div> </div>'),
e.put("app/pages/pollutionreports/search/pollutionreports-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-6 col-xs-12"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.login" ng-model-options="{ updateOn: \'blur\' }" type="text"> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="input-group input-group-sm"> <input class="form-control date-picker" date-range-picker="" type="text" ng-model="vm.searchTerms.reportTime"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </div> </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="panel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:180px;" st-sort="reportTime" data-translate="app.pollutionreport.reporttime">reportTime</th> <th st-sort="observerName" data-translate="app.pollutionreport.observer"></th> <th st-sort="callerOrganization" data-translate="app.pollutionreport.callerorganization"></th> <th st-sort="callerNumber" data-translate="app.pollutionreport.callernumber"></th> <th data-translate="app.pollutionreport.pollutionepisode"></th> <th ng-if-role="ROLE_ADMIN,ROLE_POLREP" class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td> <a ng-if-role="ROLE_ADMIN,ROLE_POLREP" href="" ng-click="navigate($event, \'pollutionreports.detail.spills\',{id:item.id})">{{item.reportTime | date:\'dd/MM/yyyy HH:mm\'}}</a> <a ng-if-role="ROLE_POLLUTION_EPISODE" ng-if-not-role="ROLE_POLREP" href="" ng-click="navigate($event, \'pollutionreports.detail.print\',{id:item.id})">{{item.reportTime | date:\'dd/MM/yyyy HH:mm\'}}</a> </td> <td><small>{{item.observerName}}</small></td> <td>{{item.callerOrganization}}</td> <td>{{item.callerNumber}}</td> <td>{{item.pollutionEpisodeName}}</td> <td class="text-right none-padding nowrap" ng-if-role="ROLE_ADMIN,ROLE_POLREP"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="pollutionreports.detail({\'id\':item.id})" data-translate="global.button.detail"></a></li> <li role="menuitem"><a href="" ng-click="vm.removeReport(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div>   </td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.doSearch()"></uib-pagination> </div> </div> </div> '),e.put("app/pages/pollutionreports/signeddocument/report-signeddocument.html",' <div class="modal-body"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputFile.$invalid && (vm.form1.inputFile.$dirty || vm.form1.$submitted)}"> <label for="inputFile" class="control-label" data-translate="app.pollutionreport.file">MESSAGE</label> <p class="form-control-static"> {{vm.model.fileName || \'app.pollutionreport.createform.validate.fileEmpty\' | translate}} <a style="padding-left: 20px;" ng-show="vm.model.fileName" title="{{vm.model.fileName}}" href="" ng-click="vm.download($event)"><i class="ion-android-download"></i></a> <a style="padding-left: 20px;" ng-show="vm.model.fileName" title="{{vm.model.fileName}}" href="" ng-click="vm.deleteFile()"><i class="ion-trash-b"></i> {{global.button.delete || translate}}</a> </p> <div class="form-group"> <div class="input-group"> <input class="form-control" type="file" id="inputFile" onchange="angular.element(this).scope().$emit(\'files_selected\',this.files)" accept="{{vm.allowedFileTypes | joinBy:\',\'}}" style="display:none;"> <button class="btn btn-sm btn-primary" type="button" onclick="document.getElementById(\'inputFile\').click();" data-translate="global.button.selectfile"></button>  </div> </div> </div> </div> </div>'),e.put("app/pages/scatreports/create/scatreport-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.scatreport.home.createLabel"></h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="label_eu_arcopol_domain_pollution_scatreport_name">label_name</label> <input type="text" inputname="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_scatreport_name">err_name</span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.newForm.inputStatus.$invalid && (vm.newForm.inputStatus.$dirty || vm.$submitted)}"> <label for="inputStatus" data-translate="label_eu_arcopol_domain_pollution_scatreport_status">label_status</label> <select name="inputStatus" id="inputStatus" ng-options="v as \'label_eu_arcopol_domain_pollution_scatreport_status_\'+v | translate for v in [\'NEW\',\'OPEN\'.\'CLOSE\']" required="" ng-model="vm.model.status" class="form-control"></select> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_scatreport_status">err_status</span> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.newForm.inputBeginTime.$invalid && (vm.newForm.inputBeginTime.$dirty || vm.newForm.$submitted)}"> <label for="inputBeginTime" data-translate="label_eu_arcopol_domain_pollution_scatreport_begintime">label_beginTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputBeginTime" id="inputBeginTime" step="900" class="form-control" ng-model="vm.model.beginTime" required=""> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_scatreport_beginTime">err_beginTime</span> </div> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.newForm.inputEndTime.$invalid && (vm.newForm.inputEndTime.$dirty || vm.newForm.$submitted)}"> <label for="inputEndTime" data-translate="label_eu_arcopol_domain_pollution_scatreport_begintime">label_endtime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputEndTime" id="inputEndTime" step="900" class="form-control" ng-model="vm.model.endTime" required=""> <span class="help-block error-block basic-block" data-translate="err_eu_arcopol_domain_pollution_scatreport_endTime">err_endTime</span> </div> </div> </div> </div> </div> <div class="form-group"> <label for="inputDescription" data-translate="label_eu_arcopol_domain_pollution_scatreport_description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div> <div class="detail" ng-controller="ScatReportCtrl"> <form:detail id="fu_eu_arcopol_domain_pollution_ScatReport" modelattribute="model" view="detail.view" operations="none" path="scatreports" versionfield="Version"> <div class="row-fluid"> <field:input field="name" cssclass="span8" id="c_eu_arcopol_domain_pollution_ScatReport_name" required="true" z="user-managed"> <field:select field="status" cssclass="span4" id="c_eu_arcopol_domain_base_reportstatus" options="NEW;OPEN;CLOSE" required="true" translateoptions="true"> </field:select></field:input></div> <div class="row-fluid"> <field:input field="description" id="c_eu_arcopol_domain_pollution_ScatReport_description" validationmessagecode="field_invalid" required="false" z="user-managed"> </field:input></div> <div class="row-fluid"> <field:datetime datetimepattern="dd/MM/yyyy HH:mm" cssclass="span6" field="beginTime" id="c_eu_arcopol_domain_pollution_ScatReport_beginTime"> <field:datetime datetimepattern="dd/MM/yyyy HH:mm" cssclass="span6" field="endTime" nginitial="empty" required="false" id="c_eu_arcopol_domain_pollution_ScatReport_endTime"> </field:datetime></field:datetime></div> </form:detail>  <div class="map-panel"> <jsp:include page="ngmap.jspx"> </jsp:include></div> </div>'),e.put("app/pages/scatreports/create-wizard/scatreport-create-wizard.html",'<div>  <div class="modal-header clearfix"> <h3> <span data-translate="app.scatreport.home.createLabel"></span> <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.cancel()">&times;</button>  </h3> </div> <div class="modal-body"> <ba-wizard on-finish="vm.ok()" current-step="vm.currentStep"> <ba-wizard-step step-title="{{\'app.scatreport.createform.step1\' | translate}}" form="vm.form1" current-step="true"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form1.inputIncident.$invalid && (vm.form1.inputIncident.$dirty || vm.form1.$submitted)}"> <label for="inputIncident" class="control-label" data-translate="app.scatreport.incident"></label> <input type="text" name="inputIncident" id="inputIncident" class="form-control" ng-model="vm.model.incident" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputComuneRegion.$invalid && (vm.form1.inputComuneRegion.$dirty || vm.form1.$submitted)}"> <label for="inputComuneRegion" class="control-label" data-translate="app.scatreport.communeregion"></label> <input type="text" name="inputComuneRegion" id="inputComuneRegion" class="form-control" ng-model="vm.model.communeRegion"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form1.inputReportTime.$invalid && (vm.form1.inputReportTime.$dirty || vm.form1.$submitted)}"> <label for="inputReportTime" class="control-label" data-translate="app.scatreport.reporttime"></label> <input type="date" name="inputReportTime" id="inputReportTime" class="form-control" ng-model="vm.model.reportTime" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputSurveyStartTime.$invalid && (vm.form1.inputSurveyStartTime.$dirty || vm.form1.$submitted)}"> <label for="inputSurveyStartTime" class="control-label" data-translate="app.scatreport.surveystarttime"></label> <input type="text" name="inputSurveyStartTime" id="inputSurveyStartTime" placeholder="HH:mm" ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/" class="form-control" ng-model="vm.model.surveyStartTime"> <small ng-show="vm.form1.inputSurveyStartTime.$error.required" class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> <small ng-show="vm.form1.inputSurveyStartTime.$error.pattern" class="help-block error-block basic-block" data-translate="global.messages.validate.text.pattern" data-translate-values="{\'format\':\'HH:mm\'}"></small> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputSurveyEndTime.$invalid && (vm.form1.inputSurveyEndTime.$dirty || vm.form1.$submitted)}"> <label for="inputSurveyEndTime" class="control-label" data-translate="app.scatreport.surveyendtime"></label> <input type="text" name="inputSurveyEndTime" id="inputSurveyEndTime" placeholder="HH:mm" ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/" class="form-control" ng-model="vm.model.surveyEndTime"> <small ng-show="vm.form1.inputSurveyEndTime.$error.pattern" class="help-block error-block basic-block" data-translate="global.messages.validate.text.pattern" data-translate-values="{\'format\':\'HH:mm\'}"></small> <small ng-show="vm.form1.inputSurveyEndTime.$error.required" class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputWeatherInfo.$invalid && (vm.form1.inputWeatherInfo.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.scatreport.weatherinfo"></label> <select name="inputWeatherInfo" class="form-control" ng-model="vm.model.weatherInfo" ng-options="o as \'app.weatherinfo.\' +o | translate for o in \'sun;clouds;fog;rain;snow;windy\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputTideType.$invalid && (vm.form1.inputTideType.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.scatreport.tidetype"></label> <select name="inputTideType" class="form-control" ng-model="vm.model.tideType" ng-options="o as \'app.tidetype.\' +o | translate for o in \'hightide;lowtide;notide\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputTydeHeight.$invalid && (vm.form1.inputTydeHeight.$dirty || vm.form1.$submitted)}"> <label for="inputTydeHeight" class="control-label" data-translate="app.scatreport.tideheight"></label> <input type="number" min="0" max="10" step="0.1" name="inputTydeHeight" id="inputTydeHeight" class="form-control" ng-model="vm.model.tideHeight"> <small ng-show="vm.form1.inputTydeHeight.$error.max" class="help-block error-block basic-block" data-translate="global.messages.validate.number.max" data-translate-values="{\'max\':\'10\'}"></small> <small ng-show="vm.form1.inputTydeHeight.$error.min" class="help-block error-block basic-block" data-translate="global.messages.validate.number.min" data-translate-values="{\'min\':\'0\'}"></small> </div> </div> </div> </form> </ba-wizard-step>  <ba-wizard-step step-title="{{\'app.scatreport.createform.step3\' | translate}}" form="vm.form3"> <form name="vm.form3" novalidate=""> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form3.inputsegmentId.$invalid && (vm.form3.inputsegmentId.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.segment.segmentid"></label> <input id="inputsegmentId" class="form-control" type="text" ng-model="vm.model.segment.segmentId" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group required"> <label class="control-label" data-translate="app.segment.sitename"></label> <input id="inputsiteName" class="form-control" type="text" ng-model="vm.model.segment.siteName" required=""> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.segment.segmentlength"></label> <div class="input-group"> <input id="inputsegmentLength" class="form-control" type="number" min="0" step="0.1" ng-model="vm.model.segment.segmentLength"> <div class="input-group-btn"> <button type="button" class="btn" ng-class="{true: \'btn-primary\'}[vm.map.action==\'measuresegmentLength\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="vm.toggleMapAction(\'measuresegmentLength\')"> <i class="ion-arrow-resize"></i></button> </div> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.segment.lengthsurveyed"></label> <div class="input-group"> <input id="inputlengthSurveyed" class="form-control" type="number" min="0" step="0.1" ng-model="vm.model.segment.lengthSurveyed"> <div class="input-group-btn"> <button type="button" class="btn" ng-class="{true: \'btn-primary\'}[vm.map.action==\'measurelengthSurveyed\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="vm.toggleMapAction(\'measurelengthSurveyed\')"> <i class="ion-arrow-resize"></i></button> </div> </div> </div> </div> </div> </form> </ba-wizard-step> </ba-wizard> </div> <div class="modal-body" ng-if="vm.currentStep==1"> <scatreport-create-map scatreport="vm.model"></scatreport-create-map> </div> </div>'),e.put("app/pages/scatreports/create-wizard-btn/scatreport-create-wizard-dlg.html",'<div class="panel full-invisible">  <div class="panel-heading clearfix"> <div class="panel-tittle"> <h3> <span data-translate="app.scatreport.home.createLabel"></span> <button type="button" title="{{\'global.button.cancel\' | translate}}" class="btn btn-default btn-sm pull-right" ng-click="vm.cancel()"><span data-translate="global.button.cancel"></span></button> </h3> </div> </div> <div class="panel-body"> <ba-wizard on-finish="vm.ok()" current-step="vm.currentStep"> <ba-wizard-step step-title="{{\'app.scatreport.createform.step1\' | translate}}" form="vm.form1" current-step="true"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form1.inputIncident.$invalid && (vm.form1.inputIncident.$dirty || vm.form1.$submitted)}"> <label for="inputIncident" class="control-label" data-translate="app.scatreport.incident"></label> <input type="text" name="inputIncident" id="inputIncident" class="form-control" ng-model="vm.model.incident" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputComuneRegion.$invalid && (vm.form1.inputComuneRegion.$dirty || vm.form1.$submitted)}"> <label for="inputComuneRegion" class="control-label" data-translate="app.scatreport.communeregion"></label> <input type="text" name="inputComuneRegion" id="inputComuneRegion" class="form-control" ng-model="vm.model.communeRegion"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form1.inputReportTime.$invalid && (vm.form1.inputReportTime.$dirty || vm.form1.$submitted)}"> <label for="inputReportTime" class="control-label" data-translate="app.scatreport.reporttime"></label> <input type="datetime-local" name="inputReportTime" id="inputReportTime" class="form-control" ng-model="vm.model.reportTime" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputSurveyStartTime.$invalid && (vm.form1.inputSurveyStartTime.$dirty || vm.form1.$submitted)}"> <label for="inputSurveyStartTime" class="control-label" data-translate="app.scatreport.surveystarttime"></label> <input type="text" name="inputSurveyStartTime" id="inputSurveyStartTime" placeholder="HH:mm" ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/" class="form-control" ng-model="vm.model.surveyStartTime"> <small ng-show="vm.form1.inputSurveyStartTime.$error.required" class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> <small ng-show="vm.form1.inputSurveyStartTime.$error.pattern" class="help-block error-block basic-block" data-translate="global.messages.validate.text.pattern" data-translate-values="{\'format\':\'HH:mm\'}"></small> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputSurveyEndTime.$invalid && (vm.form1.inputSurveyEndTime.$dirty || vm.form1.$submitted)}"> <label for="inputSurveyEndTime" class="control-label" data-translate="app.scatreport.surveyendtime"></label> <input type="text" name="inputSurveyEndTime" id="inputSurveyEndTime" placeholder="HH:mm" ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/" class="form-control" ng-model="vm.model.surveyEndTime"> <small ng-show="vm.form1.inputSurveyEndTime.$error.pattern" class="help-block error-block basic-block" data-translate="global.messages.validate.text.pattern" data-translate-values="{\'format\':\'HH:mm\'}"></small> <small ng-show="vm.form1.inputSurveyEndTime.$error.required" class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputWeatherInfo.$invalid && (vm.form1.inputWeatherInfo.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.scatreport.weatherinfo"></label> <select name="inputWeatherInfo" class="form-control" ng-model="vm.model.weatherInfo" ng-options="o as \'app.weatherinfo.\' +o | translate for o in \'sun;clouds;fog;rain;snow;windy\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputTideType.$invalid && (vm.form1.inputTideType.$dirty || vm.form1.$submitted)}"> <label class="control-label" data-translate="app.scatreport.tidetype"></label> <select name="inputTideType" class="form-control" ng-model="vm.model.tideType" ng-options="o as \'app.tidetype.\' +o | translate for o in \'hightide;lowtide;notide\'.split(\';\')"> </select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputTydeHeight.$invalid && (vm.form1.inputTydeHeight.$dirty || vm.form1.$submitted)}"> <label for="inputTydeHeight" class="control-label" data-translate="app.scatreport.tideheight"></label> <input type="number" min="0" max="10" step="0.1" name="inputTydeHeight" id="inputTydeHeight" class="form-control" ng-model="vm.model.tideHeight"> <small ng-show="vm.form1.inputTydeHeight.$error.max" class="help-block error-block basic-block" data-translate="global.messages.validate.number.max" data-translate-values="{\'max\':\'10\'}"></small> <small ng-show="vm.form1.inputTydeHeight.$error.min" class="help-block error-block basic-block" data-translate="global.messages.validate.number.min" data-translate-values="{\'min\':\'0\'}"></small> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.scatreport.createform.step2\' | translate}}"> <form name="vm.form2" novalidate=""> <table class="table table-condensed table-bordered"> <thead> <tr> <th style="width:20px;"><i class="ion-trash-b"></i></th> <th><a ng-click="predicate = \'conctactName\'; reverse=!reverse" data-translate="app.contact.contactname"></a></th> <th><a ng-click="predicate = \'organisation\'; reverse=!reverse" data-translate="app.contact.organization"></a></th> <th style="width:220px;" data-translate="app.contact.phonenumber"><a></a></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.contacts | orderBy:predicate:reverse"> <td><a title="{{\'global.button.remove\' | translate}}" ng-click="vm.removeContact(item)"><i class="ion-trash-b"></i></a></td> <td>{{item.contactName}}</td> <td>{{item.organisation}}</td> <td>{{item.phoneNumber}}</td> </tr> </tbody> <tfoot> <tr> <td>  </td> <td> <input id="icontactName" name="contactName" type="text" placeholder="{{\'app.contact.contactname\' | translate}}" ng-model="vm.newInstance.contactName" class="form-control input-sm input-block-level" required="required"> <div class="help-block"> <span ng-show="contactForm.phoneNumber.$invalid" class="text-error help-inline"><spring:message code="field_invalid_phonenumber"></spring:message></span> <span ng-show="contactForm.contactName.$invalid" class="text-error help-inline"><spring:message code="field_required_contactname"></spring:message></span> </div> </td> <td> <input name="organisation" type="text" placeholder="{{\'app.contact.organization\' | translate}}" ng-model="vm.newInstance.organisation" class="form-control input-sm input-block-level"> </td> <td> <div class="input-group"> <input name="phoneNumber" type="text" placeholder="{{\'app.contact.phonenumber\' | translate}}" ng-model="vm.newInstance.phoneNumber" ng-pattern="/(^(\\+?\\-? *[0-9]+)([,0-9 ]*)([0-9 ])*$)|(^ *$)/" class="form-control input-sm"> <span class="input-group-btn"> <button ng-disabled="vm.form2.$invalid" ng-click="vm.addContact()" class="btn btn-sm btn-primary"><span data-translate="global.button.add"></span></button> </span> </div> </td> </tr> </tfoot> </table> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.scatreport.createform.step3\' | translate}}" form="vm.form3"> <form name="vm.form3" novalidate=""> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.form3.inputsegmentId.$invalid && (vm.form3.inputsegmentId.$dirty || vm.form3.$submitted)}"> <label class="control-label" data-translate="app.segment.segmentid"></label> <input id="inputsegmentId" class="form-control" type="text" ng-model="vm.model.segment.segmentId" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.segment.sitename"></label> <input id="inputsiteName" class="form-control" type="text" ng-model="vm.model.segment.siteName"> </div> </div> </div> </form> </ba-wizard-step> </ba-wizard> <div ng-if="vm.currentStep==2" style="width:100%; height:512px"> <scatreport-create-map scatreport="vm.model"></scatreport-create-map> </div> </div> </div>'),e.put("app/pages/scatreports/detail/scatreport-detail.html",'<div> <div class="panel full-invisible tabs-panel horizontal-tabs" zoom-in=""> <form id="fu_eu_arcopol_domain_pollution_ScatReport" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate="novalidate" autocomplete="off"> <div class="bnt-group pull-right" style="padding-top:6px; padding-right:6px;" ng-if-permission="ROLE_ADMIN,ROLE_SCAT_MANAGER">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting"><span data-translate="global.button.accept"></span></button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.cancel()" ng-disabled="vm.detailForm.$waiting"><span data-translate="global.button.cancel"></span></button> </span>  <span ng-hide="vm.detailForm.$visible">  <button type="button" ng-click="vm.remove()" class="btn btn-default btn-xs btn-with-icon"><i class="ion-trash-b"></i><span data-translate="global.button.remove"></span></button> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.edit()"><i class="fa fa-pencil"></i><span data-translate="global.button.edit"></span></button> </span> </div> </form> <uib-tabset class="tabset-primary">  <uib-tab index="0" heading="{{\'app.scatreport.detail.tab.generalinfo\' | translate}}" class="active"> <div class="modal-body"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.incident">incident </label> <div> <p editable-text="vm.model.incident" class="form-control-static" e-name="incident" e-form="vm.detailForm" ng-bind="vm.model.incident"> </p> </div> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.communeregion">communeRegion</label> <div> <p editable-text="vm.model.communeRegion" class="form-control-static" e-name="communeRegion" e-form="vm.detailForm"> {{vm.model.communeRegion}}</p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-6"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.surveystarttime">surveyStartTime</label> <div> <p editable-text="vm.model.surveyStartTime" e-form="vm.detailForm" class="form-control-static" e-name="surveyStartTime" e-ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/" e-placeholder="HH:mm" ng-bind="vm.model.surveyStartTime"> </p> </div> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-6"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.surveyendtime">surveyEndTime</label> <div> <p editable-text="vm.model.surveyEndTime" e-form="vm.detailForm" class="form-control-static" e-name="surveyEndTime" e-ng-pattern="/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/" e-placeholder="HH:mm" ng-bind="vm.model.surveyEndTime"> </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.weatherinfo">weatherInfo</label> <div> <p editable-select="vm.model.weatherInfo" e-form="vm.detailForm" e-name="weatherInfo" e-ng-options="o as \'app.weatherinfo.\'+o | translate for o in \'sun;clouds;fog;rain;snow;windy\'.split(\';\')" class="form-control-static"> {{ (vm.model.weatherInfo ? \'app.weatherinfo.\'+vm.model.weatherInfo : \'\') | translate }} </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.tidetype">tideType</label> <div> <p editable-select="vm.model.tideType" e-form="vm.detailForm" e-name="tideType" e-ng-options="o as \'app.tidetype.\'+o | translate for o in \'hightide;lowtide;notide\'.split(\';\')" class="form-control-static"> {{ (vm.model.tideType ? \'app.tidetype.\'+vm.model.tideType : \'\') | translate }} </p> </div> </div> </div> <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.scatreport.tideheight">height</label> <div> <p class="form-control-static" e-name="tideHeight" ng-bind="vm.model.tideHeight" editable-number="vm.model.tideHeight" e-form="vm.detailForm" e-min="0" e-step="0.1"> </p> </div> </div> </div> </div> </div> </uib-tab>  <uib-tab index="1" heading="{{\'app.scatreport.detail.tab.surveyteams\' | translate }}"> <scatreport-users-table report="vm.model" disabled="false"></scatreport-users-table> <hr> <fieldset class="with-border"> <legend class="with-border" data-translate="app.scatreport.externalSurveyTeam"></legend> <scatreport-contacts scatreport="vm.model" edit-mode="vm.detailForm.$visible"></scatreport-contacts> </fieldset>   </uib-tab> <uib-tab index="2" heading="{{\'app.scatreport.detail.tab.segment\' | translate }}"> <div class="modal-body"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.segment.segmentid">segmentId</label> <div> <p editable-text="vm.model.segment.segmentId" e-name="segmentId" e-form="vm.detailForm" class="form-control-static" ng-bind="vm.model.segment.segmentId"> </p> </div> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.segment.sitename">siteName</label> <div> <p editable-text="vm.model.segment.siteName" e-form="vm.detailForm" e-name="siteName" class="form-control-static" ng-bind="vm.model.segment.siteName"> </p> </div> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.segment.segmentlength">segmentLength</label> <div ng-hide="vm.detailForm.$visible"> <p editable-text="_" class="form-control-static" ng-bind="vm.model.segment.segmentLength"> </p> </div> <div ng-show="vm.detailForm.$visible" class="input-group"> <input id="_segmentLength" name="inputsegmentLength" min="0" step="0.2" type="number" class="form-control" ng-model="vm.model.segment.segmentLength"> <div class="input-group-btn"> <button type="button" class="btn" ng-class="{true: \'btn-primary\'}[vm.map.action==\'measuresegmentLength\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="vm.toggleMapAction(\'measuresegmentLength\')"> <i class="ion-arrow-resize"></i></button> </div> </div> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.segment.lengthsurveyed">lengthSurveyed</label> <div ng-hide="vm.detailForm.$visible"> <p editable-text="_" class="form-control-static" ng-bind="vm.model.segment.lengthSurveyed"> </p> </div> <div ng-show="vm.detailForm.$visible" class="input-group"> <input id="_lengthSurveyed" name="inputlengthSurveyed" min="0" step="0.2" type="number" class="form-control" ng-model="vm.model.segment.lengthSurveyed"> <div class="input-group-btn"> <button type="button" class="btn" ng-class="{true: \'btn-primary\'}[vm.map.action==\'measurelengthSurveyed\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="vm.toggleMapAction(\'measurelengthSurveyed\')"> <i class="ion-arrow-resize"></i></button> </div> </div> </div> </div> </div> <div> <scatreport-create-map ng-show="vm.detailForm.$visible" scatreport="vm.model"></scatreport-create-map> <scatreport-map ng-if="!vm.detailForm.$visible" scatreport="vm.model" resources="spills;pollutionsources;photos;comments"></scatreport-map> </div> </div> </uib-tab>   </uib-tabset> </div> </div>'),
e.put("app/pages/scatreports/dialogs/seadirection-info-dialog.html",'<div id="seadirection_info" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:800px;"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button> <br> </div> <div class="modal-body">   <img ng-src="images/rosa_vientos.png" style="width:100%"> </div></div>'),e.put("app/pages/scatreports/dialogs/winddirection-info-dialog.html",'<div id="winddirection_info" class="auto-modal modal hide fade" tabindex="-1" role="dialog" aria-hidden="true" style="max-width:800px;"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button> <br> </div> <div class="modal-body">  <img ng-src="images/rosa_vientos.png" style="width:100%"> </div> </div>'),e.put("app/pages/scatreports/localfeatures/scatreport-localfeatures.html",'<div>  <table class="table table-bordered table-condensed" ng-if="vm.detailForm.$visible"> <thead> <tr> <th colspan="4"> <span data-translate="app.localfeature.other_characteristics"> </span></th> </tr> </thead> <tbody> <tr> <td witdth="40px" class="text-center"><span ng-if="vm.localFeatures.Estuary"> <i class="icon-ok"> </i></span> </td> <td> <label> <input type="checkbox" ng-model="vm.Estuary" ng-change="vm.toggleSelect(\'Estuary\')"> <span data-translate="app.localfeature.estuary"> </span></label> </td> <td class="text-center"><span ng-if="vm.localFeatures.HistoricalArtefact"> <i class="icon-ok"> </i><i class="icon-ok" ng-if="vm.localFeatures.HistoricalArtefact.primary"> </i></span> </td> <td> <label> <input type="checkbox" ng-model="vm.HistoricalArtefact" ng-change="vm.toggleSelect(\'HistoricalArtefact\')"> <span data-translate="app.localfeature.historicalartefact"> </span></label> </td> </tr> <tr> <td class="text-center"><span ng-if="vm.localFeatures.AmenityArea"> <i class="icon-ok"> </i></span> </td> <td> <label> <input type="checkbox" ng-model="vm.AmenityArea" ng-change="vm.toggleSelect(\'AmenityArea\')"> <span data-translate="app.localfeature.amenityarea"> </span></label> </td> <td class="text-center"><span ng-if="vm.localFeatures.Pools"> <i class="icon-ok"> </i></span> </td> <td> <label> <input type="checkbox" ng-model="vm.Pools" ng-change="vm.toggleSelect(\'Pools\')"> <span data-translate="app.localfeature.pools"> </span></label> </td> </tr> <tr> <td class="text-center"><span ng-if="vm.localFeatures.DeadSeagrass"> <i class="icon-ok"> </i></span> </td> <td> <label> <input type="checkbox" ng-model="vm.DeadSeagrass" ng-change="vm.toggleSelect(\'DeadSeagrass\')"> <span data-translate="app.localfeature.deadseagrass"> </span></label> </td> <td class="text-center"><span ng-if="vm.localFeatures.DeepCracks"> <i class="icon-ok"> </i></span> </td> <td> <label> <input type="checkbox" ng-model="vm.DeepCracks" ng-change="vm.toggleSelect(\'DeepCracks\')"> <span data-translate="app.localfeature.deepcracks"> </span></label> </td> </tr> </tbody> </table>  <table class="table table-bordered" ng-hide="vm.detailForm.$visible"> <thead> <tr> <th colspan="4"> Otras caracterÃ­sticas: </th> </tr> </thead> <tbody> <tr> <td witdth="40px" class="text-center"><span ng-show="vm.Estuary" class="icon-inline ion-checkmark"> </span> </td> <td> <span data-translate="app.localfeature.estuary"></span></td> <td class="text-center"><span ng-if="vm.HistoricalArtefact" class="icon-inline ion-checkmark"> </span> </td> <td> <span data-translate="app.localfeature.historicalartefact"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.AmenityArea" class="icon-inline ion-checkmark"> </span> </td> <td> <span data-translate="app.localfeature.amenityarea"></span></td> <td class="text-center"><span ng-if="vm.Pools" class="icon-inline ion-checkmark"> </span> </td> <td> <span data-translate="app.localfeature.pools"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.DeadSeagrass" class="icon-inline ion-checkmark"> </span> </td> <td> <span data-translate="app.localfeature.deadseagrass"></span></td> <td class="text-center"><span ng-if="vm.DeepCracks" class="icon-inline ion-checkmark"> </span> </td> <td> <span data-translate="app.localfeature.deepcracks"></span></td> </tr> </tbody> </table> </div>'),e.put("app/pages/scatreports/map/scatreport-map.html",'<div class="panel viewport100">     <div class="panel-body"> <div class="col-md-12" ng-show="vm.detailForm.$visible">  </div> <div style="position:relative; width:100%; height:100%;" ng-mouseenter="updateSize()">  <div ng-hide="vm.hideLayersPanel" class="alert alert-info" style="position: absolute; top: 10px; left:40px; z-index:1020; opacity:0.9">  <div class="pull-right"> <span ng-if="vm.model.measure" class="label label-info">{{vm.model.measure.measure.toFixed(3) + " "+ vm.model.measure.units + (vm.measure.order==2 ? \'2\':\'\')}}</span> </div> <div ng-repeat="layer in vm.reportlayers | filter:{legend:true}"> <div style="display:inline-block; width:18px;"> <i ng-show="vm.worklayer.name==layer.name" class="ion-wrench"></i> </div> <label class="control-label" ng-style="!layer.active ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !layer.active}"> <input type="checkbox" ng-model="layer.visibility"> <span> {{layer.label | translate}} </span> </label> </div> <div class="text-right" style="padding-top:10px;" ng-if="vm.worklayer"> <i class="ion-wrench"></i>&#160; <small data-translate="app.page.scatreports.map.activelayer"></small> </div> </div> <div id="map" ol-map="vm.olmap" proxy-host="/arcopol/cgi-bin?targetURL=" class="olMap" options="{numZoomLevels: 20 }">  <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> </ol-map-control> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{prefix: \'EPSG:4326 (Lon|Lat) \',separator: \' | \',numDigits: 2}" active="true"> </ol-map-control>  <ol-map-control name="Measure" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action.indexOf(\'measure\')>=0}}" handler="OpenLayers.Handler.Path" ol-control-measure="vm.measureAction($event)"> </ol-map-control>  <div style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9" class="btn-group">  <div class="btn-group"> <a class="btn btn-default" title="{{ app.page.scatreports.map.centermap | translate}}" ng-click="vm.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> </div> <div class="btn-group">   <a class="btn dropdown-toggle btn-default" data-toggle="dropdown" href="javascript:void(0)">{{ {\'openmaps\':\'OSM\' , \'Google-Satellite\':\'Satellite\'}[vm.olmap.olmap.baseLayer.name] }}</a> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a ol-baselayer-switcher="openmaps">OSM</a></li> <li><a ol-baselayer-switcher="Google-Satellite">Satellite</a></li>  </ul> </div> </div>   <ol-layer name="openmaps" lyr-type="tiles"> </ol-layer> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> </ol-layer>  <ol-layer name="GeoLocation" lyr-type="markers"> <ol-marker icon="assets/img/gsv_icon2.png" lonlat="{{vm.geoService.currentPosition(\'EPSG:900913\')}}" size="21,40"> </ol-marker> </ol-layer> <ol-layer ng-if="l!=vm.worklayer" ng-repeat="l in vm.reportlayers" name="{{l.name}}" lyr-type="vector" lyr-options="{{l.options}}" visibility="{{l.visibility}}" default-style="{{l.defaultStyle}}" temporary-style="{{l.temporaryStyle}}" select-style="{{l.selectStyle}}" ol-layer-moveend="vm.zoomToExtent($event)" ol-layer-featureselected="vm.featureSelected($event)" ol-layer-featureunselected="vm.featureUnselected($event)"> <ol-feature ng-repeat="item in vm.features[l.items] | filter:filterFeature" geometry="item.geometry" selected="item.id==vm.model.id" attributes="item" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Select\'+l.name}}" active="{{vm.map.action!=\'deletePoints\' && l.active}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer> <ol-layer ng-if="vm.worklayer" name="worklayer" lyr-type="vector" lyr-options="{{vm.worklayer.options}}" visibility="{{vm.map.action!=\'deletePoints\'}}" default-style="{{vm.worklayer.defaultStyle}}" temporary-style="{{vm.worklayer.temporaryStyle}}" select-style="{{vm.worklayer.selectStyle}}" virtual-style="{{vm.worklayer.virtualStyle}}" vertex-style="{{vm.worklayer.vertexStyle}}" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)"> <ol-feature geometry="vm.model.geometry" attributes="vm.model" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="{{\'Create\'+vm.worklayer.name}}" active="{{vm.map.action==\'draw\'}}" ctrl-type="drawFeature" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}" handler="{{vm.worklayer.handler}}" ol-layer-control-featureadded="vm.featureAdded($event)"> </ol-layer-control> <ol-layer-control name="{{\'Edit\'+vm.worklayer.name}}" active="{{vm.map.action==\'edit\'}}" ctrl-type="modifyFeature" handler="{{vm.worklayer.handler}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\',\'virtualStyle\':\'virtual\', \'vertexRenderIntent\': \'vertex\'}"> </ol-layer-control> </ol-layer>  <ol-layer name="segment" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }"> <ol-feature ng-if="vm.scatreport.segment" geometry="vm.scatreport.segment.startPosition" attributes="vm.scatreport.segment" style="{\'fillColor\':\'#04B404\', \'pointRadius\': 4}" display-projection="EPSG:900913" projection="EPSG:4326"></ol-feature> <ol-feature ng-if="vm.scatreport.segment" geometry="vm.scatreport.segment.endPosition" attributes="vm.scatreport.segment" style="{\'fillColor\':\'#8A0808\', \'pointRadius\': 4}" display-projection="EPSG:900913" projection="EPSG:4326"></ol-feature> <ol-feature ng-if="vm.scatreport.segment" geometry="vm.scatreport.segment.geometry" attributes="vm.scatreport.segment" style="{\'strokeColor\':\'#00F\'}" display-projection="EPSG:900913" projection="EPSG:4326"></ol-feature> </ol-layer>  <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="gpoints" lyr-type="vector" default-style="{{vm.worklayer.temporaryStyle}}" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }"> <ol-feature geometry="vm.model.geometry" display-projection="EPSG:900913" selected="true" projection="EPSG:4326"> </ol-feature> </ol-layer> <ol-layer ng-if="vm.map.action==\'deletePoints\'" name="points" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'1.0\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }" default-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" select-style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 18 ,\'fillColor\': \'#FE9929\'}" ol-layer-featureselected="vm.confirmRemoveSelectedPoint($event)" ol-layer-featureunselected="vm.cancelRemoveSelectedPoint($event)"> <ol-feature ng-repeat="p in vm.feature.geometry.getVertices()" geometry="p" attributes="p" selected="{{vm.selectedPoint.id==p.id}}" style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="selectPointCtrl" active="{{vm.map.action==\'deletePoints\'}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}"> </ol-layer-control> </ol-layer>  <div class="alert alert-info col-md-4" ng-if="vm.selectedPoint" style="position: absolute; top: 10px; left:430px; z-index:1030; border:2px solid;">  <strong><i class="icon-question-sign" data-translate="app.page.scatreports.map.confirm"> </i> </strong> <p data-translate="app.page.scatreports.map.confirmdeletepoint"> </p> <div class="btn-group"> <button ng-click="vm.removeSelectedPoint()" data-translate="global.button.yes"></button> <button ng-click="vm.cancelRemoveSelectedPoint()" data-translate="global.button.no"></button> </div> </div> </div> </div> </div>  </div>'),e.put("app/pages/scatreports/print/scatreport-print-body-en.html",'<div> <table class="table table-bordered table-condensed table-print"> <tr> <th><strong>1. GENERAL INFORMATION</strong></th> <th rowspan="3"> Date (yy-mm-dd) <p>{{vm.model.reportTime | date: \'yy-MM-dd HH:mm\'}}</p> </th> <th rowspan="2"> Survey time <p>from {{vm.model.surveyStartTime}} to {{vm.model.surveyEndTime}}</p> </th> </tr> <tr> <td> Incident: {{vm.model.incident}} </td> </tr> <tr> <td> Segment ID {{vm.model.segment.segmentId}} </td> <td> <span ng-class="{\'label-important\':vm.model.weatherInfo==\'sun\'}" data-translate="app.weatherinfo.sun"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'clouds\'}" data-translate="app.weatherinfo.clouds"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'fog\'}" data-translate="app.weatherinfo.fog"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'rain\'}" data-translate="app.weatherinfo.rain"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'windy\'}" data-translate="app.weatherinfo.windy"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'snow\' }" data-translate="app.weatherinfo.snow"></span> </td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <span var="contacts"> <th><strong>2. {{\'app.scatreport.surveyteam\' | translate | uppercase}}</strong></th> <th> <span data-translate="app.contact.organisation"> </span></th> <th> <span data-translate="app.contact.phonenumber"> </span></th> </span></tr> <tr ng-repeat="item in vm.model.contacts track by $index | orderBy:predicate:reverse"> <td>{{item.contactName}}</td> <td>{{item.organisation}}</td> <td>{{item.phoneNumber}}</td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <c:out value="${request.getLocale}"> <tr> <span var="segment"> <th><strong> 3. {{\'app.scatreport.segment\' | translate | uppercase}}</strong></th> <th> Total Length: {{vm.model.segment.segmentLength}} m </th> <th> Surveyed length: {{vm.model.segment.lengthSurveyed}} m </th> </span></tr> <tr> <td colspan="3"> Start GPS: <i> {{vm.model.segment.startPosition | lonlat:\'point\'}}</i> </td> </tr> <tr> <td colspan="3"> End GPS: <i> {{vm.model.segment.endPosition | lonlat:\'point\'}}</i> </td> </tr> </c:out></table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="2"><strong>4. {{\'app.scatreport.shorelinetype\' | translate | uppercase}}</strong></th> <th colspan="2"> <span> <small class="ion-checkmark"></small> <small class="ion-checkmark"></small> = primary (only one) </span>&#160;&#160;&#160; <span> <small class="ion-checkmark"></small> = secondary <p><small> Circle the boxes of oiled shoreline types and local features </small></p> </span> </th> </tr> <tr> <td><span ng-if="vm.shorelineTypes.BedrockCliff"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.BedrockCliff.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.BedrockCliff.oiled}"><span data-translate="app.shorelinetype.bedrockcliff"></span></span></td> <td><span ng-if="vm.shorelineTypes.MudSediments"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.MudSediments.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.MudSediments.oiled}"><span data-translate="app.shorelinetype.mudsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.BedrockPlatform"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.BedrockPlatform.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.BedrockPlatform.oiled}"><span data-translate="app.shorelinetype.bedrockplatform"></span></span></td> <td><span ng-if="vm.shorelineTypes.SandSediments"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.SandSediments.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.SandSediments.oiled}"><span data-translate="app.shorelinetype.sandsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.ManmadeSolid"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.ManmadeSolid.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.ManmadeSolid.oiled}"><span data-translate="app.shorelinetype.manmadesolid"></span></span></td> <td><span ng-if="vm.shorelineTypes.MixedSediments"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.MixedSediments.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.MixedSediments.oiled}"><span data-translate="app.shorelinetype.mixedsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.ManmadePermeable"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.ManmadePermeable.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.ManmadePermeable.oiled}"><span data-translate="app.shorelinetype.manmadepermeable"></span></span></td> <td><span ng-if="vm.shorelineTypes.PebbleCobbleShingle"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.PebbleCobbleShingle.oiled}"><span data-translate="app.shorelinetype.pebblecobbleshingle"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.SaltMarsh"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.SaltMarsh.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.SaltMarsh.oiled}"><span data-translate="app.shorelinetype.saltmarsh"></span></span></td> <td><span ng-if="vm.shorelineTypes.Boulder"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.Boulder.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.Boulder.oiled}"><span data-translate="app.shorelinetype.boulder"></span></span></td> </tr> <tr> <td></td> <td> Other... </td> <td></td> <td></td> </tr> <tr> <td colspan="2"> Local features: </td> <td colspan="2"> <span data-translate="app.scatreport.waveexposure">: <p> <span ng-class="{\'label-important\': model.segment.waveExposure==\'VeryExposed\'}" data-translate="app.waveexposure.veryexposed"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'Exposed\'}" data-translate="app.waveexposure.exposed"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'PartiallySheltered\'}" data-translate="app.waveexposure.partiallysheltered"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'VerySheltered\'}" data-translate="app.waveexposure.verysheltered"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'ExtremelySheltered\'}" data-translate="app.waveexposure.extremelysheltered"></span>/ </p> </span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.Estuary"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.Estuary.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.Estuary.oiled}"><span data-translate="app.localfeature.estuary"></span></span></td> <td><span ng-if="vm.localFeatures.HistoricalArtefact"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.HistoricalArtefact.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.HistoricalArtefact.oiled}"><span data-translate="app.localfeature.historicalartefact"></span></span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.AmenityArea"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.AmenityArea.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.AmenityArea.oiled}"><span data-translate="app.localfeature.amenityarea"></span></span></td> <td><span ng-if="vm.localFeatures.Pools"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.Pools.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.Pools.oiled}"><span data-translate="app.localfeature.pools"></span></span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.DeadSeagrass"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.DeadSeagrass.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.DeadSeagrass.oiled}"><span data-translate="app.localfeature.deadseagrass"></span></span></td> <td><span ng-if="vm.localFeatures.DeepCracks"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.DeepCracks.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.DeepCracks.oiled}"><span data-translate="app.localfeature.deepcracks"></span></span></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th> 5. OPERATIONAL FEATURES </th> <th> <p> Debris? <span ng-class="{\'label-important\':vm.model.operationalFeatures.existDebris}">Yes</span>/<span ng-class="{\'label-important\': !vm.model.operationalFeatures.existDebris}">No</span> Oiled? <span ng-class="{\'label-important\':vm.model.operationalFeatures.oiledDebris}">Yes</span>/<span ng-class="{\'label-important\': !vm.model.operationalFeatures.oiledDebris}">No</span> </p> <p> Amount: {{vm.model.operationalFeatures.numberDebris}} <span ng-class="{\'label-important\':vm.model.operationalFeatures.typeDebris==\'Bags\'}">Bags</span>/<span ng-class="{\'label-important\':vm.model.operationalFeatures.typeDebris==\'Trucks\'}">trucks</span> </p> <span ng-repeat="item in vm.model.operationalFeatures.debrises track by $index" class="label" style="margin:4px; padding:6px;"> {{item.number}} <span ng-show="item.type==\'cups\'"><span data-translate="app.scatreport.scat_operationalfeature_debristype_cups"></span> <span ng-show="item.type==\'litres\'"><span data-translate="app.scatreport.scat_operationalfeature_debristype_litres"></span> <span ng-show="item.type==\'volume\'"><span data-translate="app.scatreport.scat_operationalfeature_debristype_volume"></span> <i ng-show="item.oiled" class="badge badge-info icon-tint"><small class="ion-checkmark"></small> </i> </span> </span></span></span></th> </tr> <tr> <td> <p> Direct backshore acccess? <span ng-repeat="item in vm.model.operationalFeatures.directBackshoreAccess track by $index"> {{$first ? \'\': \', \'}} <span ng-show="item==\'Trucks\'"><span data-translate="app.directbackshoreaccess.trucks"></span> <span ng-show="item==\'Pedestrian\'"><span data-translate="app.directbackshoreaccess.pedestrian"></span> <span ng-show="item==\'No\'"><span data-translate="app.directbackshoreaccess.no"></span> </span>  </span></span></span></p> <p> Along from next segment? <span ng-repeat="item in vm.model.operationalFeatures.neighbourSegmentAccess track by $index"> {{$first ? \'\': \', \'}} <span ng-show="item==\'Trucks\'"><span data-translate="app.neighboursegmentaccess.trucks"></span> <span ng-show="item==\'Pedestrian\'"><span data-translate="app.neighboursegmentaccess.pedestrian"></span> <span ng-show="item==\'No\'"><span data-translate="app.neighboursegmentaccess.no"></span> </span> </span></span></span></p> </td> <td> Access restrictions: {{vm.model.operationalFeatures.accessRestrictions}} </td> </tr> <tr> <td> Backshore cliff? <span ng-class="{\'label-important\':model.operationalFeatures.backShoreCliff}">Yes</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.backShoreCliff}">No</span> Ht {{vm.model.operationalFeatures.backShoreCliffHeight}} m </td> <td> Suitable lay-down area? <span ng-class="{\'label-important\':model.operationalFeatures.suitableLaydownArea}">Yes</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.suitableLaydownArea}">No</span> </td> </tr> <tr> <td colspan="2"> Ongoing clean-up activity? <span ng-class="{\'label-important\':model.operationalFeatures.ongoingCleanupActivity}">Yes</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.ongoingCleanupActivity}">No</span> <p> {{vm.model.operationalFeatures.ongoingCleanupActivityComments}} </p> </td> </tr> <tr> <td colspan="2"> Notas: <p> <small> {{vm.model.operationalFeatures.comments}}</small> </p> </td> </tr> </table> <table class="table table-bordered table-condensed table-print page-break-before"> <tr> <th colspan="8"> 6.SURFACE OILING </th> <th colspan="11"> TICK HERE IF NON OBSERVED: <i ng-if="vm.model.notExistsSurfaceOilConditions"><small class="ion-checkmark"></small> </i> </th> </tr> <tr ng-class="{\'disable\':model.notExistsSurfaceOilConditions}"> <td rowspan="2"> Zone ID </td> <td colspan="4"> Position </td> <td colspan="3"> Oil Cover </td> <td colspan="5"> Oil Thickness </td> <td colspan="6"> Oil Character </td> </tr> <tr> <td>L</td> <td>M</td> <td>U</td> <td>S</td> <td>Length</td> <td>Width</td> <td>Distr.</td> <td>PO</td> <td>CV</td> <td>CT</td> <td>ST</td> <td>FL</td> <td>FR</td> <td>MS</td> <td>TP</td> <td>PT</td> <td>SR</td> <td>AP</td> </tr> <tr ng-if="!vm.model.notExistsSurfaceOilConditions" ng-repeat="item in vm.model.surfaceOilConditions track by $index"> <td style="text-align:center;">{{item.zoneId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.oilCoverLeghth}}</td> <td style="text-align:center;">{{item.oilCoverWidth}}</td> <td style="text-align:center;">{{item.oilDistribution}}</td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'TO\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'CV\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'CT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'ST\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'FL\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'FR\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'MS\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'TB\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'PT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'SR\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'AP\'"> <small class="ion-checkmark"></small></i></td> </tr> <tr ng-if="!vm.model.surfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.surfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td colspan="19"> <p>L,M, U and S= Lower, Middle, Upper y Supra tidal. PO=Pooled Oil, CV=Cover, CT=Coat, ST=Stain, FL=Film, FR=Fresh, MS=Mousse, TB= Tar Balls, PT= Tar Patties, SR=Surface residue, AP=Asphalt Pavement</p> </td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="7">7. SUB-SURFACE OILING</th> <th colspan="7">TICK HERE IF NONE OBSERVED: <i ng-if="vm.model.notExistsSubsurfaceOilConditions"><small class="ion-checkmark"></small> </i></th> </tr> <tr> <td rowspan="2">Pit ID</td> <td colspan="4">Position</td> <td rowspan="2">Pit depth <p>(cm)</p> </td> <td rowspan="2">Oiled zone <p>(cm-cm)</p> </td> <td colspan="5">Sub-surface Oil Character</td> <td rowspan="2">Water table <p>(cm)</p> </td> </tr> <tr> <td>L</td> <td>M</td> <td>U</td> <td>S</td> <td>Oil filled pores</td> <td style="width:80px; text-align:center;">Partial filled pores</td> <td>Oil residue</td> <td>Oil Film</td> <td>Trace</td> </tr> <tr ng-if="!vm.model.notExistsSubsurfaceOilConditions" ng-repeat="item in vm.model.subsurfaceOilConditions track by $index"> <td style="text-align:center;">{{item.pitId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.pitDepth}}</td> <td style="text-align:center;">{{(item.oiledZoneEnd || item.oiledZoneEnd) ? item.oiledZoneStart+ \'-\' +item.oiledZoneEnd : \'EMPTY\'}}</td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilFilledPores\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'PartialFilledPores\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilResidue\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilFilm\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'Trace\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.buriedWater}}</td> </tr> <tr ng-if="!vm.model.subsurfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.subsurfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">8.OTHER POLLUTION SUBSTANCES</th> <th colspan="10">TICK HERE IF NONE OBSERVED</th> <th></th> </tr> <tr> <td rowspan="2">Zone ID</td> <td colspan="4">Position</td> <td colspan="3">Cover</td> <td colspan="5">Width</td> <td>Description</td> <td>Sub-surface?</td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Longitud</td> <td>Ancho</td> <td>Distr.</td> <td>BA</td> <td>CU</td> <td>CA</td> <td>MA</td> <td>PE</td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.notExistsOtherSubstances" ng-repeat="item in vm.model.otherSubstances track by $index"> <td style="text-align:center;">{{item.zoneId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.coverLength}}</td> <td style="text-align:center;">{{item.coverWidth}}</td> <td style="text-align:center;">{{item.distribution}}</td> <td style="text-align:center;"><i ng-show="item.thickness==\'TO\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'CV\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'CT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'ST\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'FL\'"> <small class="ion-checkmark"></small></i></td> <td>{{item.description}}</td> <td style="text-align:center;"><i ng-show="item.subSurface"> <small class="ion-checkmark"></small></i></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <p>L,M, U and S= Lower, Middle, Upper y Supra tidal. PO=Pooled Oil, CV=Cover, CT=Coat, ST=Stain, FL=Film, FR=Fresh, MS=Mousse, TB= Tar Balls, PT= Tar Patties, SR=Surface residue, AP=Asphalt Pavement</p> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">9.OTHER COMMENTS</th> <th colspan="10"></th> </tr> <tr style="height:200px;"> <td colspan="18"> <blockquote ng-repeat="item in vm.model.comments track by $index"> <span><i ng-if="item.geometry" class="ion-ios-location"></i>&#160; {{item.code}}: {{item.comment}}</span> <small>{{item.userLogin.userName}} at {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small> </blockquote> </td> </tr> <tr> <td colspan="18"> Use the space above as needed to provide comments about the site not covered by part 1 of the Form. If no further comments write âNONEâ. Comments may address: <ul> <li> actual or potential resource sensitivities observed or known to be present; including ecological, recreational, cultural, commercial or any other socio-economic interests;</li> <li> any notable wildlife observations, particularly any casualties;</li> <li>estimates of volumes of oil within the segment, based on dimensions of stranded oil observed and recorded;</li> <li>storms surges which may have deposited oil above the normal water mark;</li> <li>any recommendations on cleanup or other treatment - these could include a description of the recommended technique, suggested scale of operation required and any practical constraints;</li> <li>add recommendations on appropriate end points for terminating the cleanup.</li> </ul> </td> </tr> </table> <div class="page-break-before"> <table class="table table-bordered table-condensed table-print" ng-if="vm.model.photos"> <tr> <th colspan="18">9.PICTURES</th> </tr> <tr style="height:200px;"> <td colspan="18"> <div class="thumbnail" ng-repeat="item in vm.model.photos track by $index"> <a href="#myModal" data-toggle="modal" data-img-url="api/photos/{{item.id}}/image" onclick="angular.element(\'#myModal img\').attr(\'src\', angular.element(this).attr(\'data-img-url\'));"> <img ng-src="api/photos/{{item.id}}/image" style="max-height: 270px;"> </a> <div class="caption"> <strong>({{item.code}}) {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}<span class="pull-right"> <i ng-if="item.geometry" class="ion-ios-location"></i>&#160;</span></strong> <p>{{item.comments}}</p> </div> </div> </td> </tr> </table> </div> <div class="page-break-before"> <table class="table table-bordered table-condensed table-print"> <tr> <th>10.Map</th> </tr> <tr> <td> <div id="mapCanvas"> </div> </td> </tr> </table> </div> </div>'),
e.put("app/pages/scatreports/print/scatreport-print-body-es.html",'<div> <table class="table table-bordered table-condensed table-print"> <tr> <th><strong>1. INFORMACIÃN GENERAL</strong> </th> <th rowspan="3"> Fecha (dd/mm/aa) <p>{{vm.model.reportTime | date: \'dd/MM/yyyy HH:mm\'}}</p> </th> <th rowspan="2"> Hora de inspecciÃ³n (local) <p>de {{vm.model.surveyStartTime}} a {{vm.model.surveyEndTime}}</p> </th> </tr> <tr> <td> Incidente: {{vm.model.incident}} </td> </tr> <tr> <td> ID del Segmento {{vm.model.segment.segmentId}} </td> <td> <span ng-class="{\'label-important\':vm.model.weatherInfo==\'sun\'}" data-translate="app.weatherinfo.sun"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'clouds\'}" data-translate="app.weatherinfo.clouds"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'fog\'}" data-translate="app.weatherinfo.fog"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'rain\'}" data-translate="app.weatherinfo.rain"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'windy\'}" data-translate="app.weatherinfo.windy"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'snow\' }" data-translate="app.weatherinfo.snow"></span> </td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <span var="contacts"> <th><strong>2. {{\'app.scatreport.surveyteam\' | translate | uppercase}}</strong></th> <th> <span data-translate="app.contact.organisation"> </span></th> <th> <span data-translate="app.contact.phonenumber"> </span></th> </span></tr> <tr ng-repeat="item in vm.model.contacts track by $index | orderBy:predicate:reverse"> <td>{{item.contactName}}</td> <td>{{item.organisation}}</td> <td>{{item.phoneNumber}}</td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <c:out value="${request.getLocale}"> <tr> <span var="segment"> <th><strong> 3. {{\'app.scatreport.segment\' | translate | uppercase}}</strong></th> <th> Longitud total: {{vm.model.segment.segmentLength}} m </th> <th> Longitud inspeccionada: {{vm.model.segment.lengthSurveyed}}m </th> </span></tr> <tr> <td colspan="3"> Inicio GPS: <i> {{vm.model.segment.startPosition | lonlat:\'point\'}}</i> </td> </tr> <tr> <td colspan="3"> Final GPS: <i> {{vm.model.segment.endPosition | lonlat:\'point\'}}</i> </td> </tr> </c:out></table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="2"><strong>4. {{\'app.scatreport.shorelinetype\' | translate | uppercase}}</strong></th> <th colspan="2"> <span> <small class="ion-checkmark"></small> <small class="ion-checkmark"></small> = primaria (sÃ³lo una) </span>&#160;&#160;&#160; <span> <small class="ion-checkmark"></small> = secundaria <p><small> Rodee las casillas de los tipos de costa afectada y otras caracterÃ­sticas </small></p> </span> </th> </tr> <tr> <td><span ng-if="vm.shorelineTypes.BedrockCliff"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.BedrockCliff.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.BedrockCliff.oiled}"><span data-translate="app.shorelinetype.bedrockcliff"></span></span></td> <td><span ng-if="vm.shorelineTypes.MudSediments"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.MudSediments.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.MudSediments.oiled}"><span data-translate="app.shorelinetype.mudsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.BedrockPlatform"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.BedrockPlatform.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.BedrockPlatform.oiled}"><span data-translate="app.shorelinetype.bedrockplatform"></span></span></td> <td><span ng-if="vm.shorelineTypes.SandSediments"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.SandSediments.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.SandSediments.oiled}"><span data-translate="app.shorelinetype.sandsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.ManmadeSolid"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.ManmadeSolid.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.ManmadeSolid.oiled}"><span data-translate="app.shorelinetype.manmadesolid"></span></span></td> <td><span ng-if="vm.shorelineTypes.MixedSediments"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.MixedSediments.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.MixedSediments.oiled}"><span data-translate="app.shorelinetype.mixedsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.ManmadePermeable"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.ManmadePermeable.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.ManmadePermeable.oiled}"><span data-translate="app.shorelinetype.manmadepermeable"></span></span></td> <td><span ng-if="vm.shorelineTypes.PebbleCobbleShingle"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.PebbleCobbleShingle.oiled}"><span data-translate="app.shorelinetype.pebblecobbleshingle"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.SaltMarsh"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.SaltMarsh.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.SaltMarsh.oiled}"><span data-translate="app.shorelinetype.saltmarsh"></span></span></td> <td><span ng-if="vm.shorelineTypes.Boulder"> <small class="ion-checkmark"></small><i ng-if="vm.shorelineTypes.Boulder.primary"> <small class="ion-checkmark"></small></i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.Boulder.oiled}"><span data-translate="app.shorelinetype.boulder"></span></span></td> </tr> <tr> <td></td> <td> Otras (describir): </td> <td></td> <td></td> </tr> <tr> <td colspan="2"> Otras caracterÃ­sticas: </td> <td colspan="2"> <span data-translate="app.scatreport.waveexposure">: <p> <span ng-class="{\'label-important\': model.segment.waveExposure==\'VeryExposed\'}" data-translate="app.waveexposure.veryexposed"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'Exposed\'}" data-translate="app.waveexposure.exposed"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'PartiallySheltered\'}" data-translate="app.waveexposure.partiallysheltered"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'VerySheltered\'}" data-translate="app.waveexposure.verysheltered"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'ExtremelySheltered\'}" data-translate="app.waveexposure.extremelysheltered"></span>/ </p> </span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.Estuary"> <small class="ion-checkmark"></small><i ng-if="vm.localFeatures.Estuary.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.Estuary.oiled}"><span data-translate="app.localfeature.estuary"></span></span></td> <td><span ng-if="vm.localFeatures.HistoricalArtefact"> <small class="ion-checkmark"></small><i ng-if="vm.localFeatures.HistoricalArtefact.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.HistoricalArtefact.oiled}"><span data-translate="app.localfeature.historicalartefact"></span></span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.AmenityArea"> <small class="ion-checkmark"></small><i ng-if="vm.localFeatures.AmenityArea.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.AmenityArea.oiled}"><span data-translate="app.localfeature.amenityarea"></span></span></td> <td><span ng-if="vm.localFeatures.Pools"> <small class="ion-checkmark"></small><i ng-if="vm.localFeatures.Pools.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.Pools.oiled}"><span data-translate="app.localfeature.pools"></span></span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.DeadSeagrass"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.DeadSeagrass.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.DeadSeagrass.oiled}"><span data-translate="app.localfeature.deadseagrass"></span></span></td> <td><span ng-if="vm.localFeatures.DeepCracks"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.DeepCracks.primary"> <small class="ion-checkmark"></small></i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.DeepCracks.oiled}"><span data-translate="app.localfeature.deepcracks"></span></span></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th> 5. CARACTERÃSTICAS OPERATIVAS </th> <th> <p> Â¿Restos? <span ng-class="{\'label-important\':vm.model.operationalFeatures.existDebris}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.existDebris}">No</span> Â¿Contaminados? <span ng-class="{\'label-important\':vm.model.operationalFeatures.oiledDebris}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.oiledDebris}">No</span> </p> <p> Cantidad: {{vm.model.operationalFeatures.numberDebris}} <span ng-class="{\'label-important\':vm.model.operationalFeatures.typeDebris==\'Bags\'}">Bolsas</span>/<span ng-class="{\'label-important\':vm.model.operationalFeatures.typeDebris==\'Trucks\'}">Camiones</span> </p> <span ng-repeat="item in vm.model.operationalFeatures.debrises track by $index" class="label" style="margin:4px; padding:6px;"> {{item.number}} <span ng-show="item.type==\'cups\'"><span data-translate="app.debristype.cups"></span> <span ng-show="item.type==\'litres\'"><span data-translate="app.debristype.litres"></span> <span ng-show="item.type==\'volume\'"><span data-translate="app.debristype.volume"></span> <i ng-show="item.oiled" class="badge badge-info icon-tint"></i> </span> </span></span></span></th> </tr> <tr> <td> <p> Â¿Acceso directo desde tierra? <span ng-repeat="item in vm.model.operationalFeatures.directBackshoreAccess track by $index"> {{$first ? \'\': \', \'}} <span ng-show="item==\'Trucks\'"><span data-translate="app.directbackshoreaccess.trucks"></span> <span ng-show="item==\'Pedestrian\'"><span data-translate="app.directbackshoreaccess.pedestrian"></span> <span ng-show="item==\'No\'"><span data-translate="app.directbackshoreaccess.no"></span> </span>  </span></span></span></p> <p> Â¿A travÃ©s segmento contiguo? <span ng-repeat="item in vm.model.operationalFeatures.neighbourSegmentAccess track by $index"> {{$first ? \'\': \', \'}} <span ng-show="item==\'Trucks\'"><span data-translate="app.neighboursegmentaccess.trucks"></span> <span ng-show="item==\'Pedestrian\'"><span data-translate="app.neighboursegmentaccess.pedestrian"></span> <span ng-show="item==\'No\'"><span data-translate="app.neighboursegmentaccess.no"></span> </span>  </span></span></span></p> </td> <td> Restricciones de acceso: {{vm.model.operationalFeatures.accessRestrictions}} </td> </tr> <tr> <td> Â¿Acantiliado costero? <span ng-class="{\'label-important\':model.operationalFeatures.backShoreCliff}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.backShoreCliff}">No</span> Alt {{vm.model.operationalFeatures.backShoreCliffHeight}} m </td> <td> Â¿Ãrea de deposito adecuada? <span ng-class="{\'label-important\':model.operationalFeatures.suitableLaydownArea}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.suitableLaydownArea}">No</span> </td> </tr> <tr> <td colspan="2"> Â¿Operaciones de limpieza en marcha? <span ng-class="{\'label-important\':model.operationalFeatures.ongoingCleanupActivity}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.ongoingCleanupActivity}">No</span> <p> {{vm.model.operationalFeatures.ongoingCleanupActivityComments}} </p> </td> </tr> <tr> <td colspan="2"> Notas: <p> <small> {{vm.model.operationalFeatures.comments}}</small> </p> </td> </tr> </table> <table class="table table-bordered table-condensed table-print page-break-before"> <tr> <th colspan="8"> 6.HIDROCARBURO SUPERFICIAL </th> <th colspan="10"> MARCAR AQUI SI NO SE OBSERVA: <i ng-if="vm.model.notExistsSurfaceOilConditions"> <small class="ion-checkmark"></small> </i> </th> <th></th> </tr> <tr> <td rowspan="2"> Zona ID </td> <td colspan="4"> PosiciÃ³n </td> <td colspan="3"> Cobertura de hidrocarburo </td> <td colspan="5"> Espesor del hidrocarburo </td> <td colspan="6"> Apariencia del hidrocarburo </td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Longitud</td> <td>Ancho</td> <td>Distr.</td> <td>BA</td> <td>CU</td> <td>CA</td> <td>MA</td> <td>PE</td> <td>FR</td> <td>MS</td> <td>BA</td> <td>GA</td> <td>RS</td> <td>PA</td> </tr> <tr ng-if="!vm.model.notExistsSurfaceOilConditions" ng-repeat="item in vm.model.surfaceOilConditions track by $index"> <td style="text-align:center;">{{item.zoneId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.oilCoverLeghth}}</td> <td style="text-align:center;">{{item.oilCoverWidth}}</td> <td style="text-align:center;">{{item.oilDistribution}}</td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'TO\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'CV\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'CT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'ST\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'FL\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'FR\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'MS\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'TB\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'PT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'SR\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'AP\'"> <small class="ion-checkmark"></small></i></td> </tr> <tr ng-if="!vm.model.surfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.surfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td colspan="19">B,M,S y U=Inferior, Media, Superior y Supra mareal. BA=Balsa, CU=Cubierta, CA=Capa, Ma=Mancha, PE=PelÃ­cula <p>FR=Fresco, MS=Mousse, BA=Bolas alquitrÃ¡n, GA=Galletas alquitrÃ¡n, RS=Residuo superficial, PA=Pavimento asfalto</p> </td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">7.HIDROCARBURO BAJO SUPERFICIE</th> <th colspan="6">MARCAR AQUI SI NO HAY INVESTIGACIÃN: <i ng-if="vm.model.notExistsSubsurfaceOilConditions"> <small class="ion-checkmark"></small> </i></th> </tr> <tr> <td rowspan="2">ID Cata</td> <td colspan="4">PosiciÃ³n</td> <td rowspan="2">Profundidad <p>(cm)</p> </td> <td rowspan="2">Zona contaminada <p>(cm-cm)</p> </td> <td colspan="5">ApariencÃ­a del hidrocarburo bajo superficie</td> <td rowspan="2">Nivel del agua <p>(cm)</p> </td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Poros llenos</td> <td style="width:80px; text-align:center;">Poros parcialmente llenos</td> <td>Residuo</td> <td>PelÃ­cula</td> <td>Traza</td> </tr> <tr ng-if="!vm.model.notExistsSubsurfaceOilConditions" ng-repeat="item in vm.model.subsurfaceOilConditions track by $index"> <td style="text-align:center;">{{item.pitId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.pitDepth}}</td> <td style="text-align:center;">{{(item.oiledZoneEnd || item.oiledZoneEnd) ? item.oiledZoneStart+ \'-\' +item.oiledZoneEnd : \'NADA\'}}</td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilFilledPores\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'PartialFilledPores\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilResidue\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilFilm\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'Trace\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.buriedWater}}</td> </tr> <tr ng-if="!vm.model.subsurfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.subsurfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">8.OTRAS SUSTANCIAS CONTAMINANTES</th> <th colspan="10">MARCAR AQUI SI NO SE OBSERVA</th> <th></th> </tr> <tr> <td rowspan="2">Zona ID</td> <td colspan="4">PosiciÃ³n</td> <td colspan="3">Cobertura de la sustancia</td> <td colspan="5">Espesor</td> <td>DescripciÃ³n de la sustancia</td> <td>Â¿Bajo superficie?</td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Longitud</td> <td>Ancho</td> <td>Distr.</td> <td>BA</td> <td>CU</td> <td>CA</td> <td>MA</td> <td>PE</td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.notExistsOtherSubstances" ng-repeat="item in vm.model.otherSubstances track by $index"> <td style="text-align:center;">{{item.zoneId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.coverLength}}</td> <td style="text-align:center;">{{item.coverWidth}}</td> <td style="text-align:center;">{{item.distribution}}</td> <td style="text-align:center;"><i ng-show="item.thickness==\'TO\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'CV\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'CT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'ST\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'FL\'"> <small class="ion-checkmark"></small></i></td> <td>{{item.description}}</td> <td style="text-align:center;"><i ng-show="item.subSurface"> <small class="ion-checkmark"></small></i></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td colspan="15">B,M,S y U=Inferior, Media, Superior y Supra mareal. BA=Balsa, CU=Cubierta, CA=Capa, Ma=Mancha, PE=PelÃ­cula</td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="18">9.OBSERVACIONES GENERALES</th> </tr> <tr style="height:200px;"> <td colspan="18"> <blockquote ng-repeat="item in vm.model.comments track by $index"> <span><i ng-if="item.geometry" class="ion-ios-location"></i>&#160; {{item.code}}: {{item.comment}}</span> <small>{{item.userLogin.userName}} at {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small> </blockquote> </td> </tr> <tr> <td colspan="18"> Utilice el espacio de arriba para realizar observaciones sobre la localizaciÃ³n que no estÃ¡n contempladas en la parte 1 del Formulario. Si no hay observaciones adicionales escribir âNINGUNAâ. Los comentarios pueden ser relativos a: <ul> <li>la sensibilidad real o potencial observada o que se sabe que estÃ¡ presente de los recursos ecolÃ³gicos, recreativos, culturales, comerciales y cualquier otro interÃ©s socioeconÃ³mico;</li> <li>cualquier observaciÃ³n destacada sobre la fauna y flora, particularmente la muerte de individuos;</li> <li>cÃ¡lculos de volÃºmenes de contaminaciÃ³n en el segmento, basados en las dimensiones del hidrocarburo depositado que se ha observado y registrado; </li> <li>oleajes de temporal que puedan haber depositado hidrocarburo por encima de la pleamar normal; </li> <li>cualquier recomendaciÃ³n sobre la limpieza u otro tratamiento âse podrÃ­a incluir una descripciÃ³n de la tÃ©cnica recomendada, nivel sugerido de operaciÃ³n y cualquier restricciÃ³n prÃ¡ctica;</li> <li>aÃ±adir recomendaciones sobre los objetivos finales apropiados para finalizar las operaciones de limpieza.</li> </ul> </td> </tr> </table> <div class="page-break-before"> <table class="table table-bordered table-condensed table-print" ng-if="vm.model.photos"> <tr> <th colspan="18">9.FOTOGRAFIAS</th> </tr> <tr style="height:200px;"> <td colspan="18"> <div class="thumbnail" ng-repeat="item in vm.model.photos track by $index"> <a href="#myModal" data-toggle="modal" data-img-url="api/photos/{{item.id}}/image" onclick="angular.element(\'#myModal img\').attr(\'src\', angular.element(this).attr(\'data-img-url\'));"> <img ng-src="api/photos/{{item.id}}/image" style="max-height: 270px;"> </a> <div class="caption"> <strong>({{item.code}}) {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}<span class="pull-right"> <i ng-if="item.geometry" class="ion-ios-location"></i>&#160;</span></strong> <p>{{item.comments}}</p> </div> </div> </td> </tr> </table> </div> <div class="page-break-before"> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="18">10.Mapa</th> </tr> <tr> <td> <div id="mapCanvas"> </div> </td> </tr> </table> </div> </div>'),e.put("app/pages/scatreports/print/scatreport-print-body-gl.html",'<div> <table class="table table-bordered table-condensed table-print"> <tr> <th><strong>1. INFORMACIÃN XERAL</strong> </th> <th rowspan="3"> Data (dd/mm/aa) <p>{{vm.model.reportTime | date: \'dd/MM/yyyy HH:mm\'}}</p> </th> <th rowspan="2"> Hora da inspecciÃ³n (local) <p>de {{vm.model.surveyStartTime}} a {{vm.model.surveyEndTime}}</p> </th> </tr> <tr> <td> Incidente: {{vm.model.incident}} </td> </tr> <tr> <td> ID del Segmento {{vm.model.segment.segmentId}} </td> <td> <span ng-class="{\'label-important\':vm.model.weatherInfo==\'sun\'}" data-translate="app.weatherinfo.sun"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'clouds\'}" data-translate="app.weatherinfo.clouds"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'fog\'}" data-translate="app.weatherinfo.fog"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'rain\'}" data-translate="app.weatherinfo.rain"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'windy\'}" data-translate="app.weatherinfo.windy"></span>/ <span ng-class="{\'label-important\':vm.model.weatherInfo==\'snow\' }" data-translate="app.weatherinfo.snow"></span> </td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <span var="contacts"> <th><strong>2. {{\'app.scatreport.surveyteam\' | translate | uppercase}}</strong></th> <th> <span data-translate="app.contact.organisation"> </span></th> <th> <span data-translate="app.contact.phonenumber"> </span></th> </span></tr> <tr ng-repeat="item in vm.model.contacts track by $index | orderBy:predicate:reverse"> <td>{{item.contactName}}</td> <td>{{item.organisation}}</td> <td>{{item.phoneNumber}}</td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <c:out value="${request.getLocale}"> <tr> <span var="segment"> <th><strong> 3. {{\'app.scatreport.segment\' | translate | uppercase}}</strong></th> <th> Longitude total: {{vm.model.segment.segmentLength}} m </th> <th> Longitude inspeccionada: {{vm.model.segment.lengthSurveyed}}m </th> </span></tr> <tr> <td colspan="3"> Inicio GPS: <i>{{vm.model.segment.startPosition | lonlat:\'point\'}}</i> </td> </tr> <tr> <td colspan="3"> Final GPS: <i> {{vm.model.segment.endPosition | lonlat:\'point\'}}</i> </td> </tr> </c:out></table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="2"><strong>4. {{\'app.scatreport.shorelinetype\' | translate | uppercase}}</strong></th> <th colspan="2"> <span> <small class="ion-checkmark"></small> <small class="ion-checkmark"></small> = primaria (sÃ³ unha) </span>&#160;&#160;&#160; <span> <small class="ion-checkmark"></small> = secundaria <p><small> Rodee las casillas de los tipos de costa afectada y otras caracterÃ­sticas </small></p> </span> </th> </tr> <tr> <td><span ng-if="vm.shorelineTypes.BedrockCliff"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.BedrockCliff.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.BedrockCliff.oiled}"><span data-translate="app.shorelinetype.bedrockcliff"></span></span></td> <td><span ng-if="vm.shorelineTypes.MudSediments"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.MudSediments.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.MudSediments.oiled}"><span data-translate="app.shorelinetype.mudsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.BedrockPlatform"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.BedrockPlatform.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.BedrockPlatform.oiled}"><span data-translate="app.shorelinetype.bedrockplatform"></span></span></td> <td><span ng-if="vm.shorelineTypes.SandSediments"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.SandSediments.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.SandSediments.oiled}"><span data-translate="app.shorelinetype.sandsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.ManmadeSolid"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.ManmadeSolid.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.ManmadeSolid.oiled}"><span data-translate="app.shorelinetype.manmadesolid"></span></span></td> <td><span ng-if="vm.shorelineTypes.MixedSediments"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.MixedSediments.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.MixedSediments.oiled}"><span data-translate="app.shorelinetype.mixedsediments"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.ManmadePermeable"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.ManmadePermeable.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.ManmadePermeable.oiled}"><span data-translate="app.shorelinetype.manmadepermeable"></span></span></td> <td><span ng-if="vm.shorelineTypes.PebbleCobbleShingle"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.PebbleCobbleShingle.oiled}"><span data-translate="app.shorelinetype.pebblecobbleshingle"></span></span></td> </tr> <tr> <td><span ng-if="vm.shorelineTypes.SaltMarsh"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.SaltMarsh.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.SaltMarsh.oiled}"><span data-translate="app.shorelinetype.saltmarsh"></span></span></td> <td><span ng-if="vm.shorelineTypes.Boulder"> <small class="ion-checkmark"></small> <i ng-if="vm.shorelineTypes.Boulder.primary"> <small class="ion-checkmark"></small> </i></span></td> <td><span ng-class="{\'label-important\':vm.shorelineTypes.Boulder.oiled}"><span data-translate="app.shorelinetype.boulder"></span></span></td> </tr> <tr> <td></td> <td> Outras (describir): </td> <td></td> <td></td> </tr> <tr> <td colspan="2"> Outras caracterÃ­sticas: </td> <td colspan="2"> <span data-translate="app.scatreport.waveexposure">: <p> <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'VeryExposed\'}" data-translate="app.waveexposure.veryexposed"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'Exposed\'}" data-translate="app.waveexposure.exposed"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'PartiallySheltered\'}" data-translate="app.waveexposure.partiallysheltered"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'VerySheltered\'}" data-translate="app.waveexposure.verysheltered"></span>/ <span ng-class="{\'label-important\':vm.model.segment.waveExposure==\'ExtremelySheltered\'}" data-translate="app.waveexposure.extremelysheltered"></span>/ </p> </span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.Estuary"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.Estuary.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.Estuary.oiled}"><span data-translate="app.localfeature.estuary"></span></span></td> <td><span ng-if="vm.localFeatures.HistoricalArtefact"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.HistoricalArtefact.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.HistoricalArtefact.oiled}"><span data-translate="app.localfeature.historicalartefact"></span></span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.AmenityArea"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.AmenityArea.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.AmenityArea.oiled}"><span data-translate="app.localfeature.amenityarea"></span></span></td> <td><span ng-if="vm.localFeatures.Pools"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.Pools.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.Pools.oiled}"><span data-translate="app.localfeature.pools"></span></span></td> </tr> <tr> <td><span ng-if="vm.localFeatures.DeadSeagrass"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.DeadSeagrass.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.DeadSeagrass.oiled}"><span data-translate="app.localfeature.deadseagrass"></span></span></td> <td><span ng-if="vm.localFeatures.DeepCracks"> <small class="ion-checkmark"></small> <i ng-if="vm.localFeatures.DeepCracks.primary"> <small class="ion-checkmark"></small> </i></span> </td> <td><span ng-class="{\'label-important\':vm.localFeatures.DeepCracks.oiled}"><span data-translate="app.localfeature.deepcracks"></span></span></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th> 5. CARACTERÃSTICAS OPERATIVAS </th> <th> <p> Â¿Restos? <span ng-class="{\'label-important\':vm.model.operationalFeatures.existDebris}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.existDebris}">No</span> Â¿Contaminados? <span ng-class="{\'label-important\':vm.model.operationalFeatures.oiledDebris}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.oiledDebris}">No</span> </p> <p> Cantidad: {{vm.model.operationalFeatures.numberDebris}} <span ng-class="{\'label-important\':vm.model.operationalFeatures.typeDebris==\'Bags\'}">Bolsas</span>/<span ng-class="{\'label-important\':vm.model.operationalFeatures.typeDebris==\'Trucks\'}">Camiones</span> </p> <span ng-repeat="item in vm.model.operationalFeatures.debrises track by $index" class="label" style="margin:4px; padding:6px;"> {{item.number}} <span ng-show="item.type==\'cups\'"><span data-translate="app.debristype.cups"></span> <span ng-show="item.type==\'litres\'"><span data-translate="app.debristype.litres"></span> <span ng-show="item.type==\'volume\'"><span data-translate="app.debristype.volume"></span> <i ng-show="item.oiled" class="badge badge-info icon-tint"></i> </span> </span></span></span></th> </tr> <tr> <td> <p> Â¿Acceso directo desde tierra? <span ng-repeat="item in vm.model.operationalFeatures.directBackshoreAccess track by $index"> {{$first ? \'\': \', \'}} <span ng-show="item==\'Trucks\'"><span data-translate="app.operationalfeature.directbackshoreaccess.trucks"></span> <span ng-show="item==\'Pedestrian\'"><span data-translate="app.operationalfeature.directbackshoreaccess.pedestrian"></span> <span ng-show="item==\'No\'"><span data-translate="app.operationalfeature.directbackshoreaccess.no"></span> </span>  </span></span></span></p> <p> Â¿A travÃ©s segmento contiguo? <span ng-repeat="item in vm.model.operationalFeatures.neighbourSegmentAccess track by $index"> {{$first ? \'\': \', \'}} <span ng-show="item==\'Trucks\'"><span data-translate="app.operationalfeature.neighboursegmentaccess.trucks"></span> <span ng-show="item==\'Pedestrian\'"><span data-translate="app.operationalfeature.neighboursegmentaccess.pedestrian"></span> <span ng-show="item==\'No\'"><span data-translate="app.operationalfeature.neighboursegmentaccess.no"></span> </span>  </span></span></span></p> </td> <td> Restricciones de acceso: {{vm.model.operationalFeatures.accessRestrictions}} </td> </tr> <tr> <td> Â¿Acantiliado costero? <span ng-class="{\'label-important\':vm.model.operationalFeatures.backShoreCliff}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.backShoreCliff}">No</span> Alt {{vm.model.operationalFeatures.backShoreCliffHeight}} m </td> <td> Â¿Ãrea de deposito adecuada? <span ng-class="{\'label-important\':vm.model.operationalFeatures.suitableLaydownArea}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.suitableLaydownArea}">No</span> </td> </tr> <tr> <td colspan="2"> Â¿Operacions de limpeza en marcha? <span ng-class="{\'label-important\':vm.model.operationalFeatures.ongoingCleanupActivity}">Si</span>/<span ng-class="{\'label-important\':!vm.model.operationalFeatures.ongoingCleanupActivity}">No</span> <p> {{vm.model.operationalFeatures.ongoingCleanupActivityComments}} </p> </td> </tr> <tr> <td colspan="2"> Notas: <p> <small> {{vm.model.operationalFeatures.comments}}</small> </p> </td> </tr> </table> <table class="table table-bordered table-condensed table-print page-break-before"> <tr> <th colspan="8"> 6.HIDROCARBURO SUPERFICIAL </th> <th colspan="10"> MARCAR AQUI SE NON SE OBSERVA: <i ng-if="model.notExistsSurfaceOilConditions"><small class="ion-checkmark"></small> </i> </th> <th></th> </tr> <tr> <td rowspan="2"> Zona ID </td> <td colspan="4"> PosiciÃ³n </td> <td colspan="3"> Cobertura do hidrocarburo </td> <td colspan="5"> Espesor do hidrocarburo </td> <td colspan="6"> Apariencia do hidrocarburo </td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Longitud</td> <td>Ancho</td> <td>Distr.</td> <td>BA</td> <td>CU</td> <td>CA</td> <td>MA</td> <td>PE</td> <td>FR</td> <td>MS</td> <td>BA</td> <td>GA</td> <td>RS</td> <td>PA</td> </tr> <tr ng-if="!vm.model.notExistsSurfaceOilConditions" ng-repeat="item in vm.model.surfaceOilConditions track by $index"> <td style="text-align:center;">{{item.zoneId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.oilCoverLeghth}}</td> <td style="text-align:center;">{{item.oilCoverWidth}}</td> <td style="text-align:center;">{{item.oilDistribution}}</td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'TO\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'CV\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'CT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'ST\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilThickness==\'FL\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'FR\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'MS\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'TB\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'PT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'SR\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'AP\'"> <small class="ion-checkmark"></small></i></td> </tr> <tr ng-if="!vm.model.surfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.surfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td colspan="19">B,M,S y U=Inferior, Media, Superior y Supra mareal. BA=Balsa, CU=Cubierta, CA=Capa, Ma=Mancha, PE=PelÃ­cula <p>FR=Fresco, MS=Mousse, BA=Bolas alquitrÃ¡n, GA=Galletas alquitrÃ¡n, RS=Residuo superficial, PA=Pavimento asfalto</p> </td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">7.HIDROCARBURO BAIXO SUPERFICIE</th> <th colspan="6">MARCAR AQUI SE NON HAY INVESTIGACIÃN: <i ng-if="vm.model.notExistsSubsurfaceOilConditions"><small class="ion-checkmark"></small> </i></th> </tr> <tr> <td rowspan="2">ID Cata</td> <td colspan="4">PosiciÃ³n</td> <td rowspan="2">Profundidade <p>(cm)</p> </td> <td rowspan="2">Zona contaminada <p>(cm-cm)</p> </td> <td colspan="5">ApariencÃ­a do hidrocarburo baixo superficie</td> <td rowspan="2">Nivel da agua <p>(cm)</p> </td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Poros cheos</td> <td style="width:80px; text-align:center;">Poros parcialmente cheos</td> <td>Residuo</td> <td>PelÃ­cula</td> <td>Traza</td> </tr> <tr ng-if="!vm.model.notExistsSubsurfaceOilConditions" ng-repeat="item in vm.model.subsurfaceOilConditions track by $index"> <td style="text-align:center;">{{item.pitId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.pitDepth}}</td> <td style="text-align:center;">{{(item.oiledZoneEnd || item.oiledZoneEnd) ? item.oiledZoneStart+ \'-\' +item.oiledZoneEnd : \'NADA\'}}</td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilFilledPores\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'PartialFilledPores\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilResidue\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.oilCharacter==\'OilFilm\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'Trace\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.buriedWater}}</td> </tr> <tr ng-if="!vm.model.subsurfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.subsurfaceOilConditions"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">8.OTRAS SUSTANCIAS CONTAMINANTES</th> <th colspan="10">MARCAR AQUI SE NON SE OBSERVA</th> <th></th> </tr> <tr> <td rowspan="2">Zona ID</td> <td colspan="4">PosiciÃ³n</td> <td colspan="3">Cobertura da sustancia</td> <td colspan="5">Espesor</td> <td>DescripciÃ³n da sustancia</td> <td>Â¿Baixo superficie?</td> </tr> <tr> <td>B</td> <td>M</td> <td>S</td> <td>U</td> <td>Lonxitude</td> <td>Ancho</td> <td>Distr.</td> <td>BA</td> <td>CU</td> <td>CA</td> <td>MA</td> <td>PE</td> <td></td> <td></td> </tr> <tr ng-if="!vm.model.notExistsOtherSubstances" ng-repeat="item in vm.model.otherSubstances track by $index"> <td style="text-align:center;">{{item.zoneId}}</td> <td style="text-align:center;"><i ng-show="item.level==\'L\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'M\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'U\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.level==\'S\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;">{{item.coverLength}}</td> <td style="text-align:center;">{{item.coverWidth}}</td> <td style="text-align:center;">{{item.distribution}}</td> <td style="text-align:center;"><i ng-show="item.thickness==\'TO\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'CV\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'CT\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'ST\'"> <small class="ion-checkmark"></small></i></td> <td style="text-align:center;"><i ng-show="item.thickness==\'FL\'"> <small class="ion-checkmark"></small></i></td> <td>{{item.description}}</td> <td style="text-align:center;"><i ng-show="item.subSurface"> <small class="ion-checkmark"></small></i></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td colspan="15">B,M,S y U=Inferior, Media, Superior y Supra mareal. BA=Balsa, CU=Cubierta, CA=Capa, Ma=Mancha, PE=PelÃ­cula</td> </tr> </table> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="8">9.OBSERVACIONS XERAIS</th> <th colspan="10"></th> </tr> <tr style="height:200px;"> <td colspan="18"> <blockquote ng-repeat="item in vm.model.comments track by $index"> <span><i ng-if="item.geometry" class="ion-ios-location"></i>&#160; {{item.code}}: {{item.comment}}</span> <p><small>{{item.userLogin.userName}} at {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small></p> </blockquote> </td> </tr> <tr> <td colspan="18"> Utilice o espacio superior para realizar observacions sobre a localizaciÃ³n que non estÃ¡n contempladas na parte do Formulario. Se non hay observacions adicionais escribir âNINGUNHAâ. Os comentarios poden ser relativos a: <ul> <li>sensibilidade real ou potencial observada o que se sabe que estÃ¡ presente dos recursos ecolÃ³xicos, recreativos, culturales, comerciales ou cualquer outro interÃ©s socioeconÃ³mico;</li> <li>calquer observaciÃ³n destacada sobre a fauna e flora, particularmente a morte de individuos;</li> <li>cÃ¡lculos de volÃºmenes de contaminaciÃ³n no segmento, baseados nas dimensions do hidrocarburo depositado que observado e registrado; </li> <li>oleaxes de temporal que poidan haber depositado hidrocarburo por encima da pleamar normal; </li> <li>calquer recomendaciÃ³n sobre a limpieza u otro tratamiento âse poderÃ­a incluir unha descripciÃ³n da tÃ©cnica recomendada, nivel suxerido de operaciÃ³n e calquer restricciÃ³n prÃ¡ctica;</li> <li>engadir recomendacions sobre os obxetivos finais apropiados para finalizar as operacions de limpeza.</li> </ul> </td> </tr> </table> <div class="page-break-before"> <table class="table table-bordered table-condensed table-print" ng-if="model.photos"> <tr> <th colspan="18">9.FOTOGRAFIAS</th> </tr> <tr style="height:200px;"> <td colspan="18"> <div class="thumbnail" ng-repeat="item in vm.model.photos track by $index"> <a href="#myModal" data-toggle="modal" data-img-url="api/photos/{{item.id}}/image" onclick="angular.element(\'#myModal img\').attr(\'src\', angular.element(this).attr(\'data-img-url\'));"> <img ng-src="api/photos/{{item.id}}/image" style="max-height: 270px;"> </a> <div class="caption"> <strong>({{item.code}}) {{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}<span class="pull-right"> <i ng-if="item.geometry" class="ion-ios-location"></i>&#160;</span></strong> <p>{{item.comments}}</p> </div> </div> </td> </tr> </table> </div> <div class="page-break-before"> <table class="table table-bordered table-condensed table-print"> <tr> <th colspan="18">10.Mapa</th> </tr> <tr> <td> <div id="mapCanvas"></div> </td> </tr> </table> </div> </div>'),
e.put("app/pages/scatreports/print/scatreport-print.html",'<div style="background: white; padding-top:10px"> <table class="table table-bordered table-condensed table-print"> <tr> <th rowspan="2"><img src="assets/img/headXunta.png"></th> <th style="text-align:center;"></th> <th style="text-align:center;"></th> </tr> <tr> <td style="text-align:center;">POLREP Costa</td> <td style="text-align:center;"></td> </tr> </table> <ng-include ng-if="vm.activeLanguage()==\'gl\'" src="\'app/pages/scatreports/print/scatreport-print-body-gl.html\'"></ng-include> <ng-include ng-if="vm.activeLanguage()==\'es\'" src="\'app/pages/scatreports/print/scatreport-print-body-es.html\'"></ng-include> <ng-include ng-if="vm.activeLanguage()==\'en\'" src="\'app/pages/scatreports/print/scatreport-print-body-en.html\'"></ng-include> </div> '),e.put("app/pages/scatreports/search/scatreports-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-6 col-xs-12"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.incident" ng-model-options="{ updateOn: \'blur\' }" type="text"> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="input-group input-group-sm"> <input class="form-control date-picker" date-range-picker="" type="text" ng-model="vm.searchTerms.reportTime"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </div> </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> </div> </div> <div class="panel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed table-hover" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:180px;" st-sort="reportTime" data-translate="app.scatreport.reporttime">reportTime</th> <th style="width:180px;" st-sort="reportTime" data-translate="app.scatreport.surveystarttime">surveyStartTime</th> <th style="width:180px;" st-sort="reportTime" data-translate="app.scatreport.surveyendtime">surveyEndTime</th> <th st-sort="author.username" data-translate="app.scatreport.author"></th> <th st-sort="incident" data-translate="app.scatreport.incident"></th> <th data-translate="app.scatreport.pollutionepisode"></th> <th ng-if-role="ROLE_ADMIN,ROLE_SCAT_INSPECTOR,ROLE_SCAT_MANAGER" class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.searchResults track by item.id"> <td> <a ng-if-role="ROLE_ADMIN,ROLE_SCAT_INSPECTOR,ROLE_SCAT_MANAGER" ng-if-not-role="ROLE_POLLUTION_EPISODE" href="" ng-click="navigate($event, \'scatreports.detail.shorelinetypes\',{id:item.id})">{{item.reportTime | date:\'dd/MM/yyyy\'}}</a> <a ng-if-role="ROLE_POLLUTION_EPISODE" ng-if-not-role="ROLE_ADMIN,ROLE_SCAT_MANAGER,ROLE_SCAT_INSPECTOR" href="" ng-click="navigate($event, \'scatreports.detail.print\',{id:item.id})">{{item.reportTime | date:\'dd/MM/yyyy\'}}</a> </td> <td>{{item.surveyStartTime }}</td> <td>{{item.surveyEndTime }}</td> <td>{{item.authorName }}</td> <td>{{item.incident}}</td> <td>{{item.pollutionEpisodeName}}</td> <td class="text-right none-padding nowrap" ng-if-role="ROLE_ADMIN,ROLE_SCAT_INSPECTOR,ROLE_SCAT_MANAGER"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="scatreports.detail({\'id\':item.id})" data-translate="global.button.detail"></a></li> <li role="menuitem"><a href="" ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER" ng-click="vm.removeReport(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div>   </td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.doSearch()"></uib-pagination> </div> </div> </div> '),e.put("app/pages/userlogins/create/userlogin-create-dlg.html",'<div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Pechar" ng-click="vm.cancel()"><span aria-hidden="true">&times;</span></button> <h3 class="modal-title" id="modal-title" data-translate="app.userlogin.cmd.create">Novo UserLogin</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.createForm" ng-submit="vm.create(createForm)"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.createForm.inputUsername.$invalid && (vm.createForm.inputUsername.$dirty || vm.createForm.$submitted), \'has-warning\': vm.duplicateUser}"> <label for="inputUsername" data-translate="app.userlogin.userLogin">UserLogin</label> <input type="text" name="inputUsername" ng-model-options="{updateOn: \'blur\'}" id="inputUsername" class="form-control" required="required" ng-model="vm.model.username" ng-change="vm.checkUniqueUser()"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> <small class="text-warning help-block warning-block basic-block" data-translate="global.messages.validate.text.unique">Not valid (unique)</small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.createForm.inputPassword.$invalid && (vm.createForm.inputPassword.$dirty || vm.createForm.$submitted)}"> <label for="name" data-translate="app.userlogin.password">Password</label> <input type="text" name="inputPassworkd" id="inputPassword" class="form-control" required="required" ng-model="vm.model.password"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.createForm.inputFullName.$invalid && (vm.createForm.inputFullName.$dirty || vm.createForm.$submitted)}"> <label for="inputFullName" data-translate="app.userlogin.fullName">Nome</label> <input type="text" name="inputFullName" id="inputFullName" class="form-control" required="required" ng-model="vm.model.fullName"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.createForm.inputEmail.$invalid && (vm.createForm.inputEmail.$dirty || vm.createForm.$submitted), \'has-warning\': vm.duplicateEmail}"> <label for="inputEmail" data-translate="app.userlogin.userEmail">Correo electrÃ³nico</label> <input type="text" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$" ng-model-options="{updateOn: \'blur\'}" name="inputEmail" id="inputEmail" class="form-control" ng-model="vm.model.userEmail" ng-change="vm.checkUniqueEmail()"> <small class="text-error help-block error-block basic-block" data-translate="global.messages.validate.text.invalid">Verifique o formato do correo electrÃ³nico</small> <small class="text-warning help-block warning-block basic-block" data-translate="global.messages.validate.email.duplicated">Email/Usuario no vÃ¡lido</small> </div> </div> </div> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.createForm.inputRole.$invalid && (vm.createForm.inputRole.$dirty || vm.createForm.$submitted)}"> <label for="inputRole" data-translate="app.userlogin.userRole">PERFIL</label> <select name="inputRole" id="inputRole" ng-options="\'app.userrole.\'+p.role | translate for p in vm.userRoles" ng-model="vm.model.userRole" class="form-control" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </select></div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.createForm.inputLevel.$invalid && (vm.createForm.inputLevel.$dirty || vm.createForm.$submitted)}"> <label for="inputLevel" data-translate="app.userlogin.level">NIVEL</label> <input name="inputLevel" id="inputLevel" type="number" step="1" min="0" max="3" ng-model="vm.model.level" class="form-control" required="required"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.number.range" data-translate-values="{\'max\':\'3\',\'min\':\'0\'}"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.userAuthorities"> </label> <div checkboxes="true" ng-dropdown-multiselect="" options="vm.userAuthoritiesOptions" selected-model="vm.model.userAuthorities" extra-settings="vm.userAuthoritiesSettings"></div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group has-feedback"> <label for="inputRole" data-translate="app.userlogin.comments">COMMENTS</label> <textarea rows="3" cols="50" name="inputComments" ng-model="vm.model.comments" class="form-control"></textarea> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"> <div class="form-group"> <label for="rememberMe" title="{{ \'app.userlogin.detail.fieldset.inputEnabled.title\' | translate }}"> <input type="checkbox" id="inputEnabled" ng-model="vm.model.enabled" checked=""> <span data-translate="app.userlogin.enabled">Activar?</span> </label> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="submit" ng-click="vm.create()" data-translate="global.button.create">Crear</button>  </div>'),e.put("app/pages/userlogins/detail/userlogin-detail.html",'<form name="vm.detailForm" editable-form="" onaftersave="vm.save()" novalidate=""> <div class="panel full-invisible" zoom-in=""> <div class="panel-heading clearfix" ng-class="{\'alert-danger\':!vm.model.enabled }"> <h3 class="panel-title ng-binding">{{vm.model.fullName}} <small>{{vm.model.username}}</small> <ng-include src="\'app/pages/templates/editable-detail-heading.html\'"></ng-include> </h3> </div> <div class="panel-body"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.username">Nome</label> <div> <p class="form-control-static" editable-text="vm.model.username" e-required=""> {{vm.model.username}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.password"></label> <div> <p class="form-control-static" e-name="password" editable-text="vm.model.password" e-ng-change="vm.model.passwordReset=true"> {{vm.model.password}} </p>  </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.fullName">Nome Apelidos</label> <div> <p class="form-control-static" editable-text="vm.model.fullName"> {{vm.model.fullName}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.userEmail">Email</label> <div> <p class="form-control-static" editable-email="vm.model.userEmail"> {{vm.model.userEmail}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.organization">Organization</label> <div> <p class="form-control-static" editable-text="vm.model.organization"> {{vm.model.organization}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.phone">Phone</label> <div> <p class="form-control-static" editable-text="vm.model.phone"> {{vm.model.phone}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.userRole">PERFIL</label> <div> <p class="form-control-static" editable-select="vm.model.userRole" e-ng-options="p as \'app.userrole.\'+p.role | translate for p in vm.userRoles track by p.id"> {{\'app.userrole.\'+vm.model.userRole.role | translate}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.detailForm.level.$error.max || vm.detailForm.level.$error.min}"> <label class="control-label" data-translate="app.userlogin.level"></label> <div> <p class="form-control-static" e-name="level" e-min="0" e-max="3" e-step="1" editable-number="vm.model.level"> {{vm.model.level}} </p> <span class="help-block error-block basic-block sub-little-text" ng-show="vm.detailForm.level.$error.max" data-translate="global.messages.validate.number.max" data-translate-values="{\'max\': \'3\'}"></span> <span class="help-block error-block basic-block sub-little-text" ng-show="vm.detailForm.level.$error.min" data-translate="global.messages.validate.number.min" data-translate-values="{\'min\': \'0\'}"></span> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group" ng-hide="vm.detailForm.$visible"> <label class="control-label" data-translate="app.userlogin.userAuthorities"> </label> <p class="form-control-static" editable-text="_"> {{vm.userAuthorities | joinBy}} </p> </div> <div class="form-group" ng-show="vm.detailForm.$visible"> <label class="control-label" data-translate="app.userlogin.userAuthorities"> </label> <div checkboxes="true" ng-dropdown-multiselect="" options="vm.userAuthoritiesOptions" selected-model="vm.model.userAuthorities" extra-settings="vm.userAuthoritiesSettings"></div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.comments">Comments</label> <div> <p class="form-control-static" editable-textarea="vm.model.comments" e-rows="1" e-cols="40"> {{vm.model.comments}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group pull-right"> <label class="control-label"> </label> <div> <p class="form-control-static" editable-checkbox="vm.model.enabled" e-title="{{ \'app.userlogin.detail.fieldset.inputEnabled.title\' | translate }}"> <span class="label label-success" ng-show="vm.model.enabled" data-translate="app.userlogin.enabled">ENABLED </span> <span class="label label-danger" ng-hide="vm.model.enabled" data-translate="app.userlogin.disabled">DISABLED</span> </p> </div> </div> </div> </div> </div> </div> </form> '),e.put("app/pages/userlogins/search/userlogins-search.html",'<div class="with-scroll panel"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.usernameorfullname" ng-model-options="{ updateOn: \'blur\' }" type="text"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </form> </div> <div style="padding:0px;"> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger">{{\'global.messages.search.noresults\' | translate}}</strong></small> <div ng-show="vm.searchResults.length"> <div class="pull-left"> <small><strong class="text-danger">{{vm.page.totalElements}}</strong> {{\'global.messages.search.inforesults\' | translate}}</small> </div> <div class="pull-right"> <small ng-class="{\'text-muted\': !vm.searchTerms.enabled}"> <input type="checkbox" ng-model="vm.searchTerms.enabled"> <span data-translate="app.userlogin.search.viewEnabled"> </span> </small> </div> </div> </div> </div> <div class="list-group"> <a class="list-group-item" ng-class="{false: \'list-group-item-danger\'}[userlogin.enabled]" ui-sref="userlogins.detail({\'id\': userlogin.id})" ng-repeat="userlogin in vm.searchResults track by $index"> <h4 class="list-group-item-heading"> {{userlogin.fullName}} <small>{{userlogin.username}} </small> <div ng-hide="!userlogin.enabled" class="badge label-info pull-right">{{userlogin.level}}</div> </h4> <div class="list-group-item-text clearfix"> <i ng-if="userlogin.organization">{{userlogin.organization}} </i> <small ng-if="userlogin.phone">ð: {{userlogin.organization}}</small> <div class="pull-right"> <i> {{"app.userrole."+userlogin.userRole.role | translate}} </i> <br> <small><span ng-repeat="auth in userlogin.userAuthorities">{{\'app.userlogin.userAuthority.\'+auth.name | translate}}, </span></small> </div> </div> </a> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.onPageChange()"></uib-pagination> </div> </div> </div> '),e.put("app/theme/components/accountSettings/account-settings.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title">Axustes da conta ({{vm.user.name}})</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="alert alert-danger" ng-show="vm.error"> {{vm.error}} </div> <div class="form-group"> <label class="control-label" for="email" data-translate="global.form.email">Email</label> <input type="email" class="form-control" id="email" name="email" placeholder="{{\'global.form.email.placeholder\' | translate}}" ng-model="vm.settingsAccount.email" ng-minlength="5" ng-maxlength="100" maxlength="100">  </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.oldpassword.$invalid && (vm.newForm.oldpassword.$dirty || vm.$submitted)}"> <label class="control-label" for="oldpassword">Contrasinal Actual</label> <input type="password" id="oldpassword" ng-model="vm.oldpassword" class="form-control" placeholder="Contrasinal Actual" required="" autocomplete="off"> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.newPassword.$invalid && (vm.newForm.newPassword.$dirty || vm.$submitted)}"> <label class="control-label" for="newPassword">Novo Contrasinal</label> <input type="password" id="newPassword" ng-model="vm.password" class="form-control" placeholder="Novo Contrasinal" autocomplete="off"> </div> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.confirmPassword.$invalid && (vm.newForm.confirmPassword.$dirty || vm.$submitted)}"> <label class="control-label" for="confirmPassword">Confirmar novo contrasinal</label> <input type="password" id="confirmPassword" ng-model="vm.confirmPassword" class="form-control" placeholder="Confirme o contrasinal" autocomplete="off"> </div> <ng-password-meter password="vm.password"></ng-password-meter> <div class="alert alert-danger" ng-show="vm.password!=vm.confirmPassword" data-translate="global.messages.error.dontmatch"> The password and its confirmation do not match! </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid||vm.password==vm.confirmPassword, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid||vm.password!=vm.confirmPassword||vm.isSubmit" type="button" ng-click="vm.save()" data-translate="global.button.accept">{{::vm.acceptLabel || \'Gardar\' }}</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div> '),e.put("app/theme/components/backTop/backTop.html",'<i class="ion-chevron-up back-top" id="backTop" title="Ir Ã³ inicio"></i> '),e.put("app/theme/components/baSidebar/ba-sidebar.html",'<aside class="al-sidebar hidden-print" ng-swipe-right="$baSidebarService.setMenuCollapsed(false)" ng-swipe-left="$baSidebarService.setMenuCollapsed(true)" ng-mouseleave="hoverElemTop=selectElemTop"> <ul class="al-sidebar-list" slimscroll="{height: \'{{menuHeight}}px\'}" slimscroll-watch="menuHeight"> <li ng-repeat="item in ::menuItems" class="al-sidebar-list-item" ng-class="::{\'with-sub-menu\': item.subMenu}" ui-sref-active="selected" ba-sidebar-toggling-item="item"> <a ng-mouseenter="hoverItem($event, item)" ui-state="item.stateRef || \'\'" ui-state-params="item.stateParams || {}" ng-href="{{::(item.fixedHref ? item.fixedHref: \'\')}}" ng-if="::!item.subMenu" class="al-sidebar-list-link"> <i class="{{ ::item.icon }}"></i> <span data-translate="{{ ::item.title}}"></span> </a> <a ng-mouseenter="hoverItem($event, item)" ng-if="::item.subMenu" class="al-sidebar-list-link" ba-ui-sref-toggler=""> <i class="{{ ::item.icon }}"></i><span data-translate="{{ ::item.title}}">  </span> <b class="ion-chevron-down" ui-sref-active="ion-chevron-up" ng-if="::item.subMenu"></b> </a> <ul ng-if="::item.subMenu" class="al-sidebar-sublist" ng-class="{\'slide-right\': item.slideRight}" ba-ui-sref-toggling-submenu=""> <li ng-repeat="subitem in ::item.subMenu" ng-class="::{\'with-sub-menu\': subitem.subMenu}" ui-sref-active="selected" ba-sidebar-toggling-item="subitem" class="ba-sidebar-sublist-item"> <a ng-mouseenter="hoverItem($event, item)" ng-if="::subitem.subMenu" ba-ui-sref-toggler="" class="al-sidebar-list-link subitem-submenu-link"><span data-translate="{{ ::subitem.title}}"></span> <b ng-class="{\'ion-chevron-up\': subitem.expanded, \'ion-chevron-down\': !subitem.expanded}" ng-if="::subitem.subMenu"></b> </a> <ul ng-if="::subitem.subMenu" class="al-sidebar-sublist subitem-submenu-list" ng-class="{expanded: subitem.expanded, \'slide-right\': subitem.slideRight}" ba-ui-sref-toggling-submenu=""> <li ng-mouseenter="hoverItem($event, item)" ng-repeat="subSubitem in ::subitem.subMenu" ui-sref-active="selected"> <a ng-mouseenter="hoverItem($event, item)" href="" ng-if="::subSubitem.disabled" class="al-sidebar-list-link" data-translate="{{ ::item.title}}">  </a> <a ng-mouseenter="hoverItem($event, item)" ui-state="subSubitem.stateRef || \'\'" ui-state-params="subitem.stateParams || {}" ng-if="::!subSubitem.disabled" ng-href="{{::(subSubitem.fixedHref ? subSubitem.fixedHref: \'\')}}" data-translate="{{ ::subSubitem.title}}">  </a> </li> </ul> <a ng-mouseenter="hoverItem($event, item)" href="" ng-if="::(!subitem.subMenu && subitem.disabled)" class="al-sidebar-list-link" data-translate="subitem.title">  </a> <a ng-mouseenter="hoverItem($event, item)" target="{{::(subitem.blank ? \'_blank\' : \'_self\')}}" ng-if="::(!subitem.subMenu && !subitem.disabled)" ui-state="subitem.stateRef || \'\'" ui-state-params="subitem.stateParams || {}" ng-href="{{::(subitem.fixedHref ? subitem.fixedHref: \'\')}}" data-translate="{{ ::subitem.title}}">  </a> </li> </ul> </li> </ul>   <div class="sidebar-hover-elem" ng-style="{top: hoverElemTop + \'px\', height: hoverElemHeight + \'px\'}" ng-class="{\'show-hover-elem\': showHoverElem }"></div> </aside> '),e.put("app/theme/components/baWizard/baWizard.html",'<div class="ba-wizard"> <div class="ba-wizard-navigation-container"> <div ng-repeat="t in vm.tabs" class="ba-wizard-navigation {{vm.tabNum == $index ? \'active\' : \'\'}}" ng-click="vm.selectTab($index)"> {{t.title}} </div> </div> <div class="progress ba-wizard-progress"> <div class="progress-bar progress-bar-danger active" role="progressbar" aria-valuemin="0" aria-valuemax="100" ng-style="{width: vm.progress + \'%\'}"> </div> </div> <div class="steps" ng-transclude=""></div> <nav> <ul class="pager ba-wizard-pager"> <li class="previous"><button ng-disabled="!vm.canGoBack()" ng-if="!vm.isFirstTab()" ng-click="vm.previousTab()" type="button" class="btn btn-primary"><i aria-hidden="true" class="ion-chevron-left"></i> <span data-translate="global.button.previous"></span></button></li> <li class="next"> <button ng-disabled="!vm.isComplete()" ng-if="!vm.isLastTab()" ng-click="vm.nextTab()" type="button" class="btn btn-primary"><span data-translate="global.button.next"></span> <i aria-hidden="true" class="ion-chevron-right"></i> </button></li> <li class="finish"> <button ng-disabled="!vm.isComplete()" ng-if="vm.isLastTab()" ng-click="vm.onFinish()" type="button" class="btn btn-success"><i aria-hidden="true" class="ion-ios-flag"></i> <span data-translate="{{vm.finishLabel || \'global.button.finish\'}}"></span> </button></li> </ul> </nav> </div> '),e.put("app/theme/components/baWizard/baWizardStep.html",'<section ng-show="selected" class="step" ng-transclude=""></section>'),e.put("app/theme/components/colorPicker/color-picker.html",'<div uib-dropdown="" class="dropdown-picker"> <button type="button" uib-dropdown-toggle="" class="btn btn-default" style="background-color:{{vm.ngModel}}"></button> <ul class="dropdown-menu" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem" ng-repeat="color in vm.availableColors"> <button class="btn btn-default" type="button" ng-click="vm.ngModel = color" style="background-color:{{color}}"></button> </li> </ul> </div> '),e.put("app/theme/components/bookmark/bookmark.html",'<span class="text-center icon-rating" ng-class="{\'icons-disabled\': vm.disabled}"> <a href="" class="icon {{vm.getClass()}}" ng-style="vm.getStyle()" ng-click="vm.toggleMark()"></a> </span>'),e.put("app/theme/components/contentTop/breadcrumb-template.html",' <li ng-repeat="crumb in breadcrumbs"> <a ui-sref="{{ crumb.route }}" ng-if="!$last" data-translate="{{ ::crumb.displayName}}"></a> <small ng-show="$last" data-translate="{{ ::crumb.displayName}}"></small> </li> '),e.put("app/theme/components/contentTop/contentTop.html",'<div class="content-top clearfix hidden-print"> <h1 class="al-title" data-translate="{{activePageTitle}}"></h1> <ul class="breadcrumb al-breadcrumb hidden-mobile"> <li><a href="#/dashboard" title="Inicio"><i class="fa fa-home"></i></a></li> <ui-breadcrumbs displayname-property="title" abstract-proxy-property="data.proxy" template-url="app/theme/components/contentTop/breadcrumb-template.html"></ui-breadcrumbs>  </ul> </div>'),e.put("app/theme/components/dayTide/dayTide.html",'<div class="thumbnail" style="width: 220px;" ng-repeat="day in tideInfo.days track by $index"> <button style="z-index: 1000; position:absolute; left:2px; top:15%; height:70%; width:12px;" ng-click="addDays(-1)" class="btn btn-xs btn-default"><i class="ion-chevron-left"></i></button> <button style="z-index: 1000; position:absolute; right:2px; top:15%; height:70%; width:12px;" ng-click="addDays(1)" class="btn btn-xs btn-default"><i class="ion-chevron-right"></i></button> <div class="tide-day">{{day.timePeriod.begin.timeInstant | date: \'dd/MM\'}} </div> <div class="tide-day-name"> {{day.timePeriod.begin.timeInstant | date: \'EEEE\'}}</div> <table class="tide-table"> <tbody> <tr ng-repeat="item in day.variables[0].summary" ng-class="{\'high-tide\':item.state==\'High tides\',\'low-tide\': item.state==\'Low tides\'}"> <td> {{item.timeInstant | date: \'HH:mm\'}}</td> <td> {{item.height}} </td> <td class="text-center"> <img class="img-responsive" alt="WEAK_SHOWERS" src="http://servizos.meteogalicia.es:80/apiv3/images/weather/sky-state/day/chubascosdebiles.png"> </td> <td class="text-center"> {{ Math.floor((Math.random()*6)+10) | number: 0 }} ÂºC </td> <td class="text-center"> <img class="img-responsive" src="http://servizos.meteogalicia.es:80/apiv3/images/weather/wind-arrows/15nudos_O.png"> </td> </tr> <tr ng-if="day.variables[0].summary.length < 4"> <td> - </td> <td> - </td> </tr> </tbody> </table> </div> '),e.put("app/theme/components/detailForm/detail-form-footer-template.html",'<div class="form-group clearfix">  <div ng-show="showMode()"> <button ng-click="remove()" class="btn btn-default pull-left btn-with-icon" ng-disabled="detailForm.$invalid"><i class="icon ion-trash-b"></i>Delete</button> <button class="btn btn-primary pull-right btn-with-icon" ng-click="edit()"><i class="icon ion-android-checkmark-circle"></i>Update</button> </div>  <div class="pull-right" ng-hide="showMode()"> <button class="btn btn-primary" ng-disabled="detailForm.$invalid" ng-click="save()">Acept</button> <button class="btn btn-default" ng-click="cancel()">Cancel</button> </div> </div> '),e.put("app/theme/components/detailForm/detail-form.html",'<form name="detailForm"> <ng-transclude></ng-transclude> <div ng-include="footerTemplateUrl"> </div></form> <a class="fa fa-chevron-up" data-toggle="collpase" href="#modelDebug"> <div id="modelDebug" class="collapse"> <pre>{{model | json}}</pre> </div> </a>'),e.put("app/theme/components/iconPicker/icon-picker.html",'<div uib-dropdown="" class="dropdown-picker"> <button type="button" uib-dropdown-toggle="" class="btn btn-default"><img width="20" height="20" src="{{vm.ngModel+\'.png\'}}"> <span class="caret"></span></button> <ul class="dropdown-menu" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem" ng-repeat="icon in vm.availableIcons"> <button class="btn btn-default" type="button" ng-click="vm.ngModel = icon"><img width="20" height="20" src="{{icon+\'.png\'}}"></button> </li> </ul> </div> '),e.put("app/theme/components/iconRating/iconRating.html",'<span class="text-center icon-rating" ng-class="{\'icons-disabled\': vm.disabled}"> <span class="icon {{vm.getClass(value)}}" ng-style="vm.getStyle(value)" ng-repeat="value in vm.icons" ng-click="vm.setValue(value)"></span> </span>'),e.put("app/theme/components/inputRef/inputRef.html",'<input type="text" ng-model="vm.ngEntityModel" typeahead-on-select="vm.onSelect($item, $model, $label)" uib-typeahead="item as vm.displayFnc(item) for item in vm.searchResources(vm.searchProp,$viewValue)" class="form-control" ng-disabled="vm.ngDisabled">'),e.put("app/theme/components/langBtn/langBtn.html",'<div class="btn-group" role="group" aria-label="LangBtn"> <small class="btn btn-xs" ng-class="{\'btn-default\': (lang!=activeLanguage()),\'btn-primary\': (lang==activeLanguage()) }" ng-repeat="lang in langs" ng-click="setLanguage(lang)">{{\'global.languages.\'+lang | translate}}</small> </div>'),e.put("app/theme/components/loginDlg/login.html",'<div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="vm.cancel()">&times;</button> <h4 class="modal-title" data-translate="login.title">Sign in</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-4 col-md-offset-4"> <h1 data-translate="login.title">Sign in</h1> </div> <div class="col-md-8 col-md-offset-2"> <div class="alert alert-danger" ng-show="vm.authenticationError" data-translate="login.messages.error.authentication"> <strong>Failed to sign in!</strong> Please check your credentials and try again. </div> </div> <div class="col-md-8 col-md-offset-2"> <form class="form" role="form" ng-submit="vm.login($event)"> <div class="form-group"> <label for="username" data-translate="global.form.username">Login</label> <input type="text" class="form-control" id="username" placeholder="{{\'global.form.username.placeholder\' | translate}}" ng-model="vm.username"> </div> <div class="form-group"> <label for="password" data-translate="login.form.password">Password</label> <input type="password" class="form-control" id="password" placeholder="{{\'login.form.password.placeholder\' | translate}}" ng-model="vm.password"> </div> <div class="form-group"> <label for="rememberMe"> <input type="checkbox" id="rememberMe" ng-model="vm.rememberMe" checked=""> <span data-translate="login.form.rememberme">Remember me</span> </label> </div> <button type="submit" class="btn btn-primary" data-translate="login.form.button">Sign in</button> </form> <p></p> <div class="alert alert-warning"> <a class="alert-link" href="" ng-click="vm.requestResetPassword()" data-translate="login.password.forgot">Did you forget your password?</a> </div> <div class="alert alert-warning" data-translate="global.messages.info.register" translate-compile=""> You don\'t have an account yet? <a class="alert-link" href="" ng-click="vm.register()">Register a new account</a> </div> </div> </div> </div> '),
e.put("app/theme/components/manualPositionPanel/manual-position-panel.html",'<form> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-6"> <div class="form-group"> <label data-translate="component.mapPositionPanel.latDegree">Latitude (Âº)</label> <input class="form-control" ng-model="latDeg" ng-model-options="{updateOn: \'blur\'}" ng-change="refreshLat()"> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-6"> <div class="form-group"> <label data-translate="component.mapPositionPanel.latMinutes">Latitude (Min)</label> <input class="form-control" ng-model="latMin" ng-model-options="{updateOn: \'blur\'}" ng-change="refreshLat()"> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12">  <label> <input type="radio" ng-model="latDir" value="N" ng-change="refreshLat()"> {{\'component.mapPositionPanel.N\' | translate}} </label> <label> <input type="radio" ng-model="latDir" value="S" ng-change="refreshLat()"> {{\'component.mapPositionPanel.S\' | translate}} </label>  <div class="pull-right"> <small class="text-muted">{{ lat | number: 4 }}</small> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-6"> <div class="form-group"> <label data-translate="component.mapPositionPanel.lonDegree">Lonxitude (Âº)</label> <input class="form-control" ng-model="lonDeg" ng-model-options="{updateOn: \'blur\'}" ng-change="refreshLon()"> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-6"> <div class="form-group"> <label data-translate="component.mapPositionPanel.lonMinutes">Lonxitude (Min)</label> <input class="form-control" ng-model="lonMin" ng-model-options="{updateOn: \'blur\'}" ng-change="refreshLon()"> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12">  <label> <input type="radio" ng-model="lonDir" value="W" ng-change="refreshLon()"> {{\'component.mapPositionPanel.W\' | translate}} </label> <label> <input type="radio" ng-model="lonDir" value="E" ng-change="refreshLon()"> {{\'component.mapPositionPanel.E\' | translate}} </label> <div class="pull-right"> <small class="text-muted">{{ lon | number: 4 }}</small> </div> </div> </div>  <div class="clearfix" ng-show="geometryType!=\'OpenLayers.Handler.Point\'"> <div class="btn-group"> <button class="btn btn-default" type="submit" ng-click="currentPosition()">{{label || \'component.mapPositionPanel.currentPosition\'| translate}}</button> <button class="btn btn-primary btn-with-icon" type="submit" ng-click="addPoint()"><i class="ion-plus-circled">&#160;</i> {{\'component.mapPositionPanel.addPoint\' | translate }}</button> </div> </div> </form>'),e.put("app/theme/components/msgCenter/msgCenter.html",'<ul class="al-msg-center clearfix"> <li uib-dropdown=""> <a href="" uib-dropdown-toggle=""> <i class="ion-ios-bell"></i>   </a> <div uib-dropdown-menu="" class="top-dropdown-menu"> <i class="dropdown-arr"></i> <div class="header clearfix"> <h5>Ãltimos avisos</h5>   </div> <div class="msg-list"> <a class="clearfix" ng-repeat="msg in notifications">     <div class="msg-area"> <div ng-bind-html="getMessage(msg)"></div> <span>{{ msg.time }}</span> </div> </a> </div>  </div> </li>  </ul>'),e.put("app/theme/components/pageTop/pageTop.html",'<div class="page-top clearfix hidden-print" max-height="50">  <a href="#/dashboard" class="al-logo clearfix"> <img ng-src="assets/img/page_top_img.png" height="110%" width="110%"> </a>  <a href="" class="collapse-menu-link ion-navicon" ba-sidebar-toggle-menu=""></a>  <div class="user-profile clearfix"> <div class="al-user-profile" uib-dropdown=""> <a uib-dropdown-toggle="" class="profile-toggle-link"> <img ng-src="{{::( \'Nasta\' | profilePicture )}}"> </a> <ul class="top-dropdown-menu profile-dropdown" uib-dropdown-menu="">  <li><i class="dropdown-arr"></i></li> <li class="text-center"> <div style="margin:4px"> <lang-btn></lang-btn> </div> </li> <li class="list-group-item"> <h5 class="list-group-item-heading">{{::vm.user.name}}</h5> <i><small>{{::vm.user.fullName}}</small></i>  </li>  <li><a href="" class="signout" ng-click="vm.logout()"><i class="fa fa-power-off"></i>Desconectar</a></li>   </ul>  </div> </div> </div>'),e.put("app/theme/components/searchCenter/searchCenter.html",' <div class="search-container" ng-show="searchItems.length"> <form class="navbar-form navbar-right" role="search" ng-submit="executeSearch()"> <div class="input-group search-input-group"> <span class="input-group-btn"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i ng-if="selectedItem.icon" ng-class="selectedItem.icon"></i> <span ng-if="!selectedItem.icon">{{selectedItem.title}}</span> <span class="caret"></span> </button> <ul class="dropdown-menu dropdown-menu-right"> <li><a ng-repeat="item in searchItems" ng-click="selectedSearchItem($index)" title="{{item.tooltip}}"><i ng-if="item.icon" ng-class="item.icon"></i>{{item.title}}</a> </li> </ul> </span> <input id="searchInput" class="form-control" ng-model="keywords" type="text" placeholder="Buscar ..."> <span class="input-group-addon"> <button type="submit"> <span class="ion-search"></span> </button> </span> </div> </form> </div> '),e.put("app/theme/components/widgets/widgets.html",'<div class="widgets"> <div ng-repeat="widgetBlock in ngModel" ng-class="{\'row\': widgetBlock.widgets.length > 1}"> <div ng-repeat="widgetCol in widgetBlock.widgets" ng-class="{\'col-md-6\': widgetBlock.widgets.length === 2}" ng-model="widgetCol" class="widgets-block"> <div ba-panel="" ba-panel-title="{{::widget.title}}" ng-repeat="widget in widgetCol" ba-panel-class="with-scroll {{widget.panelClass}}"> <div ng-include="widget.url"></div> </div> </div> </div> </div> '),e.put("app/pages/account/reset/finish/reset.finish.html",'<div> <div class="card card-container"> <a href="/public.html"><img alt="COP Tool" class="profile-img-card animate-show-hide" id="profile-img" src="assets/img/page_top_img.png"></a> <h4 data-translate="reset.finish.title">Reset password</h4> <div class="alert alert-danger" data-translate="reset.finish.messages.keymissing" ng-show="vm.keyMissing"> <strong>The password reset key is missing.</strong> </div> <div class="alert alert-warning" ng-hide="vm.success || vm.keyMissing"> <p data-translate="reset.finish.messages.info">Choose a new password</p> </div> <div class="alert alert-danger" ng-show="vm.error"> <p data-translate="reset.finish.messages.error">Your password couldn\'t be reset. Remember a password request is only valid for 24 hours.</p> </div> <div class="alert alert-success" ng-show="vm.success"> <p data-translate="reset.finish.messages.success" translate-compile=""><strong>Your password has been reset.</strong> Please <a class="alert-link" href="" ng-click="vm.login()">sign in</a>.</p> </div> <div ng-hide="vm.keyMissing" class="text-center"> <form ng-show="!vm.success" name="form" role="form" novalidate="" ng-submit="vm.finishReset()" show-validation=""> <div class="form-group">  <input type="password" class="form-control" id="password" name="password" placeholder="{{\'global.form.newpassword.placeholder\' | translate}}" ng-model="vm.resetAccount.password" ng-minlength="4" ng-maxlength="50" required="" autocomplete="off"> <div ng-show="form.password.$dirty && form.password.$invalid"> <p class="help-block" ng-show="form.password.$error.required" data-translate="global.messages.validate.newpassword.required"> Your password is required. </p> <p class="help-block" ng-show="form.password.$error.minlength" data-translate="global.messages.validate.newpassword.minlength"> Your password is required to be at least 4 characters. </p> <p class="help-block" ng-show="form.password.$error.maxlength" data-translate="global.messages.validate.newpassword.maxlength"> Your password cannot be longer than 50 characters. </p> </div> </div> <div class="form-group">  <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="{{\'global.form.confirmpassword.placeholder\' | translate}}" ng-model="vm.confirmPassword" ng-minlength="4" ng-maxlength="50" required="" autocomplete="off"> <div ng-show="form.confirmPassword.$dirty && form.confirmPassword.$invalid"> <p class="help-block" ng-show="form.confirmPassword.$error.required" data-translate="global.messages.validate.confirmpassword.required"> Your password confirmation is required. </p> <p class="help-block" ng-show="form.confirmPassword.$error.minlength" data-translate="global.messages.validate.confirmpassword.minlength"> Your password confirmation is required to be at least 4 characters. </p> <p class="help-block" ng-show="form.confirmPassword.$error.maxlength" data-translate="global.messages.validate.confirmpassword.maxlength"> Your password confirmation cannot be longer than 50 characters. </p> </div> </div> <ng-password-meter password="vm.resetAccount.password"></ng-password-meter> <div class="alert alert-danger" ng-show="vm.resetAccount.password!=vm.confirmPassword" data-translate="global.messages.error.dontmatch"> The password and its confirmation do not match! </div> <button type="submit" ng-disabled="form.$invalid||vm.resetAccount.password!=vm.confirmPassword" class="btn btn-primary" data-translate="reset.finish.form.button">Reset Password</button> </form> </div> </div> </div> '),e.put("app/pages/account/reset/request/reset.request.html",'<div> <div class="card card-container"> <a href="/public.html"><img alt="COP Tool" class="profile-img-card animate-show-hide" id="profile-img" src="assets/img/page_top_img.png"></a> <h4 data-translate="reset.request.title">Reset your password</h4> <div class="alert alert-danger" data-translate="reset.request.messages.notfound" ng-show="vm.errorEmailNotExists"> <strong>Email address isn\'t registered!</strong> Please check and try again. </div> <div class="alert alert-warning" ng-hide="vm.success"> <p data-translate="reset.request.messages.info">Enter the email address you used to register.</p> </div> <div class="alert alert-success" ng-show="vm.success === \'OK\'"> <p data-translate="reset.request.messages.success">Check your emails for details on how to reset your password.</p> </div> <form ng-show="!vm.success" name="form" role="form" novalidate="" ng-submit="vm.requestReset()" show-validation="" class="text-center"> <div class="form-group"> <label class="control-label" for="email" data-translate="global.form.email">Email</label> <input type="email" class="form-control" id="email" name="email" placeholder="{{\'global.form.email.placeholder\' | translate}}" ng-model="vm.resetAccount.email" ng-minlength="5" ng-maxlength="100" required="" autofocus=""> <div ng-show="form.email.$dirty && form.email.$invalid"> <p class="help-block" ng-show="form.email.$error.required" data-translate="global.messages.validate.email.required"> Your email is required. </p> <p class="help-block" ng-show="form.email.$error.email" data-translate="global.messages.validate.email.invalid"> Your email is invalid. </p> <p class="help-block" ng-show="form.email.$error.minlength" data-translate="global.messages.validate.email.minlength"> Your email is required to be at least 5 characters. </p> <p class="help-block" ng-show="form.email.$error.maxlength" data-translate="global.messages.validate.email.maxlength"> Your email cannot be longer than 100 characters. </p> </div> </div> <button type="submit" ng-disabled="form.$invalid||vm.isSubmit" class="btn btn-primary"> <span ng-show="vm.isSubmit"> <i class="glyphicon glyphicon-refresh fa-spin"></i> </span> {{ \'reset.request.form.button\' | translate}} </button> </form> </div>  </div> '),e.put("app/pages/admin/layergroups/create/layergroup-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.layergroup.home.createLabel">Novo</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputCode.$invalid && (vm.newForm.inputCode.$dirty || vm.newForm.$submitted)}"> <label for="inputCode" data-translate="app.layergroup.code">Code</label> <input name="inputCode" class="form-control" type="text" ng-model="vm.model.code" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-8 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="app.layergroup.name">Name</label> <input name="inputName" class="form-control" type="text" ng-model="vm.model.name" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.newForm.inputPanel.$invalid && (vm.newForm.inputPanel.$dirty || vm.newForm.$submitted)}"> <label for="inputPanel" data-translate="app.layergroup.panel">LayerGroup</label> <input type="text" name="inputPanel" uib-typeahead="p as p.name for p in vm.searchPanels({\'nameorcode\':$viewValue}) | limitTo:8" class="form-control" required="" ng-model="vm.model.panel"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputDescription.$invalid && (vm.inputDescription.newForm.$dirty || vm.newForm.$submitted)}"> <label for="inputDescription" data-translate="app.layergroup.description">Description</label> <input name="inputDescription" class="form-control" type="text" ng-model="vm.model.description"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div>'),e.put("app/pages/admin/layergroups/detail/layergroup-detail.html",'<div class="panel"> <editable-form form-status="vm.formStatus" model="vm.model" title="{{vm.model.name}}" on-close="vm.onClose()" topic="layergroups"> <div class="panel-body"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layergroup.code"></label> <div> <p editable-text="vm.model.code" class="form-control-static"> {{ vm.model.code }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layergroup.name"></label> <div> <p editable-text="vm.model.name" class="form-control-static"> {{ vm.model.name }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layergroup.panel">Panel</label> <div> <p editable-text="vm.model.panel" e-name="inputPanel" e-typeahead-wait-ms="200" e-uib-typeahead="p as p.name for p in vm.searchPanels({\'nameorcode\':$viewValue}) | limitTo:12" e-typeahead-select-on-blur="true" e-autocomplete="off" e-autofocus=""> <a ui-sref="admin.panels.detail({\'id\': vm.model.panel.id})">{{vm.model.panel.name}}</a> </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layergroup.description">DescripciÃ³n</label> <div> <p editable-text="vm.model.description" class="form-control-static"> {{ vm.model.description }} </p> </div> </div> </div> </div> <fieldset> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group pull-right"> <label class="control-label"> </label> <div> <p class="form-control-static" editable-checkbox="vm.model.enabled" e-title="{{ \'app.layergroup.detail.fieldset.inputEnabled.title\' | translate }}"> <span class="label label-success" ng-show="vm.model.enabled" data-translate="app.layergroup.enabled">ENABLED </span> <span class="label label-danger" ng-hide="vm.model.enabled" data-translate="app.layergroup.disabled">DISABLED</span> </p> </div> </div> </div> </div> </fieldset> <fieldset>  <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionepisode.tags">Tags</label> <div> <tags-input class="tags-info" ng-disabled="vm.formStatus!=\'edit\'" use-strings="true" ng-model="vm.model.tags" add-from-autocomplete-only="false" min-tags="0"></tags-input> </div> </div> </div> </div> </fieldset> </div> </editable-form> </div>'),e.put("app/pages/admin/layergroups/layers/layergrouplayers-table.html",'<table class="table table-condensed table-responsive table-hover" st-table="vm.items"> <thead> <tr class="active"> <th style="width:60px;" st-sort="code" data-translate="app.layer.code">Code</th> <th st-sort="name" data-translate="app.layer.name"></th> <th st-sort="description" data-translate="app.layer.description"></th>  <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="layer in vm.items track by $index" class="editable-row"> <td>{{layer.code}}</td> <td> <a href="" ng-click="vm.showLayer(layer)" e-name="layer" e-form="rowform" e-required="" e-typeahead-editable="false" e-uib-typeahead="p as p.name for p in vm.searchLayers({\'name\':$viewValue}) | limitTo:8" e-typeahead-min-length="3" e-typeahead-wait-ms="400" e-typeahead-append-to-body="true"> {{layer.name}} </a> </td> <td>{{layer.description}}</td> <td class="text-right none-padding"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible" style="min-width:20px;"> <a style="min-width:20px; display:inline-block; padding-right:8px;" href="javascript:void(0)" uib-dropdown-toggle=""> <span class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.unlinkLayer(layer)" data-translate="global.button.remove">Eliminar</a></li> </ul> </div>  <form editable-form="" name="rowform" onaftersave="vm.linkLayer(layer)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedLayer == layer"> <div class="btn-group"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelEdit(rowform,$index)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </div> </form> </td> </tr> <tr> <td colspan="4" class="text-right">  <layer-create-btn layergroup="vm.layergroup" css-class="btn editable-table-button bt-with-icon btn-xs btn-primary"></layer-create-btn> </td> </tr> </tbody>  </table>'),e.put("app/pages/admin/layergroups/search/layergroups-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.nameorcode" ng-model-options="{ updateOn: \'blur\' }" type="text"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </form> <span class="blog-tags"> <a class="ui label tag" ng-repeat="t in vm.tags" href="" ng-class="{\'tag-selected\': vm.searchTerms.tags.indexOf(t.tag) >= 0 }" ng-click="vm.toggleTag(t)"> {{t.tag}} </a> </span> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger" data-translate="global.messages.search.results" translate-values="vm.page"></strong></small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger" data-translate="global.messages.search.noresults"></strong></small> <div class="pull-right"> <small ng-class="{\'text-muted\': !vm.searchTerms.enabled}"> <input type="checkbox" ng-model="vm.searchTerms.enabled"> <span data-translate="app.layergroup.search.viewEnabled"> </span> </small> </div> </div> </div> <div class="panel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:60px;" st-sort="code" data-translate="app.layergroup.code">Code</th> <th st-sort="name" data-translate="app.layergroup.name"></th> <th st-sort="description" data-translate="app.layergroup.description"></th> <th st-sort="panel.name" data-translate="app.layergroup.panel"></th>  <th data-translate="app.layer.tags">TAGS</th> <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody ng-repeat="item in vm.searchResults track by item.id" ng-class="{false: \'list-group-item-danger\'}[item.enabled]"> <tr> <td>{{item.code}}</td> <td><a href="" ng-click="navigate($event, \'admin.layergroups.detail\',{id:item.id})">{{item.name}}</a></td> <td class="ellipsis"> {{item.description}} </td> <td class="ellipsis"> {{item.panel.name}} </td> <td> <span class="ui label tag" ng-repeat="t in item.tags">{{t}}</span> </td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="admin.layergroups.detail({\'id\':item.id})" data-translate="global.button.detail"></a></li>  </ul> </div>   </td> </tr> <tr> <td style="border-top:solid 0px;" class="text-right"> <small data-translate="app.layergroup.layers"> </small></td> <td colspan="4" style="border-top:solid 0px; line-height: 16px;">  <small class="text-info"> {{item.layers | joinBy:\', \':\'name\'}} </small></td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.doSearch()"></uib-pagination> </div> </div> </div>'),e.put("app/pages/admin/layers/create/layer-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.layer.home.createLabel">Novo</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8"> <div class="form-group has-feedback required" ng-class="{\'has-error\': vm.inputLayerGroup.$invalidinputLayerGroup (vm.inputLayerGroup.$dirty || vm.newForm.$submitted)}"> <label for="inputLayerGroup" data-translate="app.layer.layergroup">LayerGroup</label> <input type="text" name="inputLayerGroup" id="inputTeam" uib-typeahead="p as p.name for p in vm.searchLayerGroups({\'nameorcode\':$viewValue}) | limitTo:8" class="form-control" ng-model="vm.model.layerGroup" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.inputQueryable.$invalid && (vm.newForm.inputQueryable.$dirty || vm.newForm.$submitted)}"> <label class="control-label" ng-style="!vm.model.queryable ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !vm.model.queryable}"> <input type="checkbox" ng-model="vm.model.queryable"> <span data-translate="app.layer.queryable"> </span> </label> </div> </div> </div> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputCode.$invalid && (vm.newForm.inputCode.$dirty || vm.newForm.$submitted)}"> <label for="inputCode" data-translate="app.layer.code">Code</label> <div class="input-group"> <input name="inputCode" class="form-control" type="text" ng-model="vm.model.code" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.$submitted)}"> <label for="inputName" data-translate="app.layer.name">Name</label> <div class="input-group"> <input name="inputName" class="form-control" type="text" ng-model="vm.model.name" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputLevel.$invalid && (vm.newForm.inputLevel.$dirty || vm.newForm.$submitted)}"> <label for="inputLevel" data-translate="app.layer.level">Level</label> <div class="input-group"> <input name="inputLevel" class="form-control" type="number" step="1" min="0" max="3" ng-model="vm.model.level" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.number.range" data-translate-values="{\'max\':\'3\',\'min\':\'0\'}"></small> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputProjection.$invalid && (vm.newForm.inputProjection.$dirty || vm.newForm.$submitted)}"> <label for="inputProjection" data-translate="app.layer.projection">Projection</label> <input name="inputProjection" class="form-control" type="text" ng-model="vm.model.layerProjection"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputLayerClass.$invalid && (vm.newForm.inputLayerClass.$dirty || vm.newForm.$submitted)}"> <label for="inputLayerClass" data-translate="app.layer.layerclass.title">LayerClass</label> <select name="inputLayerClass" ng-options="o as \'app.layer.layerclass.\'+o | translate for o in \'tiles;wms;wfs;vector\'.split(\';\')" required="" ng-model="vm.model.layerClass" class="form-control"></select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-6 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputTitle.$invalid && (vm.newForm.inputTitle.$dirty || vm.newForm.$submitted)}"> <label for="inputTitle" data-translate="app.layer.title">Title</label> <input name="inputTitle" class="form-control" type="text" ng-model="vm.model.title" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputLayerType.$invalid && (vm.newForm.inputLayerType.$dirty || vm.newForm.$submitted)}"> <label for="inputLayerType" data-translate="app.layer.layertype.title">LayerType</label> <select name="inputLayerType" ng-options="o as \'app.layer.layertype.\'+o | translate for o in \'0;1;2;3;4\'.split(\';\')" required="" ng-model="vm.model.layerType" class="form-control"></select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputDescription.$invalid && (vm.newForm.inputDescription.$dirty || vm.newForm.$submitted)}"> <label for="inputDescription" data-translate="app.layer.description">Description</label> <input name="inputDescription" class="form-control" type="text" ng-model="vm.model.description"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputUrl.$invalid && (vm.newForm.inputUrl.$dirty || vm.newForm.$submitted)}"> <label for="inputUrl" data-translate="app.layer.url">Url</label> <input name="inputUrl" class="form-control" type="text" ng-model="vm.model.url" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputUrl2.$invalid && (vm.newForm.inputUrl2.$dirty || vm.newForm.$submitted)}"> <label for="inputUrl2" data-translate="app.layer.secondaryUrl">Secondary Url</label> <input name="inputUrl2" class="form-control" type="text" ng-model="vm.model.secondaryUrl"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div>'),e.put("app/pages/admin/layers/detail/layer-detail.html",'<div class="panel"> <editable-form form-status="vm.formStatus" model="vm.model" title="{{vm.model.name}}" on-close="vm.onClose()" topic="layers"> <div class="panel-body"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.layergroup">Grupo</label> <div> <p editable-text="vm.model.layerGroup" e-name="layergroup" e-typeahead-wait-ms="200" e-uib-typeahead="p as p.name for p in vm.searchLayerGroups({\'nameorcode\':$viewValue}) | limitTo:12" e-typeahead-select-on-blur="true" e-autocomplete="off" e-autofocus=""> <a ui-sref="admin.layergroups.detail({\'id\': vm.model.layerGroup.id})">{{vm.model.layerGroup.name}}</a> </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label"> </label> <div> <p class="form-control-static" editable-checkbox="vm.model.queryable" e-title="{{\'app.layer.queryable\'| translate}}"> <span ng-class="{\'false\': \'label-danger\', \'true\': \'label-success\'} [vm.model.queryable]" class="label" data-translate="app.layer.queryable"> </span> </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group pull-right"> <label class="control-label"> </label> <div> <p class="form-control-static" editable-checkbox="vm.model.enabled" e-title="{{ \'app.layer.detail.fieldset.inputEnabled.title\' | translate }}"> <span class="label label-success" ng-show="vm.model.enabled" data-translate="app.layer.enabled">ENABLED </span> <span class="label label-danger" ng-hide="vm.model.enabled" data-translate="app.layer.disabled">DISABLED</span> </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.code"></label> <div> <p editable-text="vm.model.code" class="form-control-static"> {{ vm.model.code }} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.name"></label> <div> <p editable-text="vm.model.name" class="form-control-static"> {{ vm.model.name }} </p> </div> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-sm-3 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.level"></label> <div> <p editable-number="vm.model.level" e-step="1" e-min="0" class="form-control-static"> {{ vm.model.level }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.projection"></label> <div> <p editable-text="vm.model.layerProjection" class="form-control-static"> {{ vm.model.layerProjection }} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.layerclass.title">layerclass</label> <div> <p editable-select="vm.model.layerClass" e-ng-options="o as \'app.layer.layerclass.\'+o | translate for o in \'tiles;wms;wfs;vector\'.split(\';\')" class="form-control-static"> {{ (vm.model.layerClass ? \'app.layer.layerclass.\'+vm.model.layerClass : \'\') | translate }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-8 col-lg-8 col-md-8 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.title"></label> <div> <p editable-text="vm.model.title" class="form-control-static"> {{ vm.model.title }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.layertype.title">layerType</label> <div> <p editable-select="vm.model.layerType" e-ng-options="o as \'app.layer.layertype.\'+o | translate for o in \'0;1;2;3;4\'.split(\';\')" class="form-control-static"> {{ (vm.model.layerType ? \'app.layer.layertype.\'+vm.model.layerType : \'\') | translate }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.description">DescripciÃ³n</label> <div> <p editable-text="vm.model.description" class="form-control-static"> {{ vm.model.description }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.url">Url</label> <div> <p editable-text="vm.model.url" class="form-control-static"> {{ vm.model.url }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.secondaryUrl">Secondary Url</label> <div> <p editable-text="vm.model.secondaryUrl" class="form-control-static"> {{ vm.model.secondaryUrl }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.style">Style</label> <div> <p editable-text="vm.model.style" class="form-control-static"> {{ vm.model.style }} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.filter">Style</label> <div> <p editable-text="vm.model.filter" class="form-control-static"> {{ vm.model.filter }} </p> <small ng-hide="vm.formStatus==\'edit\'" class="text-info" data-translate="app.layer.help.filter"></small> <button class="btn btn-sm btn-default" type="button" ng-show="vm.formStatus==\'edit\'" ng-click="vm.model.filter=vm.model.filter+\'{contingence_ID}\'">{contingence_ID}</button> </div> </div> </div> </div> <fieldset> <div class="form-group"> <label class="control-label" data-translate="app.layer.latlonboundingbox.title">Lat/Long Bounding Box</label> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-inline"> <div class="form-group col-md-3"> <span editable-text="vm.model.latLonBoundingBox.minX" e-placeholder="minX" e-title="minX" class="form-control-static"> {{ vm.model.latLonBoundingBox.minX}} </span> </div> <div class="form-group col-md-3"> <span editable-text="vm.model.latLonBoundingBox.minY" class="form-control-static" e-placeholder="minY" e-title="minY"> {{ vm.model.latLonBoundingBox.minY}} </span> </div> <div class="form-group col-md-3"> <span editable-text="vm.model.latLonBoundingBox.maxX" class="form-control-static" e-placeholder="maxX" e-title="maxX"> {{ vm.model.latLonBoundingBox.maxX }} </span> </div> <div class="form-group col-md-3"> <span editable-text="vm.model.latLonBoundingBox.maxY" class="form-control-static" e-placeholder="maxY" e-title="maxY"> {{ vm.model.latLonBoundingBox.maxY }} </span> </div> </div> </div> </div> </div></fieldset>  <fieldset> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.downloadUrl"></label> <div> <p class="form-control-static" editable-text="vm.model.downloadUrl" e-name="downloadUrl"> {{vm.model.downloadUrl}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label"></label> <div> <p class="form-control-static" editable-checkbox="vm.model.downloadable" e-title="{{\'app.layer.downloadable\'| translate}}"> <span ng-class="{\'false\': \'label-default\', \'true\': \'label-success\'} [vm.model.downloadable]" class="label label-default" data-translate="app.layer.downloadable"> </span> </p> </div> </div> </div> </div> </fieldset> <fieldset>  <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.tags">Tags</label> <div> <tags-input class="tags-info" ng-disabled="vm.formStatus!=\'edit\'" use-strings="true" ng-model="vm.model.tags" add-from-autocomplete-only="false"></tags-input> </div> </div> </div> </div> </fieldset> <hr>  <fieldset> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.layerName"></label> <div> <p class="form-control-static" editable-text="vm.model.layerName" e-name="layerName"> {{vm.model.layerName}} </p> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.layerTitle"></label> <div> <p class="form-control-static" editable-text="vm.model.layerTitle" e-name="layerTitle"> {{vm.model.layerTitle}} </p> </div> </div> </div> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.layer.layerMetadata"></label> <div> <p class="form-control-static" e-rows="4" ng-bind="vm.model.layerMetadata" editable-textarea="vm.model.layerMetadata"></p> </div> </div> </div> </div> </fieldset> </div> </editable-form> </div>'),
e.put("app/pages/admin/layers/map/layer-map.html",'<div class="panel full-invisible viewport100"> <div class="panel-body">  <leaflet lf-center="vm.center" defaults="vm.defaults" height="100%" width="100%"></leaflet> </div> </div> '),e.put("app/pages/admin/layers/search/layers-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.nameorcode" ng-model-options="{ updateOn: \'blur\' }" type="text"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </form>  <span class="blog-tags"> <a class="ui label tag" ng-repeat="t in vm.tags" href="" ng-class="{\'tag-selected\': vm.searchTerms.tags.indexOf(t.tag) >= 0 }" ng-click="vm.toggleTag(t)"> {{t.tag}} </a> </span> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger" data-translate="global.messages.search.results" translate-values="vm.page"></strong></small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger" data-translate="global.messages.search.noresults"></strong></small> <div class="pull-right"> <small ng-class="{\'text-muted\': !vm.searchTerms.enabled}"> <input type="checkbox" ng-model="vm.searchTerms.enabled"> <span data-translate="app.layer.search.viewEnabled"> </span> </small> </div> </div> </div> <div class="panel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:60px;" st-sort="code" data-translate="app.layer.code">Code</th> <th st-sort="name" data-translate="app.layer.name"></th> <th st-sort="description" data-translate="app.layer.description"></th> <th st-sort="layerGroup.name" data-translate="app.layer.layergroup"></th>  <th data-translate="app.layer.tags">TAGS</th> <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody ng-repeat="item in vm.searchResults track by item.id"> <tr ng-class="{false: \'list-group-item-danger\'}[item.enabled]"> <td>{{item.code}}</td> <td> <a href="" ng-click="navigate($event, \'admin.layers.detail\',{id:item.id})">{{item.name }}</a> <small class="text-muted"> {{item.layerName}}</small> </td> <td> <div class="ellipsis"><span title="{{item.url}}"> {{item.description}}</span></div> </td> <td>{{item.layerGroup.name}}</td> <td> <span class="ui label tag" ng-repeat="t in item.tags">{{t}}</span> </td>  <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="admin.layers.detail({\'id\':item.id})" data-translate="global.button.detail"></a></li> <li role="menuitem"><a href="" ng-click="vm.removeLayer(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div>   </td> </tr> <tr> <td style="border-top:solid 0px;"></td> <td colspan="4" style="border-top:solid 0px;"><small title="{{item.url}}">{{item.url}}</small></td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.doSearch()"></uib-pagination> </div> </div> </div>'),e.put("app/pages/admin/panels/create/panel-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.panel.home.createLabel">Novo</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputCode.$invalid && (vm.newForm.inputCode.$dirty || vm.newForm.$submitted)}"> <label for="inputCode" data-translate="app.panel.code">Code</label> <input name="inputCode" class="form-control" type="text" ng-model="vm.model.code" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="app.panel.name">Name</label> <input name="inputName" class="form-control" type="text" ng-model="vm.model.name" required=""> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.newForm.inputType.$invalid && (vm.newForm.inputType.$dirty || vm.$submitted)}"> <label for="inputType" data-translate="app.panel.type">label_status</label> <select name="inputType" ng-options="v as v for v in \'simple;model\'.split(\';\')" required="" ng-model="vm.model.type" class="form-control"></select> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputDescription.$invalid && (vm.newForm.inputDescription.$dirty || vm.newForm.$submitted)}"> <label for="inputDescription" data-translate="app.panel.description">Description</label> <input name="inputDescription" class="form-control" type="text" ng-model="vm.model.description"> <small class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></small> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.ok(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div>'),e.put("app/pages/admin/panels/detail/panel-detail.html",'<div class="panel"> <editable-form form-status="vm.formStatus" model="vm.model" title="{{vm.model.name}}" on-close="vm.onClose()" topic="panels"> <div class="panel-body"> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.panel.code"></label> <div> <p editable-text="vm.model.code" class="form-control-static"> {{ vm.model.code }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.panel.name"></label> <div> <p editable-text="vm.model.name" class="form-control-static"> {{ vm.model.name }} </p> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.panel.type">callerTransportType</label> <div> <p editable-select="vm.model.type" e-ng-options="o as o for o in \'simple;model\'.split(\';\')" class="form-control-static"> {{vm.model.type}} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.panel.description">DescripciÃ³n</label> <div> <p editable-text="vm.model.description" class="form-control-static"> {{ vm.model.description }} </p> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group pull-right"> <label class="control-label"> </label> <div> <p class="form-control-static" editable-checkbox="vm.model.enabled" e-title="{{ \'app.panel.detail.fieldset.inputEnabled.title\' | translate }}"> <span class="label label-success" ng-show="vm.model.enabled" data-translate="app.panel.enabled">ENABLED </span> <span class="label label-danger" ng-hide="vm.model.enabled" data-translate="app.panel.disabled">DISABLED</span> </p> </div> </div> </div> </div> </div> </editable-form> </div>'),e.put("app/pages/admin/panels/layergroups/panel-layergroups-table.html",'<table class="table table-condensed table-responsive table-hover" st-table="vm.items"> <thead> <tr class="active"> <th style="width:60px;" st-sort="code" data-translate="app.layergroup.code">Code</th> <th st-sort="name" data-translate="app.layergroup.name"></th> <th st-sort="description" data-translate="app.layergroup.description"></th>  <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="layergroup in vm.items track by $index" class="editable-row"> <td>{{layergroup.code}}</td> <td> <a href="" ng-click="vm.showLayerGroup(layergroup)" e-name="layergroup" e-form="rowform" e-required="" e-typeahead-editable="false" e-uib-typeahead="p as p.name for p in vm.searchLayers({\'name\':$viewValue}) | limitTo:8" e-typeahead-min-length="3" e-typeahead-wait-ms="400" e-typeahead-append-to-body="true"> {{layergroup.name}} </a> </td> <td>{{layergroup.description}}</td> <td class="text-right none-padding"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible" style="min-width:20px;"> <a style="min-width:20px; display:inline-block; padding-right:8px;" href="javascript:void(0)" uib-dropdown-toggle=""> <span class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.unlinkLayerGroup(layergroup)" data-translate="global.button.remove">Eliminar</a></li> </ul> </div>  <form editable-form="" name="rowform" onaftersave="vm.linkLayer(layergroup)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedLayer == layergroup"> <div class="btn-group"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelEdit(rowform,$index)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </div> </form> </td> </tr> <tr> <td colspan="4" class="text-right">  <layergroup-create-btn panel="vm.panel" css-class="btn editable-table-button btn-with-icon btn-xs btn-primary"></layergroup-create-btn> </td> </tr> </tbody>  </table> '),e.put("app/pages/admin/panels/search/panels-search.html",'<div class="with-scroll panel none-padding"> <div class="panel-heading clearfix"> <div class="panel-title"> <form ng-submit="vm.doSearch()"> <div class="input-group input-group-sm"> <div class="input-group-btn"> <button type="button" title="Limpiar consulta" ng-disabled="!vm.searchResults || vm.searchResults.length==0" class="btn btn-default" ng-click="vm.clearSearch()"><i class="ion-trash-b"></i></button> </div> <input id="searchInput" class="form-control" ng-model="vm.searchTerms.nameorcode" ng-model-options="{ updateOn: \'blur\' }" type="text"> <div class="input-group-btn"> <button type="submit" class="btn btn-default"><i class="ion-search"></i></button> </div> </div> </form> </div> <div> <small ng-show="vm.searchResults.length" class="pull-left"><strong class="text-danger" data-translate="global.messages.search.results" translate-values="vm.page"></strong></small> <small ng-show="vm.noResults" class="pull-left"><strong class="text-danger" data-translate="global.messages.search.noresults"></strong></small> <div class="pull-right"> <small ng-class="{\'text-muted\': !vm.searchTerms.enabled}"> <input type="checkbox" ng-model="vm.searchTerms.enabled"> <span data-translate="app.panel.search.viewEnabled"> </span> </small> </div> </div> </div> <div class="panel-body"> <table ng-show="vm.searchResults.length" class="table table-condensed" st-pipe="vm.stSearch" st-table="vm.searchResults" st-safe=""> <thead> <tr class="active"> <th style="width:108px" st-sort="code" data-translate="app.panel.code">Code</th> <th st-sort="name" data-translate="app.panel.name"></th> <th st-sort="description" data-translate="app.panel.description"></th>  <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody ng-repeat="item in vm.searchResults track by item.id" ng-class="{false: \'list-group-item-danger\'}[item.enabled]"> <tr> <td>{{item.code}}</td> <td><a href="" ng-click="navigate($event, \'admin.panels.detail\',{id:item.id})">{{item.name }}</a></td> <td> <div class="ellipsis"><span title="{{item.url}}"> {{item.description}}</span></div> </td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; text-align:center;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ui-sref="admin.panels.detail({\'id\':item.id})" data-translate="global.button.detail"></a></li> <li role="menuitem"><a href="" ng-click="vm.removePanel(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div>   </td> </tr> <tr> <td style="border-top:solid 0px;" class="text-right"> <small data-translate="app.panel.layergroups"> </small></td> <td colspan="4" style="border-top:solid 0px; line-height: 16px;">  <small class="text-info"> {{item.layerGroups | joinBy:\', \':\'name\'}} </small></td> </tr> </tbody> </table> </div> <div class="panel-footer" ng-show="vm.page.totalPages> 1"> <div class="text-center"> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-click="vm.doSearch()"></uib-pagination> </div> </div> </div>'),e.put("app/pages/gislayouts/map/assets/gisasset-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.gisasset.home.createLabel">Novo Episodio</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm" autocomplete="off"> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label for="inputAssetItem" data-translate="app.gisasset.assetItem"></label> <input type="text" name="inputAssetItem" typeahead-template-url="assetitem-popover.html" typeahead-on-select="vm.onSelectAssetItem($item, $model, $label)" uib-typeahead="p as p.name for p in vm.searchAssetItems({\'nameormodel\':$viewValue}) | limitTo:8" class="form-control" ng-model="vm.selectedAssetItem" ng-change="vm.onSelectAssetItem()" uib-typeahead-tmpl="assetitem-typeahead-tmpl"> </div> </div> <script type="text/ng-template" id="assetitem-popover.html"> <a> <span ng-bind-html="match.model.name | uibTypeaheadHighlight:query"></span> <p><small class="text-info text-right"> {{ match.model.model}}, {{match.model.owner}}</p> </a> </script> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="app.gisasset.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.newForm.dateTime.$invalid && (vm.newForm.dateTime.$dirty || vm.newForm.$submitted)}"> <label for="inputDateTime" data-translate="app.gisasset.dateTime">dateTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputDateTime" id="inputDateTime" step="60" class="form-control" ng-model="vm.model.dateTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group"> <label for="inputOwner" data-translate="app.gisasset.owner">label_owner</label> <input type="text" name="inputOwner" id="inputOwner" class="form-control" ng-model="vm.model.owner"> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group"> <label for="inputModel" data-translate="app.gisasset.model">label_model</label> <input type="text" name="inputModel" id="inputModel" class="form-control" ng-model="vm.model.model"> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group"> <label for="inputDescription" data-translate="app.gisasset.description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.editForm.inputQueryable.$invalid && (vm.editForm.inputQueryable.$dirty || vm.editForm.$submitted)}"> <label class="control-label" ng-style="!vm.model.visibility ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !vm.model.visibility}"> <input type="checkbox" ng-model="vm.model.visibility"> <span data-translate="app.gisasset.visibility"> </span> </label> </div> </div> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group"> <label for="inputStatus" data-translate="app.gisasset.status">status</label> <select ng-options="o as \'app.gisasset.\'+o | translate for o in \'ACTUAL;PLANNED\'.split(\';\')" name="inputStatus" id="inputStatus" class="form-control" ng-model="vm.model.status" required=""></select> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerIcon">Icono</label> <icon-picker available-icons="vm.availableIcons" ng-model="vm.model.marker"></icon-picker> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerCategory">Color del marcador</label> <color-picker available-colors="vm.availableColors" ng-model="vm.model.color"></color-picker> </div> </div>  </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.create(vm.newForm.$valid)">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancelar</button> </div>'),e.put("app/pages/gislayouts/map/assets/gisasset-edit-dlg.html",'<form name="vm.editForm" ng-submit="vm.save(vm.editForm.$valid)"> <div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.gisasset.home.editLabel">Detalle</h3> </div> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.editForm.inputName.$invalid && (vm.editForm.inputName.$dirty || vm.editForm.$submitted)}"> <label for="inputName" data-translate="app.gisasset.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.editForm.dateTime.$invalid && (vm.editForm.dateTime.$dirty || vm.editForm.$submitted)}"> <label for="inputDateTime" data-translate="app.gisasset.dateTime">dateTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputDateTime" id="inputDateTime" step="60" class="form-control" ng-model="vm.model.dateTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group"> <label for="inputOwner" data-translate="app.gisasset.owner">label_owner</label> <input type="text" name="inputOwner" id="inputOwner" class="form-control" ng-model="vm.model.owner"> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group"> <label for="inputModel" data-translate="app.gisasset.model">label_model</label> <input type="text" name="inputModel" id="inputModel" class="form-control" ng-model="vm.model.model"> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group"> <label for="inputDescription" data-translate="app.gisasset.description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.editForm.inputQueryable.$invalid && (vm.editForm.inputQueryable.$dirty || vm.editForm.$submitted)}"> <label class="control-label" ng-style="!vm.model.visibility ? {\'font-weight\': \'normal\'} :\'\'" ng-class="{\'text-muted\': !vm.model.visibility}"> <input type="checkbox" ng-model="vm.model.visibility"> <span data-translate="app.gisasset.visibility"> </span> </label> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group"> <label for="inputStatus" data-translate="app.gisasset.status">status</label> <select ng-options="o as \'app.gisasset.\'+o | translate for o in \'ACTUAL;PLANNED\'.split(\';\')" name="inputStatus" id="inputStatus" class="form-control" ng-model="vm.model.status" required=""></select> </div> </div> </div> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.editForm.$valid, \'btn-default\': vm.editForm.$invalid}" ng-disabled="vm.editForm.$invalid" type="submit" data-translate="global.button.save"></button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel"></button> <button class="btn btn-default pull-left" type="button" ng-click="vm.remove()" data-translate="global.button.remove"></button> </div> </form>'),e.put("app/pages/pollutionepisodes/episodelayers/select/episodelayers-select.html",'<div> <div class="panel-body" style="padding-bottom: 18px;"> <div js-tree="vm.basicConfig" ng-model="vm.treeData" should-apply="vm.applyModelChanges()" tree="vm.basicTree" tree-events="ready:vm.readyCB"></div> </div> <div class="panel-footer clearfix"> <span class="pull-left"> {{\'app.episodelayer.message.selected\' | translate}} <strong> {{vm.selectedlayers.length}}</strong> </span> </div> </div>'),e.put("app/pages/pollutionepisodes/episodelayers/edit/episodelayers-edit.html",'<div> <div class="panel-body" style="padding-bottom: 18px;"> <div js-tree="vm.basicConfig" ng-model="vm.treeData" should-apply="vm.applyModelChanges()" tree="vm.basicTree" tree-events="ready:vm.readyCB"></div> </div> <div class="panel-footer clearfix"> <span class="pull-left"> {{\'app.episodelayer.message.selected\' | translate}} <strong> {{vm.selectedlayers.length}}</strong> </span> <div class="pull-right"> <div input="input-group"> <a ng-show="vm.onCancel" class="btn btn-default btn-sm" ng-click="vm.onCancel()" data-translate="global.button.cancel"></a> <a ng-show="vm.onSave" class="btn btn-primary btn-sm" ng-click="vm.onSave()" data-translate="global.button.save"></a> </div> </div> </div> </div>'),e.put("app/pages/pollutionepisodes/episodelayers/tree/episodelayers-tree.html",'<div class="none-padding"> <div class="panel-body" style="padding-bottom: 18px;"> <div js-tree="vm.basicConfig" ng-model="vm.treeData" tree="vm.basicTree"></div> </div> <div class="panel-footer"> {{\'app.episodelayer.message.info\' | translate}} <strong> {{vm.episodelayers.length}}</strong> </div> </div>'),e.put("app/pages/pollutionepisodes/episodeobservers/detail/episodeobserver-detail.html",'<editable-form form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="episodeobservers"> <div class="panel-body"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.episodeobserver.userlogin"></label> <div> <p class="form-control-static" editable-text="vm.model.userLogin" e-name="inputUserLogin" e-typeahead-wait-ms="200" e-uib-typeahead="p as p.username for p in vm.searchUserLogins({\'username\':$viewValue})" e-typeahead-select-on-blur="true" e-autocomplete="off" e-autofocus=""> {{vm.model.userLogin.username}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.userRole"></label> <div> <p class="form-control-static">{{vm.model.userLogin.userRole.role}}</p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label"><span data-translate="app.episodeobserver.url"></span> </label> <div> <a href="/pub/map/visor/{{vm.model.episode.id}}/capabilities.xml?userId={{vm.model.userLogin.id}}" title="/pub/map/visor/{{vm.model.episode.id}}/capabilities.xml?userId={{vm.model.userLogin.id}}" target="_blank"><i class="ion-android-exit"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <episodeobserver-layers episodeobserver="vm.model"></episodeobserver-layers> </div> </div> </editable-form>'),e.put("app/pages/pollutionepisodes/episodeobservers/table/episodeobservers-table.html",'<div class="panel-body"> <table class="table table-condensed table-responsive table-hover" st-safe-src="vm.episodeobservers" st-table="pagedItems"> <thead> <tr class="active"> <th st-sort="userLogin.username" data-translate="app.userlogin.$name"></th> <th st-sort="startTime" data-translate="app.episodeobserver.starttime"></th> <th st-sort="endTime" data-translate="app.episodeobserver.endtime"></th> <th st-sort="createdTime" data-translate="app.episodeobserver.createdtime"></th> <th style="width: 20px" class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in pagedItems"> <td class="text-left"> <a href="" ng-click="vm.navigate($event,\'userlogins.detail\',{\'id\':item.userLogin.id})" editable-text="item.userLogin" e-name="userLogin" e-form="rowform" e-required="" e-typeahead-wait-ms="300" e-typeahead-editable="false" e-uib-typeahead="b as b.fullName + \' (\' +b.username +\')\' for b in vm.searchUserLogins({\'usernameorfullname\':$viewValue,\'userauthorities\':\'ROLE_LOGBOOKRECORD\'})" e-typeahead-append-to-body="true"> {{item.userLogin.fullName}} <div class="pull-right"><i style="font-size: small" class="text-muted">{{item.userLogin.username}}</i></div> </a> </td> <td> <small editable-datetime-local="item.startTime" e-name="startTime" e-form="rowform" e-required="" e-class="input-sm"> {{item.startTime | date: \'dd/MM/yyyy HH:mm\'}} </small> </td> <td> <small editable-datetime-local="item.endTime" e-name="endTime" e-form="rowform" e-required="" e-class="input-sm"> {{item.endTime | date: \'dd/MM/yyyy HH:mm\'}} </small> </td>  <td> <small>{{item.createdTime | date: \'dd/MM/yyyy HH:mm\'}}</small> </td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; margin-left:10px" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="rowform.$show()" data-translate="global.button.edit">Editar</a></li> <li role="menuitem"><a href="" ng-click="vm.deleteRow(item)" data-translate="global.button.remove">Eliminar</a></li> </ul> </div>  <form editable-form="" name="rowform" onaftersave="vm.saveRow(rowform,item)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedRow == item"> <div class="btn-group"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelEdit(rowform,item)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </div> </form> </td> </tr> </tbody> <tfoot> <tr> <td colspan="10" class="text-center"> <p> <small st-pagination="" st-items-by-page="10" st-displayed-pages="5"></small> </p> </td> </tr> </tfoot> </table> </div> <div class="panel-footer clearfix"> <div class="btn-grop pull-right"> <userlogin-create-btn css-class="btn btn-with-icon btn-default btn-sm" user-roles="USER" user-authorities="ROLE_POLLUTION_EPISODE_MAP" on-create="vm.onCreateUserLogin(userlogin)"></userlogin-create-btn> <a ng-click="vm.insertRow()" class="btn btn-sm btn-primary btn-with-icon"><span data-translate="app.userlogin.cmd.link"></span></a> </div> </div> '),e.put("app/pages/pollutionepisodes/episodeobservers/tree/episodeobservers-tree.html",'<div class="widgets"> <div class="panel-body"> <div js-tree="vm.basicConfig" ng-model="vm.treeData" tree="vm.basicTree" tree-events="ready:vm.readyCB"></div> </div> <div class="panel-footer clearfix"> <span class="pull-left"> {{\'app.episodeobserver.message.usersSelected\' | translate}} <strong> {{vm.selectedusers.length}}</strong> </span> <div class="pull-right"> <div input="input-group"> <a ng-show="vm.onSave" class="btn btn-primary btn-sm" ng-click="vm.cancel()" data-translate="global.button.cancel"></a> <a ng-show="vm.onCancel" class="btn btn-primary btn-sm" ng-click="vm.save()" data-translate="global.button.save"></a> </div> </div> </div> </div>'),e.put("app/pages/pollutionepisodes/episodeusers/assign-layers/layer-select-dlg.html",'<div class="modal-header" style="width:640px;"> <h3 data-translate="app.layer.home.linkLabel"></h3> </div> <div class="modal-body with-scroll"> <div class="col-md-offset-8 col-md-4"> <div class="form-group" ng-class="{\'has-error\': vm.status.$invalid && (vm.status.$dirty || vm.$submitted)}"> <label for="inputStatus" data-translate="app.layer.layergroup">LayerGroup</label> <select id="inputStatus" ng-model="layerGroup" ng-options="lg as lg.name for lg in layerGroups" class="form-control"></select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <table class="table table-bordered table-condensed"> <thead> <tr class="active"> <th><i class="icon-ok"> <input type="checkbox" ng-model="selectAll"></i></th> <th data-translate="app.layer.name"></th> <th data-translate="app.layer.description"></th> <th data-translate="app.layer.layergroup"></th> <th data-translate="app.layer.url"></th> </tr> </thead> <tbody> <tr ng-repeat="layer in items | filter: layerGroupFilter" ng-class="(layer.selected) ? \'active\' : \'\'"> <td> <input type="checkbox" ng-model="layer.selected"> </td> <td><span> {{layer.name}}</span></td> <td>{{layer.description}}</td> <td>{{layer.layerGroup.name}}</td> <td>{{layer.url}}</td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" data-translate="global.button.ok"></button> <button class="btn btn-warning" ng-click="cancel()" data-translate="global.button.cancel"></button> </div> '),
e.put("app/pages/pollutionepisodes/episodeusers/detail/episodeuser-detail.html",'<editable-form form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="episodeusers"> <div class="panel-body"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.episodeuser.userlogin"></label> <div> <p class="form-control-static" editable-text="vm.model.userLogin" e-name="inputUserLogin" e-typeahead-wait-ms="200" e-uib-typeahead="p as p.username for p in vm.searchUserLogins({\'username\':$viewValue})" e-typeahead-select-on-blur="true" e-autocomplete="off" e-autofocus=""> {{vm.model.userLogin.username}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.userlogin.userRole"></label> <div> <p class="form-control-static">{{vm.model.userLogin.userRole.role}}</p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label"><span data-translate="app.episodeuser.url"></span> </label> <div> <a href="/pub/map/visor/{{vm.model.episode.id}}/capabilities.xml?userId={{vm.model.userLogin.id}}" title="/pub/map/visor/{{vm.model.episode.id}}/capabilities.xml?userId={{vm.model.userLogin.id}}" target="_blank"><i class="ion-android-exit"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <episodeuser-layers episodeuser="vm.model"></episodeuser-layers> </div> </div> </editable-form>'),e.put("app/pages/pollutionepisodes/episodeusers/edit-layers/episodeusers-edit-layers.html",'<div class="widgets"> <div class="panel-heading clearfix"> <div class="panel-title"> <h4>{{vm.episodeuser.userLogin.username}} [ {{vm.episodeuser.userLogin.userRole.role}} ]</h4> </div> </div> <div class="panel-body">   <div js-tree="vm.layersBasicConfig" ng-model="vm.treeLayersData" should-apply="vm.applyModelChanges()" tree="vm.layersBasicTree" tree-events="ready:vm.readyLayersCB"></div>  </div> <div class="panel-footer clearfix"> <span class="pull-left"> {{\'app.episodeuser.message.layersSelected\' | translate}} <strong> {{vm.selectedlayers.length}}</strong> </span> <div class="pull-right"> <div input="input-group"> <a ng-show="vm.onSave" class="btn btn-default btn-sm" ng-click="vm.onCancel()" data-translate="global.button.cancel"></a> <a ng-show="vm.onCancel" class="btn btn-primary btn-sm" ng-click="vm.onSave()" data-translate="global.button.save"></a> </div> </div> </div> </div>');e.put("app/pages/pollutionepisodes/episodeusers/layers/episodeuser-layers-table.html",'<table class="table table-condensed table-bordered table-hover" st-safe-src="vm.layers" st-table="pagedItems"> <thead> <tr class=""> <th colspan="1" class="text-center info"> <strong data-translate="app.episodeuser.layers"></strong> </th> <th colspan="1" class="text-left info"><assign-layers-btn episodeuser="vm.episodeuser" class="btn-sm pull-right btn btn-default"></assign-layers-btn></th> </tr> <tr class="active"> <th st-sort="name" data-translate="app.layer.name"></th> <th st-sort="layerGroup.name" data-translate="app.layer.layergroup"></th> </tr> </thead> <tbody> <tr ng-repeat="item in pagedItems"> <td class="text-left"> {{item.name}} </td> <td class="text-left"> {{item.layerGroup.name}} </td> </tr> </tbody> <tfoot> <tr> <td colspan="5" class="text-center"> <p> <small st-pagination="" st-items-by-page="10" st-displayed-pages="5"></small> </p> </td> </tr> </tfoot> </table>');e.put("app/pages/pollutionepisodes/episodeusers/tree/episodeusers-tree.html",'<div class="widgets"> <div class="panel-body"> <div js-tree="vm.basicConfig" ng-model="vm.treeData" tree="vm.basicTree" tree-events="ready:vm.readyCB"></div> </div> <div class="panel-footer clearfix"> <span class="pull-left"> {{\'app.episodeuser.message.usersSelected\' | translate}} <strong> {{vm.selectedusers.length}}</strong> </span> <div class="pull-right"> <div input="input-group"> <a ng-show="vm.onSave" class="btn btn-primary btn-sm" ng-click="vm.cancel()" data-translate="global.button.cancel"></a> <a ng-show="vm.onCancel" class="btn btn-primary btn-sm" ng-click="vm.save()" data-translate="global.button.save"></a> </div> </div> </div> </div>'),e.put("app/pages/pollutionepisodes/gislayouts/assignGislayouts/gislayout-select-dlg.html",' <div class="modal-header" style="width:640px;"> <h3 data-translate="app.gislayout.home.linkLabel"> </h3> </div> <div class="modal-body"> <div class="input-group"> <input class="form-control date-picker" date-range-picker="" type="text" ng-model="dateRange" is-open="datepicker.opened" datepicker-append-to-body="true"> <div class="input-group-btn"> <button type="submit" class="btn btn-default" ng-click="doSearch()"><i class="ion-search"></i></button> </div> </div> <table class="table table-bordered table-condensed"> <thead> <tr> <th><i class="icon-ok"></i></th> <th data-translate="app.gislayout.createdTime"></th> <th data-translate="app.gislayout.name"></th> <th data-translate="app.gislayout.description"></th> </tr> </thead> <tbody> <tr ng-repeat="item in items" ng-class="(item.selected) ? \'info\' : \'\'"> <td> <input type="checkbox" ng-model="item.selected"> </td> <td> <strong>{{item.createdTime | date: \'dd/MM/yyyy HH:mm\'}} </strong> </td> <td>{{item.name}}</td> <td>{{item.description}}</td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" data-translate="global.button.ok"></button> <button class="btn btn-warning" ng-click="cancel()" data-translate="global.button.cancel"></button> </div>'),e.put("app/pages/pollutionepisodes/episodeusers/table/episodeusers-table.html",'<div class="panel-body"> <table class="table table-condensed table-responsive table-hover" st-safe-src="vm.episodeusers" st-table="pagedItems"> <thead> <tr class="active"> <th st-sort="userLogin.username" data-translate="app.userlogin.fullName"></th> <th st-sort="userLogin.userRole.role" data-translate="app.userlogin.userRole"></th> <th style="width: 20px" st-sort="userLogin.level" data-translate="app.userlogin.level"></th> <th style="width: 40px" data-translate="app.episodeuser.layers"></th> <th style="width: 20px" class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in pagedItems"> <td class="text-left"> <a href="" ng-click="vm.navigate($event,\'pollutionepisodes.detail.episodeusers.edit\',{subid:item.id})" editable-text="item.userLogin" e-name="userLogin" e-form="rowform" e-required="" e-typeahead-wait-ms="300" e-typeahead-editable="false" e-uib-typeahead="b as b.fullName + \' (\' +b.username +\')\' for b in vm.searchUserLogins({\'usernameorfullname\':$viewValue})" e-typeahead-append-to-body="true"> {{item.userLogin.fullName}} <div class="pull-right"><small class="text-muted">{{item.userLogin.username}}</small></div> </a> </td> <td class="text-left ellipsis" style="max-width:300px;"> <small title="{{item.userLogin.userAuthorities | joinBy:\',\':\'name\'}}"> {{item.userLogin.userAuthorities | joinBy:\', \' : \'name\' : \'app.userlogin.userAuthority.\'}} </small> </td> <td class="text-center"> <strong>{{item.userLogin.level}}</strong> </td> <td class="text-center"> <strong>{{item.layersCount}}</strong>  </td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; margin-left:10px" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="rowform.$show()" data-translate="global.button.edit">Editar</a></li> <li role="menuitem"><a href="" ui-sref="pollutionepisodes.detail.episodeusers.edit({\'subid\': item.id })" data-translate="app.episodeuser.cmd.layers.edit">Configurar Capas</a></li> <li role="menuitem"><a href="" ng-click="vm.deleteRow(item)" data-translate="global.button.remove">Eliminar</a></li> <li role="menuitem"><a href="" ng-click="vm.cloneRow(item)" data-translate="global.button.clone"></a></li> </ul> </div>  <form editable-form="" name="rowform" onaftersave="vm.saveRow(rowform,item)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedRow == item"> <div class="btn-group"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelEdit(rowform,item)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </div> </form> </td> </tr> </tbody> <tfoot> <tr> <td colspan="10" class="text-center"> <p> <small st-pagination="" st-items-by-page="10" st-displayed-pages="5"></small> </p> </td> </tr> </tfoot> </table> </div> <div class="panel-footer clearfix"> <div class="btn-grop pull-right"> <userlogin-create-btn css-class="btn btn-with-icon btn-default btn-sm" user-roles="USER" user-authorities="ROLE_POLLUTION_EPISODE_MAP" on-create="vm.onCreateUserLogin(userlogin)"></userlogin-create-btn> <a ng-click="vm.insertRow()" class="btn btn-sm btn-primary btn-with-icon"><span data-translate="app.userlogin.cmd.link"></span></a> </div> </div> '),e.put("app/pages/pollutionepisodes/gislayouts/table/episode-gislayouts-table.html",'<table class="table table-condensed table-hover" st-table="vm.items"> <thead> <tr class="active"> <th data-translate="app.gislayout.name">name</th> <th data-translate="app.gislayout.description">description</th> <th data-translate="app.gislayout.createdBy">createdBy</th> <th style="width:106px" data-translate="app.gislayout.createdTime">createdTime</th> <th class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.items"> <td><a href="" ng-click="vm.navigate($event,\'gislayouts.detail\',{id:item.id})"><strong>{{item.name}}</strong></a></td> <td class="ellipsis"><small>{{item.description}}</small></td> <td class="ellipsis"> <small class="text-muted">{{item.createdBy.fullName}}</small></td> <td> <small>{{item.createdTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.unlinkGisLayout(item)" data-translate="global.button.unlink"></a></li> </ul> </div>  <form editable-form="" name="rowform" onbeforesave="vm.onbeforesave(rowform)" onaftersave="vm.guardarLinea(rowform,item)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedLinea == item"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelarEdicion(rowform,item)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </form> </td> </tr> </tbody> </table> '),e.put("app/pages/pollutionepisodes/logbookrecords/assign/logbookrecord-select-dlg.html",'<div class="modal-header" style="width:640px;"> <h3 data-translate="app.logbookrecord.home.linkLabel"> </h3> </div> <div class="modal-body"> <div class="input-group"> <input class="form-control date-picker" date-range-picker="" type="text" ng-model="dateRange" is-open="datepicker.opened" datepicker-append-to-body="true"> <div class="input-group-btn"> <button type="submit" class="btn btn-default" ng-click="doSearch()"><i class="ion-search"></i></button> </div> </div> <table class="table table-bordered table-condensed"> <thead> <tr> <th><i class="icon-ok"></i></th> <th data-translate="app.logbookrecord.createdTime"></th> <th data-translate="app.logbookrecord.createdBy"></th> <th data-translate="app.logbookrecord.title"></th> <th data-translate="app.logbookrecord.message"></th> </tr> </thead> <tbody> <tr ng-repeat="report in items" ng-class="(report.selected) ? \'info\' : \'\'"> <td> <input type="checkbox" ng-model="report.selected"> </td> <td> <strong>{{report.createdTime | date: \'dd/MM/yyyy HH:mm\'}} </strong> </td> <td>{{report.createdBy.fullName}}</td> <td>{{report.title}}</td> <td class="ellipsis"><small>{{report.message}}</small></td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" data-translate="global.button.ok"></button> <button class="btn btn-warning" ng-click="cancel()" data-translate="global.button.cancel"></button> </div>'),e.put("app/pages/pollutionepisodes/logbookrecords/table/episode-logbookrecords-table.html",'<table class="table table-condensed table-responsive table-hover" st-table="vm.items"> <thead> <tr class="active"> <th st-sort="geometry" style="width:10px;"><i class="ion-ios-location"></i></th> <th style="width:130px;" class="text-center" data-translate="app.logbookrecord.createdTime">Data Alta</th> <th class="text-left" style="width:auto;" data-translate="app.logbookrecord.title">Title</th>  <th class="text-left" style="width:auto;" data-translate="app.logbookrecord.createdBy">CreatedBy</th> <th style="width:28px"><i class="ion-android-attach"></i></th> <th style="width:140px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="record in vm.items track by $index" class="editable-row"> <td class="text-center"> <i class="ion-ios-location text-info" ng-show="record.geometry"></i> </td> <td class="text-center"> <small> {{record.createdTime | date: \'dd/MM/yyyy HH:mm\'}} </small> </td> <td class="text-left"> <strong> {{record.title}} </strong> <div> <small> {{record.message}} </small> </div> </td> <td> <span class="text-left"> {{record.createdBy.fullName}} </span> </td> <td class="text-center"> <a ng-show="record.fileName" title="{{record.fileName}}" href="" ng-click="vm.download($event,record)"><i class="ion-android-download icon-large"></i></a> </td> <td class="text-right none-padding"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; margin-left:10px" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.unlink(record)" data-translate="global.button.unlink"></a></li> </ul> </div>   </td> </tr>  </tbody>  </table>'),e.put("app/pages/pollutionepisodes/map/assets/asset-create-dlg.html",'<div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.asset.home.createLabel">Novo Episodio</h3> </div> <div class="modal-body" id="modal-body"> <form name="vm.newForm"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.newForm.inputName.$invalid && (vm.newForm.inputName.$dirty || vm.newForm.$submitted)}"> <label for="inputName" data-translate="app.asset.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.newForm.dateTime.$invalid && (vm.newForm.dateTime.$dirty || vm.newForm.$submitted)}"> <label for="inputDateTime" data-translate="app.pollutionepisode.begintime">dateTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputDateTime" id="inputDateTime" step="900" class="form-control" ng-model="vm.model.dateTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group"> <label for="inputDescription" data-translate="app.asset.description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerIcon">Icono</label> <icon-picker available-icons="vm.availableIcons" ng-model="vm.model.marker"></icon-picker> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group"> <label for="markerCategory">Color del marcador</label> <color-picker available-colors="vm.availableColors" ng-model="vm.model.color"></color-picker> </div> </div>  </div> </form> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.newForm.$valid, \'btn-default\': vm.newForm.$invalid}" ng-disabled="vm.newForm.$invalid" type="button" ng-click="vm.create(vm.newForm.$valid)" data-translate="global.button.create">Crear</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel">Cancelar</button> </div>'),e.put("app/pages/pollutionepisodes/map/assets/asset-edit-dlg.html",'<form name="vm.editForm" ng-submit="vm.save(vm.editForm.$valid)"> <div class="modal-header"> <h3 class="modal-title" id="modal-title" data-translate="app.asset.home.detailLabel">Detalle</h3> </div> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.editForm.inputName.$invalid && (vm.editForm.inputName.$dirty || vm.editForm.$submitted)}"> <label for="inputName" data-translate="app.asset.name">name</label> <input type="text" name="inputName" id="inputName" class="form-control" required="" ng-model="vm.model.name" autofocus=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.editForm.dateTime.$invalid && (vm.editForm.dateTime.$dirty || vm.editForm.$submitted)}"> <label for="inputDateTime" data-translate="app.pollutionepisode.begintime">dateTime</label> <div class="dropdown"> <div class="input-group"> <input type="datetime-local" name="inputDateTime" id="inputDateTime" step="900" class="form-control" ng-model="vm.model.dateTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </div> </div> <div class="row">  </div> <div class="form-group"> <label for="inputDescription" data-translate="app.asset.description">label_description</label> <textarea rows="4" cols="50" name="inputDescription" id="inputDescription" class="form-control" ng-model="vm.model.description"></textarea> </div> </div> <div class="modal-footer"> <button class="btn" ng-class="{ \'btn-primary\': vm.editForm.$valid, \'btn-default\': vm.editForm.$invalid}" ng-disabled="vm.editForm.$invalid" type="submit" data-translate="global.button.save"></button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()" data-translate="global.button.cancel"></button> <button class="btn btn-default pull-left" type="button" ng-click="vm.remove()" data-translate="global.button.remove"></button> </div> </form>'),e.put("app/pages/pollutionepisodes/scatreports/assignScatreports/scatreport-select-dlg.html",'<div class="modal-header" style="width:640px;"> <h3 data-translate="app.scatreport.home.linkLabel"></h3> </div> <div class="modal-body"> <div class="input-group"> <input class="form-control date-picker" date-range-picker="" type="text" ng-model="dateRange" is-open="datepicker.opened" datepicker-append-to-body="true"> <div class="input-group-btn"> <button type="submit" class="btn btn-default" ng-click="doSearch()"><i class="ion-search"></i></button> </div> </div> <table class="table table-bordered table-condensed"> <thead> <tr> <th><i class="icon-ok"></i></th> <th data-translate="app.scatreport.reporttime"></th> <th data-translate="app.scatreport.author"></th> <th data-translate="app.scatreport.incident"></th> </tr> </thead> <tbody> <tr ng-repeat="report in items" ng-class="(report.selected) ? \'info\' : \'\'"> <td> <input type="checkbox" ng-model="report.selected"> </td> <td> <strong>{{report.reportTime | date: \'dd/MM/yyyy HH:mm\'}} </strong> </td> <td>{{report.authorName}}</td> <td>{{report.incident}}</td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" data-translate="global.button.ok"></button> <button class="btn btn-warning" ng-click="cancel()" data-translate="global.button.cancel"></button> </div>'),e.put("app/pages/pollutionepisodes/pollutionreports/table/episode-pollutionreports-table.html",'<table class="table table-condensed table-hover" st-table="vm.items"> <thead> <tr class="active"> <th data-translate="app.pollutionreport.reporttime">reportTime</th> <th data-translate="app.pollutionreport.observer">author</th> <th data-translate="app.pollutionreport.callerorganization">callerOrganization</th> <th data-translate="app.pollutionreport.callernumber">callerNumber</th> <th class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.items"> <td><a href="" ng-click="vm.navigate($event,\'pollutionreports.detail.print\',{id:item.id})"> {{item.reportTime | date:\'dd/MM/yyyy HH:mm\'}}</a></td> <td>{{item.observerName }}</td> <td>{{item.callerOrganization}}</td> <td>{{item.callerNumber}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.unlinkPollutionReport(item)" data-translate="global.button.unlink"></a></li> </ul> </div>  <form editable-form="" name="rowform" onbeforesave="vm.onbeforesave(rowform)" onaftersave="vm.guardarLinea(rowform,item)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedLinea == item"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelarEdicion(rowform,item)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </form> </td> </tr> </tbody> </table> '),e.put("app/pages/pollutionepisodes/pollutionreports/assignPollutionreports/pollutionreport-select-dlg.html",' <div class="modal-header" style="width:640px;"> <h3 data-translate="app.pollutionreport.home.linkLabel"> </h3> </div> <div class="modal-body"> <div class="input-group"> <input class="form-control date-picker" date-range-picker="" type="text" ng-model="dateRange" is-open="datepicker.opened" datepicker-append-to-body="true"> <div class="input-group-btn"> <button type="submit" class="btn btn-default" ng-click="doSearch()"><i class="ion-search"></i></button> </div> </div> <table class="table table-bordered table-condensed"> <thead> <tr> <th><i class="icon-ok"></i></th> <th data-translate="app.pollutionreport.reporttime"></th> <th data-translate="app.pollutionreport.observer"></th> <th data-translate="app.pollutionreport.callerorganization"></th> <th data-translate="app.pollutionreport.callernumber"></th> </tr> </thead> <tbody> <tr ng-repeat="report in items" ng-class="(report.selected) ? \'info\' : \'\'"> <td> <input type="checkbox" ng-model="report.selected"> </td> <td> <strong>{{report.reportTime | date: \'dd/MM/yyyy HH:mm\'}} </strong> </td> <td>{{report.observerName}}</td> <td>{{report.callerOrganization}}</td> <td>{{report.callerNumber}}</td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" data-translate="global.button.ok"></button> <button class="btn btn-warning" ng-click="cancel()" data-translate="global.button.cancel"></button> </div>'),e.put("app/pages/pollutionepisodes/scatreports/table/episode-scatreports-table.html",'<table class="table table-condensed table-hover" st-table="vm.items"> <thead> <tr class="active"> <th data-translate="app.scatreport.reporttime">reportTime</th> <th data-translate="app.scatreport.author">author</th> <th data-translate="app.scatreport.incident">callerOrganization</th> <th class="text-right button-column"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.items"> <td><a href="" ng-click="vm.navigate($event,\'scatreports.detail.print\',{id:item.id})"> {{item.reportTime | date:\'dd/MM/yyyy HH:mm\'}}</a></td> <td>{{item.authorName }}</td> <td>{{item.incident}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"> <a href="" ng-click="vm.unlinkPollutionReport(item)" data-translate="global.button.unlink"></a> </li> </ul> </div>  <form editable-form="" name="rowform" onbeforesave="vm.onbeforesave(rowform)" onaftersave="vm.guardarLinea(rowform,item)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedLinea == item"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelarEdicion(rowform,item)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </form> </td> </tr> </tbody> </table>'),e.put("app/pages/pollutionreports/pollutionsources/create-wizard/pollutionsource-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.pollutionsource.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group required has-feedback" ng-class="{\'has-error\': vm.form1.inputSourceType.$invalid && (vm.form1.inputSourceType.$dirty || vm.form1.$submitted)}"> <label for="inputSourceType" class="control-label" data-translate="app.pollutionsource.sourcetype">sourceType</label> <select name="inputSourceType" class="form-control" autofocus="autofocus" ng-model="vm.model.sourceType" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.sourcetype" required=""> </select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputName.$invalid && (vm.form1.inputName.$dirty || vm.form1.$submitted)}"> <label for="inputName" data-translate="app.pollutionsource.name">name</label> <input id="inputName" class="form-control" type="text" ng-model="vm.model.name"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.description.$invalid && (vm.form1.description.$dirty || vm.form1.$submitted)}"> <label for="description" data-translate="app.pollutionsource.description">description</label> <input id="description" class="form-control" type="text" ng-model="vm.model.description"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form2.inputSourceType.$invalid && (vm.form2.inputSourceType.$dirty || vm.form2.$submitted)}"> <label for="inputSourceType" class="control-label" data-translate="app.pollutionsource.pollutioncause">pollutionCause</label> <select name="inputSourceType" class="form-control" ng-model="vm.model.pollutionCause" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.pollutioncause"> </select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div>  </div> </form> </ba-wizard-step>  <ba-wizard-step step-title="{{\'app.pollutionsource.createform.step3\' | translate}}" form="vm.form3" on-activate="vm.drawPollutionSource()" on-exit="vm.disableDrawPollutionSource()"> <form name="vm.form3" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div id="geometry-manual" aria-hidden="true"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point"> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-default btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.pollutionreport.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-default btn-sm" ng-click="vm.currentPosition()" data-translate="app.pollutionreport.map.currentPoint"></button> <button class="btn btn-default btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <div ng-show="vm.mapAction!=\'none\'"> <pollutionreport-map pollutionreport="vm.pollutionreport" hide-layers-panel="true"></pollutionreport-map> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/pollutionreports/pollutionsources/detail/pollutionsource-detail.html",'<editable-form id="fu_eu_arcopol_domain_pollution_PollutionReport" form-name="sourceDetailForm" form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="pollutionsources"> <div class="panel-body"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <fieldset id="origin" class="with-border"> <legend data-translate="app.pollutionsource.detail.fieldset.origin" class="with-border"></legend> <div class="row"> <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionsource.code">code</label> <div> <strong class="form-control-static"> {{ vm.model.code}}</strong> </div> </div> </div> <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionsource.sourcetype">sourcetype</label> <div> <p class="form-control-static" editable-select="vm.model.sourceType" e-ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.sourcetype"> {{vm.translateConfig(\'sourcetype\',vm.model.sourceType)}} </p> </div> </div> </div> <div class="col-xs-8 col-sm-8 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionsource.name">name</label> <div> <p class="form-control-static" ng-bind="vm.model.name" editable-text="vm.model.name" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionsource.description">description</label> <div> <p class="form-control-static" ng-bind="vm.model.description" editable-text="vm.model.description" e-required=""> </p> </div> </div> </div> </div> </fieldset> </div>  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <fieldset id="geometry" class="with-border"> <legend data-translate="app.pollutionsource.detail.fieldset.cause" class="with-border"></legend> <div class="row"> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionsource.pollutioncause">code</label> <div> <p class="form-control-static" editable-select="vm.model.pollutionCause" e-ng-options="o as \'app.pollutioncause.\' +o | translate for o in [\'collision\',\'sink\',\'explosion\',\'runaground\',\'leak\',\'loadfuel\',\'unknown\',\'others\']"> {{ (vm.model.pollutionCause ? \'app.pollutioncause.\' + vm.model.pollutionCause : \'\') | translate}} </p> </div> </div> </div> <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8"> <div class="form-group"> <label class="control-label" data-translate="app.pollutionsource.causedescription">causedescription</label> <div> <p class="form-control-static" ng-bind="vm.model.causeDescription" editable-text="vm.model.causeDescription" e-required=""> </p> </div> </div> </div> </div> </fieldset> </div> </div> </editable-form>'),
e.put("app/pages/pollutionreports/pollutionsources/table/pollutionreport-pollutionsources-table.html",'<div class="none-padding"> <div ng-hide="vm.pollutionsources.length" class="alert alert-info" data-translate="app.pollutionsource.help.noresults"> </div> <table ng-show="vm.pollutionsources.length" class="table table-condensed table-hover" st-table="vm.pollutionsources"> <thead> <tr class="active"> <th style="width:80px;" st-sort="code" data-translate="app.pollutionsource.code">code</th> <th st-sort="name" data-translate="app.pollutionsource.name">name</th> <th st-sort="description" data-translate="app.pollutionsource.description">description</th> <th st-sort="sourceType" data-translate="app.pollutionsource.sourcetype">sourceType</th> <th st-sort="pollutionCause" data-translate="app.pollutionsource.pollutioncause">pollutionCause</th> <th style="width:120px;" st-sort="observedTime" data-translate="app.pollutionsource.observedtime"></th> <th style="width:40px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.pollutionsources | limitTo:vm.size" title="{{global.messages.info.opennewtab | translate}}" ng-class="{\'alert-success\':item.selected}"> <td><a href="" ng-click="vm.navigate($event,\'pollutionreports.detail.pollutionsources.detail\',{\'subid\':item.id})">{{::item.code}}</a></td> <td><strong>{{::item.name}}</strong></td> <td>{{::item.description}}</td> <td>{{::vm.translateConfig(\'sourcetype\',item.sourceType)}}</td> <td>{{::vm.translateConfig(\'pollutioncause\',item.pollutionCause)}}</td> <td><small>{{item.observedTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.remove(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div>   </td> </tr> </tbody> <tfoot ng-show="vm.page.totalPages > 1"> <tr> <td colspan="7" class="text-center"> <p> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.refresh()"></uib-pagination>  </p> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/pollutionreports/spills/detail/spill-detail.html",'<editable-form form-status="vm.formStatus" model="vm.model" form-name="spillDetailForm" on-close="vm.onClose()" topic="spills"> <div class="panel-body"> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <fieldset id="properties" class="with-border"> <legend data-translate="app.spill.detail.fieldset.properties" class="with-border"></legend> <div class="row"> <div class="col-xs-6 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label" data-translate="app.spill.code">code</label> <div> <p class="form-control-static" editable-text="vm.model.code"> <strong ng-bind="vm.model.code"> </strong> </p> </div> </div> </div> <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.spill.observedtime">observedTime</label> <div> <p editable-datetime-local="vm.model.observedTime" class="form-control-static"> {{ vm.model.observedTime | date: \'dd/MM/yy HH:mm\' }} </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.description">description</label> <div> <p class="form-control-static" ng-bind="vm.model.description" editable-text="vm.model.description" e-required=""> </p> </div> </div> </div> </div> </fieldset> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">  <fieldset id="geometry" class="with-border"> <legend data-translate="app.spill.detail.fieldset.geometry" class="with-border"></legend> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.latitude">latitude</label> <div> <p class="form-control-static" editable-text="vm.model.latitude" e-name="app.spill.latitude" e-lonlat-dms="lat"> {{ vm.model.latitude | lonlat:\'lat\'}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.longitude">longitude</label> <div> <p class="form-control-static" editable-text="vm.model.longitude" e-name="app.spill.longitude" e-lonlat-dms="lon"> {{ vm.model.longitude | lonlat:\'lon\'}} </p> </div> </div> </div> </div> </fieldset> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <fieldset id="affectedArea" class="with-border"> <legend data-translate="app.spill.detail.fieldset.affectedarea" class="with-border"></legend> <div class="row"> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.spill.height">height</label> <div> <p class="form-control-static" ng-bind="vm.model.height" editable-number="vm.model.height" e-name="app.spill.height" e-min="0" e-step="0.2"> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureLengthheight\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="vm.map.action=\'measureLengthheight\'"> <i class="icon-globe"></i></a> </div> </div> </div> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.spill.width">width</label> <div> <p class="form-control-static" ng-bind="vm.model.width" editable-number="vm.model.width" e-name="app.spill.width" e-min="0" e-step="0.2"> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureLengthwidth\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthwidth\'"> <i class="icon-globe"></i></a> </div> </div> </div> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.spill.area">area</label> <div> <p class="form-control-static" ng-bind="vm.model.area" editable-number="vm.model.area" e-min="0" e-step="0.2" e-name="app.spill.area"> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureAreaarea\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureAreaarea\'"> <i class="icon-globe"></i></a> </div> </div> </div> </div> </fieldset> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <fieldset id="course" class="with-border"> <legend data-translate="app.spill.detail.fieldset.course" class="with-border"></legend> <div class="row">  <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.course">course</label> <div> <p class="form-control-static" ng-bind="vm.model.course" editable-number="vm.model.course" e-name="app.spill.course" e-min="0" e-max="360" e-step="0.2"> </p> <a class="btn add-on" data-toggle="modal" ng-show="vm.formStatus==\'edit\'" data-target="#course_info"> <i class="icon-info"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.speed">speed</label> <div ng-show="vm.formStatus==\'show\'"> <p editable-text="_" class="form-control-static"> {{vm.model.speed}} <small>{{vm.model.speedUnit ? \'app.speedunit.\'+vm.model.speedUnit :\'\' | translate}}</small> </p> </div> <div ng-hide="vm.formStatus==\'show\'" class="input-group"> <input id="_windspeed_id" name="speed" min="0" step="1" type="number" class="form-control" ng-model="vm.model.speed"> <div class="input-group-btn"> <button class="btn btn-default" href="javascript:void()" data-toggle="dropdown"> <span data-translate="{{vm.model.speedUnit ? \'app.speedunit.\'+vm.model.speedUnit : \'\'}}"></span> <i class="caret"> </i></button> <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'knots\'" data-translate="app.speedunit.knots"></a></li> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'m/s\'" data-translate="app.speedunit.m/s"></a></li> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'km/h\'" data-translate="app.speedunit.km/h"></a></li> </ul> </div> </div> </div> </div> </div> </fieldset> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <fieldset id="aspect" class="with-border"> <legend class="with-border" data-translate="app.spill.detail.fieldset.aspect"></legend> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.spillaparience">spillAparience</label> <div> <p class="form-control-static" editable-select="vm.model.spillAparience" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.spillaparience" e-form="rowform"> {{vm.translateConfig(\'spillaparience\',vm.model.spillAparience)}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.spillaspect">spillAspect</label> <div> <p class="form-control-static" editable-select="vm.model.spillAspect" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.spillaspect" e-form="rowform"> {{vm.translateConfig(\'spillaspect\',vm.model.spillAspect)}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label class="control-label" data-translate="app.spill.pollutantorigin">pollutantOrigin</label> <div> <p class="form-control-static" editable-select="vm.model.pollutantOrigin" e-ng-options="o.value as o.bundle[vm.currentLang] for o in vm.pollutantorigin" e-form="rowform"> {{vm.translateConfig(\'pollutantorigin\',vm.model.pollutantOrigin)}} </p> </div> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" ng-show="vm.formStatus==\'edit\'"> <div class="form-group"> <label class="control-label" data-translate="app.spill.geometry"></label> <div> <a href="" ng-if="vm.map.action==\'edit\'" class="btn btn-default" ng-click="vm.toggleDeleteSpillPoints()"><i class="ion-trash-b"> </i> <span data-translate="app.spill.detail.map.deletepoints"></span> </a> <a href="" ng-if="vm.map.action==\'deletePoints\'" class="btn btn-primary" ng-class="{\'btn-primary\': vm.map.action==\'deletePoints\'}" ng-click="vm.toggleDeleteSpillPoints()"><i class="ion-edit"> </i> <span data-translate="app.spill.detail.map.edit"></span> </a> </div> </div> </div> </fieldset> </div> </div></editable-form>'),e.put("app/pages/pollutionreports/spills/create/spill-create-dlg.html",'<div class="modal-header" ng-class="vm.taskClass"> <button type="button" class="close" data-dismiss="modal" style="padding-left:20px" ng-click="vm.cancel()" aria-hidden="true">&times;</button> <h3 class="modal-title" id="modal-title"> {{vm.dialogTitle}} </h3> </div> <div class="modal-body none-padding" id="modal-body"> <ba-wizard> <ba-wizard-step step-title="{{\'app.spill.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.observedTime.$invalid && (vm.form1.observedTime.$dirty || vm.form1.$submitted)}"> <label for="observedTime" data-translate="app.spills.observedtime">observedTime</label> <input type="datetime-local" name="observedTime" id="plannedStartTime" step="60" class="form-control" ng-model="vm.model.observedTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.datetime.required"></span> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-xs-6"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputStart.$invalid && (vm.inputStart.form1.$dirty || vm.form1.$submitted)}"> <label for="description" data-translate="app.spills.description">description</label> <input id="description" class="form-control" type="text" ng-model="vm.model.description"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.spill.createform.step2\' | translate}}" form="vm.form2"> <form name="vm.form2" novalidate=""> <div class="alert alert-info"> <p data-translate="app.spill.messages.geometry"></p> </div>  </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.spill.createform.step3\' | translate}}" form="vm.form3"> <form name="vm.form3" novalidate=""> <div class="alert alert-info"> <p data-translate="app.spill.messages.affectedarea"></p> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form3.inputHeight.$invalid && (vm.form3.inputHeight.$dirty || vm.form3.$submitted)}"> <label for="inputHeight" data-translate="app.spills.height">height</label> <div class="form-group"> <input id="inputHeight" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.height"> <a class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureLengthheight\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-disabled="{{${form_disabled}}}" ng-click="map.action=\'measureLengthheight\'"> <i class="icon-globe"></i></a> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form3.inputWidth.$invalid && (vm.form3.inputWidth.$dirty || vm.form3.$submitted)}"> <label for="inputWidth" data-translate="app.spills.width">width</label> <div class="form-group"> <input id="inputWidth" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.width"> <a class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureLengthwidth\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthheight\'"> <i class="icon-globe"></i></a> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form3.inputArea.$invalid && (vm.form3.inputArea.$dirty || vm.form3.$submitted)}"> <label for="inputArea" data-translate="app.spills.area">area</label> <div class="form-group"> <input id="inputArea" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.area"> <a class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureLengtharea\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthheight\'"> <i class="icon-globe"></i></a> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.spill.createform.step4\' | translate}}" form="vm.form4"> <form name="vm.form4" novalidate="">  <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form4.inputCourse.$invalid && (vm.form4.inputCourse.$dirty || vm.form4.$submitted)}"> <label for="inputCourse" data-translate="app.spills.course">course</label> <div class="input-group"> <input id="inputCourse" class="form-control" type="number" max="360" min="0" step="1" ng-model="vm.model.course"> <a class="input-group-addon input-sm" popover-trigger="click : outsideClick" uib-popover="{{\'app.pollutionreport.help.winddirection\' | translate}}" popover-append-to-body="true" href=""><i class="fa fa-info"></i></a> </div> <span ng-show="vm.form4.inputCourse.$error.required && !vm.form4.inputCourse.$pristine" class="help-block error-block basic-block" data-translate="app.spill.messages.validate.course.required"></span> <span ng-show="vm.form4.inputCourse.$error.invalid && !vm.form4.inputCourse.$pristine" class="help-block error-block basic-block" data-translate="app.spill.messages.validate.course.invalid"></span> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-8"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form4.inputWidth.$invalid && (vm.form4.inputWidth.$dirty || vm.form4.$submitted)}"> <label for="inputWidth" data-translate="app.spills.speed">speed</label> <div class="form-group"> <input id="_speed_id" name="speed" type="number" class="span11" title="" bs-tooltip="" data-trigger="focus" data-unique="1" ng-model="submodel.speed" ng-disabled="{{${form_disabled}}}" data-original-title="Introducir Speed"> <div class="btn-group"> <button class="btn" data-toggle="dropdown" href="#" ng-disabled="{{${form_disabled}}}"> <span data-translate="{{\'app.speed.\'+vm.model.speedUnit}}"></span> <i class="caret"></i></button> <ul class="dropdown-menu" role="menu"> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'knots\'" data-translate="app.speed.knots"></a></li> <li><a href="javascript:void()" ng-click="submodel.speedUnit=\'m/s\'" data-translate="app.speed.ms"></a></li> <li><a href="javascript:void()" ng-click="submodel.speedUnit=\'km/h\'" data-translate="app.speed.kmh"></a></li> </ul> </div> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.spill.createform.step5\' | translate}}" form="vm.form5"> <form name="vm.form5" novalidate=""> <div class="row"> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputSpillAparience" class="control-label" data-translate="app.spill.spillaparience">spillAparience</label> <select name="inputSpillAparience" class="form-control" ng-model="vm.model.spillAparience" ng-options="o as \'app.spillaparience.\' +o | translate for o in [\'translucent\',\'filmplatted\',\'darktraces\',\'lightbands\',\'colorbands\',\'darkbands\']"> </select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputSpillAspect" class="control-label" data-translate="app.spill.spillaspect">spillAspect</label> <select name="inputSpillAspect" class="form-control" ng-model="vm.model.spillAspect" ng-options="o as \'app.spillaspect.\'+o | translate for o in [ \'continuous\', \'bands\', \'patches\']"> </select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputPollutantOrigin" class="control-label" data-translate="app.spill.pollutantorigin">pollutantOrigin</label> <select name="inputPollutantOrigin" class="form-control" ng-model="vm.model.spillAspect" ng-options="o as \'app.pollutantorigin.\'+o | translate for o in [ \'crudeoil\',\'fuel \',\'chemicals\',\'solid\',\'organic\',\'unknown\']"> </select> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/pollutionreports/spills/create-wizard/spill-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.spill.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form1.observedTime.$invalid && (vm.form1.observedTime.$dirty || vm.form1.$submitted)}"> <label for="observedTime" data-translate="app.spill.observedtime">observedTime</label> <input type="datetime-local" name="observedTime" autofocus="autofocus" id="plannedStartTime" step="60" class="form-control" ng-model="vm.model.observedTime" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.datetime.required"></span> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group required" ng-class="{\'has-error\': vm.form1.inputStart.$invalid && (vm.inputStart.form1.$dirty || vm.form1.$submitted)}"> <label for="description" data-translate="app.spill.description">description</label> <input id="description" class="form-control" type="text" ng-model="vm.model.description" required=""> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> </div> <fieldset>  <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputHeight.$invalid && (vm.form3.inputHeight.$dirty || vm.form3.$submitted)}"> <label for="inputHeight" data-translate="app.spill.height">height</label> <div class="input-group"> <input id="inputHeight" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.height">  </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputWidth.$invalid && (vm.form3.inputWidth.$dirty || vm.form3.$submitted)}"> <label for="inputWidth" class="control-label" data-translate="app.spill.width">width</label> <div class="input-group"> <input id="inputWidth" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.width"> </div>  <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form3.inputArea.$invalid && (vm.form3.inputArea.$dirty || vm.form3.$submitted)}"> <label for="inputArea" class="control-label" data-translate="app.spill.area">area</label> <div class="input-group"> <input id="inputArea" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.area"> </div>  <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> </div> </fieldset> <fieldset> <label>{{\'app.spill.createform.step4\' | translate}}</label> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form4.inputCourse.$invalid && (vm.form4.inputCourse.$dirty || vm.form4.$submitted)}"> <label for="inputCourse" data-translate="app.spill.course">course</label> <div class="input-group"> <input id="inputCourse" class="form-control" type="number" max="360" min="0" step="1" ng-model="vm.model.course">  </div> <span ng-show="vm.form4.inputCourse.$error.required && !vm.form4.inputCourse.$pristine" class="help-block error-block basic-block" data-translate="app.spill.messages.validate.course.required"></span> <span ng-show="vm.form4.inputCourse.$error.invalid && !vm.form4.inputCourse.$pristine" class="help-block error-block basic-block" data-translate="app.spill.messages.validate.course.invalid"></span> </div> </div> <div class="col-xlg-8 col-lg-8 col-md-8 col-xs-12"> <div class="form-group" ng-class="{\'has-error\': vm.form4.inputWidth.$invalid && (vm.form4.inputWidth.$dirty || vm.form4.$submitted)}"> <label for="inputWidth" data-translate="app.spill.speed">speed</label> <div class="form-group"> <div class="input-group"> <input id="_speed_id" class="form-control" name="speed" type="number" min="0" step="1" data-trigger="focus" ng-model="vm.model.speed"> <div class="input-group-btn"> <button class="btn btn-default" data-toggle="dropdown"> <span data-translate="{{vm.model.speedUnit ? \'app.speedunit.\'+vm.model.speedUnit : \'\' }}"></span> <i class="caret"> </i></button> <ul class="dropdown-menu" role="menu"> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'knots\'" data-translate="app.speedunit.knots"></a></li> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'m/s\'" data-translate="app.speedunit.m/s"></a></li> <li><a href="javascript:void()" ng-click="vm.model.speedUnit=\'km/h\'" data-translate="app.speedunit.km/h"></a></li> </ul> </div> </div> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> </div> </fieldset> </form> </ba-wizard-step>  <ba-wizard-step step-title="{{\'app.spill.createform.step2\' | translate}}" form="vm.form2" on-exit="vm.disableDrawSpill()"> <form name="vm.form2" novalidate="">  <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div id="geometry-manual" aria-hidden="true"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point"> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-default btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.pollutionreport.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-default btn-sm" ng-click="vm.currentPosition()" data-translate="app.pollutionreport.map.currentPoint"></button> <button class="btn btn-default btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <div ng-show="vm.mapAction!=\'none\'"> <pollutionreport-map pollutionreport="vm.pollutionreport" hide-layers-panel="true"></pollutionreport-map> </div>  </form> </ba-wizard-step>    <ba-wizard-step step-title="{{\'app.spill.createform.step5\' | translate}}" form="vm.form5"> <form name="vm.form5" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputSpillAparience" class="control-label" data-translate="app.spill.spillaparience">spillAparience</label> <select name="inputSpillAparience" class="form-control" ng-model="vm.model.spillAparience" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.spillaparience"></select>  <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputSpillAspect" class="control-label" data-translate="app.spill.spillaspect">spillAspect</label> <select name="inputSpillAspect" class="form-control" ng-model="vm.model.spillAspect" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.spillaspect"></select>  <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="form-group"> <label for="inputPollutantOrigin" class="control-label" data-translate="app.spill.pollutantorigin">pollutantOrigin</label> <select name="inputPollutantOrigin" class="form-control" ng-model="vm.model.pollutantOrigin" ng-options="o.value as o.bundle[vm.currentLang] | translate for o in vm.pollutantorigin"></select>  <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/pollutionreports/spills/table/pollutionreport-spills-table.html",'<div class="none-padding"> <div ng-hide="vm.spills.length" class="alert alert-info" data-translate="app.spill.help.noresults"> </div> <table ng-show="vm.spills.length" class="table table-condensed table-hover" st-table="vm.spills"> <thead> <tr class="active"> <th style="width:80px;" st-sort="code" data-translate="app.spill.code">reportTime</th> <th st-sort="description" data-translate="app.spill.description"></th> <th class="hidden-mobile" st-sort="spillAspect" data-translate="app.spill.spillaspect"></th> <th class="hidden-mobile" st-sort="spillAparience" data-translate="app.spill.spillaparience"></th> <th style="width:120px;" st-sort="observedTime" data-translate="app.spill.observedtime"></th> <th class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.spills | limitTo:vm.size" title="{{global.messages.info.opennewtab | translate}}" ng-class="{\'alert-success\':item.selected}"> <td><a href="" ng-click="vm.navigate($event,\'pollutionreports.detail.spills.detail\',{\'subid\':item.id})">{{item.code}}</a></td> <td><strong>{{item.description}}</strong></td> <td class="hidden-mobile">{{::vm.translateConfig(\'spillaspect\',item.spillAspect)}}</td> <td class="hidden-mobile">{{::vm.translateConfig(\'spillaparience\',item.spillAparience)}}</td> <td><small>{{item.observedTime | date:\'dd/MM/yyyy HH:mm\'}}</small></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.removeSpill(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div>   </td> </tr> </tbody> <tfoot ng-show="vm.page.totalPages > 1"> <tr> <td colspan="7" class="text-center"> <p> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.refresh()"></uib-pagination>  </p> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/scatreports/create-wizard/map/scatreport-create-map.html",'<div> <div class="modal-body"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <input name="geometry" type="hidden" ng-model="vm.model.geometry"> <input name="startPosition" type="hidden" ng-model="vm.model.startPosition"> <input name="endPosition" type="hidden" ng-model="vm.model.endPosition"> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <fieldset id="origin" class="with-border"> <legend data-translate="app.scatreport.startposition" class="with-border"></legend> <div manual-position-panel="vm.model.segment.startPosition" geometry-type="OpenLayers.Handler.Point"></div> </fieldset> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <fieldset class="with-border"> <legend data-translate="app.scatreport.endposition" class="with-border"></legend> <div manual-position-panel="vm.model.segment.endPosition" geometry-type="OpenLayers.Handler.Point"></div> </fieldset> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-sm" ng-class="{true:\'btn-primary\'}[vm.map.action==\'drawsegments\']" data-translate="app.scatreport.map.draw" ng-click="vm.toggleMapAction(\'drawsegments\')"><i class="ion-edit"> </i>&#160;</button>  <button class="btn btn-sm" ng-click="vm.removeSegment()"><i class="text-danger ion-trash-b"> </i></button> </div>  </div> </div>  </div> </div> <div> <div id="segmentMap" style="width:100%; height:512px; display:block;"> <div style="position:relative; width:100%; height:100%;" ng-mouseenter="vm.updateSize()"> <div id="map" ol-map="vm.olmap" proxy-host="/arcopol/cgi-bin?targetURL=" class="olMap"> <ol-map-control name="Zoom" ctrl-type="zoom" active="true"> <ol-map-control name="Navigation" ctrl-type="navigation" options="{handleRightClicks:true}" active="true"> <ol-map-control name="MousePosition" ctrl-type="mousePosition" options="{displayProjection: \'EPSG:900913\'}" active="true">  <ol-map-control name="MeasureSurveyed" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action===\'measurelengthSurveyed\'}}" handler="OpenLayers.Handler.Path" ol-control-measure="vm.measureAction($event)"></ol-map-control> <ol-map-control name="MeasureLength" ctrl-type="measure" options="{displayProjection: \'EPSG:4326\'}" active="{{vm.map.action===\'measuresegmentLength\'}}" handler="OpenLayers.Handler.Path" ol-control-measure="vm.measureAction($event)"></ol-map-control> <div class="btn-group" style="position: absolute; top: 10px; right:5px; z-index:1020; opacity:0.9"> <a class="btn btn-default" title="{{\'app.page.scatreports.map.centermap\' | translate}}" ng-click="$parent.centerOnCurrentPosition()"><i class="ion-pinpoint"></i></a> <a class="btn btn-default btn-with-icon" ol-baselayer-switcher="openmaps">OSM</a> <a class="btn btn-default" ol-baselayer-switcher="Google-Satellite">Satellite</a> </div> <ol-layer name="Google-Satellite" lyr-type="google" lyr-options="{sphericalMercator: true, type: \'google.maps.MapTypeId.HYBRID\', numZoomLevels: 20}"> <ol-layer name="openmaps" lyr-type="tiles">  <ol-layer name="GeoLocation" lyr-type="markers"> <ol-marker icon="assets/img/gsv_icon2.png" lonlat="{{vm.geoService.currentPosition(\'EPSG:900913\')}}" size="21,40"> </ol-marker> </ol-layer> <ol-layer name="segments" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false ,projection:\'EPSG:900913\'}" ol-layer-featureadded="vm.featureAdded($event)" ol-layer-featuremodified="vm.featureModified($event)" ol-layer-beforefeatureadded="vm.beforeFeatureAdded($event)"> <ol-feature geometry="vm.model.segment.geometry" attributes="vm.model.segment" style="{\'strokeColor\':\'#00F\'}" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature> <ol-layer-control name="Pintar punto" ctrl-type="drawFeature" active="{{vm.map.action==\'drawpoints\'}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Point"> </ol-layer-control> <ol-layer-control name="Pintar segmento" ctrl-type="drawFeature" active="{{vm.map.action==\'drawsegments\' || vm.map.action==\'editsegments\'}}" options="{ clickout: true, toggle: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}" handler="OpenLayers.Handler.Path"> </ol-layer-control> </ol-layer> <ol-layer name="segment-points" lyr-type="vector" lyr-options="{transparent:\'true\', opacity: \'0.80\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }"> <ol-feature geometry="vm.model.segment.startPosition" attributes="vm.model.segment" style="{\'fillColor\':\'#04B404\', \'pointRadius\': 4}" display-projection="EPSG:900913" projection="EPSG:4326"> <ol-feature geometry="vm.model.segment.endPosition" attributes="vm.model.segment" style="{\'fillColor\':\'#8A0808\', \'pointRadius\': 4}" display-projection="EPSG:900913" projection="EPSG:4326"> </ol-feature></ol-feature></ol-layer> <ol-layer name="points" lyr-type="vector" visibility="{{vm.map.action==\'deletePoints\'}}" lyr-options="{transparent:\'true\', opacity: \'0.90\' , visibility:\'true\', strategy: BBOX , isBaseLayer:false }" default-style="{\'externalGraphic\':\'${icon_url}\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" select-style="{\'externalGraphic\':\'${icon_url}\', \'graphicHeight\': 24,\'graphicWidth\': 18 ,\'fillColor\': \'#FE9929\'}" ol-layer-featureselected="vm.confirmRemoveSelectedPoint($event)" ol-layer-featureunselected="vm.cancelRemoveSelectedPoint($event)"> <ol-feature ng-repeat="p in vm.feature.geometry.getVertices()" geometry="p" attributes="p" style="{\'externalGraphic\':\'assets/img/icon-trash.png\', \'graphicHeight\': 24,\'graphicWidth\': 16 }" display-projection="EPSG:900913" projection="EPSG:4326"> <ol-layer-control name="selectPointCtrl" active="{{vm.map.action==\'deletePoints\'}}" ctrl-type="selectFeature" options="{ box: false, multiple: false, hover: false, toggleKey: \'ctrlKey\', multipleKey: \'shiftKey\'}">  </ol-layer-control> </ol-feature></ol-layer>  <div class="alert alert-danger col-md-3" ng-if="vm.selectedPoint" style="position: absolute; top: 10px; left:430px; z-index:1030; opacity:0.9">  <strong><i class="icon-question-sign"> </i><span data-translate="app.page.scatreports.map.confirm"></span></strong> <p data-translate="app.page.scatreports.map.confirmdeletepoint"></p> <div class="btn-group"> <button ng-click="vm.removeSelectedPoint()"><span data-translate="global.button.yes"></span></button> <button ng-click="vm.cancelRemoveSelectedPoint()"><span data-translate="global.button.no"></span></button> </div> </div> </ol-layer></ol-layer></ol-map-control></ol-map-control></ol-map-control></div> </div> </div> </div> </div>'),
e.put("app/pages/scatreports/detail/operationalfeatures/scatreport-operationalfeatures-pills.html",'<div class="tabs-panel none-padding horizontal-tabs"> <div class="panel-body"> <uib-tabset justified="true" type="tabs">  <uib-tab index="0" class="active"> <uib-tab-heading> <span data-translate="app.operationalfeature.debris.title"></span> <small class="badge pull-right"> <span ng-show="vm.model.operationalFeatures.debris">{{\'app.operationalfeature.debris.\' + vm.model.operationalFeatures.debris | translate}}</span> <span ng-show="vm.model.operationalFeatures.debrises.length"> {{ (vm.model.operationalFeatures.debrises.length ? \': \'+vm.model.operationalFeatures.debrises.length: \'\')}}</span> </small> </uib-tab-heading> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group"> <span e-form="vm.detailForm" class="form-control-static" editable-select="vm.model.operationalFeatures.debris" e-ng-options="o as \'app.operationalfeature.debris.\'+o | translate for o in \'no;no_much;a_lot;dont_know\'.split(\';\')" data-translate="{{vm.model.operationalFeatures.debris ? \'app.operationalfeature.debris.\'+ vm.model.operationalFeatures.debris : \'\'}}"> </span> </div> </div> <table class="table table-condensed table table-condensed table-hover"> <thead> <tr class="active"> <th style="width:80px;" data-translate="app.operationalfeature.debris.number"></th> <th data-translate="app.operationalfeature.debris.type"></th> <th style="width:180px;" data-translate="app.operationalfeature.debris.oiled"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.operationalFeatures.debrises"> <td> {{item.number}} </td> <td>{{ \'app.operationalfeature.debristype.\' +item.type | translate}}</td> <td><i class="badge fa fa-tint" ng-show="item.oiled" style="padding:4px 8px 4px 8px"></i></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-show="!vm.editMode"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeDebris($index)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.detailForm.$visible"> <ng-form name="vm.debrisForm" novalidate="novalidate"> <tr> <td> <input class="form-control input-sm" min="0" type="number" ng-model="vm.debrisNumber"> </td> <td> <select placeholder="Tipo de fauna" class="form-control input-sm" ng-model="vm.debrisType" ng-options="o as \'app.operationalfeature.debristype.\'+o | translate for o in \'cups;litres;volume\'.split(\';\')"> </select> </td> <td> <div> <label> <input ng-model="vm.debrisOiled" type="checkbox"><span class="form-control-static" data-translate="app.operationalfeature.debris.oiled"></span> </label> </div> </td> <td> <button ng-click="vm.addDebris({\'number\':vm.debrisNumber,\'type\':vm.debrisType,\'oiled\':vm.debrisOiled});" type="button" class="btn editable-table-button btn-xs btn-primary btn-with-icon" ng-disabled="vm.debrisForm.$invalid"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </ng-form> </tfoot> </table> </div> </uib-tab> <uib-tab index="1"> <uib-tab-heading> <span data-translate="app.operationalfeature.algae.title"></span> <small class="badge pull-right"> <span ng-show="vm.model.operationalFeatures.algae">{{\'app.operationalfeature.algae.\' + vm.model.operationalFeatures.algae | translate}}</span> <span ng-show="vm.model.operationalFeatures.algaes.length"> {{ (vm.model.operationalFeatures.algaes.length ? \': \'+vm.model.operationalFeatures.algaes.length : \'\')}}</span> </small> </uib-tab-heading> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12"> <div class="form-group">  <span class="form-control-static" e-form="vm.detailForm" editable-select="vm.model.operationalFeatures.algae" e-ng-options="o as \'app.operationalfeature.algae.\'+o | translate for o in \'no;no_much;a_lot;dont_know\'.split(\';\')" data-translate="{{vm.model.operationalFeatures.algae ? \'app.operationalfeature.algae.\'+ vm.model.operationalFeatures.algae : \'\'}}"></span> </div> </div> <table class="table table-condensed table table-condensed table-hover"> <thead> <tr class="active"> <th style="width:80px;" data-translate="app.operationalfeature.algae.number"></th> <th data-translate="app.operationalfeature.algae.type"></th> <th style="width:120px;" data-translate="app.operationalfeature.algae.oiled"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.operationalFeatures.algaes"> <td> {{item.number}} </td> <td>{{ \'app.operationalfeature.algaetype.\' +item.type | translate}}</td> <td><i class="badge icon-tint" ng-show="item.oiled" style="padding:4px 8px 4px 8px"></i></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-hide="vm.detailForm.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeDebris($index)" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.detailForm.$visible"> <ng-form name="vm.algaeForm" novalidate="novalidate"> <tr> <td> <input name="algaeNumber" class="form-control input-sm" min="0" type="number" ng-model="vm.algaeNumber"> </td> <td> <select name="algaeType" placeholder="Tipo de fauna" class="form-control input-sm" ng-model="vm.algaeType" ng-options="o as \'app.operationalfeature.algaetype.\'+o | translate for o in \'cups;litres;volume\'.split(\';\')"> </select> </td> <td> <div style="padding-left: 20px;"> <label class="checkbox"> <input ng-model="vm.algaeOiled" type="checkbox"><span class="form-control-static" data-translate="app.operationalfeature.algae.oiled"></span> </label> </div> </td> <td> <button ng-click="vm.addAlgae({\'number\':vm.algaeNumber,\'type\':vm.algaeType,\'oiled\':vm.algaeOiled});" type="button" class="btn btn-sm btn-with-icon btn-primary" ng-disabled="vm.algaeForm.$invalid"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </ng-form> </tfoot> </table> </div> </uib-tab> <uib-tab index="2"> <uib-tab-heading> <span data-translate="app.operationalfeature.oiledfaunas.title"></span> <small class="badge pull-right">{{vm.model.operationalFeatures.oiledFaunas.length}}</small> </uib-tab-heading> <table class="table table-condensed table table-condensed table-hover"> <thead> <tr class="active"> <th style="width:80px;" data-translate="app.operationalfeature.oiledfaunas.number"></th> <th data-translate="app.operationalfeature.oiledfaunas.type"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.operationalFeatures.oiledFaunas"> <td> {{item.number}} </td> <td>{{item.type}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-hide="vm.detailForm.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeDebris($index)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.detailForm.$visible"> <ng-form novalidate="novalidate" class="form-inline" name="vm.oiledFaunasForm"> <tr> <td><input name="oiledFaunaNumber" class="form-control input-sm" min="0" type="number" ng-model="vm.faunaNumber"></td> <td><input name="oiledFaunaType" class="form-control input-sm" ng-model="vm.faunaType"></td> <td><button ng-click="vm.addOiledFauna({\'number\':vm.faunaNumber,\'type\':vm.faunaType});" type="button" class="btn btn-primary btn-sm btn-with-icon" ng-disabled="vm.oiledFaunasForm.$invalid"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </ng-form> </tfoot> </table> </uib-tab> </uib-tabset> </div> </div>'),e.put("app/pages/scatreports/detail/operationalfeatures/scatreport-operationalfeatures.html",'<div class="tab-pane" id="operationalfeatures">  <fielset ng-disabled="vm.detailForm.$visible"> <div class="row"> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.operationalfeature.existsdebris"> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" ng-model="vm.model.operationalFeatures.existsDebris"> </label> </div> </div> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.operationalfeature.oileddebris"> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" ng-model="vm.model.operationalFeatures.oiledDebris"> </label> </div> </div> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputnumberdebris" class="control-label" data-translate="app.operationalFeatures.numberdebris">numberdebris</label> <select name="inputnumberdebris" class="form-control" autofocus="autofocus" ng-model="vm.model.numberDebris" ng-options="o as \'app.operationalfeatures.typedebris.\' +o.toLowerCase() | translate for o in \'bags;trucks\'.split(\';\')"> </select> </div> </div> <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputnumberdebris" class="control-label" data-translate="app.operationalFeatures.typedebris.title">typedebris</label> <select name="inputnumberdebris" class="form-control" autofocus="autofocus" ng-model="vm.model.typeDebris" ng-options="o as \'app.operationalfeatures.typedebris.\' +o.toLowerCase() | translate for o in \'bags;trucks\'.split(\';\')"> </select> </div> </div> </div> <div class="row"> <div class="form-group col-md-4"> <label data-translate="app.operationalfeature.directbackshoreaccess.title"></label> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="No" checklist-model="vm.model.operationalFeatures.directBackshoreAccess"> <span data-translate="app.operationalfeature.directbackshoreaccess.no"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Pedestrian" checklist-model="vm.model.operationalFeatures.directBackshoreAccess"> <span data-translate="app.operationalfeature.directbackshoreaccess.pedestrian"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Trucks" checklist-model="vm.model.operationalFeatures.directBackshoreAccess"> <span data-translate="app.operationalfeature.directbackshoreaccess.trucks"></span> </label> </div> </div> </div> <div class="form-group col-md-4"> <label data-translate="app.operationalfeature.neighboursegmentaccess.title"></label> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="No" checklist-model="vm.model.operationalFeatures.neighbourSegmentAccess"> <span data-translate="app.operationalfeature.neighboursegmentaccess.no"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Pedestrian" checklist-model="vm.model.operationalFeatures.neighbourSegmentAccess"> <span data-translate="app.operationalfeature.neighboursegmentaccess.pedestrian"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Trucks" checklist-model="vm.model.operationalFeatures.neighbourSegmentAccess"> <span data-translate="app.operationalfeature.neighboursegmentaccess.trucks"></span> </label> </div> </div> </div> <div class="form-group col-md-4"> <div class="row"> <div class="form-group col-md-4"> <label> <input type="checkbox" ng-model="vm.model.operationalFeatures.backshoreCliff" ng-disabled="!vm.detailForm.$visible"> <span data-translate="app.operationalfeature.backshorecliff"></span> </label> </div> <div class="form-group col-md-8"> <input ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.backshoreCliffHeight" min="0" type="number" class="form-control" placeholder="{{\'app.operationalfeature.backshorecliffheight\' | translate}}"> </div> </div> <div class="checkbox"> <div class="form-group col-md-4"> <label> <input type="checkbox" ng-model="vm.model.operationalFeatures.ongoingCleanupActivity" ng-disabled="!vm.detailForm.$visible"> <span data-translate="app.operationalfeature.ongoingcleanupactivity"></span> </label> </div> <div class="form-group col-md-8"> <input ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.ongoingCleanupActivityComments" type="text" class="form-control" placeholder="{{\'app.operationalfeature.ongoingcleanupactivityComments\' | translate}}"> </div> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="vm.model.operationalFeatures.suitableLaydownArea" ng-disabled="!vm.detailForm.$visible"> <span data-translate="app.operationalfeature.suitablelaydownarea"></span> </label> </div> </div> </div> <div class="row"> <div class="form-group col-md-4"> <label class="control-label" data-translate="app.operationalfeature.accessrestrictions"></label> </div> <div class="form-group col-md-8"> <input ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.accessRestrictions" type="text" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label data-translate="app.operationalfeature.uses.title"></label> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Tourism" checklist-model="vm.model.operationalFeatures.uses"> <span data-translate="app.operationalfeature.uses.tourism"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Fishing" checklist-model="vm.model.operationalFeatures.uses"> <span data-translate="app.operationalfeature.uses.fishing"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Other" checklist-model="vm.model.operationalFeatures.uses"> <span data-translate="app.operationalfeature.uses.other"></span> </label> </div> </div> <div ng-show="vm.model.operationalFeatures.uses==\'Other\'"> <input ng-model="vm.model.operationalFeatures.usesOther" type="text"> </div> </div> <div class="form-group col-md-6"> <label data-translate="app.operationalfeature.conservation.title"></label> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Tourism" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.no"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Historical" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.historical"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Archaelogical" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.archaelogical"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Nature" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.nature"></span> </label> </div> </div> </div> </div> </fielset>   </div>'),e.put("app/pages/scatreports/detail/contacts/scatreport-contacts.html",'<div> <div ng-show="{{!vm.model.contacts && !vm.editMode}}"> <div class="alert alert-info"> <p data-translate="app.scatreport.detail.message.contactsempty"></p> </div> </div> <table class="table table-condensed table table-condensed table-hover" ng-hide="{{!vm.model.contacts && !vm.editMode}}"> <thead> <tr class="active"> <th data-translate="app.contact.contactname"></th> <th data-translate="app.contact.organization"></th> <th style="width:180px;" data-translate="app.contact.phonenumber"></th> <th style="width:80px;" class="text-right" ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.contacts | orderBy:predicate:reverse"> <td>{{item.contactName}}</td> <td>{{item.organisation}}</td> <td>{{item.phoneNumber}}</td> <td class="text-right none-padding nowrap" ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER"> <div uib-dropdown="" dropdown-append-to-body="true" ng-show="!vm.editMode"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeContact(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-if="vm.editMode"> <tr> <td> <input id="inputContactName" class="form-control" ng-model="vm.newContact.contactName" type="text"> </td> <td> <input class="form-control" ng-model="vm.newContact.organisation" type="text"> </td> <td> <input class="form-control" ng-model="vm.newContact.phoneNumber" placeholder="000000000" ng-pattern="/(^(\\+?\\-? *[0-9]+)([,0-9 ]*)([0-9 ])*$)|(^ *$)/" type="text"> </td> <td class="text-right"> <button type="button" ng-click="vm.addContact(vm.newContact)" class="btn editable-table-button btn-xs btn-primary btn-with-icon"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/scatreports/detail/shorelinetypes/scatreport-shorelinetypes.html",'<div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label"><span data-translate="app.segment.waveexposure"></span> <a class="btn pull-right" ng-click="vm.openModal(\'exposicion_oleaje.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a></label> <div> <p editable-select="vm.model.waveExposure" e-ng-options="o as \'app.waveexposure.\'+o.toLowerCase() | translate for o in \'VeryExposed;Exposed;PartiallySheltered;VerySheltered;ExtremelySheltered\'.split(\';\')" class="form-control-static"> {{ (vm.model.waveExposure ? \'app.waveexposure.\'+vm.model.waveExposure.toLowerCase() : \'\') | translate }} </p>  <script type="text/ng-template" id="exposicion_oleaje.html"> <div class="modal-body"> <ng-include src="currentLocaleTemplate(\'app/dialogs/help/exposicion_oleaje_help_[locale].html\')" /> </div> </script> </div> </div> </div> <div class="text-right offset5 span3"> <div class="text-left"> <a class="btn pull-right" ng-click="vm.openModal(\'shorelinetype_modal.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a> <script type="text/ng-template" id="shorelinetype_modal.html"> <div class="modal-body"> <ng-include src="currentLocaleTemplate(\'app/dialogs/help/shorelinetype_help_[locale].html\')" /> </div> </script> <table> <tr> <td style="width:40px"><i class="ion-checkmark"></i><i class="ion-checkmark"></i></td> <td> <span data-translate="app.localfeature.primary_info"> </span></td> </tr> <tr> <td><i class="ion-checkmark"></i></td> <td> <span data-translate="app.localfeature.secondary_info"> </span></td> </tr> <tr> <td><i class="ion-waterdrop"></i></td> <td data-translate="app.operationalfeature.oiled"></td> </tr> </table> </div> </div> </div>  <div ng-show="vm.detailForm.$visible"> <table class="table table-bordered table-condensed"> <thead> <tr> <th width="40px" class="text-center"><span class="ion-checkmark"> </span></th> <th width="40px" class="text-center"><span class="ion-waterdrop"> </span> </th> <th> </th> <th width="40px" class="text-center"><span class="ion-checkmark"> </span></th> <th width="40px" class="text-center"><span class="ion-waterdrop"> </span></th> <th> </th> </tr> </thead> <tbody> <tr> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockCliff" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.BedrockCliff)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockCliff.primary"> </i> </span> </a> </td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockCliff" ng-click="vm.toggleOiled(vm.shorelineTypes.BedrockCliff)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.BedrockCliff.oiled}"></i> </span> </a> </td> <td> <label> <input type="checkbox" ng-model="BedrockCliff" ng-change="vm.toggleSelect(\'BedrockCliff\')">&#160; <span data-translate="app.shorelinetype.bedrockcliff"></span> </label> </td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.MudSediments" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.MudSediments)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MudSediments.primary"> </i> </span> </a> </td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.MudSediments" ng-click="vm.toggleOiled(vm.shorelineTypes.MudSediments)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.MudSediments.oiled}"></i> </span> </a> </td> <td>  <label> <input type="checkbox" ng-model="MudSediments" ng-change="vm.toggleSelect(\'MudSediments\')">&#160; <span data-translate="app.shorelinetype.mudsediments"></span> </label> </td> </tr> <tr> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockPlatform" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.BedrockPlatform)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockPlatform.primary"> </i> </span></a></td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockPlatform" ng-click="vm.toggleOiled(vm.shorelineTypes.BedrockPlatform)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.BedrockPlatform.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="BedrockPlatform" ng-change="vm.toggleSelect(\'BedrockPlatform\')">&#160; <span data-translate="app.shorelinetype.bedrockplatform"></span> </label>  </td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SandSediments" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.SandSediments)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SandSediments.primary"> </i></span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SandSediments" ng-click="vm.toggleOiled(vm.shorelineTypes.SandSediments)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.SandSediments.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="SandSediments" ng-change="vm.toggleSelect(\'SandSediments\')">&#160; <span data-translate="app.shorelinetype.sandsediments"></span> </label>  </td> </tr> <tr> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.ManmadeSolid" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.ManmadeSolid)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadeSolid.primary"> </i></span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.ManmadeSolid" ng-click="vm.toggleOiled(vm.shorelineTypes.ManmadeSolid)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.ManmadeSolid.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="ManmadeSolid" ng-change="vm.toggleSelect(\'ManmadeSolid\')">&#160; <span data-translate="app.shorelinetype.manmadesolid"></span> </label>  </td> <td class="text-center"><a ng-if="vm.shorelineTypes.MixedSediments" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.MixedSediments)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MixedSediments.primary"> </i></span></a></td> <td class="text-center"><a ng-if="vm.shorelineTypes.MixedSediments" ng-click="vm.toggleOiled(vm.shorelineTypes.MixedSediments)"><span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.MixedSediments.oiled}"></i></span></a></td> <td>  <label> <input type="checkbox" ng-model="MixedSediments" ng-change="vm.toggleSelect(\'MixedSediments\')">&#160; <span data-translate="app.shorelinetype.mixedsediments"></span> </label> </td> </tr> <tr> <td class="text-center"><a ng-if="vm.shorelineTypes.ManmadePermeable" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.ManmadePermeable)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadePermeable.primary"> </i></span></a></td> <td class="text-center"><a ng-if="vm.shorelineTypes.ManmadePermeable" ng-click="vm.toggleOiled(vm.shorelineTypes.ManmadePermeable)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.ManmadePermeable.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="ManmadePermeable" ng-change="vm.toggleSelect(\'ManmadePermeable\')">&#160; <span data-translate="app.shorelinetype.manmadepermeable"></span> </label>  </td> <td class="text-center"><a ng-if="vm.shorelineTypes.PebbleCobbleShingle" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.PebbleCobbleShingle)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> </i></span></a></td> <td class="text-center"><a ng-if="vm.shorelineTypes.PebbleCobbleShingle" ng-click="vm.toggleOiled(vm.shorelineTypes.PebbleCobbleShingle)"><span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.PebbleCobbleShingle.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="PebbleCobbleShingle" ng-change="vm.toggleSelect(\'PebbleCobbleShingle\')">&#160; <span data-translate="app.shorelinetype.pebblecobbleshingle"></span> </label>  </td> </tr> <tr> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SaltMarsh" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.SaltMarsh)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SaltMarsh.primary"> </i></span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SaltMarsh" ng-click="vm.toggleOiled(vm.shorelineTypes.SaltMarsh)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.SaltMarsh.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="SaltMarsh" ng-change="vm.toggleSelect(\'SaltMarsh\')">&#160; <span data-translate="app.shorelinetype.saltmarsh"></span> </label>  </td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.Boulder" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.Boulder)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.Boulder.primary"> </i> </span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.Boulder" ng-click="vm.toggleOiled(vm.shorelineTypes.Boulder)"><span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.Boulder.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="Boulder" ng-change="vm.toggleSelect(\'Boulder\')">&#160; <span data-translate="app.shorelinetype.boulder"></span> </label>  </td> </tr> </tbody> </table> </div>  <div ng-show="!vm.detailForm.$visible"> <table class="table table-bordered"> <thead> <tr> <th width="40px" class="text-center"> <span class="icon-inline ion-checkmark"> </span></th> <th width="20px" class="text-center"><i class="ion-waterdrop"> </i> </th> <th> </th> <th width="40px" class="text-center"> <span class="icon-inline ion-checkmark"> </span></th> <th width="20px" class="text-center"><i class="ion-waterdrop"> </i> </th> <th> </th> </tr> </thead> <tbody> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockCliff" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockCliff.primary"> </i></span> </td> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockCliff"> <i ng-if="vm.shorelineTypes.BedrockCliff.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.bedrockcliff"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.MudSediments" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MudSediments.primary"> </i></span> </td> <td class="text-center"><span ng-if="vm.shorelineTypes.MudSediments"> <i ng-if="vm.shorelineTypes.MudSediments.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.mudsediments"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockPlatform" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockPlatform.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockPlatform"> <i ng-if="vm.shorelineTypes.BedrockPlatform.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.bedrockplatform"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.SandSediments" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SandSediments.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.SandSediments"> <i ng-if="vm.shorelineTypes.SandSediments.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.sandsediments"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadeSolid" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadeSolid.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadeSolid"> <i ng-if="vm.shorelineTypes.ManmadeSolid.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.manmadesolid"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.MixedSediments" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MixedSediments.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.MixedSediments"> <i ng-if="vm.shorelineTypes.MixedSediments.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.mixedsediments"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadePermeable" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadePermeable.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadePermeable"> <i ng-if="vm.shorelineTypes.ManmadePermeable.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.manmadepermeable"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.PebbleCobbleShingle" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.PebbleCobbleShingle"> <i ng-if="vm.shorelineTypes.PebbleCobbleShingle.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.pebblecobbleshingle"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.SaltMarsh" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SaltMarsh.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.SaltMarsh"> <i ng-if="vm.shorelineTypes.SaltMarsh.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.saltmarsh"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.Boulder" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.Boulder.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.Boulder"> <i ng-if="vm.shorelineTypes.Boulder.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.boulder"></span></td> </tr> </tbody> </table> </div> <div class="row"> <scatreport-localfeatures scatreport="vm.scatreport" detail-form="vm.detailForm"></scatreport-localfeatures> </div>'),
e.put("app/pages/scatreports/operationalfeatures/detail/operationalfeatures-detail-spills.html",'<div class="tabs-panel none-padding horizontal-tabs"> <div class="panel-body"> <uib-tabset justified="true" type="tabs">  <uib-tab index="0" class="active"> <uib-tab-heading> <span data-translate="app.operationalfeature.debris.title"></span> <small class="badge pull-right" ng-show="vm.model.operationalFeatures.debrises && vm.model.operationalFeatures.debrises.length"> <span ng-show="vm.model.operationalFeatures.debris">{{\'app.operationalfeature.debris.\' + vm.model.operationalFeatures.debris | translate}}</span> <span ng-show="vm.model.operationalFeatures.debrises.length"> {{ (vm.model.operationalFeatures.debrises.length ? \': \'+vm.model.operationalFeatures.debrises.length: \'\')}}</span> </small> </uib-tab-heading> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12" ng-show="vm.detailForm.$visible"> <div class="form-group"> <span e-form="vm.detailForm" class="form-control-static" editable-select="vm.model.operationalFeatures.debrises" e-ng-options="o as \'app.operationalfeature.debris.\'+o | translate for o in \'no;no_much;a_lot;dont_know\'.split(\';\')" data-translate="{{vm.model.operationalFeatures.debris ? \'app.operationalfeature.debris.\'+ vm.model.operationalFeatures.debris : \'\'}}"> </span> </div> </div> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <table class="table table-condensed table table-condensed table-hover" ng-show="vm.model.operationalFeatures.oiledFaunas.length || vm.detailForm.$visible"> <thead> <tr class="active"> <th style="width:80px;" data-translate="app.operationalfeature.debris.number"></th> <th data-translate="app.operationalfeature.debris.type"></th> <th style="width:180px;" data-translate="app.operationalfeature.debris.oiled"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.operationalFeatures.debrises"> <td> {{item.number}} </td> <td>{{ \'app.operationalfeature.debristype.\' +item.type | translate}}</td> <td><i class="badge fa fa-tint" ng-show="item.oiled" style="padding:4px 8px 4px 8px"></i></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-hide="vm.detailForm.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeDebris($index)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.detailForm.$visible"> <ng-form name="vm.debrisForm" novalidate="novalidate"> <tr> <td> <input class="form-control input-sm" min="0" type="number" ng-model="vm.debrisNumber"> </td> <td> <select placeholder="Tipo de fauna" class="form-control input-sm" ng-model="vm.debrisType" ng-options="o as \'app.operationalfeature.debristype.\'+o | translate for o in \'cups;litres;volume\'.split(\';\')"> </select> </td> <td> <div> <label> <input ng-model="vm.debrisOiled" type="checkbox"><span class="form-control-static" data-translate="app.operationalfeature.debris.oiled"></span> </label> </div> </td> <td> <button ng-click="vm.addDebris({\'number\':vm.debrisNumber,\'type\':vm.debrisType,\'oiled\':vm.debrisOiled});" type="button" class="btn editable-table-button btn-xs btn-primary btn-with-icon" ng-disabled="vm.debrisForm.$invalid"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </ng-form> </tfoot> </table> <div class="alert alert-info" data-translate="app.operationalfeature.debris.empty" ng-hide="vm.model.operationalFeatures.debris.length || vm.detailForm.$visible"></div> </div> </div> </uib-tab> <uib-tab index="1"> <uib-tab-heading> <span data-translate="app.operationalfeature.algae.title"></span> <small class="badge pull-right" ng-show="vm.model.operationalFeatures.algaes && vm.model.operationalFeatures.algaes.length"> <span ng-show="vm.model.operationalFeatures.algae">{{\'app.operationalfeature.algae.\' + vm.model.operationalFeatures.algae | translate}}</span> <span ng-show="vm.model.operationalFeatures.algaes.length"> {{ (vm.model.operationalFeatures.algaes.length ? \': \'+vm.model.operationalFeatures.algaes.length : \'\')}}</span> </small> </uib-tab-heading> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-4 col-xs-12" ng-show="vm.detailForm.$visible"> <div class="form-group">  <span class="form-control-static" e-form="vm.detailForm" editable-select="vm.model.operationalFeatures.algae" e-ng-options="o as \'app.operationalfeature.algae.\'+o | translate for o in \'no;no_much;a_lot;dont_know\'.split(\';\')" data-translate="{{vm.model.operationalFeatures.algae ? \'app.operationalfeature.algae.\'+ vm.model.operationalFeatures.algae : \'\'}}"></span> </div> </div> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <table class="table table-condensed table table-condensed table-hover" ng-show="vm.model.operationalFeatures.algae.length || vm.detailForm.$visible"> <thead> <tr class="active"> <th style="width:80px;" data-translate="app.operationalfeature.algae.number"></th> <th data-translate="app.operationalfeature.algae.type"></th> <th style="width:120px;" data-translate="app.operationalfeature.algae.oiled"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.operationalFeatures.algaes"> <td> {{item.number}} </td> <td>{{ \'app.operationalfeature.algaetype.\' +item.type | translate}}</td> <td><i class="badge icon-tint" ng-show="item.oiled" style="padding:4px 8px 4px 8px"></i></td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-hide="vm.detailForm.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeAlgae($index)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.detailForm.$visible"> <ng-form name="vm.algaeForm" novalidate="novalidate"> <tr> <td> <input name="algaeNumber" class="form-control input-sm" min="0" type="number" ng-model="vm.algaeNumber"> </td> <td> <select name="algaeType" placeholder="Tipo de fauna" class="form-control input-sm" ng-model="vm.algaeType" ng-options="o as \'app.operationalfeature.algaetype.\'+o | translate for o in \'cups;litres;volume\'.split(\';\')"> </select> </td> <td> <div style="padding-left: 20px;"> <label class="checkbox"> <input ng-model="vm.algaeOiled" type="checkbox"><span class="form-control-static" data-translate="app.operationalfeature.algae.oiled"></span> </label> </div> </td> <td> <button ng-click="vm.addAlgae({\'number\':vm.algaeNumber,\'type\':vm.algaeType,\'oiled\':vm.algaeOiled});" type="button" class="btn btn-sm btn-with-icon btn-primary" ng-disabled="vm.algaeForm.$invalid"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </ng-form> </tfoot> </table> <div class="alert alert-info" data-translate="app.operationalfeature.algae.empty" ng-hide="vm.model.operationalFeatures.algae.length || vm.detailForm.$visible"></div> </div> </div> </uib-tab> <uib-tab index="2"> <uib-tab-heading> <span data-translate="app.operationalfeature.oiledfaunas.title"></span> <small class="badge pull-right" ng-show="vm.model.operationalFeatures.oiledFaunas && vm.model.operationalFeatures.oiledFaunas.length"> {{vm.model.operationalFeatures.oiledFaunas.length}} </small> </uib-tab-heading> <table class="table table-condensed table table-condensed table-hover" ng-show="vm.model.operationalFeatures.oiledFaunas.length || vm.detailForm.$visible"> <thead> <tr class="active"> <th style="width:80px;" data-translate="app.operationalfeature.oiledfaunas.number"></th> <th data-translate="app.operationalfeature.oiledfaunas.type"></th> <th style="width:80px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.model.operationalFeatures.oiledFaunas"> <td> {{item.number}} </td> <td>{{item.type}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-hide="vm.detailForm.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"><span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span></a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button"> <li role="menuitem"><a href="" ng-click="vm.removeOiledFauna($index)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.detailForm.$visible"> <ng-form novalidate="novalidate" class="form-inline" name="vm.oiledFaunasForm"> <tr> <td><input name="oiledFaunaNumber" class="form-control input-sm" min="0" type="number" ng-model="vm.faunaNumber"></td> <td><input name="oiledFaunaType" class="form-control input-sm" ng-model="vm.faunaType"></td> <td><button ng-click="vm.addOiledFauna({\'number\':vm.faunaNumber,\'type\':vm.faunaType});" type="button" class="btn btn-primary btn-sm btn-with-icon" ng-disabled="vm.oiledFaunasForm.$invalid"><i class="fa fa-plus"></i> <span data-translate="global.button.add"></span></button> </td> </tr> </ng-form> </tfoot> </table> <div class="alert alert-info" data-translate="app.operationalfeature.oiledfauna.empty" ng-hide="vm.model.operationalFeatures.oiledFaunas.length || vm.detailForm.$visible"></div> </uib-tab> </uib-tabset> </div> </div>'),e.put("app/pages/scatreports/operationalfeatures/detail/operationalfeatures-detail.html",'<form id="fu_eu_arcopol_domain_pollution_ScatReport" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate="novalidate"> <div class="panel-heading clearfix"> <div class="bnt-group pull-right">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting">Aceptar</button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.detailForm.$cancel()" ng-disabled="vm.detailForm.$waiting">Cancelar</button> </span>  <span ng-hide="vm.detailForm.$visible"> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.detailForm.$show()"><i class="fa fa-pencil"></i>Editar</button> </span> </div> </div> <div class="modal-body"> <div class="tab-pane" id="operationalfeatures">  <fielset ng-disabled="vm.detailForm.$visible"> <div class="row"> <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label" data-translate="app.operationalfeature.existdebris"></label> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" ng-model="vm.model.operationalFeatures.existDebris"> <span ng-show="vm.model.operationalFeatures.existDebris" data-translate="global.button.yes"></span> <span ng-hide="vm.model.operationalFeatures.existDebris" data-translate="global.button.no"></span> </label> </div> </div> </div> <div class="col-xs-4 col-sm-2 col-md-2 col-lg-2"> <div class="form-group"> <label class="control-label" data-translate="app.operationalfeature.oileddebris"> </label> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" ng-model="vm.model.operationalFeatures.oiledDebris"> <span ng-show="vm.model.operationalFeatures.oiledDebris" data-translate="global.button.yes"></span> <span ng-hide="vm.model.operationalFeatures.oiledDebris" data-translate="global.button.no"></span> </label> </div> </div> </div> <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputnumberdebris" class="control-label" data-translate="app.operationalfeature.numberdebris">numberdebris</label> <input class="form-control" ng-disabled="!vm.detailForm.$visible" type="number" min="0" step="1" ng-model="vm.model.operationalFeatures.numberDebris"> </div> </div> <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputnumberdebris" class="control-label" data-translate="app.operationalfeature.typedebris.title">typedebris</label> <select name="inputnumberdebris" class="form-control" ng-disabled="!vm.detailForm.$visible" autofocus="autofocus" ng-model="vm.model.operationalFeatures.typeDebris" ng-options="o as \'app.operationalfeature.typedebris.\' +o.toLowerCase() | translate for o in \'Bags;Trucks\'.split(\';\')"> </select> </div> </div> </div> <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="form-group"> <strong data-translate="app.operationalfeature.directbackshoreaccess.title"></strong> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="No" checklist-model="vm.model.operationalFeatures.directBackshoreAccess"> <span data-translate="app.operationalfeature.directbackshoreaccess.no"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Pedestrian" checklist-model="vm.model.operationalFeatures.directBackshoreAccess"> <span data-translate="app.operationalfeature.directbackshoreaccess.pedestrian"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Trucks" checklist-model="vm.model.operationalFeatures.directBackshoreAccess"> <span data-translate="app.operationalfeature.directbackshoreaccess.trucks"></span> </label> </div> </div> </div> </div> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="form-group"> <strong data-translate="app.operationalfeature.neighboursegmentaccess.title"></strong> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="No" checklist-model="vm.model.operationalFeatures.neighbourSegmentAccess"> <span data-translate="app.operationalfeature.neighboursegmentaccess.no"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Pedestrian" checklist-model="vm.model.operationalFeatures.neighbourSegmentAccess"> <span data-translate="app.operationalfeature.neighboursegmentaccess.pedestrian"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Trucks" checklist-model="vm.model.operationalFeatures.neighbourSegmentAccess"> <span data-translate="app.operationalfeature.neighboursegmentaccess.trucks"></span> </label> </div> </div> </div> </div>  <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-12 col-xs-12"> <div class="checkbox"> <div class="form-group"> <label> <input type="checkbox" ng-model="vm.model.operationalFeatures.backShoreCliff" ng-disabled="!vm.detailForm.$visible"> <span data-translate="app.operationalfeature.backshorecliff"></span> </label> </div> <div class="form-group"> <input ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.backShoreCliffHeight" type="text" class="form-control" placeholder="{{\'app.operationalfeature.backshorecliffheight\' | translate}}"> </div> </div> </div> </div>  <div class="row"> <div class="checkbox"> <div class="form-group col-md-4"> <label data-translate="app.operationalfeature.accessrestrictions"></label> </div> <div class="form-group col-md-8"> <input ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.accessRestrictions" type="text" class="form-control"> </div> </div> </div>  <div class="row"> <div class="checkbox"> <div class="form-group col-md-4"> <label> <input type="checkbox" ng-model="vm.model.operationalFeatures.ongoingCleanUpActivity" ng-disabled="!vm.detailForm.$visible"> <span data-translate="app.operationalfeature.ongoingcleanupactivity"></span> </label> </div> <div class="form-group col-md-8"> <input ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.ongoingCleanUpActivityComments" type="text" class="form-control" placeholder="{{\'app.operationalfeature.ongoingcleanupactivitycomments\' | translate}}"> </div> </div> </div>  <div class="row"> <div class="col-xlg-4 col-lg-4 col-md-4 col-sm-6 col-xs-12"> <div class="form-group"> <div class="checkbox"> <label> <input type="checkbox" ng-model="vm.model.operationalFeatures.suitableLaydownArea" ng-disabled="!vm.detailForm.$visible"> <span data-translate="app.operationalfeature.suitablelaydownarea"></span> </label> </div> </div> </div> </div>  <div class="row"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <strong data-translate="app.operationalfeature.uses.title"></strong> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Tourism" checklist-model="vm.model.operationalFeatures.uses"> <span data-translate="app.operationalfeature.uses.tourism"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Fishing" checklist-model="vm.model.operationalFeatures.uses"> <span data-translate="app.operationalfeature.uses.fishing"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Other" checklist-model="vm.model.operationalFeatures.uses"> <span data-translate="app.operationalfeature.uses.other"></span> </label> </div> </div> <div ng-show="vm.model.operationalFeatures.uses==\'Other\'"> <input ng-model="vm.model.operationalFeatures.usesOther" type="text"> </div> </div> </div> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <strong data-translate="app.operationalfeature.conservation.title"></strong> <div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Tourism" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.no"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Historical" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.historical"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Archaelogical" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.archaelogical"></span> </label> </div> <div class="checkbox"> <label> <input ng-disabled="!vm.detailForm.$visible" type="checkbox" value="Nature" checklist-model="vm.model.operationalFeatures.conservation"> <span data-translate="app.operationalfeature.conservation.nature"></span> </label> </div> </div> </div> </div> </div> </fielset> <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class="form-group"> <label class="control-label" data-translate="app.operationalfeature.comments"> </label> <textarea ng-disabled="!vm.detailForm.$visible" ng-model="vm.model.operationalFeatures.comments" rows="3" class="form-control">\r\n                </textarea></div> </div>      </div> </div> </form>'),e.put("app/pages/scatreports/othersubstances/detail/othersubstance-detail.html",'<editable-form class="none-padding" form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="othersubstances"> <div style="padding:15px;"> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.othersubstance.zoneid"></label> <div> <p class="form-control-static" ng-bind="vm.model.zoneId" editable-text="vm.model.zoneId" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"><span data-translate="app.othersubstance.level.title"></span> <a style="padding-left:10px" ng-click="vm.openModal(\'level_tidal.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.level" e-ng-options="o as \'app.othersubstance.level.\' +o.toLowerCase() | translate for o in \'L;M;U;S\'.split(\';\')"> {{ (vm.model.level ? \'app.othersubstance.level.\' + vm.model.level.toLowerCase() : \'\') | translate}} </p>  <script type="text/ng-template" id="level_tidal.html"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/posicion_mareal_help_[locale].html\')"></div> </script> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"><span data-translate="app.othersubstance.character.title"></span> <a style="padding-left:10px" ng-click="vm.openModal(\'oil_cover_character.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.character" e-ng-options="o as \'app.othersubstance.character.\' +o.toLowerCase() | translate for o in \'FR;MS;TB;PT;SR;AP\'.split(\';\')"> {{ vm.model.character ? \'app.othersubstance.character.\' + vm.model.character.toLowerCase() : \'\' | translate}} </p>  <script type="text/ng-template" id="oil_cover_character.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/apariencia_superficial_help_[locale].html\')"></div> </div> </script> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" ng-show="vm.formStatus==\'edit\'"> <div class="form-group"> <label class="control-label" data-translate="app.othersubstance.geometry"></label> <div> <a href="" ng-if="vm.map.action==\'edit\'" class="btn btn-default" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-trash-b"> </i> <span data-translate="app.othersubstance.detail.map.deletepoints"></span> </a> <a href="" ng-if="vm.map.action==\'deletePoints\'" class="btn btn-primary" ng-class="{\'btn-primary\': vm.map.action==\'deletePoints\'}" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-edit"> </i> <span data-translate="app.othersubstance.detail.map.edit"></span> </a> </div> </div> </div> </div> <div class="row"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry" required=""> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.othersubstance.coverlength"></label> <div> <p class="form-control-static" ng-bind="vm.model.coverLength" editable-number="vm.model.coverLength" e-min="0" e-step="0.2" e-required=""> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureOilCoverLength\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthwidth\'"> <i class="icon-globe"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.othersubstance.coverlength"></label> <div> <p class="form-control-static" ng-bind="vm.model.coverWidth" editable-number="vm.model.coverWidth" e-min="0" e-step="0.2" e-required=""> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureOilCoverWidth\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthwidth\'"> <i class="icon-globe"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"> <span data-translate="app.othersubstance.oildistribution.title"> </span><a style="padding-left:10px" ng-click="vm.openModal(\'oil_cover_distribution.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.oilDistribution" e-ng-options="o as o for o in \'10%;20%;30%;40%;50%;60%;70%;80%;90%;\'.split(\';\')"> {{ vm.model.oilDistribution}} </p>  <script type="text/ng-template" id="oil_cover_distribution.html"> <div class="modal-body"> <div class="text-center"> <img src="assets/img/surface_oil_distribution_2.jpg" style="width:60%" /> </div> </div> </script> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"> <span data-translate="app.othersubstance.thickness.title"></span> <a style="padding-left:10px" ng-click="vm.openModal(\'oil_cover_thickness.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.thickness" e-ng-options="o as \'app.othersubstance.thickness.\' +o.toLowerCase() | translate for o in \'TO;CV;CT;ST;FL\'.split(\';\')"> {{ vm.model.thickness ? \'app.othersubstance.thickness.\' + vm.model.thickness.toLowerCase() : \'\' | translate}} </p>  <script type="text/ng-template" id="oil_cover_thickness.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/espesor_superficial_help_[locale].html\')"></div> </div> </script> </div> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" ng-show="vm.formStatus==\'edit\'"> <div class="form-group"> <label class="control-label" data-translate="app.othersubstance.geometry"></label> <div> <a href="" ng-if="vm.map.action==\'edit\'" class="btn btn-default" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-trash-b"> </i> <span data-translate="app.othersubstance.detail.map.deletepoints"></span> </a> <a href="" ng-if="vm.map.action==\'deletePoints\'" class="btn btn-primary" ng-class="{\'btn-primary\': vm.map.action==\'deletePoints\'}" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-edit"> </i> <span data-translate="app.othersubstance.detail.map.edit"></span> </a> </div> </div> </div> </div> <div class="row"> <div class="alert alert-danger" ng-hide="vm.model.geometry"><i class="ion-alert-circled"></i> <span data-translate="app.othersubstance.messages.geometry"></span> </div> </div> </div> </editable-form>'),e.put("app/pages/scatreports/othersubstances/create-wizard/othersubstance-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.othersubstance.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputZoneId.$invalid && (vm.form1.inputZoneId.$dirty || vm.form1.$submitted)}"> <label for="inputZoneId" data-translate="app.othersubstance.zoneid">zoneid</label> <input id="inputZoneId" class="form-control" type="text" ng-model="vm.model.zoneId"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputLevel" class="control-label" data-translate="app.othersubstance.level.title">level</label> <div class="input-group"> <select name="inputLevel" class="form-control" autofocus="autofocus" ng-model="vm.model.level" ng-options="o as \'app.othersubstance.level.\' +o.toLowerCase() | translate for o in \'L;M;U;S\'.split(\';\')"> </select> <a class="input-group-addon input-sm" ng-click="vm.openModal(\'level_tidal.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a> <script type="text/ng-template" id="level_tidal.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/posicion_mareal_help_[locale].html\')"></div> </div> </script> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label"></label> <label for="inputSubSurface" data-translate="app.othersubstance.subsurface">subSurface</label> <input id="inputSubSurface" type="checkbox" step="0.2" min="0" ng-model="vm.model.subSurface"> </div> </div> </div> <div class="row"> <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputDescription.$invalid && (vm.form1.inputDescription.$dirty || vm.form1.$submitted)}"> <label for="inputOilCoverLength" data-translate="app.othersubstance.description">description</label> <div class="form-group"> <input id="inputDescription" class="form-control" type="text" ng-model="vm.model.description"> </div> </div> </div> </div> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group"> <strong data-translate="app.othersubstance.cover" class="with-border"></strong> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputOilCoverLength.$invalid && (vm.form1.inputOilCoverLength.$dirty || vm.form1.$submitted)}"> <label for="inputOilCoverLength" data-translate="app.othersubstance.coverlength">coverlength</label> <div class="form-group"> <input id="inputOilCoverLength" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.coverLength"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputOilCoverWidth.$invalid && (vm.form1.inputOilCoverWidth.$dirty || vm.form1.$submitted)}"> <label for="inputOilCoverWidth" data-translate="app.othersubstance.coverwidth">coverwidth</label> <div class="form-group"> <input id="inputOilCoverWidth" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.coverWidth"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="inputOilDistribution" class="control-label" data-translate="app.othersubstance.distribution.title">distribution</label> <div class="input-group"> <select name="inputOilDistribution" class="form-control" autofocus="autofocus" ng-model="vm.model.distribution" ng-options="o as o for o in \'10%;20%;30%;40%;50%;60%;70%;80%;90%;\'.split(\';\')"> </select> <a class="input-group-addon input-sm" ng-click="vm.openModal(\'oil_cover_distribution.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a>  <script type="text/ng-template" id="oil_cover_distribution.html"> <div class="modal-body"> <img src="assets/img/surface_oil_distribution_2.jpg" style="width:100%" /> </div> </script> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="inputOilThickness" class="control-label" data-translate="app.othersubstance.thickness.title">thickness</label> <select name="inputOilThickness" class="form-control" autofocus="autofocus" ng-model="vm.model.thickness" ng-options="o as \'app.othersubstance.thickness.\' +o.toLowerCase() | translate for o in \'TO;CV;CT;ST;FL\'.split(\';\')"> </select> <a data-target="#oil_cover_distribution" data-toggle="modal" class="btn add-on"><i class="icon-info"></i></a> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div>  </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.othersubstance.createform.step2\' | translate}}" form="vm.form2" on-activate="vm.drawOtherSubstance()" on-exit="vm.disableDrawOtherSubstance()"> <form name="vm.form2" novalidate=""> <div class="alert alert-info"> <p data-translate="app.othersubstance.messages.geometry"></p> </div>  <div ng-show="vm.mapAction!=\'none\'"> <scatreport-map scatreport="vm.scatreport" hide-layers-panel="true"></scatreport-map> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),
e.put("app/pages/scatreports/othersubstances/table/scatreport-othersubstances-table.html",'<div class="none-padding"> <div ng-hide="vm.othersubstances.length" class="alert alert-info" data-translate="app.othersubstance.help.noresults"> </div> <table ng-show="vm.othersubstances.length" class="table table-condensed table-hover" st-table="vm.othersubstances"> <thead> <tr class="active"> <th style="width:10px; text-align:center;"><i class="ion-ios-location"></i></th> <th style="width:80px;" st-sort="code" data-translate="app.othersubstance.code">code</th> <th st-sort="zoneId" data-translate="app.othersubstance.zoneid"></th> <th st-sort="level" data-translate="app.othersubstance.level.title"></th> <th st-sort="Distribution" data-translate="app.othersubstance.distribution.title"></th> <th st-sort="Thickness" data-translate="app.othersubstance.thickness.title"></th> <th st-sort="Character" data-translate="app.othersubstance.description"></th> <th style="width:40px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.othersubstances | limitTo:vm.size" title="{{global.messages.info.opennewtab | translate}}" ng-click="vm.navigate($event,\'scatreports.detail.othersubstances.detail\',{\'subid\':item.id})" ng-class="{\'alert-success\':item.selected}"> <td style="width:10px; text-align:center;"><i style="width:10px; text-align:center;" class="ion-ios-location" ng-if="item.geometry"></i></td> <td>{{item.code}}</td> <td>{{item.zoneId}}</td> <td>{{ (item.level ? \'app.othersubstance.level.\' + item.level.toLowerCase() : \'\') | translate}}</td> <td>{{ item.Distribution }}</td> <td>{{ (item.Thickness ? \'app.othersubstance.thickness.\' + item.thickness.toLowerCase() : \'\') | translate}}</td> <td>{{ item.description }}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.remove(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.page.totalPages > 1"> <tr> <td colspan="7" class="text-center"> <p> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.refresh()"></uib-pagination>  </p> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/scatreports/scatreportusers/table/scatreport-users-table.html",'<table class="table table-condensed table-responsive table-hover" st-safe-src="vm.reportusers" st-table="pagedItems"> <thead> <tr class="active"> <th st-sort="userLogin.username" data-translate="app.userlogin.fullName"></th> <th st-sort="userLogin.organization" data-translate="app.userlogin.organization"></th> <th st-sort="userLogin.phone" data-translate="app.userlogin.phone"></th> <th style="width: 20px" class="text-right button-column" ng-if="!vm.disabled" ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in pagedItems track by $index"> <td class="text-left"> <p editable-text="item.userLogin" e-autocomplete="off" e-name="userLogin" e-form="rowform" e-required="" e-typeahead-wait-ms="300" e-typeahead-editable="false" e-uib-typeahead="b as b.fullName + \', \' +b.organization for b in vm.searchUserLogins({\'usernameorfullname\':$viewValue})" e-typeahead-append-to-body="true"> {{item.userLogin.fullName}} <div class="pull-right"><small class="text-muted">{{item.userLogin.username}}</small></div> </p> </td> <td class="text-center"> <strong>{{item.userLogin.organization}}</strong> </td> <td class="text-center"> <strong>{{item.userLogin.phone}}</strong> </td> <td class="text-right none-padding nowrap" ng-hide="vm.disabled" ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="javascript:void(0)" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block; margin-left:10px" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.deleteRow(item)" data-translate="global.button.remove">Eliminar</a></li> </ul> </div>  <form editable-form="" name="rowform" onaftersave="vm.saveRow(rowform,item)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="vm.insertedRow == item"> <div class="btn-group"> <button type="submit" ng-disabled="rowform.$waiting" class="btn editable-table-button btn-xs btn-primary" data-translate="global.button.save"> Gardar </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="vm.cancelEdit(rowform,item)" class="btn editable-table-button btn-xs btn-default" data-translate="global.button.cancel"> Cancelar </button> </div> </form> </td> </tr> </tbody> <tfoot> <tr class="active" ng-if-role="ROLE_ADMIN,ROLE_SCAT_MANAGER"> <td colspan="10" class="text-right"> <a ng-click="vm.insertRow()" class="btn btn-sm btn-primary btn-with-icon"><span data-translate="app.userlogin.cmd.link"></span></a> </td> </tr> <tr> <td colspan="10" class="text-center"> <p> <small st-pagination="" st-items-by-page="10" st-displayed-pages="5"></small> </p> </td> </tr> </tfoot> </table>'),e.put("app/pages/scatreports/shorelinetypes/detail/scatreport-shorelinetypes-detail.html",'<form id="fu_eu_arcopol_domain_pollution_ScatReport" editable-form="" name="vm.detailForm" onaftersave="vm.save()" novalidate="novalidate"> <div class="panel-heading clearfix"> <div class="bnt-group pull-right">  <span ng-show="vm.detailForm.$visible"> <button class="btn btn-primary btn-xs" type="submit" ng-disabled="vm.detailForm.$waiting">Aceptar</button> <button type="button" class="btn btn-default btn-xs" ng-click="vm.detailForm.$cancel()" ng-disabled="vm.detailForm.$waiting">Cancelar</button> </span>  <span ng-hide="vm.detailForm.$visible"> <button type="button" class="btn btn-primary btn-xs btn-with-icon" ng-click="vm.detailForm.$show()"><i class="fa fa-pencil"></i>Editar</button> </span> </div> </div> <div class="modal-body"> <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-12"> <div class="form-group"> <label class="control-label"><span data-translate="app.segment.waveexposure"></span> <a class="btn pull-right" ng-click="vm.openModal(\'exposicion_oleaje.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a></label> <div> <p editable-select="vm.model.waveExposure" e-ng-options="o as \'app.waveexposure.\'+o.toLowerCase() | translate for o in \'VeryExposed;Exposed;PartiallySheltered;VerySheltered;ExtremelySheltered\'.split(\';\')" class="form-control-static"> {{ (vm.model.waveExposure ? \'app.waveexposure.\'+vm.model.waveExposure.toLowerCase() : \'\') | translate }} </p>  <script type="text/ng-template" id="exposicion_oleaje.html"> <div class="modal-body"> <ng-include src="currentLocaleTemplate(\'app/dialogs/help/exposicion_oleaje_help_[locale].html\')" /> </div> </script> </div> </div> </div> <div class="text-right offset5 span3"> <div class="text-left"> <a class="btn pull-right" ng-click="vm.openModal(\'shorelinetype_modal.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a> <script type="text/ng-template" id="shorelinetype_modal.html"> <div class="modal-body"> <ng-include src="currentLocaleTemplate(\'app/dialogs/help/shorelinetype_help_[locale].html\')" /> </div> </script> <table> <tr> <td style="width:40px"><i class="ion-checkmark"></i><i class="ion-checkmark"></i></td> <td> <span data-translate="app.localfeature.primary_info"> </span></td> </tr> <tr> <td><i class="ion-checkmark"></i></td> <td> <span data-translate="app.localfeature.secondary_info"> </span></td> </tr> <tr> <td><i class="ion-waterdrop"></i></td> <td data-translate="app.operationalfeature.oiled"></td> </tr> </table> </div> </div> </div>  <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-show="vm.detailForm.$visible"> <table class="table table-bordered table-condensed"> <thead> <tr> <th width="40px" class="text-center"><span class="ion-checkmark"> </span></th> <th width="40px" class="text-center"><span class="ion-waterdrop"> </span> </th> <th> </th> <th width="40px" class="text-center"><span class="ion-checkmark"> </span></th> <th width="40px" class="text-center"><span class="ion-waterdrop"> </span></th> <th> </th> </tr> </thead> <tbody> <tr> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockCliff" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.BedrockCliff)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockCliff.primary"> </i> </span> </a> </td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockCliff" ng-click="vm.toggleOiled(vm.shorelineTypes.BedrockCliff)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.BedrockCliff.oiled}"></i> </span> </a> </td> <td> <label> <input type="checkbox" ng-model="BedrockCliff" ng-change="vm.toggleSelect(\'BedrockCliff\')">&#160; <span data-translate="app.shorelinetype.bedrockcliff"></span> </label> </td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.MudSediments" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.MudSediments)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MudSediments.primary"> </i> </span> </a> </td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.MudSediments" ng-click="vm.toggleOiled(vm.shorelineTypes.MudSediments)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.MudSediments.oiled}"></i> </span> </a> </td> <td>  <label> <input type="checkbox" ng-model="MudSediments" ng-change="vm.toggleSelect(\'MudSediments\')">&#160; <span data-translate="app.shorelinetype.mudsediments"></span> </label> </td> </tr> <tr> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockPlatform" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.BedrockPlatform)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockPlatform.primary"> </i> </span></a></td> <td class="text-center"> <a href="javascript:void(0)" ng-if="vm.shorelineTypes.BedrockPlatform" ng-click="vm.toggleOiled(vm.shorelineTypes.BedrockPlatform)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.BedrockPlatform.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="BedrockPlatform" ng-change="vm.toggleSelect(\'BedrockPlatform\')">&#160; <span data-translate="app.shorelinetype.bedrockplatform"></span> </label>  </td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SandSediments" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.SandSediments)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SandSediments.primary"> </i></span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SandSediments" ng-click="vm.toggleOiled(vm.shorelineTypes.SandSediments)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.SandSediments.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="SandSediments" ng-change="vm.toggleSelect(\'SandSediments\')">&#160; <span data-translate="app.shorelinetype.sandsediments"></span> </label>  </td> </tr> <tr> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.ManmadeSolid" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.ManmadeSolid)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadeSolid.primary"> </i></span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.ManmadeSolid" ng-click="vm.toggleOiled(vm.shorelineTypes.ManmadeSolid)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.ManmadeSolid.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="ManmadeSolid" ng-change="vm.toggleSelect(\'ManmadeSolid\')">&#160; <span data-translate="app.shorelinetype.manmadesolid"></span> </label>  </td> <td class="text-center"><a ng-if="vm.shorelineTypes.MixedSediments" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.MixedSediments)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MixedSediments.primary"> </i></span></a></td> <td class="text-center"><a ng-if="vm.shorelineTypes.MixedSediments" ng-click="vm.toggleOiled(vm.shorelineTypes.MixedSediments)"><span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.MixedSediments.oiled}"></i></span></a></td> <td>  <label> <input type="checkbox" ng-model="MixedSediments" ng-change="vm.toggleSelect(\'MixedSediments\')">&#160; <span data-translate="app.shorelinetype.mixedsediments"></span> </label> </td> </tr> <tr> <td class="text-center"><a ng-if="vm.shorelineTypes.ManmadePermeable" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.ManmadePermeable)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadePermeable.primary"> </i></span></a></td> <td class="text-center"><a ng-if="vm.shorelineTypes.ManmadePermeable" ng-click="vm.toggleOiled(vm.shorelineTypes.ManmadePermeable)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.ManmadePermeable.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="ManmadePermeable" ng-change="vm.toggleSelect(\'ManmadePermeable\')">&#160; <span data-translate="app.shorelinetype.manmadepermeable"></span> </label>  </td> <td class="text-center"><a ng-if="vm.shorelineTypes.PebbleCobbleShingle" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.PebbleCobbleShingle)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> </i></span></a></td> <td class="text-center"><a ng-if="vm.shorelineTypes.PebbleCobbleShingle" ng-click="vm.toggleOiled(vm.shorelineTypes.PebbleCobbleShingle)"><span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.PebbleCobbleShingle.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="PebbleCobbleShingle" ng-change="vm.toggleSelect(\'PebbleCobbleShingle\')">&#160; <span data-translate="app.shorelinetype.pebblecobbleshingle"></span> </label>  </td> </tr> <tr> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SaltMarsh" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.SaltMarsh)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SaltMarsh.primary"> </i></span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.SaltMarsh" ng-click="vm.toggleOiled(vm.shorelineTypes.SaltMarsh)"> <span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.SaltMarsh.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="SaltMarsh" ng-change="vm.toggleSelect(\'SaltMarsh\')">&#160; <span data-translate="app.shorelinetype.saltmarsh"></span> </label>  </td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.Boulder" ng-click="vm.toggleAsPrimary(vm.shorelineTypes.Boulder)"> <span class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.Boulder.primary"> </i> </span></a></td> <td class="text-center"><a href="javascript:void(0)" ng-if="vm.shorelineTypes.Boulder" ng-click="vm.toggleOiled(vm.shorelineTypes.Boulder)"><span class="icon-stack ion-waterdrop"> <i ng-class="{\'ion-close red\':!vm.shorelineTypes.Boulder.oiled}"></i></span></a></td> <td> <label> <input type="checkbox" ng-model="Boulder" ng-change="vm.toggleSelect(\'Boulder\')">&#160; <span data-translate="app.shorelinetype.boulder"></span> </label>  </td> </tr> </tbody> </table> </div>  <div class="col-xlg-12 col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-show="!vm.detailForm.$visible"> <table class="table table-bordered"> <thead> <tr> <th width="40px" class="text-center"> <span class="icon-inline ion-checkmark"> </span></th> <th width="20px" class="text-center"><i class="ion-waterdrop"> </i> </th> <th> </th> <th width="40px" class="text-center"> <span class="icon-inline ion-checkmark"> </span></th> <th width="20px" class="text-center"><i class="ion-waterdrop"> </i> </th> <th> </th> </tr> </thead> <tbody> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockCliff" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockCliff.primary"> </i></span> </td> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockCliff"> <i ng-if="vm.shorelineTypes.BedrockCliff.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.bedrockcliff"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.MudSediments" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MudSediments.primary"> </i></span> </td> <td class="text-center"><span ng-if="vm.shorelineTypes.MudSediments"> <i ng-if="vm.shorelineTypes.MudSediments.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.mudsediments"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockPlatform" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.BedrockPlatform.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.BedrockPlatform"> <i ng-if="vm.shorelineTypes.BedrockPlatform.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.bedrockplatform"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.SandSediments" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SandSediments.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.SandSediments"> <i ng-if="vm.shorelineTypes.SandSediments.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.sandsediments"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadeSolid" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadeSolid.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadeSolid"> <i ng-if="vm.shorelineTypes.ManmadeSolid.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.manmadesolid"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.MixedSediments" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.MixedSediments.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.MixedSediments"> <i ng-if="vm.shorelineTypes.MixedSediments.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.mixedsediments"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadePermeable" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.ManmadePermeable.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.ManmadePermeable"> <i ng-if="vm.shorelineTypes.ManmadePermeable.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.manmadepermeable"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.PebbleCobbleShingle" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.PebbleCobbleShingle.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.PebbleCobbleShingle"> <i ng-if="vm.shorelineTypes.PebbleCobbleShingle.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.pebblecobbleshingle"></span></td> </tr> <tr> <td class="text-center"><span ng-if="vm.shorelineTypes.SaltMarsh" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.SaltMarsh.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.SaltMarsh"> <i ng-if="vm.shorelineTypes.SaltMarsh.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.saltmarsh"></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.Boulder" class="icon-inline ion-checkmark"> <i class="ion-checkmark" ng-if="vm.shorelineTypes.Boulder.primary"> </i></span></td> <td class="text-center"><span ng-if="vm.shorelineTypes.Boulder"> <i ng-if="vm.shorelineTypes.Boulder.oiled" class="ion-waterdrop"> </i></span></td> <td> <span data-translate="app.shorelinetype.boulder"></span></td> </tr> </tbody> </table> </div>  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xlg-12"> <div class="form-group"> <scatreport-localfeatures scatreport="vm.scatreport" detail-form="vm.detailForm"></scatreport-localfeatures> </div> </div> </form>'),e.put("app/pages/scatreports/subsurfaceoilconditions/create-wizard/subsurfaceoilcondition-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.subsurfaceoilcondition.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputPitId.$invalid && (vm.form1.inputPitId.$dirty || vm.form1.$submitted)}"> <label for="inputPitId" data-translate="app.subsurfaceoilcondition.pitid">pitid</label> <input id="inputPitId" class="form-control" type="text" ng-model="vm.model.pitId"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputLevel" class="control-label" data-translate="app.subsurfaceoilcondition.level.title">level</label> <div class="input-group"> <select name="inputLevel" class="form-control" autofocus="autofocus" ng-model="vm.model.level" ng-options="o as \'app.subsurfaceoilcondition.level.\' +o.toLowerCase() | translate for o in \'L;M;U;S\'.split(\';\')"> </select> <a class="input-group-addon input-sm" ng-click="vm.openModal(\'level_tidal.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a> <script type="text/ng-template" id="level_tidal.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/posicion_mareal_help_[locale].html\')"></div> </div> </script> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputOilDistribution" class="control-label" data-translate="app.subsurfaceoilcondition.oildistribution.title">oildistribution</label> <div class="input-group"> <select name="inputOilDistribution" class="form-control" autofocus="autofocus" ng-model="vm.model.oildistribution" ng-options="o as \'app.subsurfaceoilcondition.oildistribution.\' +o.toLowerCase() | translate for o in \'Extensive;Frequent;Uncommon\'.split(\';\')"> </select> <div class="input-group-btn"> <button class="btn btn-default" ng-click="vm.openModal(\'oil_cover_character.html\')" data-toggle="modal"><i class="fa fa-info"></i></button> <script type="text/ng-template" id="oil_cover_character.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/apariencia_superficial_help_[locale].html\')"></div> </div> </script> </div> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputOilCharacter" class="control-label" data-translate="app.subsurfaceoilcondition.oilcharacter.title">oilcharacter</label> <div class="input-group"> <select name="inputOilCharacter" class="form-control" autofocus="autofocus" ng-model="vm.model.oilcharacter" ng-options="o as \'app.subsurfaceoilcondition.oilcharacter.\' +o.toLowerCase() | translate for o in \'OilFilledPores;PartialFilledPores;OilResidue;OilFilm;Trace\'.split(\';\')"> </select> <div class="input-group-btn"> <button class="btn btn-default" ng-click="vm.openModal(\'oil_character.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></button> <script type="text/ng-template" id="oil_character.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/apariencia_subsuperficial_help_[locale].html\')"></div> </div> </script> </div> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> </div> <div class="row"> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputPitDepth.$invalid && (vm.form1.inputPitDepth.$dirty || vm.form1.$submitted)}"> <label for="inputPitDepth" data-translate="app.subsurfaceoilcondition.pitdepth">pitdepth</label> <div class="form-group"> <input id="inputPitDepth" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.pitDepth"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputOiledZoneStart.$invalid && (vm.form1.inputOiledZoneStart.$dirty || vm.form1.$submitted)}"> <label for="inputOiledZoneStart" data-translate="app.subsurfaceoilcondition.oiledzonestart">oiledzonestart</label> <div class="form-group"> <input id="inputOiledZoneStart" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.oiledZoneStart"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputOiledZoneEnd.$invalid && (vm.form1.inputOiledZoneEnd.$dirty || vm.form1.$submitted)}"> <label for="inputOiledZoneEnd" data-translate="app.subsurfaceoilcondition.oiledzoneend">oiledzoneend</label> <div class="form-group"> <input id="inputOiledZoneEnd" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.oiledZoneEnd"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group" ng-class="{\'has-error\': vm.form1.inputBuriedWater.$invalid && (vm.form1.inputBuriedWater.$dirty || vm.form1.$submitted)}"> <label for="inputBuriedWater" data-translate="app.subsurfaceoilcondition.buriedwater">buriedwater</label> <div class="input-group"> <input id="inputBuriedWater" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.buriedWater"> <div class="input-group-addon input-sm">cm</div> <div class="input-group-btn"> <button class="btn btn-default" ng-click="vm.openModal(\'buried_help.html\')" data-toggle="modal"><i class="fa fa-info"></i></button> <script type="text/ng-template" id="buried_help.html"> <div class="modal-body"> <img src="assets/img/subsurface_buried.jpg" style="width:100%" /> </div> </script> </div> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.subsurfaceoilcondition.createform.step2\' | translate}}" form="vm.form2" on-activate="vm.drawSubsurfaceOilCondition()" on-exit="vm.disableDrawSubsurfaceOilCondition()"> <form name="vm.form2" novalidate=""> <div class="alert alert-info"> <p data-translate="app.subsurfaceoilcondition.messages.geometry"></p> </div> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry"> <div id="geometry-manual" aria-hidden="true"> <div manual-position-panel="vm.model.geometry" geometry-type="OpenLayers.Handler.Point"> </div> </div> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <div class="modal-body text-center"> <div class="btn-group" style="padding-right:10px;">  <button class="btn btn-default btn-sm" ng-class="{\'draw\':\' btn-primary\'}[vm.mapAction]" data-translate="app.scatreport.map.draw" ng-click="vm.toggleMapAction(\'draw\')"><i class="ion-edit"> </i>&#160;</button> <button class="btn btn-default btn-sm" ng-click="vm.currentPosition()" data-translate="app.scatreport.map.currentPoint"></button> <button class="btn btn-default btn-sm" ng-click="vm.model.geometry=null"><i class="text-danger ion-trash-b"> </i></button> </div> </div> </div> </div> <div ng-show="vm.mapAction!=\'none\'"> <scatreport-map scatreport="vm.scatreport" hide-layers-panel="true"></scatreport-map> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/scatreports/subsurfaceoilconditions/detail/subsurfaceoilcondition-detail.html",'<editable-form class="none-padding" form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="subsurfaceoilconditions"> <div style="padding:15px;"> <div class="row"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.pitid"></label> <div> <p class="form-control-static" ng-bind="vm.model.pitId" editable-text="vm.model.pitId" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.oildistribution.title"></label> <div> <p class="form-control-static" editable-select="vm.model.oilDistribution" e-ng-options="o as \'app.subsurfaceoilcondition.oildistribution.\' +o.toLowerCase() | translate for o in \'Extensive;Frequent;Uncommon\'.split(\';\')"> {{ (vm.model.oilDistribution ? \'app.subsurfaceoilcondition.oildistribution.\' + vm.model.oilDistribution.toLowerCase() : \'\') | translate}} </p> </div> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.oilcharacter.title"></label> <div> <p class="form-control-static" editable-select="vm.model.oilCharacter" e-ng-options="o as \'app.subsurfaceoilcondition.oilcharacter.\' +o.toLowerCase() | translate for o in \'OilFilledPores;PartialFilledPores;OilResidue;OilFilm;Trace\'.split(\';\')"> {{ (vm.model.oilCharacter ? \'app.subsurfaceoilcondition.oilcharacter.\' + vm.model.oilCharacter.toLowerCase() : \'\') | translate}} </p> <a data-target="#oil_character" data-toggle="modal" class="btn add-on"><i class="icon-info"></i></a> </div> </div> </div> </div> <div class="row"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry" required=""> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.pitdepth"></label> <div> <p class="form-control-static" ng-bind="vm.model.pitDepth" editable-number="vm.model.pitDepth" e-min="0" e-step="0.2" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.oiledzonestart"></label> <div> <p class="form-control-static" ng-bind="vm.model.oiledZoneStart" editable-number="vm.model.oiledZoneStart" e-min="0" e-step="0.2" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.oiledzoneend"></label> <div> <p class="form-control-static" ng-bind="vm.model.oiledZoneEnd" editable-number="vm.model.oiledZoneEnd" e-min="0" e-step="0.2" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.subsurfaceoilcondition.buriedwater"></label> <div> <p class="form-control-static" ng-bind="vm.model.buiredWater" editable-number="vm.model.buriedWater" e-min="0" e-step="0.2" e-required=""> </p> </div> </div> </div> </div> <div class="row"> <div class="alert alert-info" ng-hide="vm.model.oiledZoneEnd || vm.model.oiledZoneStart"> <i class="icon-warning-sign"> <span data-translate="app.subsurfaceoilcondition.messages.oiledzone_empty"></span> </i></div> <div class="alert alert-info" ng-hide="vm.model.geometry"><i class="icon-warning-sign pull-left"></i> <span data-translate="app.subsurfaceoilcondition.messages.geometry"></span> </div> </div> </div> </editable-form>'),
e.put("app/pages/scatreports/subsurfaceoilconditions/table/scatreport-subsurfaceoilconditions-table.html",'<div class="none-padding"> <div ng-hide="vm.subsurfaceoilconditions.length" class="alert alert-info" data-translate="app.subsurfaceoilcondition.help.noresults"> </div>  <table ng-show="vm.subsurfaceoilconditions.length" class="table table-condensed table-hover" st-table="vm.subsurfaceoilconditions"> <thead> <tr class="active"> <th style="width:10px; text-align:center;"><i class="ion-ios-location"></i></th> <th style="width:80px;" st-sort="code" data-translate="app.subsurfaceoilcondition.code">code</th> <th st-sort="pitId" data-translate="app.subsurfaceoilcondition.pitid"></th> <th st-sort="oilDistribution" data-translate="app.subsurfaceoilcondition.oildistribution.title"></th> <th st-sort="pitDepth" data-translate="app.subsurfaceoilcondition.pitdepth"></th> <th st-sort="oiledZoneStart" data-translate="app.subsurfaceoilcondition.oiledzonestart"></th> <th st-sort="oiledZoneEnd" data-translate="app.subsurfaceoilcondition.oiledzoneend"></th> <th st-sort="oilCharacter" data-translate="app.subsurfaceoilcondition.oilcharacter.title"></th> <th style="width:40px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.subsurfaceoilconditions | limitTo:vm.size" title="{{global.messages.info.opennewtab | translate}}" ng-class="{\'alert-success\':item.selected}"> <td style="width:10px; text-align:center;"><i style="width:10px; text-align:center;" class="ion-ios-location" ng-if="item.geometry"></i></td> <td><a href="" ng-click="vm.navigate($event,\'scatreports.detail.subsurfaceoilconditions.detail\',{\'subid\':item.id})">{{item.code}}</a></td> <td>{{item.pitId}}</td> <td>{{ (item.oilDistribution ? \'app.subsurfaceoilcondition.oildistribution.\' + item.oilDistribution.toLowerCase() : \'\') | translate}}</td> <td>{{ item.pitDepth }}</td> <td>{{ item.oiledZoneStart }}</td> <td>{{ item.oiledZoneEnd }}</td> <td>{{ (item.oilCharacter ? \'app.subsurfaceoilcondition.oilcharacter.\' + item.oilCharacter.toLowerCase() : \'\') | translate}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.remove(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.page.totalPages > 1"> <tr> <td colspan="10" class="text-center"> <p> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.refresh()"></uib-pagination>  </p> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/scatreports/surfaceoilconditions/table/scatreport-surfaceoilconditions-table.html",'<div class="none-padding"> <div ng-hide="vm.surfaceoilconditions.length" class="alert alert-info" data-translate="app.surfaceoilcondition.help.noresults"> </div> <table ng-show="vm.surfaceoilconditions.length" class="table table-condensed table-hover" st-table="vm.surfaceoilconditions"> <thead> <tr class="active"> <th style="width:10px; text-align:center;"><i class="ion-ios-location"></i></th> <th style="width:80px;" st-sort="code" data-translate="app.surfaceoilcondition.code">code</th> <th st-sort="zoneId" data-translate="app.surfaceoilcondition.zoneid"></th> <th st-sort="level" data-translate="app.surfaceoilcondition.level.title"></th> <th st-sort="oilDistribution" data-translate="app.surfaceoilcondition.oildistribution.title"></th> <th st-sort="oilThickness" data-translate="app.surfaceoilcondition.oilthickness.title"></th> <th st-sort="oilCharacter" data-translate="app.surfaceoilcondition.oilcharacter.title"></th> <th style="width:40px;" class="text-right"><span class="ion-android-more-vertical"></span></th> </tr> </thead> <tbody> <tr ng-repeat="item in vm.surfaceoilconditions | limitTo:vm.size" title="{{global.messages.info.opennewtab | translate}}" ng-click="vm.navigate($event,\'scatreports.detail.surfaceoilconditions.detail\',{\'subid\':item.id})" ng-class="{\'alert-success\':item.selected}"> <td style="width:10px; text-align:center;"><i style="width:10px; text-align:center;" class="ion-ios-location" ng-if="item.geometry"></i></td> <td>{{item.code}}</td> <td>{{item.zoneId}}</td> <td>{{ (item.level ? \'app.surfaceoilcondition.level.\' + item.level.toLowerCase() : \'\') | translate}}</td> <td>{{ item.oilDistribution }}</td> <td>{{ (item.oilThickness ? \'app.surfaceoilcondition.oilthickness.\' + item.oilThickness.toLowerCase() : \'\') | translate}}</td> <td>{{ (item.oilCharacter ? \'app.surfaceoilcondition.oilcharacter.\' + item.oilCharacter.toLowerCase() : \'\') | translate}}</td> <td class="text-right none-padding nowrap"> <div uib-dropdown="" dropdown-append-to-body="true" ng-if="!rowform.$visible"> <a href="" uib-dropdown-toggle="" style="width:80px"> <span style="width:20px; display: inline-block;" class="ion-android-more-vertical"></span> </a> <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="" role="menu" aria-labelledby="btn-append-to-single-button">  <li role="menuitem"><a href="" ng-click="vm.remove(item)" class="text-danger" data-translate="global.button.remove"></a></li> </ul> </div> </td> </tr> </tbody> <tfoot ng-show="vm.page.totalPages > 1"> <tr> <td colspan="7" class="text-center"> <p> <uib-pagination class="pagination-sm" items-per-page="vm.page.size" total-items="vm.page.totalElements" max-size="5" ng-model="vm.page.number" ng-change="vm.refresh()"></uib-pagination>  </p> </td> </tr> </tfoot> </table> </div>'),e.put("app/pages/scatreports/surfaceoilconditions/create-wizard/surfaceoilcondition-create-wizard.html",'<div class="modal-body">  <button type="button" title="{{\'global.button.cancel\' | translate}}" class="close" ng-click="vm.onClose()">&times;</button>   <ba-wizard on-finish="vm.ok()"> <ba-wizard-step step-title="{{\'app.surfaceoilcondition.createform.step1\' | translate}}" form="vm.form1"> <form name="vm.form1" novalidate=""> <div class="row"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputZoneId.$invalid && (vm.form1.inputZoneId.$dirty || vm.form1.$submitted)}"> <label for="inputZoneId" data-translate="app.surfaceoilcondition.zoneid">zoneid</label> <input id="inputZoneId" class="form-control" type="text" ng-model="vm.model.zoneId"> <span class="help-block error-block basic-block" data-translate="global.messages.validate.text.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputLevel" class="control-label" data-translate="app.surfaceoilcondition.level.title">level</label> <div class="input-group"> <select name="inputLevel" class="form-control" autofocus="autofocus" ng-model="vm.model.level" ng-options="o as \'app.surfaceoilcondition.level.\' +o.toLowerCase() | translate for o in \'L;M;U;S\'.split(\';\')"> </select> <a class="input-group-addon input-sm" ng-click="vm.openModal(\'level_tidal.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a> <script type="text/ng-template" id="level_tidal.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/posicion_mareal_help_[locale].html\')"></div> </div> </script> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4"> <div class="form-group"> <label for="inputOilCharacter" class="control-label" data-translate="app.surfaceoilcondition.oilcharacter.title">oilcharacter</label> <div class="input-group"> <select name="inputOilCharacter" class="form-control" autofocus="autofocus" ng-model="vm.model.oilcharacter" ng-options="o as \'app.surfaceoilcondition.oilcharacter.\' +o.toLowerCase() | translate for o in \'FR;MS;TB;PT;SR;AP\'.split(\';\')"> </select> <a class="input-group-addon input-sm" ng-click="vm.openModal(\'oil_cover_character.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a> <script type="text/ng-template" id="oil_cover_character.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/apariencia_superficial_help_[locale].html\')"></div> </div> </script> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> </div> <div class="row">  <div class="col-xlg-12 col-lg-12 col-md-12 col-xs-12"> <div class="form-group"> <strong data-translate="app.surfaceoilcondition.oilcover" class="with-border"></strong> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputOilCoverLength.$invalid && (vm.form1.inputOilCoverLength.$dirty || vm.form1.$submitted)}"> <label for="inputOilCoverLength" data-translate="app.surfaceoilcondition.oilcoverlength">oilcoverlength</label> <div class="form-group"> <input id="inputOilCoverLength" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.oilCoverLength"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xlg-3 col-lg-3 col-md-3 col-xs-3"> <div class="form-group has-feedback" ng-class="{\'has-error\': vm.form1.inputOilCoverWidth.$invalid && (vm.form1.inputOilCoverWidth.$dirty || vm.form1.$submitted)}"> <label for="inputOilCoverWidth" data-translate="app.surfaceoilcondition.oilcoverwidth">oilcoverwidth</label> <div class="form-group"> <input id="inputOilCoverWidth" class="form-control" type="number" step="0.2" min="0" ng-model="vm.model.oilCoverWidth"> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.number.required"></span> </div> </div> <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="inputOilDistribution" class="control-label" data-translate="app.surfaceoilcondition.oildistribution.title">oildistribution</label> <div class="input-group"> <select name="inputOilDistribution" class="form-control" autofocus="autofocus" ng-model="vm.model.oildistribution" ng-options="o as o for o in \'10%;20%;30%;40%;50%;60%;70%;80%;90%;\'.split(\';\')"> </select> <a class="input-group-addon input-sm" ng-click="vm.openModal(\'oil_cover_distribution.html\')" href="" data-toggle="modal"><i class="fa fa-info"></i></a>  <script type="text/ng-template" id="oil_cover_distribution.html"> <div class="modal-body"> <img src="assets/img/surface_oil_distribution_2.jpg" style="width:100%" /> </div> </script> </div> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div> <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label for="inputOilThickness" class="control-label" data-translate="app.surfaceoilcondition.oilthickness.title">oilthickness</label> <select name="inputOilThickness" class="form-control" autofocus="autofocus" ng-model="vm.model.oilthickness" ng-options="o as \'app.surfaceoilcondition.oilthickness.\' +o.toLowerCase() | translate for o in \'TO;CV;CT;ST;FL\'.split(\';\')"> </select> <a data-target="#oil_cover_distribution" data-toggle="modal" class="btn add-on"><i class="icon-info"></i></a> <span class="help-block error-block basic-block" data-translate="global.messages.validate.select.required"></span> </div> </div>  </div> </form> </ba-wizard-step> <ba-wizard-step step-title="{{\'app.surfaceoilcondition.createform.step2\' | translate}}" form="vm.form2" on-activate="vm.drawSurfaceOilCondition()" on-exit="vm.disableDrawSurfaceOilCondition()"> <form name="vm.form2" novalidate=""> <div class="alert alert-info"> <p data-translate="app.surfaceoilcondition.messages.geometry"></p> </div>  <div ng-show="vm.mapAction!=\'none\'"> <scatreport-map scatreport="vm.scatreport" hide-layers-panel="true"></scatreport-map> </div> </form> </ba-wizard-step> </ba-wizard> </div>'),e.put("app/pages/scatreports/surfaceoilconditions/detail/surfaceoilcondition-detail.html",'<editable-form class="none-padding" form-status="vm.formStatus" model="vm.model" on-close="vm.onClose()" topic="surfaceoilconditions"> <div style="padding:15px;"> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.surfaceoilcondition.zoneid"></label> <div> <p class="form-control-static" ng-bind="vm.model.zoneId" editable-text="vm.model.zoneId" e-required=""> </p> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"><span data-translate="app.surfaceoilcondition.level.title"></span> <a style="padding-left:10px" ng-click="vm.openModal(\'level_tidal.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.level" e-ng-options="o as \'app.surfaceoilcondition.level.\' +o.toLowerCase() | translate for o in \'L;M;U;S\'.split(\';\')"> {{ (vm.model.level ? \'app.surfaceoilcondition.level.\' + vm.model.level.toLowerCase() : \'\') | translate}} </p>  <script type="text/ng-template" id="level_tidal.html"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/posicion_mareal_help_[locale].html\')"></div> </script> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"><span data-translate="app.surfaceoilcondition.oilcharacter.title"></span> <a style="padding-left:10px" ng-click="vm.openModal(\'oil_cover_character.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.oilCharacter" e-ng-options="o as \'app.surfaceoilcondition.oilcharacter.\' +o.toLowerCase() | translate for o in \'FR;MS;TB;PT;SR;AP\'.split(\';\')"> {{ vm.model.oilCharacter ? \'app.surfaceoilcondition.oilcharacter.\' + vm.model.oilCharacter.toLowerCase() : \'\' | translate}} </p>  <script type="text/ng-template" id="oil_cover_character.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/apariencia_superficial_help_[locale].html\')"></div> </div> </script> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" ng-show="vm.formStatus==\'edit\'"> <div class="form-group"> <label class="control-label" data-translate="app.surfaceoilcondition.geometry"></label> <div> <a href="" ng-if="vm.map.action==\'edit\'" class="btn btn-default" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-trash-b"> </i> <span data-translate="app.surfaceoilcondition.detail.map.deletepoints"></span> </a> <a href="" ng-if="vm.map.action==\'deletePoints\'" class="btn btn-primary" ng-class="{\'btn-primary\': vm.map.action==\'deletePoints\'}" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-edit"> </i> <span data-translate="app.surfaceoilcondition.detail.map.edit"></span> </a> </div> </div> </div> </div> <div class="row"> <input id="_geometry_id" name="geometry" type="hidden" ng-model="vm.model.geometry" required=""> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.surfaceoilcondition.oilcoverlength"></label> <div> <p class="form-control-static" ng-bind="vm.model.oilCoverLength" editable-number="vm.model.oilCoverLength" e-min="0" e-step="0.2" e-required=""> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureOilCoverLength\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthwidth\'"> <i class="icon-globe"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label" data-translate="app.surfaceoilcondition.oilcoverlength"></label> <div> <p class="form-control-static" ng-bind="vm.model.oilCoverWidth" editable-number="vm.model.oilCoverWidth" e-min="0" e-step="0.2" e-required=""> </p> <a ng-if="vm.formStatus==\'edit\'" class="btn add-on" ng-class="{true: \'btn-inverse\'}[map.action==\'measureOilCoverWidth\']" tooltip="Medir en mapa" title="Medir en mapa" tooltip-trigger="hover" ng-click="map.action=\'measureLengthwidth\'"> <i class="icon-globe"></i></a> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"> <span data-translate="app.surfaceoilcondition.oildistribution.title"> </span><a style="padding-left:10px" ng-click="vm.openModal(\'oil_cover_distribution.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.oilDistribution" e-ng-options="o as o for o in \'10%;20%;30%;40%;50%;60%;70%;80%;90%;\'.split(\';\')"> {{ vm.model.oilDistribution}} </p>  <script type="text/ng-template" id="oil_cover_distribution.html"> <div class="modal-body"> <div class="text-center"> <img src="assets/img/surface_oil_distribution_2.jpg" style="width:60%" /> </div> </div> </script> </div> </div> </div> <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"> <div class="form-group"> <label class="control-label"> <span data-translate="app.surfaceoilcondition.oilthickness.title"></span> <a style="padding-left:10px" ng-click="vm.openModal(\'oil_cover_thickness.html\')"><i class="fa fa-info"></i></a></label> <div> <p class="form-control-static" editable-select="vm.model.oilThickness" e-ng-options="o as \'app.surfaceoilcondition.oilthickness.\' +o.toLowerCase() | translate for o in \'TO;CV;CT;ST;FL\'.split(\';\')"> {{ vm.model.oilThickness ? \'app.surfaceoilcondition.oilthickness.\' + vm.model.oilThickness.toLowerCase() : \'\' | translate}} </p>  <script type="text/ng-template" id="oil_cover_thickness.html"> <div class="modal-body"> <div ng-include="currentLocaleTemplate(\'app/dialogs/help/espesor_superficial_help_[locale].html\')"></div> </div> </script> </div> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" ng-show="vm.formStatus==\'edit\'"> <div class="form-group"> <label class="control-label" data-translate="app.surfaceoilcondition.geometry"></label> <div> <a href="" ng-if="vm.map.action==\'edit\'" class="btn btn-default" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-trash-b"> </i> <span data-translate="app.surfaceoilcondition.detail.map.deletepoints"></span> </a> <a href="" ng-if="vm.map.action==\'deletePoints\'" class="btn btn-primary" ng-class="{\'btn-primary\': vm.map.action==\'deletePoints\'}" ng-click="vm.toggleDeleteSurfaceOilPoints()"><i class="ion-edit"> </i> <span data-translate="app.surfaceoilcondition.detail.map.edit"></span> </a> </div> </div> </div> </div> <div class="row"> <div class="alert alert-danger" ng-hide="vm.model.geometry"><i class="ion-alert-circled"></i> <span data-translate="app.surfaceoilcondition.messages.geometry"></span> </div> </div> </div> </editable-form>')}]);